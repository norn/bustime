function kvLookup(e,t,i,n,r,o){var a=n,s=!1;if(null!=e&&(null!=i&&"object"==typeof i&&e in i?(a=i[e],s=!0):null!=t&&"object"==typeof t&&e in t?(a=t[e],s=!0):a=n,!0===s)&&null!=r)switch(r){case"int":a=parseInt(a,10);break;case"float":a=parseFloat(a)}return a}function getColor(e,t,i,n,r){var o,a,s,l,c,u,d,h,p,f,m,n=n||0<r.length;if(0<r.length)for(var g=0;g<r.length;g++)if(e>r[g].lo&&e<=r[g].hi)return r[g].color;if(1===(o=i.length))return i[0];for(a=n?1/o:1/(o-1),s=[],g=0;g<i.length;g++)l=n?a*(g+1):a*g,c=parseInt(cutHex(i[g]).substring(0,2),16),u=parseInt(cutHex(i[g]).substring(2,4),16),d=parseInt(cutHex(i[g]).substring(4,6),16),s[g]={pct:l,color:{r:c,g:u,b:d}};if(0===t)return"rgb("+[s[0].color.r,s[0].color.g,s[0].color.b].join(",")+")";for(var v=0;v<s.length;v++)if(t<=s[v].pct)return n?"rgb("+[s[v].color.r,s[v].color.g,s[v].color.b].join(",")+")":(f=(h=s[v]).pct-(m=s[v-1]).pct,p=1-(f=(t-m.pct)/f),f=f,"rgb("+[(m={r:Math.floor(m.color.r*p+h.color.r*f),g:Math.floor(m.color.g*p+h.color.g*f),b:Math.floor(m.color.b*p+h.color.b*f)}).r,m.g,m.b].join(",")+")")}function setDy(e,t,i){(!ie||9<ie)&&e.node.firstChild.attributes.dy&&(e.node.firstChild.attributes.dy.value=0)}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function cutHex(e){return"#"==e.charAt(0)?e.substring(1,7):e}function humanFriendlyNumber(e,t){for(var i,n=Math.pow,r=n(10,t),o=7;o;)(i=n(10,3*o--))<=e&&(e=Math.round(e*r/i)/r+"KMGTPE"[o]);return e}function formatNumber(e){e=e.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function getStyle(e,t){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),i=e.currentStyle[t]),i}function onCreateElementNsReady(e){void 0!==document.createElementNS?e():setTimeout(function(){onCreateElementNsReady(e)},100)}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.io=t():e.io=t()}(this,function(){return n=[function(e,t,i){function n(e,t){"object"===(void 0===e?"undefined":o(e))&&(t=e,e=void 0),t=t||{};var e=a(e),i=e.source,n=e.id,r=e.path,r=l[n]&&r in l[n].nsps,r=t.forceNew||t["force new connection"]||!1===t.multiplex||r?s(i,t):(l[n]||(l[n]=s(i,t)),l[n]);return e.query&&!t.query&&(t.query=e.query),r.socket(e.path,t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(1),r=i(4),s=i(10),l=(i(3)("socket.io-client"),e.exports=t=n,t.managers={});t.protocol=r.protocol,t.connect=n,t.Manager=i(10),t.Socket=i(34)},function(e,t,i){!function(n){var r=i(2);i(3)("socket.io-client:url"),e.exports=function(e,t){var i=e;return t=t||n.location,"string"==typeof(e=null==e?t.protocol+"//"+t.host:e)&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==t?t.protocol+"//"+e:"https://"+e),i=r(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",e=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host,i.id=i.protocol+"://"+e+":"+i.port,i.href=i.protocol+"://"+e+(t&&t.port===i.port?"":":"+i.port),i}}.call(t,function(){return this}())},function(e,t){var s=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,l=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),n=e.indexOf("]");-1!=i&&-1!=n&&(e=e.substring(0,i)+e.substring(i,n).replace(/:/g,";")+e.substring(n,e.length));for(var r=s.exec(e||""),o={},a=14;a--;)o[l[a]]=r[a]||"";return-1!=i&&-1!=n&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o}},function(e,t){e.exports=function(){return function(){}}},function(e,a,t){function i(){}function n(e){var t=""+e.type;return a.BINARY_EVENT!==e.type&&a.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),t}function r(e,i){h.removeBlobs(e,function(e){var t=n((e=h.deconstructPacket(e)).packet);(e=e.buffers).unshift(t),i(e)})}function o(){this.reconstructor=null}function s(e){var t=0,i={type:Number(e.charAt(0))};if(null==a.types[i.type])return c();if(a.BINARY_EVENT===i.type||a.BINARY_ACK===i.type){for(var n="";"-"!==e.charAt(++t)&&(n+=e.charAt(t),t!=e.length););if(n!=Number(n)||"-"!==e.charAt(t))throw new Error("Illegal attachments");i.attachments=Number(n)}if("/"===e.charAt(t+1))for(i.nsp="";++t;){if(","===(r=e.charAt(t)))break;if(i.nsp+=r,t===e.length)break}else i.nsp="/";var r,o=e.charAt(t+1);if(""!==o&&Number(o)==o){for(i.id="";++t;){if(null==(r=e.charAt(t))||Number(r)!=r){--t;break}if(i.id+=e.charAt(t),t===e.length)break}i.id=Number(i.id)}return i=e.charAt(++t)?function(e,t){try{e.data=JSON.parse(t)}catch(e){return c()}return e}(i,e.substr(t)):i}function l(e){this.reconPack=e,this.buffers=[]}function c(){return{type:a.ERROR,data:"parser error"}}t(3)("socket.io-parser");var u=t(5),d=t(6),h=t(8),p=t(9);a.protocol=4,a.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],a.CONNECT=0,a.DISCONNECT=1,a.EVENT=2,a.ACK=3,a.ERROR=4,a.BINARY_EVENT=5,a.BINARY_ACK=6,a.Encoder=i,a.Decoder=o,i.prototype.encode=function(e,t){e.type!==a.EVENT&&e.type!==a.ACK||!d(e.data)||(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK),a.BINARY_EVENT===e.type||a.BINARY_ACK===e.type?r(e,t):t([n(e)])},u(o.prototype),o.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),(a.BINARY_EVENT!==t.type&&a.BINARY_ACK!==t.type||(this.reconstructor=new l(t),0===this.reconstructor.reconPack.attachments))&&this.emit("decoded",t);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){return this.buffers.push(e),this.buffers.length===this.reconPack.attachments?(e=h.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),e):null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,i){function n(e){if(e){var t,i=e;for(t in n.prototype)i[t]=n.prototype[t];return i}}(e.exports=n).prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var i=this._callbacks["$"+e];if(i)if(1==arguments.length)delete this._callbacks["$"+e];else for(var n,r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i)for(var n=0,r=(i=i.slice(0)).length;n<r;++n)i[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(t,e,i){!function(o){var a=i(7),e=Object.prototype.toString,s="function"==typeof o.Blob||"[object BlobConstructor]"===e.call(o.Blob),l="function"==typeof o.File||"[object FileConstructor]"===e.call(o.File);t.exports=function e(t){if(t&&"object"==typeof t)if(a(t)){for(var i=0,n=t.length;i<n;i++)if(e(t[i]))return!0}else{if("function"==typeof o.Buffer&&o.Buffer.isBuffer&&o.Buffer.isBuffer(t)||"function"==typeof o.ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||l&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0}return!1}}.call(e,function(){return this}())},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,i,n){!function(e){var u=n(7),d=n(9),t=Object.prototype.toString,h="function"==typeof e.Blob||"[object BlobConstructor]"===t.call(e.Blob),p="function"==typeof e.File||"[object FileConstructor]"===t.call(e.File);i.deconstructPacket=function(e){var t=[],i=e.data;return e.data=function e(t,i){if(!t)return t;var n;if(d(t))return n={_placeholder:!0,num:i.length},i.push(t),n;if(u(t))for(var r=new Array(t.length),o=0;o<t.length;o++)r[o]=e(t[o],i);else{if("object"!=typeof t||t instanceof Date)return t;var a,r={};for(a in t)r[a]=e(t[a],i)}return r}(i,t),e.attachments=t.length,{packet:e,buffers:t}},i.reconstructPacket=function(e,t){return e.data=function e(t,i){if(t){if(t._placeholder)return i[t.num];if(u(t))for(var n=0;n<t.length;n++)t[n]=e(t[n],i);else if("object"==typeof t)for(var r in t)t[r]=e(t[r],i)}return t}(e.data,t),e.attachments=void 0,e},i.removeBlobs=function(e,s){var l=0,c=e;(function e(t,i,n){if(t)if(h&&t instanceof Blob||p&&t instanceof File){l++;var r=new FileReader;r.onload=function(){n?n[i]=this.result:c=this.result,--l||s(c)},r.readAsArrayBuffer(t)}else if(u(t))for(var o=0;o<t.length;o++)e(t[o],o,t);else if("object"==typeof t&&!d(t))for(var a in t)e(t[a],a,t)})(c),l||s(c)}}.call(i,function(){return this}())},function(e,t){!function(t){e.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}.call(t,function(){return this}())},function(e,t,i){function n(e,t){if(!(this instanceof n))return new n(e,t);e&&"object"===(void 0===e?"undefined":r(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];e=t.parser||s;this.encoder=new e.Encoder,this.decoder=new e.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=i(11),o=i(34),a=i(5),s=i(4),c=i(36),u=i(37),d=(i(3)("socket.io-client:manager"),i(33)),h=i(38),p=Object.prototype.hasOwnProperty;(e.exports=n).prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},n.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},n.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(n.prototype),n.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},n.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},n.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(i,e){var t,n,r,o,a,s;return~this.readyState.indexOf("open")||(this.engine=l(this.uri,this.opts),t=this.engine,(n=this).readyState="opening",this.skipReconnect=!1,r=c(t,"open",function(){n.onopen(),i&&i()}),o=c(t,"error",function(e){var t;n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),i?((t=new Error("Connection error")).data=e,i(t)):n.maybeReconnectOnOpen()}),!1!==this._timeout&&(a=this._timeout,s=setTimeout(function(){r.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a),this.subs.push({destroy:function(){clearTimeout(s)}})),this.subs.push(r),this.subs.push(o)),this},n.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",u(this,"ondata"))),this.subs.push(c(e,"ping",u(this,"onping"))),this.subs.push(c(e,"pong",u(this,"onpong"))),this.subs.push(c(e,"error",u(this,"onerror"))),this.subs.push(c(e,"close",u(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",u(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(e){this.decoder.add(e)},n.prototype.ondecoded=function(e){this.emit("packet",e)},n.prototype.onerror=function(e){this.emitAll("error",e)},n.prototype.socket=function(e,t){function i(){~d(n.connecting,r)||n.connecting.push(r)}var n,r=this.nsps[e];return r||(r=new o(this,e,t),this.nsps[e]=r,n=this,r.on("connecting",i),r.on("connect",function(){r.id=n.generateId(e)}),this.autoConnect&&i()),r},n.prototype.destroy=function(e){e=d(this.connecting,e);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},n.prototype.packet=function(i){var n=this;i.query&&0===i.type&&(i.nsp+="?"+i.query),n.encoding?n.packetBuffer.push(i):(n.encoding=!0,this.encoder.encode(i,function(e){for(var t=0;t<e.length;t++)n.engine.write(e[t],i.options);n.encoding=!1,n.processPacketQueue()}))},n.prototype.processPacketQueue=function(){var e;0<this.packetBuffer.length&&!this.encoding&&(e=this.packetBuffer.shift(),this.packet(e))},n.prototype.cleanup=function(){for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(e){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e,t,i=this;this.backoff.attempts>=this._reconnectionAttempts?(this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(e=this.backoff.duration(),this.reconnecting=!0,t=setTimeout(function(){i.skipReconnect||(i.emitAll("reconnect_attempt",i.backoff.attempts),i.emitAll("reconnecting",i.backoff.attempts),i.skipReconnect)||i.open(function(e){e?(i.reconnecting=!1,i.reconnect(),i.emitAll("reconnect_error",e.data)):i.onreconnect()})},e),this.subs.push({destroy:function(){clearTimeout(t)}}))},n.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,i){e.exports=i(12),e.exports.parser=i(19)},function(t,e,l){!function(i){function d(e,t){if(!(this instanceof d))return new d(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),this.secure=null!=t.secure?t.secure:i.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(i.location?location.hostname:"localhost"),this.port=t.port||(i.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=s.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode;e="object"==typeof i&&i;e.global===e&&(t.extraHeaders&&0<Object.keys(t.extraHeaders).length&&(this.extraHeaders=t.extraHeaders),t.localAddress)&&(this.localAddress=t.localAddress),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}var n=l(13),e=l(5),r=(l(3)("engine.io-client:socket"),l(33)),o=l(19),a=l(2),s=l(27);(t.exports=d).priorWebsocketSuccess=!1,e(d.prototype),d.protocol=o.protocol,(d.Socket=d).Transport=l(18),d.transports=l(13),d.parser=l(19),d.prototype.createTransport=function(e){var t=function(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}(this.query),i=(t.EIO=o.protocol,t.transport=e,this.transportOptions[e]||{});return this.id&&(t.sid=this.id),new n[e]({query:t,socket:this,agent:i.agent||this.agent,hostname:i.hostname||this.hostname,port:i.port||this.port,secure:i.secure||this.secure,path:i.path||this.path,forceJSONP:i.forceJSONP||this.forceJSONP,jsonp:i.jsonp||this.jsonp,forceBase64:i.forceBase64||this.forceBase64,enablesXDR:i.enablesXDR||this.enablesXDR,timestampRequests:i.timestampRequests||this.timestampRequests,timestampParam:i.timestampParam||this.timestampParam,policyPort:i.policyPort||this.policyPort,pfx:i.pfx||this.pfx,key:i.key||this.key,passphrase:i.passphrase||this.passphrase,cert:i.cert||this.cert,ca:i.ca||this.ca,ciphers:i.ciphers||this.ciphers,rejectUnauthorized:i.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:i.perMessageDeflate||this.perMessageDeflate,extraHeaders:i.extraHeaders||this.extraHeaders,forceNode:i.forceNode||this.forceNode,localAddress:i.localAddress||this.localAddress,requestTimeout:i.requestTimeout||this.requestTimeout,protocols:i.protocols||void 0})},d.prototype.open=function(){var e,t;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return t=this,void setTimeout(function(){t.emit("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},d.prototype.setTransport=function(e){var t=this;this.transport&&this.transport.removeAllListeners(),(this.transport=e).on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},d.prototype.probe=function(e){function t(){var e;u.onlyBinaryUpgrades&&(e=!this.supportsBinary&&u.transport.supportsBinary,c=c||e),c||(l.send([{type:"ping",data:"probe"}]),l.once("packet",function(e){c||("pong"===e.type&&"probe"===e.data?(u.upgrading=!0,u.emit("upgrading",l),l&&(d.priorWebsocketSuccess="websocket"===l.name,u.transport.pause(function(){c||"closed"!==u.readyState&&(s(),u.setTransport(l),l.send([{type:"upgrade"}]),u.emit("upgrade",l),l=null,u.upgrading=!1,u.flush())}))):((e=new Error("probe error")).transport=l.name,u.emit("upgradeError",e)))}))}function i(){c||(c=!0,s(),l.close(),l=null)}function n(e){e=new Error("probe error: "+e);e.transport=l.name,i(),u.emit("upgradeError",e)}function r(){n("transport closed")}function o(){n("socket closed")}function a(e){l&&e.name!==l.name&&i()}function s(){l.removeListener("open",t),l.removeListener("error",n),l.removeListener("close",r),u.removeListener("close",o),u.removeListener("upgrading",a)}var l=this.createTransport(e,{probe:1}),c=!1,u=this;d.priorWebsocketSuccess=!1,l.once("open",t),l.once("error",n),l.once("close",r),this.once("close",o),this.once("upgrading",a),l.open()},d.prototype.onOpen=function(){if(this.readyState="open",d.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])},d.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}},d.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},d.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},d.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(e,t,i){return this.sendPacket("message",e,t,i),this},d.prototype.sendPacket=function(e,t,i,n){"function"==typeof t&&(n=t,t=void 0),"function"==typeof i&&(n=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((i=i||{}).compress=!1!==i.compress,this.emit("packetCreate",e={type:e,data:t,options:i}),this.writeBuffer.push(e),n&&this.once("flush",n),this.flush())},d.prototype.close=function(){function e(){n.onClose("forced close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function i(){n.once("upgrade",t),n.once("upgradeError",t)}var n;return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",(n=this).writeBuffer.length?this.once("drain",function(){(this.upgrading?i:e)()}):(this.upgrading?i:e)()),this},d.prototype.onError=function(e){d.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},d.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},d.prototype.filterUpgrades=function(e){for(var t=[],i=0,n=e.length;i<n;i++)~r(this.transports,e[i])&&t.push(e[i]);return t}}.call(e,function(){return this}())},function(e,t,i){!function(a){var s=i(14),l=i(16),c=i(30),e=i(31);t.polling=function(e){var t,i,n=!1,r=!1,o=!1!==e.jsonp;if(a.location&&(t="https:"===location.protocol,i=(i=location.port)||(t?443:80),n=e.hostname!==location.hostname||i!==e.port,r=e.secure!==t),e.xdomain=n,e.xscheme=r,"open"in new s(e)&&!e.forceJSONP)return new l(e);if(o)return new c(e);throw new Error("JSONP disabled")},t.websocket=e}.call(t,function(){return this}())},function(e,t,i){!function(r){var o=i(15);e.exports=function(e){var t=e.xdomain,i=e.xscheme,n=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||o))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!i&&n)return new XDomainRequest}catch(e){}if(!t)try{return new r[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}}.call(t,function(){return this}())},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(c,e,u){!function(r){function t(){}function e(e){var t,i;n.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,r.location&&(t="https:"===location.protocol,i=(i=location.port)||(t?443:80),this.xd=e.hostname!==r.location.hostname||i!==e.port,this.xs=e.secure!==t)}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function i(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=u(14),n=u(17),s=u(5),l=u(28);u(3)("engine.io-client:polling-xhr"),c.exports=e,c.exports.Request=o,l(e,n),e.prototype.supportsBinary=!0,e.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new o(e)},e.prototype.doWrite=function(e,t){var e=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e}),i=this;e.on("success",t),e.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=e},e.prototype.doPoll=function(){var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},s(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR},t=(e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.xhr=new a(e)),i=this;try{t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState){var e;try{e=t.getResponseHeader("Content-Type")}catch(e){}"application/octet-stream"===e&&(t.responseType="arraybuffer")}4===t.readyState&&(200===t.status||1223===t.status?i.onLoad():setTimeout(function(){i.onError(t.status)},0))},t.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}r.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=t:this.xhr.onreadystatechange=t,e)try{this.xhr.abort()}catch(e){}r.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return void 0!==r.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},r.document&&(r.attachEvent?r.attachEvent("onunload",i):r.addEventListener&&r.addEventListener("beforeunload",i,!1))}.call(e,function(){return this}())},function(e,t,i){function n(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),r.call(this,e)}var r=i(18),o=i(27),a=i(19),s=i(28),l=i(29),c=(i(3)("engine.io-client:polling"),e.exports=n,null!=new(i(14))({xdomain:!1}).responseType);s(n,r),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){n.readyState="paused",e()}var i,n=this;this.readyState="pausing",this.polling||!this.writable?(i=0,this.polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))):t()},n.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var n=this;a.decodePayload(e,this.socket.binaryType,function(e,t,i){return"opening"===n.readyState&&n.onOpen(),"close"===e.type?(n.onClose(),!1):void n.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState)&&this.poll()},n.prototype.doClose=function(){function e(){t.write([{type:"close"}])}var t=this;"open"===this.readyState?e():this.once("open",e)},n.prototype.write=function(e){function t(){i.writable=!0,i.emit("drain")}var i=this;this.writable=!1;a.encodePayload(e,this.supportsBinary,function(e){i.doWrite(e,t)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!==Number(this.port)||"http"==t&&80!==Number(this.port))&&(i=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e}},function(e,t,i){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var r=i(19);i(5)((e.exports=n).prototype),n.prototype.onError=function(e,t){e=new Error(e);return e.type="TransportError",e.description=t,this.emit("error",e),this},n.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){e=r.decodePacket(e,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,_,c){!function(d){function h(e,t,i){var n,r,o,a;return t?s?(n=e,o=i,(r=t)?((a=new FileReader).onload=function(){n.data=a.result,_.encodePacket(n,r,!0,o)},a.readAsArrayBuffer(n.data)):_.encodeBase64Packet(n,o)):((t=new Uint8Array(1))[0]=m[e.type],i(new v([t.buffer,e.data]))):_.encodeBase64Packet(e,i)}function t(e,t,i){for(var r=new Array(e.length),n=a(e.length,i),o=0;o<e.length;o++)!function(i,e,n){t(e,function(e,t){r[i]=t,n(e,r)})}(o,e[o],n)}var r,e=c(20),o=c(6),p=c(21),a=c(22),f=c(23),i=(d&&d.ArrayBuffer&&(r=c(25)),"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent)),n="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),s=i||n,m=(_.protocol=3,_.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6}),l=e(m),g={type:"error",data:"parser error"},v=c(26);_.encodePacket=function(e,t,i,n){"function"==typeof t&&(n=t,t=!1),"function"==typeof i&&(n=i,i=null);var r=void 0===e.data?void 0:e.data.buffer||e.data;if(d.ArrayBuffer&&r instanceof ArrayBuffer){var o=e,a=n;if(!(s=t))return _.encodeBase64Packet(o,a);var s=o.data,l=new Uint8Array(s),c=new Uint8Array(1+s.byteLength);c[0]=m[o.type];for(var u=0;u<l.length;u++)c[u+1]=l[u];return a(c.buffer)}return v&&r instanceof d.Blob?h(e,t,n):r&&r.base64?n("b"+_.packets[e.type]+e.data.data):(s=m[e.type],void 0!==e.data&&(s+=i?f.encode(String(e.data),{strict:!1}):String(e.data)),n(""+s))},_.encodeBase64Packet=function(t,i){var n,r,o="b"+_.packets[t.type];if(v&&t.data instanceof d.Blob)return(n=new FileReader).onload=function(){var e=n.result.split(",")[1];i(o+e)},n.readAsDataURL(t.data);try{r=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var a=new Uint8Array(t.data),s=new Array(a.length),l=0;l<a.length;l++)s[l]=a[l];r=String.fromCharCode.apply(null,s)}return o+=d.btoa(r),i(o)},_.decodePacket=function(e,t,i){var n;return void 0===e?g:"string"==typeof e?"b"===e.charAt(0)?_.decodeBase64Packet(e.substr(1),t):(!i||!1!==(e=function(e){try{e=f.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))&&(n=e.charAt(0),Number(n)==n)&&l[n]?1<e.length?{type:l[n],data:e.substring(1)}:{type:l[n]}:g:(n=new Uint8Array(e)[0],i=p(e,1),v&&"blob"===t&&(i=new v([i])),{type:l[n],data:i})},_.decodeBase64Packet=function(e,t){var i,n=l[e.charAt(0)];return r?(i=r.decode(e.substr(1)),{type:n,data:i="blob"===t&&v?new v([i]):i}):{type:n,data:{base64:!0,data:e.substr(1)}}},_.encodePayload=function(e,i,n){"function"==typeof i&&(n=i,i=null);var r=o(e);return i&&r?v&&!s?_.encodePayloadAsBlob(e,n):_.encodePayloadAsArrayBuffer(e,n):e.length?void t(e,function(e,t){_.encodePacket(e,!!r&&i,!1,function(e){t(null,e.length+":"+e)})},function(e,t){return n(t.join(""))}):n("0:")},_.decodePayload=function(e,t,i){if("string"!=typeof e)return _.decodePayloadAsBinary(e,t,i);if("function"==typeof t&&(i=t,t=null),""===e)return i(g,0,1);for(var n,r,o="",a=0,s=e.length;a<s;a++){var l=e.charAt(a);if(":"===l){if(""===o||o!=(n=Number(o)))return i(g,0,1);if(o!=(r=e.substr(a+1,n)).length)return i(g,0,1);if(r.length){if(r=_.decodePacket(r,t,!1),g.type===r.type&&g.data===r.data)return i(g,0,1);if(!1===i(r,a+n,s))return}a+=n,o=""}else o+=l}return""!==o?i(g,0,1):void 0},_.encodePayloadAsArrayBuffer=function(e,n){return e.length?void t(e,function(e,t){_.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,t){var i=t.reduce(function(e,t){t="string"==typeof t?t.length:t.byteLength;return e+t.toString().length+t+2},0),a=new Uint8Array(i),s=0;return t.forEach(function(e){var t="string"==typeof e,i=e;if(t){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);i=n.buffer}a[s++]=t?0:1;for(var o=i.byteLength.toString(),r=0;r<o.length;r++)a[s++]=parseInt(o[r]);a[s++]=255;for(n=new Uint8Array(i),r=0;r<n.length;r++)a[s++]=n[r]}),n(a.buffer)}):n(new ArrayBuffer(0))},_.encodePayloadAsBlob=function(e,i){t(e,function(e,a){_.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);e=i.buffer,t[0]=0}for(var r=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(r.length+1),n=0;n<r.length;n++)o[n]=parseInt(r[n]);o[r.length]=255,v&&(t=new v([t.buffer,o.buffer,e]),a(null,t))})},function(e,t){return i(new v(t))})},_.decodePayloadAsBinary=function(e,i,n){"function"==typeof i&&(n=i,i=null);for(var t=e,r=[];0<t.byteLength;){for(var o=new Uint8Array(t),a=0===o[0],s="",l=1;255!==o[l];l++){if(310<s.length)return n(g,0,1);s+=o[l]}var t=p(t,2+s.length),s=parseInt(s),c=p(t,0,s);if(a)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(e){for(var u=new Uint8Array(c),c="",l=0;l<u.length;l++)c+=String.fromCharCode(u[l])}r.push(c),t=p(t,s)}var d=r.length;r.forEach(function(e,t){n(_.decodePacket(e,i,!0),t,d)})}}.call(_,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t,i=[],n=Object.prototype.hasOwnProperty;for(t in e)n.call(e,t)&&i.push(t);return i}},function(e,t){e.exports=function(e,t,i){var n=e.byteLength;if(t=t||0,i=i||n,e.slice)return e.slice(t,i);if(t<0&&(t+=n),i<0&&(i+=n),n<i&&(i=n),n<=t||i<=t||0===n)return new ArrayBuffer(0);for(var r=new Uint8Array(e),o=new Uint8Array(i-t),a=t,s=0;a<i;a++,s++)o[s]=r[a];return o.buffer}},function(e,t){function a(){}e.exports=function(e,i,n){function r(e,t){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,i(e),i=n):0!==r.count||o||i(null,t)}var o=!1;return n=n||a,0===(r.count=e)?i():r}},function(e,n,r){var o;!function(e,t){function u(e){for(var t,i,n=[],r=0,o=e.length;r<o;)55296<=(t=e.charCodeAt(r++))&&t<=56319&&r<o?56320==(64512&(i=e.charCodeAt(r++)))?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),r--):n.push(t);return n}function d(e,t){if(!(55296<=e&&e<=57343))return 1;if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function h(e,t){return v(e>>t&63|128)}function p(){if(m<=g)throw Error("Invalid byte index");var e=255&f[g];if(g++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}var f,m,g,v,i;"object"==typeof e&&e&&e.exports,(t="object"==typeof t&&t).global!==t&&t.window,v=String.fromCharCode,i={version:"2.1.2",encode:function(e,t){for(var i,n,r,o=!1!==(t=t||{}).strict,a=u(e),s=a.length,l=-1,c="";++l<s;)i=a[l],c+=(n=o,r=void 0,0==(4294967168&(i=i))?v(i):(r="",0==(4294965248&i)?r=v(i>>6&31|192):0==(4294901760&i)?(d(i,n)||(i=65533),r=v(i>>12&15|224),r+=h(i,6)):0==(4292870144&i)&&(r=v(i>>18&7|240),r=(r+=h(i,12))+h(i,6)),r+v(63&i|128)));return c},decode:function(e,t){var i=!1!==(t=t||{}).strict;f=u(e),m=f.length,g=0;for(var n,r=[];!1!==(n=function(e){var t,i;if(m<g)throw Error("Invalid byte index");if(g==m)return!1;if(t=255&f[g],g++,0==(128&t))return t;if(192==(224&t)){if(128<=(i=(31&t)<<6|p()))return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(i=(15&t)<<12|p()<<6|p()))return d(i,e)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&65536<=(i=(7&t)<<18|p()<<12|p()<<6|p())&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}(i));)r.push(n);for(var o,a=r,s=a.length,l=-1,c="";++l<s;)65535<(o=a[l])&&(c+=v((o-=65536)>>>10&1023|55296),o=56320|1023&o),c+=v(o);return c}},void 0!==(o=function(){return i}.call(n,r,n,e))&&(e.exports=o)}.call(n,r(24)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=new Uint8Array(256),i=0;i<o.length;i++)u[o.charCodeAt(i)]=i;t.encode=function(e){for(var t=new Uint8Array(e),i=t.length,n="",r=0;r<i;r+=3)n=(n=(n=(n+=o[t[r]>>2])+o[(3&t[r])<<4|t[r+1]>>4])+o[(15&t[r+1])<<2|t[r+2]>>6])+o[63&t[r+2]];return i%3==2?n=n.substring(0,n.length-1)+"=":i%3==1&&(n=n.substring(0,n.length-2)+"=="),n},t.decode=function(e){for(var t,i,n,r,o=.75*e.length,a=e.length,s=0,o=("="===e[e.length-1]&&(o--,"="===e[e.length-2])&&o--,new ArrayBuffer(o)),l=new Uint8Array(o),c=0;c<a;c+=4)t=u[e.charCodeAt(c)],i=u[e.charCodeAt(c+1)],n=u[e.charCodeAt(c+2)],r=u[e.charCodeAt(c+3)],l[s++]=t<<2|i>>4,l[s++]=(15&i)<<4|n>>2,l[s++]=(3&n)<<6|63&r;return o}},function(l,e){!function(e){function r(e){for(var t=0;t<e.length;t++){var i,n,r=e[t];r.buffer instanceof ArrayBuffer&&(i=r.buffer,r.byteLength!==i.byteLength&&((n=new Uint8Array(r.byteLength)).set(new Uint8Array(i,r.byteOffset,r.byteLength)),i=n.buffer),e[t]=i)}}function t(e,t){t=t||{};var i=new o;r(e);for(var n=0;n<e.length;n++)i.append(e[n]);return t.type?i.getBlob(t.type):i.getBlob()}function i(e,t){return r(e),new Blob(e,t||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),a=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),s=o&&o.prototype.append&&o.prototype.getBlob;l.exports=n?a?e.Blob:i:s?t:void 0}.call(e,function(){return this}())},function(e,t){t.encode=function(e){var t,i="";for(t in e)e.hasOwnProperty(t)&&(i.length&&(i+="&"),i+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i},t.decode=function(e){for(var t={},i=e.split("&"),n=0,r=i.length;n<r;n++){var o=i[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},function(e,t){function i(e){for(var t="";t=o[e%a]+t,0<(e=Math.floor(e/a)););return t}function n(){var e=i(+new Date);return e!==r?(l=0,r=e):e+"."+i(l++)}for(var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,s={},l=0,c=0;c<a;c++)s[o[c]]=c;n.encode=i,n.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*a+s[e.charAt(c)];return t},e.exports=n},function(a,e,s){!function(i){function n(){}function e(e){r.call(this,e),this.query=this.query||{},o||(i.___eio||(i.___eio=[]),o=i.___eio),this.index=o.length;var t=this;o.push(function(e){t.onData(e)}),this.query.j=this.index,i.document&&i.addEventListener&&i.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=n)},!1)}var r=s(17),t=s(28);a.exports=e;var o,c=/\n/g,u=/\\n/g;t(e,r),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},e.prototype.doPoll=function(){var t=this,e=document.createElement("script"),i=(this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)},document.getElementsByTagName("script")[0]);i?i.parentNode.insertBefore(e,i):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},e.prototype.doWrite=function(e,t){function i(){n(),t()}function n(){if(l.iframe)try{l.form.removeChild(l.iframe)}catch(e){l.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+l.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=l.iframeId,r.src="javascript:0"}r.id=l.iframeId,l.form.appendChild(r),l.iframe=r}var r,o,a,s,l=this;this.form||(o=document.createElement("form"),a=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index,o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=s,o.method="POST",o.setAttribute("accept-charset","utf-8"),a.name="d",o.appendChild(a),document.body.appendChild(o),this.form=o,this.area=a),this.form.action=this.uri(),n(),e=e.replace(u,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===l.iframe.readyState&&i()}:this.iframe.onload=i}}.call(e,function(){return this}())},function(u,e,d){!function(o){function e(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=l&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(c=t),i.call(this,e)}var t,i=d(18),a=d(19),n=d(27),r=d(28),s=d(29),l=(d(3)("engine.io-client:websocket"),o.WebSocket||o.MozWebSocket);if("undefined"==typeof window)try{t=d(32)}catch(e){}var c=l;c||"undefined"!=typeof window||(c=t),r(u.exports=e,i),e.prototype.name="websocket",e.prototype.supportsBinary=!0,e.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,i={agent:this.agent,perMessageDeflate:this.perMessageDeflate};i.pfx=this.pfx,i.key=this.key,i.passphrase=this.passphrase,i.cert=this.cert,i.ca=this.ca,i.ciphers=this.ciphers,i.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(i.headers=this.extraHeaders),this.localAddress&&(i.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new c(e,t):new c(e):new c(e,t,i)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},e.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},e.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,t=0,i=r;t<i;t++)!function(i){a.encodePacket(i,n.supportsBinary,function(e){var t;n.usingBrowserWebSocket||(t={},i.options&&(t.compress=i.options.compress),n.perMessageDeflate&&("string"==typeof e?o.Buffer.byteLength(e):e.length)<n.perMessageDeflate.threshold&&(t.compress=!1));try{n.usingBrowserWebSocket?n.ws.send(e):n.ws.send(e,t)}catch(e){}--r||(n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0))})}(e[t])},e.prototype.onClose=function(){i.prototype.onClose.call(this)},e.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},e.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",i="";return this.port&&("wss"==t&&443!==Number(this.port)||"ws"==t&&80!==Number(this.port))&&(i=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||(e.b64=1),(e=n.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e},e.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===e.prototype.name)}}.call(e,function(){return this}())},function(e,t){},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},function(e,t,i){function n(e,t,i){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,i&&i.query&&(this.query=i.query),this.io.autoConnect&&this.open()}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=i(4),a=i(5),s=i(35),l=i(36),c=i(37),u=(i(3)("socket.io-client:socket"),i(27)),d=(e.exports=n,{connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1}),h=a.prototype.emit;a(n.prototype),n.prototype.subEvents=function(){var e;this.subs||(e=this.io,this.subs=[l(e,"open",c(this,"onopen")),l(e,"packet",c(this,"onpacket")),l(e,"close",c(this,"onclose"))])},n.prototype.open=n.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},n.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){var t;return d.hasOwnProperty(e)?h.apply(this,arguments):(e=s(arguments),(t={type:o.EVENT,data:e,options:{}}).options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(this.acks[this.ids]=e.pop(),t.id=this.ids++),this.connected?this.packet(t):this.sendBuffer.push(t),delete this.flags),this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){var e;"/"!==this.nsp&&(this.query?(e="object"===r(this.query)?u.encode(this.query):this.query,this.packet({type:o.CONNECT,query:e})):this.packet({type:o.CONNECT}))},n.prototype.onclose=function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(t){var i=this,n=!1;return function(){var e;n||(n=!0,e=s(arguments),i.packet({type:o.ACK,id:t,data:e}))}},n.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){for(var e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&this.packet({type:o.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){e.exports=function(e,t){for(var i=[],n=(t=t||0)||0;n<e.length;n++)i[n-t]=e[n];return i}},function(e,t){e.exports=function(e,t,i){return e.on(t,i),{destroy:function(){e.removeListener(t,i)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("function"!=typeof(t="string"==typeof t?e[t]:t))throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},function(e,t){function i(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}(e.exports=i).prototype.duration=function(){var e,t,i=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*i),i=0==(1&Math.floor(10*e))?i-t:i+t),0|Math.min(i,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(e){this.ms=e},i.prototype.setMax=function(e){this.max=e},i.prototype.setJitter=function(e){this.jitter=e}}],r={},i.m=n,i.c=r,i.p="",i(0);function i(e){var t;return(r[e]||(t=r[e]={exports:{},id:e,loaded:!1},n[e].call(t.exports,t,t.exports,i),t.loaded=!0,t)).exports}var n,r}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)}("undefined"!=typeof window?window:this,function(w,O){function _(e){return"function"==typeof e&&"number"!=typeof e.nodeType}function m(e){return null!=e&&e===e.window}var t=[],B=Object.getPrototypeOf,s=t.slice,F=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},N=t.push,j=t.indexOf,V={},U=V.toString,$=V.hasOwnProperty,q=$.toString,H=q.call(Object),g={},C=w.document,Z={type:!0,src:!0,nonce:!0,noModule:!0};function G(e,t,i){var n,r,o=(i=i||C).createElement("script");if(o.text=e,t)for(n in Z)(r=t[n]||t.getAttribute&&t.getAttribute(n))&&o.setAttribute(n,r);i.head.appendChild(o).parentNode.removeChild(o)}function f(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?V[U.call(e)]||"object":typeof e}var T=function(e,t){return new T.fn.init(e,t)};function W(e){var t=!!e&&"length"in e&&e.length,i=f(e);return!_(e)&&!m(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}T.fn=T.prototype={jquery:"3.5.1",constructor:T,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=T.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return T.each(this,e)},map:function(i){return this.pushStack(T.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(T.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:N,sort:t.sort,splice:t.splice},T.extend=T.fn.extend=function(){var e,t,i,n,r,o=arguments[0]||{},a=1,s=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||_(o)||(o={}),a===s&&(o=this,a--);a<s;a++)if(null!=(e=arguments[a]))for(t in e)i=e[t],"__proto__"!==t&&o!==i&&(l&&i&&(T.isPlainObject(i)||(n=Array.isArray(i)))?(r=o[t],r=n&&!Array.isArray(r)?[]:n||T.isPlainObject(r)?r:{},n=!1,o[t]=T.extend(l,r,i)):void 0!==i&&(o[t]=i));return o},T.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==U.call(e)||(e=B(e))&&("function"!=typeof(e=$.call(e,"constructor")&&e.constructor)||q.call(e)!==H))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,i){G(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(W(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(W(Object(e))?T.merge(t,"string"==typeof e?[e]:e):N.call(t,e)),t},inArray:function(e,t,i){return null==t?-1:j.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,a=!i;r<o;r++)!t(e[r],r)!=a&&n.push(e[r]);return n},map:function(e,t,i){var n,r,o=0,a=[];if(W(e))for(n=e.length;o<n;o++)null!=(r=t(e[o],o,i))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&a.push(r);return F(a)},guid:1,support:g}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=t[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()});function n(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&T(e).is(i))break;n.push(e)}return n}function X(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}var e=function(O){function d(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function B(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function F(){w()}var e,h,b,o,N,p,j,V,x,l,c,w,C,i,T,f,n,r,m,S="sizzle"+ +new Date,u=O.document,k=0,U=0,$=I(),q=I(),H=I(),g=I(),Z=function(e,t){return e===t&&(c=!0),0},G={}.hasOwnProperty,t=[],W=t.pop,X=t.push,E=t.push,Y=t.slice,_=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",a="[\\x20\\t\\r\\n\\f]",s="(?:\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",J="\\["+a+"*("+s+")(?:"+a+"*([*^$|!~]?=)"+a+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+s+"))|)"+a+"*\\]",Q=":("+s+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+J+")*)|.*)\\)|)",ee=new RegExp(a+"+","g"),v=new RegExp("^"+a+"+|((?:^|[^\\\\])(?:\\\\.)*)"+a+"+$","g"),te=new RegExp("^"+a+"*,"+a+"*"),ie=new RegExp("^"+a+"*([>+~]|"+a+")"+a+"*"),ne=new RegExp(a+"|>"),re=new RegExp(Q),oe=new RegExp("^"+s+"$"),y={ID:new RegExp("^#("+s+")"),CLASS:new RegExp("^\\.("+s+")"),TAG:new RegExp("^("+s+"|[*])"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+a+"*(even|odd|(([+-]|)(\\d*)n|)"+a+"*(?:([+-]|)"+a+"*(\\d+)|))"+a+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+a+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+a+"*((?:-\\d)?\\d*)"+a+"*\\)|)(?=[^-]|$)","i")},ae=/HTML$/i,se=/^(?:input|select|textarea|button)$/i,le=/^h\d$/i,A=/^[^{]+\{\s*\[native \w/,ce=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ue=/[+~]/,P=new RegExp("\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\([^\\r\\n\\f])","g"),de=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,he=_e(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{E.apply(t=Y.call(u.childNodes),u.childNodes),t[u.childNodes.length].nodeType}catch(e){E={apply:t.length?function(e,t){X.apply(e,Y.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function M(e,t,i,n){var r,o,a,s,l,c,u=t&&t.ownerDocument,d=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return i;if(!n&&(w(t),t=t||C,T)){if(11!==d&&(s=ce.exec(e)))if(r=s[1]){if(9===d){if(!(c=t.getElementById(r)))return i;if(c.id===r)return i.push(c),i}else if(u&&(c=u.getElementById(r))&&m(t,c)&&c.id===r)return i.push(c),i}else{if(s[2])return E.apply(i,t.getElementsByTagName(e)),i;if((r=s[3])&&h.getElementsByClassName&&t.getElementsByClassName)return E.apply(i,t.getElementsByClassName(r)),i}if(h.qsa&&!g[e+" "]&&(!f||!f.test(e))&&(1!==d||"object"!==t.nodeName.toLowerCase())){if(c=e,u=t,1===d&&(ne.test(e)||ie.test(e))){for((u=ue.test(e)&&ge(t.parentNode)||t)===t&&h.scope||((a=t.getAttribute("id"))?a=a.replace(de,B):t.setAttribute("id",a=S)),o=(l=p(e)).length;o--;)l[o]=(a?"#"+a:":scope")+" "+R(l[o]);c=l.join(",")}try{return E.apply(i,u.querySelectorAll(c)),i}catch(t){g(e,!0)}finally{a===S&&t.removeAttribute("id")}}}return V(e.replace(v,"$1"),t,i,n)}function I(){var n=[];return function e(t,i){return n.push(t+" ")>b.cacheLength&&delete e[n.shift()],e[t+" "]=i}}function D(e){return e[S]=!0,e}function L(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function pe(e,t){for(var i=e.split("|"),n=i.length;n--;)b.attrHandle[i[n]]=t}function fe(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function me(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&he(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function z(a){return D(function(o){return o=+o,D(function(e,t){for(var i,n=a([],e.length,o),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=M.support={},N=M.isXML=function(e){var t=e.namespaceURI,e=(e.ownerDocument||e).documentElement;return!ae.test(t||e&&e.nodeName||"HTML")},w=M.setDocument=function(e){var e=e?e.ownerDocument||e:u;return e!=C&&9===e.nodeType&&e.documentElement&&(i=(C=e).documentElement,T=!N(C),u!=C&&(e=C.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",F,!1):e.attachEvent&&e.attachEvent("onunload",F)),h.scope=L(function(e){return i.appendChild(e).appendChild(C.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),h.attributes=L(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=L(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=A.test(C.getElementsByClassName),h.getById=L(function(e){return i.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),h.getById?(b.filter.ID=function(e){var t=e.replace(P,d);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&T)return(t=t.getElementById(e))?[t]:[]}):(b.filter.ID=function(e){var t=e.replace(P,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&T){var i,n,r,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),b.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;i=o[r++];)1===i.nodeType&&n.push(i);return n},b.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&T)return t.getElementsByClassName(e)},n=[],f=[],(h.qsa=A.test(C.querySelectorAll))&&(L(function(e){var t;i.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+a+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+a+"*(?:value|"+K+")"),e.querySelectorAll("[id~="+S+"-]").length||f.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+a+"*name"+a+"*="+a+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")}),L(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+a+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),i.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(h.matchesSelector=A.test(r=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector))&&L(function(e){h.disconnectedMatch=r.call(e,"*"),r.call(e,"[s!='']:x"),n.push("!=",Q)}),f=f.length&&new RegExp(f.join("|")),n=n.length&&new RegExp(n.join("|")),e=A.test(i.compareDocumentPosition),m=e||A.test(i.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(i.contains?i.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Z=e?function(e,t){var i;return e===t?(c=!0,0):!e.compareDocumentPosition-!t.compareDocumentPosition||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===i?e==C||e.ownerDocument==u&&m(u,e)?-1:t==C||t.ownerDocument==u&&m(u,t)?1:l?_(l,e)-_(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return c=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e==C?-1:t==C?1:r?-1:o?1:l?_(l,e)-_(l,t):0;if(r===o)return fe(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?fe(a[n],s[n]):a[n]==u?-1:s[n]==u?1:0}),C},M.matches=function(e,t){return M(e,null,null,t)},M.matchesSelector=function(e,t){if(w(e),h.matchesSelector&&T&&!g[t+" "]&&(!n||!n.test(t))&&(!f||!f.test(t)))try{var i=r.call(e,t);if(i||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){g(t,!0)}return 0<M(t,C,null,[e]).length},M.contains=function(e,t){return(e.ownerDocument||e)!=C&&w(e),m(e,t)},M.attr=function(e,t){(e.ownerDocument||e)!=C&&w(e);var i=b.attrHandle[t.toLowerCase()],i=i&&G.call(b.attrHandle,t.toLowerCase())?i(e,t,!T):void 0;return void 0!==i?i:h.attributes||!T?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},M.escape=function(e){return(e+"").replace(de,B)},M.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},M.uniqueSort=function(e){var t,i=[],n=0,r=0;if(c=!h.detectDuplicates,l=!h.sortStable&&e.slice(0),e.sort(Z),c){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return l=null,e},o=M.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},(b=M.selectors={cacheLength:50,createPseudo:D,match:y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(P,d),e[3]=(e[3]||e[4]||e[5]||"").replace(P,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||M.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&M.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&re.test(i)&&(t=(t=p(i,!0))&&i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(P,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+a+")"+e+"("+a+"|$)"))&&$(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(e){e=M.attr(e,t);return null==e?"!="===i:!i||(e+="","="===i?e===n:"!="===i?e!==n:"^="===i?n&&0===e.indexOf(n):"*="===i?n&&-1<e.indexOf(n):"$="===i?n&&e.slice(-n.length)===n:"~="===i?-1<(" "+e.replace(ee," ")+" ").indexOf(n):"|="===i&&(e===n||e.slice(0,n.length+1)===n+"-"))}},CHILD:function(f,e,t,m,g){var v="nth"!==f.slice(0,3),_="last"!==f.slice(-4),y="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,i){var n,r,o,a,s,l,c=v!=_?"nextSibling":"previousSibling",u=e.parentNode,d=y&&e.nodeName.toLowerCase(),h=!i&&!y,p=!1;if(u){if(v){for(;c;){for(a=e;a=a[c];)if(y?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[_?u.firstChild:u.lastChild],_&&h){for(p=(s=(n=(r=(o=(a=u)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===k&&n[1])&&n[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(p=s=0,l.pop());)if(1===a.nodeType&&++p&&a===e){r[f]=[k,s,p];break}}else if(!1===(p=h?s=(n=(r=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]||[])[0]===k&&n[1]:p))for(;(a=++s&&a&&a[c]||(p=s=0,l.pop()))&&((y?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++p||(h&&((r=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[f]=[k,p]),a!==e)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||M.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?D(function(e,t){for(var i,n=a(e,o),r=n.length;r--;)e[i=_(e,n[r])]=!(t[i]=n[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:D(function(e){var n=[],r=[],s=j(e.replace(v,"$1"));return s[S]?D(function(e,t,i,n){for(var r,o=s(e,null,n,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,i){return n[0]=e,s(n,null,i,r),n[0]=null,!r.pop()}}),has:D(function(t){return function(e){return 0<M(t,e).length}}),contains:D(function(t){return t=t.replace(P,d),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:D(function(i){return oe.test(i||"")||M.error("unsupported lang: "+i),i=i.replace(P,d).toLowerCase(),function(e){var t;do{if(t=T?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=O.location&&O.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===i},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return le.test(e.nodeName)},input:function(e){return se.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:z(function(){return[0]}),last:z(function(e,t){return[t-1]}),eq:z(function(e,t,i){return[i<0?i+t:i]}),even:z(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:z(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:z(function(e,t,i){for(var n=i<0?i+t:t<i?t:i;0<=--n;)e.push(n);return e}),gt:z(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=function(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}(e);function ve(){}function R(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function _e(a,e,t){var s=e.dir,l=e.next,c=l||s,u=t&&"parentNode"===c,d=U++;return e.first?function(e,t,i){for(;e=e[s];)if(1===e.nodeType||u)return a(e,t,i);return!1}:function(e,t,i){var n,r,o=[k,d];if(i){for(;e=e[s];)if((1===e.nodeType||u)&&a(e,t,i))return!0}else for(;e=e[s];)if(1===e.nodeType||u)if(r=(r=e[S]||(e[S]={}))[e.uniqueID]||(r[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[s]||e;else{if((n=r[c])&&n[0]===k&&n[1]===d)return o[2]=n[2];if((r[c]=o)[2]=a(e,t,i))return!0}return!1}}function ye(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function be(e,t,i,n,r){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)!(o=e[s])||i&&!i(o,n,r)||(a.push(o),c&&t.push(s));return a}function xe(e){for(var n,t,i,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,l=_e(function(e){return e===n},a,!0),c=_e(function(e){return-1<_(n,e)},a,!0),u=[function(e,t,i){e=!o&&(i||t!==x)||((n=t).nodeType?l:c)(e,t,i);return n=null,e}];s<r;s++)if(t=b.relative[e[s].type])u=[_e(ye(u),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(i=++s;i<r&&!b.relative[e[i].type];i++);return function e(p,f,m,g,v,t){return g&&!g[S]&&(g=e(g)),v&&!v[S]&&(v=e(v,t)),D(function(e,t,i,n){var r,o,a,s=[],l=[],c=t.length,u=e||function(e,t,i){for(var n=0,r=t.length;n<r;n++)M(e,t[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),d=!p||!e&&f?u:be(u,s,p,i,n),h=m?v||(e?p:c||g)?[]:t:d;if(m&&m(d,h,i,n),g)for(r=be(h,l),g(r,[],i,n),o=r.length;o--;)(a=r[o])&&(h[l[o]]=!(d[l[o]]=a));if(e){if(v||p){if(v){for(r=[],o=h.length;o--;)(a=h[o])&&r.push(d[o]=a);v(null,h=[],r,n)}for(o=h.length;o--;)(a=h[o])&&-1<(r=v?_(e,a):s[o])&&(e[r]=!(t[r]=a))}}else h=be(h===t?h.splice(c,h.length):h),v?v(null,t,h,n):E.apply(t,h)})}(1<s&&ye(u),1<s&&R(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(v,"$1"),t,s<i&&xe(e.slice(s,i)),i<r&&xe(e=e.slice(i)),i<r&&R(e))}u.push(t)}return ye(u)}return ve.prototype=b.filters=b.pseudos,b.setFilters=new ve,p=M.tokenize=function(e,t){var i,n,r,o,a,s,l,c=q[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=b.preFilter;a;){for(o in i&&!(n=te.exec(a))||(n&&(a=a.slice(n[0].length)||a),s.push(r=[])),i=!1,(n=ie.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(v," ")}),a=a.slice(i.length)),b.filter)!(n=y[o].exec(a))||l[o]&&!(n=l[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?M.error(e):q(e,s).slice(0)},j=M.compile=function(e,t){var i,g,v,_,y,n,r=[],o=[],a=H[e+" "];if(!a){for(i=(t=t||p(e)).length;i--;)((a=xe(t[i]))[S]?r:o).push(a);(a=H(e,(_=0<(v=r).length,y=0<(g=o).length,n=function(e,t,i,n,r){var o,a,s,l=0,c="0",u=e&&[],d=[],h=x,p=e||y&&b.find.TAG("*",r),f=k+=null==h?1:Math.random()||.1,m=p.length;for(r&&(x=t==C||t||r);c!==m&&null!=(o=p[c]);c++){if(y&&o){for(a=0,t||o.ownerDocument==C||(w(o),i=!T);s=g[a++];)if(s(o,t||C,i)){n.push(o);break}r&&(k=f)}_&&((o=!s&&o)&&l--,e)&&u.push(o)}if(l+=c,_&&c!==l){for(a=0;s=v[a++];)s(u,d,t,i);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=W.call(n));d=be(d)}E.apply(n,d),r&&!e&&0<d.length&&1<l+v.length&&M.uniqueSort(n)}return r&&(k=f,x=h),u},_?D(n):n))).selector=e}return a},V=M.select=function(e,t,i,n){var r,o,a,s,l,c="function"==typeof e&&e,u=!n&&p(e=c.selector||e);if(i=i||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&T&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(P,d),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=y.needsContext.test(e)?0:o.length;r--&&(a=o[r],!b.relative[s=a.type]);)if((l=b.find[s])&&(n=l(a.matches[0].replace(P,d),ue.test(o[0].type)&&ge(t.parentNode)||t))){if(o.splice(r,1),e=n.length&&R(o))break;return E.apply(i,n),i}}return(c||j(e,u))(n,t,!T,i,!t||ue.test(e)&&ge(t.parentNode)||t),i},h.sortStable=S.split("").sort(Z).join("")===S,h.detectDuplicates=!!c,w(),h.sortDetached=L(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),L(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&L(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),L(function(e){return null==e.getAttribute("disabled")})||pe(K,function(e,t,i){if(!i)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),M}(w),Y=(T.find=e,T.expr=e.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=e.uniqueSort,T.text=e.getText,T.isXMLDoc=e.isXML,T.contains=e.contains,T.escapeSelector=e.escape,T.expr.match.needsContext);function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var K=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function J(e,i,n){return _(i)?T.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?T.grep(e,function(e){return e===i!==n}):"string"!=typeof i?T.grep(e,function(e){return-1<j.call(i,e)!==n}):T.filter(i,e,n)}T.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?T.find.matchesSelector(n,e)?[n]:[]:T.find.matches(e,T.grep(t,function(e){return 1===e.nodeType}))},T.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(T(e).filter(function(){for(t=0;t<n;t++)if(T.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)T.find(e,r[t],i);return 1<n?T.uniqueSort(i):i},filter:function(e){return this.pushStack(J(this,e||[],!1))},not:function(e){return this.pushStack(J(this,e||[],!0))},is:function(e){return!!J(this,"string"==typeof e&&Y.test(e)?T(e):e||[],!1).length}});var Q,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((T.fn.init=function(e,t,i){if(e){if(i=i||Q,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):_(e)?void 0!==i.ready?i.ready(e):e(T):T.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!n[1]&&t)return(!t||t.jquery?t||i:this.constructor(t)).find(e);if(n[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),K.test(n[1])&&T.isPlainObject(t))for(var n in t)_(this[n])?this[n](t[n]):this.attr(n,t[n])}else(i=C.getElementById(n[2]))&&(this[0]=i,this.length=1)}return this}).prototype=T.fn,Q=T(C),/^(?:parents|prev(?:Until|All))/),ie={children:!0,contents:!0,next:!0,prev:!0};function ne(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(T.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],a="string"!=typeof e&&T(e);if(!Y.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&T.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(1<o.length?T.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?j.call(T(e),this[0]):j.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return n(e,"parentNode")},parentsUntil:function(e,t,i){return n(e,"parentNode",i)},next:function(e){return ne(e,"nextSibling")},prev:function(e){return ne(e,"previousSibling")},nextAll:function(e){return n(e,"nextSibling")},prevAll:function(e){return n(e,"previousSibling")},nextUntil:function(e,t,i){return n(e,"nextSibling",i)},prevUntil:function(e,t,i){return n(e,"previousSibling",i)},siblings:function(e){return X((e.parentNode||{}).firstChild,e)},children:function(e){return X(e.firstChild)},contents:function(e){return null!=e.contentDocument&&B(e.contentDocument)?e.contentDocument:(l(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},function(n,r){T.fn[n]=function(e,t){var i=T.map(this,r,e);return(t="Until"!==n.slice(-5)?e:t)&&"string"==typeof t&&(i=T.filter(t,i)),1<this.length&&(ie[n]||T.uniqueSort(i),te.test(n))&&i.reverse(),this.pushStack(i)}});var S=/[^\x20\t\r\n\f]+/g;function u(e){return e}function re(e){throw e}function oe(e,t,i,n){var r;try{e&&_(r=e.promise)?r.call(e).done(t).fail(i):e&&_(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}T.Callbacks=function(n){var e,i;n="string"==typeof n?(e=n,i={},T.each(e.match(S)||[],function(e,t){i[t]=!0}),i):T.extend({},n);function r(){for(s=s||n.once,a=o=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&n.stopOnFalse&&(u=l.length,t=!1);n.memory||(t=!1),o=!1,s&&(l=t?[]:"")}var o,t,a,s,l=[],c=[],u=-1,d={add:function(){return l&&(t&&!o&&(u=l.length-1,c.push(t)),function i(e){T.each(e,function(e,t){_(t)?n.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==f(t)&&i(t)})}(arguments),t)&&!o&&r(),this},remove:function(){return T.each(arguments,function(e,t){for(var i;-1<(i=T.inArray(t,l,i));)l.splice(i,1),i<=u&&u--}),this},has:function(e){return e?-1<T.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=c=[],t||o||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),o)||r(),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},T.extend({Deferred:function(e){var o=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var r=arguments;return T.Deferred(function(n){T.each(o,function(e,t){var i=_(r[t[4]])&&r[t[4]];s[t[1]](function(){var e=i&&i.apply(this,arguments);e&&_(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),r=null}).promise()},then:function(t,i,n){var l=0;function c(r,o,a,s){return function(){function e(){var e,t;if(!(r<l)){if((e=a.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,_(t)?s?t.call(e,c(l,o,u,s),c(l,o,re,s)):(l++,t.call(e,c(l,o,u,s),c(l,o,re,s),c(l,o,u,o.notifyWith))):(a!==u&&(i=void 0,n=[e]),(s||o.resolveWith)(i,n))}}var i=this,n=arguments,t=s?e:function(){try{e()}catch(e){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(e,t.stackTrace),l<=r+1&&(a!==re&&(i=void 0,n=[e]),o.rejectWith(i,n))}};r?t():(T.Deferred.getStackHook&&(t.stackTrace=T.Deferred.getStackHook()),w.setTimeout(t))}}return T.Deferred(function(e){o[0][3].add(c(0,e,_(n)?n:u,e.notifyWith)),o[1][3].add(c(0,e,_(t)?t:u)),o[2][3].add(c(0,e,_(i)?i:re))}).promise()},promise:function(e){return null!=e?T.extend(e,a):a}},s={};return T.each(o,function(e,t){var i=t[2],n=t[5];a[t[1]]=i.add,n&&i.add(function(){r=n},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),i.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=i.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){r[t]=this,o[t]=1<arguments.length?s.call(arguments):e,--i||a.resolveWith(r,o)}}var i=arguments.length,n=i,r=Array(n),o=s.call(arguments),a=T.Deferred();if(i<=1&&(oe(e,a.done(t(n)).resolve,a.reject,!i),"pending"===a.state()||_(o[n]&&o[n].then)))return a.then();for(;n--;)oe(o[n],t(n),a.reject);return a.promise()}});var ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,se=(T.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&ae.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},T.readyException=function(e){w.setTimeout(function(){throw e})},T.Deferred());function le(){C.removeEventListener("DOMContentLoaded",le),w.removeEventListener("load",le),T.ready()}T.fn.ready=function(e){return se.then(e).catch(function(e){T.readyException(e)}),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0)!==e&&0<--T.readyWait||se.resolveWith(C,[T])}}),T.ready.then=se.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?w.setTimeout(T.ready):(C.addEventListener("DOMContentLoaded",le),w.addEventListener("load",le));function d(e,t,i,n,r,o,a){var s=0,l=e.length,c=null==i;if("object"===f(i))for(s in r=!0,i)d(e,t,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,_(n)||(a=!0),t=c?a?(t.call(e,n),null):(c=t,function(e,t,i){return c.call(T(e),i)}):t))for(;s<l;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return r?e:c?t.call(e):l?t(e[0],i):o}var ce=/^-ms-/,ue=/-([a-z])/g;function de(e,t){return t.toUpperCase()}function y(e){return e.replace(ce,"ms-").replace(ue,de)}function v(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function he(){this.expando=T.expando+he.uid++}he.uid=1,he.prototype={cache:function(e){var t=e[this.expando];return t||(t={},v(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[y(t)]=i;else for(n in t)r[y(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][y(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(y):(t=y(t))in n?[t]:t.match(S)||[]).length;for(;i--;)delete n[t[i]]}void 0!==t&&!T.isEmptyObject(n)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var b=new he,c=new he,pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fe=/[A-Z]/g;function me(e,t,i){var n,r;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(fe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:pe.test(r)?JSON.parse(r):r)}catch(e){}c.set(e,t,i)}else i=void 0;return i}T.extend({hasData:function(e){return c.hasData(e)||b.hasData(e)},data:function(e,t,i){return c.access(e,t,i)},removeData:function(e,t){c.remove(e,t)},_data:function(e,t,i){return b.access(e,t,i)},_removeData:function(e,t){b.remove(e,t)}}),T.fn.extend({data:function(i,e){var t,n,r,o=this[0],a=o&&o.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){c.set(this,i)}):d(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=c.get(o,i))||void 0!==(t=me(o,i))?t:void 0;this.each(function(){c.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=c.get(o),1===o.nodeType)&&!b.get(o,"hasDataAttrs")){for(t=a.length;t--;)a[t]&&0===(n=a[t].name).indexOf("data-")&&(n=y(n.slice(5)),me(o,n,r[n]));b.set(o,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){c.remove(this,e)})}}),T.extend({queue:function(e,t,i){var n;if(e)return n=b.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=b.access(e,t,T.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=T.queue(e,t),n=i.length,r=i.shift(),o=T._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,function(){T.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return b.get(e,i)||b.access(e,i,{empty:T.Callbacks("once memory").add(function(){b.remove(e,[t+"queue",i])})})}}),T.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?T.queue(this[0],t):void 0===i?this:this.each(function(){var e=T.queue(this,t,i);T._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&T.dequeue(this,t)})},dequeue:function(e){return this.each(function(){T.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--r||o.resolveWith(a,[a])}var n,r=1,o=T.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=b.get(a[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(i));return i(),o.promise(t)}});function ge(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&k(e)&&"none"===T.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ve=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),h=["Top","Right","Bottom","Left"],x=C.documentElement,k=function(e){return T.contains(e.ownerDocument,e)},_e={composed:!0};x.getRootNode&&(k=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(_e)===e.ownerDocument});function ye(e,t,i,n){var r,o,a=20,s=n?function(){return n.cur()}:function(){return T.css(e,t,"")},l=s(),c=i&&i[3]||(T.cssNumber[t]?"":"px"),u=e.nodeType&&(T.cssNumber[t]||"px"!==c&&+l)&&ve.exec(T.css(e,t));if(u&&u[3]!==c){for(c=c||u[3],u=+(l/=2)||1;a--;)T.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;T.style(e,t,(u*=2)+c),i=i||[]}return i&&(u=+u||+l||0,r=i[1]?u+(i[1]+1)*i[2]:+i[2],n)&&(n.unit=c,n.start=u,n.end=r),r}var be={};function E(e,t){for(var i,n,r,o,a,s,l=[],c=0,u=e.length;c<u;c++)(n=e[c]).style&&(i=n.style.display,t?("none"===i&&(l[c]=b.get(n,"display")||null,l[c]||(n.style.display="")),""===n.style.display&&ge(n)&&(l[c]=(s=o=r=void 0,o=n.ownerDocument,a=n.nodeName,(s=be[a])||(r=o.body.appendChild(o.createElement(a)),s=T.css(r,"display"),r.parentNode.removeChild(r),be[a]=s="none"===s?"block":s)))):"none"!==i&&(l[c]="none",b.set(n,"display",i)));for(c=0;c<u;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}T.fn.extend({show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ge(this)?T(this).show():T(this).hide()})}});var xe=/^(?:checkbox|radio)$/i,we=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i,i=C.createDocumentFragment().appendChild(C.createElement("div")),A=((D=C.createElement("input")).setAttribute("type","radio"),D.setAttribute("checked","checked"),D.setAttribute("name","t"),i.appendChild(D),g.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,i.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!i.cloneNode(!0).lastChild.defaultValue,i.innerHTML="<option></option>",g.option=!!i.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function P(e,t){var i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&l(e,t)?T.merge([e],i):i}function Te(e,t){for(var i=0,n=e.length;i<n;i++)b.set(e[i],"globalEval",!t||b.get(t[i],"globalEval"))}A.tbody=A.tfoot=A.colgroup=A.caption=A.thead,A.th=A.td,g.option||(A.optgroup=A.option=[1,"<select multiple='multiple'>","</select>"]);var Se=/<|&#?\w+;/;function ke(e,t,i,n,r){for(var o,a,s,l,c,u=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((o=e[h])||0===o)if("object"===f(o))T.merge(d,o.nodeType?[o]:o);else if(Se.test(o)){for(a=a||u.appendChild(t.createElement("div")),s=(we.exec(o)||["",""])[1].toLowerCase(),s=A[s]||A._default,a.innerHTML=s[1]+T.htmlPrefilter(o)+s[2],c=s[0];c--;)a=a.lastChild;T.merge(d,a.childNodes),(a=u.firstChild).textContent=""}else d.push(t.createTextNode(o));for(u.textContent="",h=0;o=d[h++];)if(n&&-1<T.inArray(o,n))r&&r.push(o);else if(l=k(o),a=P(u.appendChild(o),"script"),l&&Te(a),i)for(c=0;o=a[c++];)Ce.test(o.type||"")&&i.push(o);return u}var Ee=/^key/,Ae=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Pe=/^([^.]*)(?:\.(.+)|)/;function a(){return!0}function p(){return!1}function Me(e,t){return e===function(){try{return C.activeElement}catch(e){}}()==("focus"===t)}function Ie(e,t,i,n,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof i&&(n=n||i,i=void 0),t)Ie(e,s,i,n,t[s],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=p;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return T().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),e.each(function(){T.event.add(this,t,r,n,i)})}function De(e,r,o){o?(b.set(e,r,!1),T.event.add(e,r,{namespace:!1,handler:function(e){var t,i,n=b.get(this,r);if(1&e.isTrigger&&this[r]){if(n.length)(T.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=s.call(arguments),b.set(this,r,n),t=o(this,r),this[r](),n!==(i=b.get(this,r))||t?b.set(this,r,!1):i={},n!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else n.length&&(b.set(this,r,{value:T.event.trigger(T.extend(n[0],T.Event.prototype),n.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===b.get(e,r)&&T.event.add(e,r,a)}T.event={global:{},add:function(t,e,i,n,r){var o,a,s,l,c,u,d,h,p,f=b.get(t);if(v(t))for(i.handler&&(i=(o=i).handler,r=o.selector),r&&T.find.matchesSelector(x,r),i.guid||(i.guid=T.guid++),s=(s=f.events)||(f.events=Object.create(null)),a=(a=f.handle)||(f.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(S)||[""]).length;l--;)d=p=(h=Pe.exec(e[l])||[])[1],h=(h[2]||"").split(".").sort(),d&&(c=T.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,c=T.event.special[d]||{},p=T.extend({type:d,origType:p,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:h.join(".")},o),(u=s[d])||((u=s[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,h,a))||t.addEventListener&&t.addEventListener(d,a),c.add&&(c.add.call(t,p),p.handler.guid||(p.handler.guid=i.guid)),r?u.splice(u.delegateCount++,0,p):u.push(p),T.event.global[d]=!0)},remove:function(e,t,i,n,r){var o,a,s,l,c,u,d,h,p,f,m,g=b.hasData(e)&&b.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(S)||[""]).length;c--;)if(p=m=(s=Pe.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(d=T.event.special[p]||{},h=l[p=(n?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!r&&m!==u.origType||i&&i.guid!==u.guid||s&&!s.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||T.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)T.event.remove(e,p+t[c],i,n,!0);T.isEmptyObject(l)&&b.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,a=new Array(arguments.length),s=T.event.fix(e),e=(b.get(this,"events")||Object.create(null))[s.type]||[],l=T.event.special[s.type]||{};for(a[0]=s,t=1;t<arguments.length;t++)a[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(o=T.event.handlers.call(this,s,e),t=0;(n=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=n.elem,i=0;(r=n.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==r.namespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(r=((T.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,a))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,r,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},i=0;i<l;i++)void 0===a[r=(n=t[i]).selector+" "]&&(a[r]=n.needsContext?-1<T(r,this).index(c):T.find(r,this,null,[c]).length),a[r]&&o.push(n);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:_(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return xe.test(e.type)&&e.click&&l(e,"input")&&De(e,"click",a),!1},trigger:function(e){e=this||e;return xe.test(e.type)&&e.click&&l(e,"input")&&De(e,"click"),!0},_default:function(e){e=e.target;return xe.test(e.type)&&e.click&&l(e,"input")&&b.get(e,"click")||l(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?a:p,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=a,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ee.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ae.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(e,t){T.event.special[e]={setup:function(){return De(this,e,Me),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){T.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||T.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=r),t}}}),T.fn.extend({on:function(e,t,i,n){return Ie(this,e,t,i,n)},one:function(e,t,i,n){return Ie(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)n=e.handleObj,T(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=p),this.each(function(){T.event.remove(this,e,i,t)});for(r in e)this.off(r,t,e[r])}return this}});var Le=/<script|<style|<link/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function Be(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Fe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ne(e,t){var i,n,r,o;if(1===t.nodeType){if(b.hasData(e)&&(o=b.get(e).events))for(r in b.remove(t,"handle events"),o)for(i=0,n=o[r].length;i<n;i++)T.event.add(t,r,o[r][i]);c.hasData(e)&&(e=c.access(e),e=T.extend({},e),c.set(t,e))}}function M(i,n,r,o){n=F(n);var e,t,a,s,l,c,u=0,d=i.length,h=d-1,p=n[0],f=_(p);if(f||1<d&&"string"==typeof p&&!g.checkClone&&ze.test(p))return i.each(function(e){var t=i.eq(e);f&&(n[0]=p.call(this,e,t.html())),M(t,n,r,o)});if(d&&(t=(e=ke(n,i[0].ownerDocument,!1,i,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=T.map(P(e,"script"),Be)).length;u<d;u++)l=e,u!==h&&(l=T.clone(l,!0,!0),s)&&T.merge(a,P(l,"script")),r.call(i[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,T.map(a,Fe),u=0;u<s;u++)l=a[u],Ce.test(l.type||"")&&!b.access(l,"globalEval")&&T.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&!l.noModule&&T._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):G(l.textContent.replace(Re,""),l,c))}return i}function je(e,t,i){for(var n,r=t?T.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||T.cleanData(P(n)),n.parentNode&&(i&&k(n)&&Te(P(n,"script")),n.parentNode.removeChild(n));return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,r,o,a,s,l,c,u=e.cloneNode(!0),d=k(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(a=P(u),n=0,r=(o=P(e)).length;n<r;n++)s=o[n],"input"===(c=(l=a[n]).nodeName.toLowerCase())&&xe.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(i)for(o=o||P(e),a=a||P(u),n=0,r=o.length;n<r;n++)Ne(o[n],a[n]);else Ne(e,u);return 0<(a=P(u,"script")).length&&Te(a,!d&&P(e,"script")),u},cleanData:function(e){for(var t,i,n,r=T.event.special,o=0;void 0!==(i=e[o]);o++)if(v(i)){if(t=i[b.expando]){if(t.events)for(n in t.events)r[n]?T.event.remove(i,n):T.removeEvent(i,n,t.handle);i[b.expando]=void 0}i[c.expando]&&(i[c.expando]=void 0)}}}),T.fn.extend({detach:function(e){return je(this,e,!0)},remove:function(e){return je(this,e)},text:function(e){return d(this,function(e){return void 0===e?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return M(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return M(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Oe(this,e)).insertBefore(e,t.firstChild)})},before:function(){return M(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return M(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(P(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return T.clone(this,e,t)})},html:function(e){return d(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!A[(we.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(T.cleanData(P(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return M(this,arguments,function(e){var t=this.parentNode;T.inArray(this,i)<0&&(T.cleanData(P(this)),t)&&t.replaceChild(e,this)},i)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){T.fn[e]=function(e){for(var t,i=[],n=T(e),r=n.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),T(n[o])[a](t),N.apply(i,t.get());return this.pushStack(i)}});function Ve(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:w).getComputedStyle(e)}function Ue(e,t,i){var n,r={};for(n in t)r[n]=e.style[n],e.style[n]=t[n];for(n in i=i.call(e),t)e.style[n]=r[n];return i}var $e,qe,He,Ze,Ge,We,Xe,r,Ye=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Ke=new RegExp(h.join("|"),"i");function Je(e,t,i){var n,r,o=e.style;return(i=i||Ve(e))&&(""!==(r=i.getPropertyValue(t)||i[t])||k(e)||(r=T.style(e,t)),!g.pixelBoxStyles())&&Ye.test(r)&&Ke.test(t)&&(e=o.width,t=o.minWidth,n=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=i.width,o.width=e,o.minWidth=t,o.maxWidth=n),void 0!==r?r+"":r}function Qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function et(){var e;r&&(Xe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",r.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",x.appendChild(Xe).appendChild(r),e=w.getComputedStyle(r),$e="1%"!==e.top,We=12===tt(e.marginLeft),r.style.right="60%",Ze=36===tt(e.right),qe=36===tt(e.width),r.style.position="absolute",He=12===tt(r.offsetWidth/3),x.removeChild(Xe),r=null)}function tt(e){return Math.round(parseFloat(e))}Xe=C.createElement("div"),(r=C.createElement("div")).style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===r.style.backgroundClip,T.extend(g,{boxSizingReliable:function(){return et(),qe},pixelBoxStyles:function(){return et(),Ze},pixelPosition:function(){return et(),$e},reliableMarginLeft:function(){return et(),We},scrollboxSize:function(){return et(),He},reliableTrDimensions:function(){var e,t,i;return null==Ge&&(e=C.createElement("table"),t=C.createElement("tr"),i=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",i.style.height="9px",x.appendChild(e).appendChild(t).appendChild(i),i=w.getComputedStyle(t),Ge=3<parseInt(i.height),x.removeChild(e)),Ge}}));var it=["Webkit","Moz","ms"],nt=C.createElement("div").style,rt={};function ot(e){return T.cssProps[e]||rt[e]||(e in nt?e:rt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=it.length;i--;)if((e=it[i]+t)in nt)return e}(e)||e)}var at=/^(none|table(?!-c[ea]).+)/,st=/^--/,lt={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"};function ut(e,t,i){var n=ve.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function dt(e,t,i,n,r,o){var a="width"===t?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=T.css(e,i+h[a],!0,r)),n?("content"===i&&(l-=T.css(e,"padding"+h[a],!0,r)),"margin"!==i&&(l-=T.css(e,"border"+h[a]+"Width",!0,r))):(l+=T.css(e,"padding"+h[a],!0,r),"padding"!==i?l+=T.css(e,"border"+h[a]+"Width",!0,r):s+=T.css(e,"border"+h[a]+"Width",!0,r));return!n&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function ht(e,t,i){var n=Ve(e),r=(!g.boxSizingReliable()||i)&&"border-box"===T.css(e,"boxSizing",!1,n),o=r,a=Je(e,t,n),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ye.test(a)){if(!i)return a;a="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&l(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===T.css(e,"display",!1,n))&&e.getClientRects().length&&(r="border-box"===T.css(e,"boxSizing",!1,n),o=s in e)&&(a=e[s]),(a=parseFloat(a)||0)+dt(e,t,i||(r?"border":"content"),o,n,a)+"px"}function o(e,t,i,n,r){return new o.prototype.init(e,t,i,n,r)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=Je(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=y(t),l=st.test(t),c=e.style;if(l||(t=ot(s)),a=T.cssHooks[t]||T.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:c[t];"string"==(o=typeof i)&&(r=ve.exec(i))&&r[1]&&(i=ye(e,t,r),o="number"),null!=i&&i==i&&("number"!==o||l||(i+=r&&r[3]||(T.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var r,o=y(t);return st.test(t)||(t=ot(o)),"normal"===(r=void 0===(r=(o=T.cssHooks[t]||T.cssHooks[o])&&"get"in o?o.get(e,!0,i):r)?Je(e,t,n):r)&&t in ct&&(r=ct[t]),(""===i||i)&&(o=parseFloat(r),!0===i||isFinite(o))?o||0:r}}),T.each(["height","width"],function(e,a){T.cssHooks[a]={get:function(e,t,i){if(t)return!at.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ht(e,a,i):Ue(e,lt,function(){return ht(e,a,i)})},set:function(e,t,i){var n=Ve(e),r=!g.scrollboxSize()&&"absolute"===n.position,o=(r||i)&&"border-box"===T.css(e,"boxSizing",!1,n),i=i?dt(e,a,i,o,n):0;return o&&r&&(i-=Math.ceil(e["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(n[a])-dt(e,a,"border",!1,n)-.5)),i&&(o=ve.exec(t))&&"px"!==(o[3]||"px")&&(e.style[a]=t,t=T.css(e,a)),ut(0,t,i)}}}),T.cssHooks.marginLeft=Qe(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Je(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(r,o){T.cssHooks[r+o]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+h[t]+o]=n[t]||n[t-2]||n[0];return i}},"margin"!==r&&(T.cssHooks[r+o].set=ut)}),T.fn.extend({css:function(e,t){return d(this,function(e,t,i){var n,r,o={},a=0;if(Array.isArray(t)){for(n=Ve(e),r=t.length;a<r;a++)o[t[a]]=T.css(e,t[a],!1,n);return o}return void 0!==i?T.style(e,t,i):T.css(e,t)},e,t,1<arguments.length)}}),((T.Tween=o).prototype={constructor:o,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(T.cssNumber[i]?"":"px")},cur:function(){var e=o.propHooks[this.prop];return(e&&e.get?e:o.propHooks._default).get(this)},run:function(e){var t,i=o.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(i&&i.set?i:o.propHooks._default).set(this),this}}).init.prototype=o.prototype,(o.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=T.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[ot(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=o.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=o.prototype.init,T.fx.step={};var I,pt,D,ft=/^(?:toggle|show|hide)$/,mt=/queueHooks$/;function gt(){pt&&(!1===C.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(gt):w.setTimeout(gt,T.fx.interval),T.fx.tick())}function vt(){return w.setTimeout(function(){I=void 0}),I=Date.now()}function _t(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=h[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function yt(e,t,i){for(var n,r=(L.tweeners[t]||[]).concat(L.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,t,e))return n}function L(r,e,t){var i,o,n,a,s,l,c,u=0,d=L.prefilters.length,h=T.Deferred().always(function(){delete p.elem}),p=function(){if(o)return!1;for(var e=I||vt(),e=Math.max(0,f.startTime+f.duration-e),t=1-(e/f.duration||0),i=0,n=f.tweens.length;i<n;i++)f.tweens[i].run(t);return h.notifyWith(r,[f,t,e]),t<1&&n?e:(n||h.notifyWith(r,[f,1,0]),h.resolveWith(r,[f]),!1)},f=h.promise({elem:r,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},t),originalProperties:e,originalOptions:t,startTime:I||vt(),duration:t.duration,tweens:[],createTween:function(e,t){t=T.Tween(r,f.opts,e,t,f.opts.specialEasing[e]||f.opts.easing);return f.tweens.push(t),t},stop:function(e){var t=0,i=e?f.tweens.length:0;if(!o){for(o=!0;t<i;t++)f.tweens[t].run(1);e?(h.notifyWith(r,[f,1,0]),h.resolveWith(r,[f,e])):h.rejectWith(r,[f,e])}return this}}),m=f.props,g=m,v=f.opts.specialEasing;for(n in g)if(s=v[a=y(n)],l=g[n],Array.isArray(l)&&(s=l[1],l=g[n]=l[0]),n!==a&&(g[a]=l,delete g[n]),(c=T.cssHooks[a])&&"expand"in c)for(n in l=c.expand(l),delete g[a],l)n in g||(g[n]=l[n],v[n]=s);else v[a]=s;for(;u<d;u++)if(i=L.prefilters[u].call(f,r,m,f.opts))return _(i.stop)&&(T._queueHooks(f.elem,f.opts.queue).stop=i.stop.bind(i)),i;return T.map(m,yt,f),_(f.opts.start)&&f.opts.start.call(r,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),T.fx.timer(T.extend(p,{elem:r,anim:f,queue:f.opts.queue})),f}T.Animation=T.extend(L,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return ye(i.elem,e,ve.exec(t),i),i}]},tweener:function(e,t){for(var i,n=0,r=(e=_(e)?(t=e,["*"]):e.match(S)).length;n<r;n++)i=e[n],L.tweeners[i]=L.tweeners[i]||[],L.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,o,a,s,l,c,u="width"in t||"height"in t,d=this,h={},p=e.style,f=e.nodeType&&ge(e),m=b.get(e,"fxshow");for(n in i.queue||(null==(a=T._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,T.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[n],ft.test(r)){if(delete t[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}h[n]=m&&m[n]||T.style(e,n)}if((l=!T.isEmptyObject(t))||!T.isEmptyObject(h))for(n in u&&1===e.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=b.get(e,"display")),"none"===(u=T.css(e,"display"))&&(c?u=c:(E([e],!0),c=e.style.display||c,u=T.css(e,"display"),E([e]))),"inline"===u||"inline-block"===u&&null!=c)&&"none"===T.css(e,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block"),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,h)l||(m?"hidden"in m&&(f=m.hidden):m=b.access(e,"fxshow",{display:c}),o&&(m.hidden=!f),f&&E([e],!0),d.done(function(){for(n in f||E([e]),b.remove(e,"fxshow"),h)T.style(e,n,h[n])})),l=yt(f?m[n]:0,n,d),n in m||(m[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?L.prefilters.unshift(e):L.prefilters.push(e)}}),T.speed=function(e,t,i){var n=e&&"object"==typeof e?T.extend({},e):{complete:i||!i&&t||_(e)&&e,duration:e,easing:i&&t||t&&!_(t)&&t};return T.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in T.fx.speeds?n.duration=T.fx.speeds[n.duration]:n.duration=T.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){_(n.old)&&n.old.call(this),n.queue&&T.dequeue(this,n.queue)},n},T.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ge).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){function r(){var e=L(this,T.extend({},t),a);(o||b.get(this,"finish"))&&e.stop(!0)}var o=T.isEmptyObject(t),a=T.speed(e,i,n);return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(r,e,o){function a(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=T.timers,n=b.get(this);if(t)n[t]&&n[t].stop&&a(n[t]);else for(t in n)n[t]&&n[t].stop&&mt.test(t)&&a(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(o),e=!1,i.splice(t,1));!e&&o||T.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=b.get(this),i=t[a+"queue"],n=t[a+"queueHooks"],r=T.timers,o=i?i.length:0;for(t.finish=!0,T.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),T.each(["toggle","show","hide"],function(e,n){var r=T.fn[n];T.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(_t(n,!0),e,t,i)}}),T.each({slideDown:_t("show"),slideUp:_t("hide"),slideToggle:_t("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){T.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),T.timers=[],T.fx.tick=function(){var e,t=0,i=T.timers;for(I=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||T.fx.stop(),I=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){pt||(pt=!0,gt())},T.fx.stop=function(){pt=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(n,e){return n=T.fx&&T.fx.speeds[n]||n,this.queue(e=e||"fx",function(e,t){var i=w.setTimeout(e,n);t.stop=function(){w.clearTimeout(i)}})},D=C.createElement("input"),i=C.createElement("select").appendChild(C.createElement("option")),D.type="checkbox",g.checkOn=""!==D.value,g.optSelected=i.selected,(D=C.createElement("input")).value="t",D.type="radio",g.radioValue="t"===D.value;var bt,xt=T.expr.attrHandle,wt=(T.fn.extend({attr:function(e,t){return d(this,T.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){T.removeAttr(this,e)})}}),T.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?T.prop(e,t,i):(1===o&&T.isXMLDoc(e)||(r=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?bt:void 0)),void 0!==i?null===i?void T.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):!(r&&"get"in r&&null!==(n=r.get(e,t)))&&null==(n=T.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){var i;if(!g.radioValue&&"radio"===t&&l(e,"input"))return i=e.value,e.setAttribute("type",t),i&&(e.value=i),t}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(S);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),bt={set:function(e,t,i){return!1===t?T.removeAttr(e,i):e.setAttribute(i,i),i}},T.each(T.expr.match.bool.source.match(/\w+/g),function(e,t){var a=xt[t]||T.find.attr;xt[t]=function(e,t,i){var n,r,o=t.toLowerCase();return i||(r=xt[o],xt[o]=n,n=null!=a(e,t,i)?o:null,xt[o]=r),n}}),/^(?:input|select|textarea|button)$/i),Ct=/^(?:a|area)$/i;function z(e){return(e.match(S)||[]).join(" ")}function R(e){return e.getAttribute&&e.getAttribute("class")||""}function Tt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(S)||[]}T.fn.extend({prop:function(e,t){return d(this,T.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[T.propFix[e]||e]})}}),T.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(e)||(t=T.propFix[t]||t,r=T.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):wt.test(e.nodeName)||Ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(T.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(t){var e,i,n,r,o,a,s=0;if(_(t))return this.each(function(e){T(this).addClass(t.call(this,e,R(this)))});if((e=Tt(t)).length)for(;i=this[s++];)if(a=R(i),n=1===i.nodeType&&" "+z(a)+" "){for(o=0;r=e[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a!==(a=z(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,o,a,s=0;if(_(t))return this.each(function(e){T(this).removeClass(t.call(this,e,R(this)))});if(!arguments.length)return this.attr("class","");if((e=Tt(t)).length)for(;i=this[s++];)if(a=R(i),n=1===i.nodeType&&" "+z(a)+" "){for(o=0;r=e[o++];)for(;-1<n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");a!==(a=z(n))&&i.setAttribute("class",a)}return this},toggleClass:function(r,t){var o=typeof r,a="string"==o||Array.isArray(r);return"boolean"==typeof t&&a?t?this.addClass(r):this.removeClass(r):_(r)?this.each(function(e){T(this).toggleClass(r.call(this,e,R(this),t),t)}):this.each(function(){var e,t,i,n;if(a)for(t=0,i=T(this),n=Tt(r);e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==r&&"boolean"!=o||((e=R(this))&&b.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==r&&b.get(this,"__className__")||""))})},hasClass:function(e){for(var t,i=0,n=" "+e+" ";t=this[i++];)if(1===t.nodeType&&-1<(" "+z(R(t))+" ").indexOf(n))return!0;return!1}});function St(e){e.stopPropagation()}var kt=/\r/g,Et=(T.fn.extend({val:function(t){var i,e,n,r=this[0];return arguments.length?(n=_(t),this.each(function(e){1===this.nodeType&&(null==(e=n?t.call(this,e,T(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=T.map(e,function(e){return null==e?"":e+""})),(i=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):r?(i=T.valHooks[r.type]||T.valHooks[r.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(r,"value"))?e:"string"==typeof(e=r.value)?e.replace(kt,""):null==e?"":e:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:z(T.text(e))}},select:{get:function(e){for(var t,i=e.options,n=e.selectedIndex,r="select-one"===e.type,o=r?null:[],a=r?n+1:i.length,s=n<0?a:r?n:0;s<a;s++)if(((t=i[s]).selected||s===n)&&!t.disabled&&(!t.parentNode.disabled||!l(t.parentNode,"optgroup"))){if(t=T(t).val(),r)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,o=T.makeArray(t),a=r.length;a--;)((n=r[a]).selected=-1<T.inArray(T.valHooks.option.get(n),o))&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<T.inArray(T(e).val(),t)}},g.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),g.focusin="onfocusin"in w,/^(?:focusinfocus|focusoutblur)$/),At=(T.extend(T.event,{trigger:function(e,t,i,n){var r,o,a,s,l,c,u,d=[i||C],h=$.call(e,"type")?e.type:e,p=$.call(e,"namespace")?e.namespace.split("."):[],f=u=o=i=i||C;if(3!==i.nodeType&&8!==i.nodeType&&!Et.test(h+T.event.triggered)&&(-1<h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),s=h.indexOf(":")<0&&"on"+h,(e=e[T.expando]?e:new T.Event(h,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:T.makeArray(t,[e]),c=T.event.special[h]||{},n||!c.trigger||!1!==c.trigger.apply(i,t))){if(!n&&!c.noBubble&&!m(i)){for(a=c.delegateType||h,Et.test(a+h)||(f=f.parentNode);f;f=f.parentNode)d.push(f),o=f;o===(i.ownerDocument||C)&&d.push(o.defaultView||o.parentWindow||w)}for(r=0;(f=d[r++])&&!e.isPropagationStopped();)u=f,e.type=1<r?a:c.bindType||h,(l=(b.get(f,"events")||Object.create(null))[e.type]&&b.get(f,"handle"))&&l.apply(f,t),(l=s&&f[s])&&l.apply&&v(f)&&(e.result=l.apply(f,t),!1===e.result)&&e.preventDefault();return e.type=h,n||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!v(i)||s&&_(i[h])&&!m(i)&&((o=i[s])&&(i[s]=null),T.event.triggered=h,e.isPropagationStopped()&&u.addEventListener(h,St),i[h](),e.isPropagationStopped()&&u.removeEventListener(h,St),T.event.triggered=void 0,o)&&(i[s]=o),e.result}},simulate:function(e,t,i){i=T.extend(new T.Event,i,{type:e,isSimulated:!0});T.event.trigger(i,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each(function(){T.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return T.event.trigger(e,t,i,!0)}}),g.focusin||T.each({focus:"focusin",blur:"focusout"},function(i,n){function r(e){T.event.simulate(n,e.target,T.event.fix(e))}T.event.special[n]={setup:function(){var e=this.ownerDocument||this.document||this,t=b.access(e,n);t||e.addEventListener(i,r,!0),b.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=b.access(e,n)-1;t?b.access(e,n,t):(e.removeEventListener(i,r,!0),b.remove(e,n))}}}),w.location),Pt={guid:Date.now()},Mt=/\?/,It=(T.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+e),t},/\[\]$/),Dt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;T.param=function(e,t){function i(e,t){t=_(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var n,r=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,function(){i(this.name,this.value)});else for(n in e)!function i(n,e,r,o){if(Array.isArray(e))T.each(e,function(e,t){r||It.test(n)?o(n,t):i(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,o)});else if(r||"object"!==f(e))o(n,e);else for(var t in e)i(n+"["+t+"]",e[t],r,o)}(n,e[n],t,i);return r.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&zt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!xe.test(e))}).map(function(e,t){var i=T(this).val();return null==i?null:Array.isArray(i)?T.map(i,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:i.replace(Dt,"\r\n")}}).get()}});var Rt=/%20/g,Ot=/#.*$/,Bt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,jt=/^\/\//,Vt={},Ut={},$t="*/".concat("*"),qt=C.createElement("a");function Ht(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(S)||[];if(_(t))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(t)):(o[i]=o[i]||[]).push(t)}}function Zt(t,n,r,o){var a={},s=t===Ut;function l(e){var i;return a[e]=!0,T.each(t[e]||[],function(e,t){t=t(n,r,o);return"string"!=typeof t||s||a[t]?s?!(i=t):void 0:(n.dataTypes.unshift(t),l(t),!1)}),i}return l(n.dataTypes[0])||!a["*"]&&l("*")}function Gt(e,t){var i,n,r=T.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n=n||{})[i]=t[i]);return n&&T.extend(!0,e,n),e}qt.href=At.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,T.ajaxSettings),t):Gt(T.ajaxSettings,e)},ajaxPrefilter:Ht(Vt),ajaxTransport:Ht(Ut),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,u,i,d,h,p,n,r,f=T.ajaxSetup({},t=t||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?T(m):T.event,v=T.Deferred(),_=T.Callbacks("once memory"),y=f.statusCode||{},o={},a={},s="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(h){if(!i)for(i={};t=Ft.exec(u);)i[t[1].toLowerCase()+" "]=(i[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=i[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?u:null},setRequestHeader:function(e,t){return null==h&&(e=a[e.toLowerCase()]=a[e.toLowerCase()]||e,o[e]=t),this},overrideMimeType:function(e){return null==h&&(f.mimeType=e),this},statusCode:function(e){if(e)if(h)b.always(e[b.status]);else for(var t in e)y[t]=[y[t],e[t]];return this},abort:function(e){e=e||s;return l&&l.abort(e),x(0,e),this}};if(v.promise(b),f.url=((e||f.url||At.href)+"").replace(jt,At.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(S)||[""],null==f.crossDomain){r=C.createElement("a");try{r.href=f.url,r.href=r.href,f.crossDomain=qt.protocol+"//"+qt.host!=r.protocol+"//"+r.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=T.param(f.data,f.traditional)),Zt(Vt,f,t,b),!h){for(n in(p=T.event&&f.global)&&0==T.active++&&T.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Nt.test(f.type),c=f.url.replace(Ot,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Rt,"+")):(r=f.url.slice(c.length),f.data&&(f.processData||"string"==typeof f.data)&&(c+=(Mt.test(c)?"&":"?")+f.data,delete f.data),!1===f.cache&&(c=c.replace(Bt,"$1"),r=(Mt.test(c)?"&":"?")+"_="+Pt.guid+++r),f.url=c+r),f.ifModified&&(T.lastModified[c]&&b.setRequestHeader("If-Modified-Since",T.lastModified[c]),T.etag[c])&&b.setRequestHeader("If-None-Match",T.etag[c]),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&b.setRequestHeader("Content-Type",f.contentType),b.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+$t+"; q=0.01":""):f.accepts["*"]),f.headers)b.setRequestHeader(n,f.headers[n]);if(f.beforeSend&&(!1===f.beforeSend.call(m,b,f)||h))return b.abort();if(s="abort",_.add(f.complete),b.done(f.success),b.fail(f.error),l=Zt(Ut,f,t,b)){if(b.readyState=1,p&&g.trigger("ajaxSend",[b,f]),h)return b;f.async&&0<f.timeout&&(d=w.setTimeout(function(){b.abort("timeout")},f.timeout));try{h=!1,l.send(o,x)}catch(e){if(h)throw e;x(-1,e)}}else x(-1,"No Transport")}return b;function x(e,t,i,n){var r,o,a,s=t;h||(h=!0,d&&w.clearTimeout(d),l=void 0,u=n||"",b.readyState=0<e?4:0,n=200<=e&&e<300||304===e,i&&(a=function(e,t,i){for(var n,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a=a||r}o=o||a}if(o)return o!==l[0]&&l.unshift(o),i[o]}(f,b,i)),!n&&-1<T.inArray("script",f.dataTypes)&&(f.converters["text script"]=function(){}),a=function(e,t,i,n){var r,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,a,b,n),n?(f.ifModified&&((i=b.getResponseHeader("Last-Modified"))&&(T.lastModified[c]=i),i=b.getResponseHeader("etag"))&&(T.etag[c]=i),204===e||"HEAD"===f.type?s="nocontent":304===e?s="notmodified":(s=a.state,r=a.data,n=!(o=a.error))):(o=s,!e&&s||(s="error",e<0&&(e=0))),b.status=e,b.statusText=(t||s)+"",n?v.resolveWith(m,[r,s,b]):v.rejectWith(m,[b,s,o]),b.statusCode(y),y=void 0,p&&g.trigger(n?"ajaxSuccess":"ajaxError",[b,f,n?r:o]),_.fireWith(m,[b,s]),p&&(g.trigger("ajaxComplete",[b,f]),--T.active||T.event.trigger("ajaxStop")))}},getJSON:function(e,t,i){return T.get(e,t,i,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],function(e,r){T[r]=function(e,t,i,n){return _(t)&&(n=n||i,i=t,t=void 0),T.ajax(T.extend({url:e,type:r,dataType:n,data:t,success:i},T.isPlainObject(e)&&e))}}),T.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),T._evalUrl=function(e,t,i){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,i)}})},T.fn.extend({wrapAll:function(e){return this[0]&&(_(e)&&(e=e.call(this[0])),e=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return _(i)?this.each(function(e){T(this).wrapInner(i.call(this,e))}):this.each(function(){var e=T(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=_(t);return this.each(function(e){T(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Xt=T.ajaxSettings.xhr();g.cors=!!Xt&&"withCredentials"in Xt,g.ajax=Xt=!!Xt,T.ajaxTransport(function(r){var o,a;if(g.cors||Xt&&!r.crossDomain)return{send:function(e,t){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);o=function(e){return function(){o&&(o=a=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Wt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),a=n.onerror=n.ontimeout=o("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&w.setTimeout(function(){o&&a()})},o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),T.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),T.ajaxTransport("script",function(i){var n,r;if(i.crossDomain||i.scriptAttrs)return{send:function(e,t){n=T("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(e){n.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(n[0])},abort:function(){r&&r()}}});var Yt=[],Kt=/(=)\?(?=&|$)|\?\?/,Jt=(T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||T.expando+"_"+Pt.guid++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,o,a=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=_(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Kt,"$1"+n):!1!==e.jsonp&&(e.url+=(Mt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||T.error(n+" was not called"),o[0]},e.dataTypes[0]="json",r=w[n],w[n]=function(){o=arguments},i.always(function(){void 0===r?T(w).removeProp(n):w[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,Yt.push(n)),o&&_(r)&&r(o[0]),o=r=void 0}),"script"}),g.createHTMLDocument=((e=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),T.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(g.createHTMLDocument?((n=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(n)):t=C),n=!i&&[],(i=K.exec(e))?[t.createElement(i[1])]:(i=ke([e],t,n),n&&n.length&&T(n).remove(),T.merge([],i.childNodes)));var n},T.fn.load=function(e,t,i){var n,r,o,a=this,s=e.indexOf(" ");return-1<s&&(n=z(e.slice(s)),e=e.slice(0,s)),_(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&T.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?T("<div>").append(T.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},T.expr.pseudos.animated=function(t){return T.grep(T.timers,function(e){return t===e.elem}).length},T.offset={setOffset:function(e,t,i){var n,r,o,a,s=T.css(e,"position"),l=T(e),c={};"static"===s&&(e.style.position="relative"),o=l.offset(),n=T.css(e,"top"),a=T.css(e,"left"),s=("absolute"===s||"fixed"===s)&&-1<(n+a).indexOf("auto")?(r=(s=l.position()).top,s.left):(r=parseFloat(n)||0,parseFloat(a)||0),null!=(t=_(t)?t.call(e,i,T.extend({},o)):t).top&&(c.top=t.top-o.top+r),null!=t.left&&(c.left=t.left-o.left+s),"using"in t?t.using.call(e,c):("number"==typeof c.top&&(c.top+="px"),"number"==typeof c.left&&(c.left+="px"),l.css(c))}},T.fn.extend({offset:function(t){var e,i;return arguments.length?void 0===t?this:this.each(function(e){T.offset.setOffset(this,t,e)}):(i=this[0])?i.getClientRects().length?(e=i.getBoundingClientRect(),i=i.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===T.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((r=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),r.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-T.css(n,"marginTop",!0),left:t.left-r.left-T.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||x})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;T.fn[t]=function(e){return d(this,function(e,t,i){var n;if(m(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===i)return n?n[r]:e[t];n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):e[t]=i},t,e,arguments.length)}}),T.each(["top","left"],function(e,i){T.cssHooks[i]=Qe(g.pixelPosition,function(e,t){if(t)return t=Je(e,i),Ye.test(t)?T(e).position()[i]+"px":t})}),T.each({Height:"height",Width:"width"},function(a,s){T.each({padding:"inner"+a,content:s,"":"outer"+a},function(n,o){T.fn[o]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return d(this,function(e,t,i){var n;return m(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+a],n["scroll"+a],e.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?T.css(e,t,r):T.style(e,t,i,r)},s,i?e:void 0,i)}})}),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){T.fn[t]=function(e){return this.on(t,e)}}),T.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){T.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),Qt=(T.proxy=function(e,t){var i,n;if("string"==typeof t&&(n=e[t],t=e,e=n),_(e))return i=s.call(arguments,2),(n=function(){return e.apply(t||this,i.concat(s.call(arguments)))}).guid=e.guid=e.guid||T.guid++,n},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=l,T.isFunction=_,T.isWindow=m,T.camelCase=y,T.type=f,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},T.trim=function(e){return null==e?"":(e+"").replace(Jt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return T}),w.jQuery),ei=w.$;return T.noConflict=function(e){return w.$===T&&(w.$=ei),e&&w.jQuery===T&&(w.jQuery=Qt),T},void 0===O&&(w.jQuery=w.$=T),T}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(w){w.ui=w.ui||{},w.ui.version="1.13.1";var r,n,C,T,o,a,s,l,c,i,e,u=0,d=Array.prototype.hasOwnProperty,h=Array.prototype.slice;function S(e,t,i){return[parseFloat(e[0])*(c.test(e[0])?t/100:1),parseFloat(e[1])*(c.test(e[1])?i/100:1)]}function k(e,t){return parseInt(w.css(e,t),10)||0}function E(e){return null!=e&&e===e.window}w.cleanData=(r=w.cleanData,function(e){for(var t,i,n=0;null!=(i=e[n]);n++)(t=w._data(i,"events"))&&t.remove&&w(i).triggerHandler("remove");r(e)}),w.widget=function(e,i,t){var n,r,o,a={},s=e.split(".")[0],l=s+"-"+(e=e.split(".")[1]);return t||(t=i,i=w.Widget),Array.isArray(t)&&(t=w.extend.apply(null,[{}].concat(t))),w.expr.pseudos[l.toLowerCase()]=function(e){return!!w.data(e,l)},w[s]=w[s]||{},n=w[s][e],r=w[s][e]=function(e,t){if(!this||!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},w.extend(r,n,{version:t.version,_proto:w.extend({},t),_childConstructors:[]}),(o=new i).options=w.widget.extend({},o.options),w.each(t,function(t,n){function r(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}a[t]="function"==typeof n?function(){var e,t=this._super,i=this._superApply;return this._super=r,this._superApply=o,e=n.apply(this,arguments),this._super=t,this._superApply=i,e}:n}),r.prototype=w.widget.extend(o,{widgetEventPrefix:n&&o.widgetEventPrefix||e},a,{constructor:r,namespace:s,widgetName:e,widgetFullName:l}),n?(w.each(n._childConstructors,function(e,t){var i=t.prototype;w.widget(i.namespace+"."+i.widgetName,r,t._proto)}),delete n._childConstructors):i._childConstructors.push(r),w.widget.bridge(e,r),r},w.widget.extend=function(e){for(var t,i,n=h.call(arguments,1),r=0,o=n.length;r<o;r++)for(t in n[r])i=n[r][t],d.call(n[r],t)&&void 0!==i&&(w.isPlainObject(i)?e[t]=w.isPlainObject(e[t])?w.widget.extend({},e[t],i):w.widget.extend({},i):e[t]=i);return e},w.widget.bridge=function(o,t){var a=t.prototype.widgetFullName||o;w.fn[o]=function(i){var e="string"==typeof i,n=h.call(arguments,1),r=this;return e?this.length||"instance"!==i?this.each(function(){var e,t=w.data(this,a);return"instance"===i?(r=t,!1):t?"function"!=typeof t[i]||"_"===i.charAt(0)?w.error("no such method '"+i+"' for "+o+" widget instance"):(e=t[i].apply(t,n))!==t&&void 0!==e?(r=e&&e.jquery?r.pushStack(e.get()):e,!1):void 0:w.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):r=void 0:(n.length&&(i=w.widget.extend.apply(null,[i].concat(n))),this.each(function(){var e=w.data(this,a);e?(e.option(i||{}),e._init&&e._init()):w.data(this,a,new t(i,this))})),r}},w.Widget=function(){},w.Widget._childConstructors=[],w.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=w(t||this.defaultElement||this)[0],this.element=w(t),this.uuid=u++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=w(),this.hoverable=w(),this.focusable=w(),this.classesElementLookup={},t!==this&&(w.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=w(t.style?t.ownerDocument:t.document||t),this.window=w(this.document[0].defaultView||this.document[0].parentWindow)),this.options=w.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:w.noop,_create:w.noop,_init:w.noop,destroy:function(){var i=this;this._destroy(),w.each(this.classesElementLookup,function(e,t){i._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:w.noop,widget:function(){return this.element},option:function(e,t){var i,n,r,o=e;if(0===arguments.length)return w.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(i=e.split(".")).shift(),i.length){for(n=o[e]=w.widget.extend({},this.options[e]),r=0;r<i.length-1;r++)n[i[r]]=n[i[r]]||{},n=n[i[r]];if(e=i.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){for(var t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,i,n;for(t in e)n=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&n&&n.length&&(i=w(n.get()),this._removeClass(n,t),i.addClass(this._classes({element:i,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(r){var o=[],a=this;function e(e,t){for(var i,n=0;n<e.length;n++)i=a.classesElementLookup[e[n]]||w(),i=r.add?(function(){var i=[];r.element.each(function(e,t){w.map(a.classesElementLookup,function(e){return e}).some(function(e){return e.is(t)})||i.push(t)}),a._on(w(i),{remove:"_untrackClassesElement"})}(),w(w.uniqueSort(i.get().concat(r.element.get())))):w(i.not(r.element).get()),a.classesElementLookup[e[n]]=i,o.push(e[n]),t&&r.classes[e[n]]&&o.push(r.classes[e[n]])}return(r=w.extend({element:this.element,classes:this.options.classes||{}},r)).keys&&e(r.keys.match(/\S+/g)||[],!0),r.extra&&e(r.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(i){var n=this;w.each(n.classesElementLookup,function(e,t){-1!==w.inArray(i.target,t)&&(n.classesElementLookup[e]=w(t.not(i.target).get()))}),this._off(w(i.target))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){var r="string"==typeof e||null===e;return(i={extra:r?t:i,keys:r?e:t,element:r?this.element:e,add:n="boolean"==typeof n?n:i}).element.toggleClass(this._classes(i),n),this},_on:function(r,o,e){var a,s=this;"boolean"!=typeof r&&(e=o,o=r,r=!1),e?(o=a=w(o),this.bindings=this.bindings.add(o)):(e=o,o=this.element,a=this.widget()),w.each(e,function(e,t){function i(){if(r||!0!==s.options.disabled&&!w(this).hasClass("ui-state-disabled"))return("string"==typeof t?s[t]:t).apply(s,arguments)}"string"!=typeof t&&(i.guid=t.guid=t.guid||i.guid||w.guid++);var n=e.match(/^([\w:-]*)\s*(.*)$/),e=n[1]+s.eventNamespace;(n=n[2])?a.on(e,n,i):o.on(e,i)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t),this.bindings=w(this.bindings.not(e).get()),this.focusable=w(this.focusable.not(e).get()),this.hoverable=w(this.hoverable.not(e).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(w(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(w(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(w(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(w(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,i){var n,r,o=this.options[e];if(i=i||{},(t=w.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],r=t.originalEvent)for(n in r)n in t||(t[n]=r[n]);return this.element.trigger(t,i),!("function"==typeof o&&!1===o.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented())}},w.each({show:"fadeIn",hide:"fadeOut"},function(o,a){w.Widget.prototype["_"+o]=function(t,e,i){var n,r=(e="string"==typeof e?{effect:e}:e)?!0!==e&&"number"!=typeof e&&e.effect||a:o;"number"==typeof(e=e||{})?e={duration:e}:!0===e&&(e={}),n=!w.isEmptyObject(e),e.complete=i,e.delay&&t.delay(e.delay),n&&w.effects&&w.effects.effect[r]?t[o](e):r!==o&&t[r]?t[r](e.duration,e.easing,i):t.queue(function(e){w(this)[o](),i&&i.call(t[0]),e()})}}),w.widget,C=Math.max,T=Math.abs,o=/left|center|right/,a=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,c=/%$/,i=w.fn.position,w.position={scrollbarWidth:function(){var e,t,i;return void 0!==n?n:(i=(t=w("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")).children()[0],w("body").append(t),e=i.offsetWidth,t.css("overflow","scroll"),e===(i=i.offsetWidth)&&(i=t[0].clientWidth),t.remove(),n=e-i)},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),t="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?w.position.scrollbarWidth():0,height:t?w.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=w(e||window),i=E(t[0]),n=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:i,isDocument:n,offset:i||n?{left:0,top:0}:w(e).offset(),scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:t.outerWidth(),height:t.outerHeight()}}},w.fn.position=function(d){var h,p,f,m,g,e,v,_,y,b,x,t;return d&&d.of?(v="string"==typeof(d=w.extend({},d)).of?w(document).find(d.of):w(d.of),_=w.position.getWithinInfo(d.within),y=w.position.getScrollInfo(_),b=(d.collision||"flip").split(" "),x={},t=9===(e=(t=v)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:E(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()},v[0].preventDefault&&(d.at="left top"),p=t.width,f=t.height,g=w.extend({},m=t.offset),w.each(["my","at"],function(){var e,t,i=(d[this]||"").split(" ");(i=1===i.length?o.test(i[0])?i.concat(["center"]):a.test(i[0])?["center"].concat(i):["center","center"]:i)[0]=o.test(i[0])?i[0]:"center",i[1]=a.test(i[1])?i[1]:"center",e=s.exec(i[0]),t=s.exec(i[1]),x[this]=[e?e[0]:0,t?t[0]:0],d[this]=[l.exec(i[0])[0],l.exec(i[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===d.at[0]?g.left+=p:"center"===d.at[0]&&(g.left+=p/2),"bottom"===d.at[1]?g.top+=f:"center"===d.at[1]&&(g.top+=f/2),h=S(x.at,p,f),g.left+=h[0],g.top+=h[1],this.each(function(){var i,e,a=w(this),s=a.outerWidth(),l=a.outerHeight(),t=k(this,"marginLeft"),n=k(this,"marginTop"),r=s+t+k(this,"marginRight")+y.width,o=l+n+k(this,"marginBottom")+y.height,c=w.extend({},g),u=S(x.my,a.outerWidth(),a.outerHeight());"right"===d.my[0]?c.left-=s:"center"===d.my[0]&&(c.left-=s/2),"bottom"===d.my[1]?c.top-=l:"center"===d.my[1]&&(c.top-=l/2),c.left+=u[0],c.top+=u[1],i={marginLeft:t,marginTop:n},w.each(["left","top"],function(e,t){w.ui.position[b[e]]&&w.ui.position[b[e]][t](c,{targetWidth:p,targetHeight:f,elemWidth:s,elemHeight:l,collisionPosition:i,collisionWidth:r,collisionHeight:o,offset:[h[0]+u[0],h[1]+u[1]],my:d.my,at:d.at,within:_,elem:a})}),d.using&&(e=function(e){var t=m.left-c.left,i=t+p-s,n=m.top-c.top,r=n+f-l,o={target:{element:v,left:m.left,top:m.top,width:p,height:f},element:{element:a,left:c.left,top:c.top,width:s,height:l},horizontal:i<0?"left":0<t?"right":"center",vertical:r<0?"top":0<n?"bottom":"middle"};p<s&&T(t+i)<p&&(o.horizontal="center"),f<l&&T(n+r)<f&&(o.vertical="middle"),C(T(t),T(i))>C(T(n),T(r))?o.important="horizontal":o.important="vertical",d.using.call(this,e,o)}),a.offset(w.extend(c,{using:e}))})):i.apply(this,arguments)},w.ui.position={fit:{left:function(e,t){var i=t.within,n=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,o=e.left-t.collisionPosition.marginLeft,a=n-o,s=o+t.collisionWidth-r-n;t.collisionWidth>r?0<a&&s<=0?(i=e.left+a+t.collisionWidth-r-n,e.left+=a-i):e.left=!(0<s&&a<=0)&&s<a?n+r-t.collisionWidth:n:0<a?e.left+=a:0<s?e.left-=s:e.left=C(e.left-o,e.left)},top:function(e,t){var i=t.within,n=i.isWindow?i.scrollTop:i.offset.top,r=t.within.height,o=e.top-t.collisionPosition.marginTop,a=n-o,s=o+t.collisionHeight-r-n;t.collisionHeight>r?0<a&&s<=0?(i=e.top+a+t.collisionHeight-r-n,e.top+=a-i):e.top=!(0<s&&a<=0)&&s<a?n+r-t.collisionHeight:n:0<a?e.top+=a:0<s?e.top-=s:e.top=C(e.top-o,e.top)}},flip:{left:function(e,t){var i=(l=t.within).offset.left+l.scrollLeft,n=l.width,r=l.isWindow?l.scrollLeft:l.offset.left,o=(c=e.left-t.collisionPosition.marginLeft)-r,a=c+t.collisionWidth-n-r,s="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,l="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,c=-2*t.offset[0];o<0?((i=e.left+s+l+c+t.collisionWidth-n-i)<0||i<T(o))&&(e.left+=s+l+c):0<a&&(0<(r=e.left-t.collisionPosition.marginLeft+s+l+c-r)||T(r)<a)&&(e.left+=s+l+c)},top:function(e,t){var i=(l=t.within).offset.top+l.scrollTop,n=l.height,r=l.isWindow?l.scrollTop:l.offset.top,o=(c=e.top-t.collisionPosition.marginTop)-r,a=c+t.collisionHeight-n-r,s="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,l="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,c=-2*t.offset[1];o<0?((i=e.top+s+l+c+t.collisionHeight-n-i)<0||i<T(o))&&(e.top+=s+l+c):0<a&&(0<(r=e.top-t.collisionPosition.marginTop+s+l+c-r)||T(r)<a)&&(e.top+=s+l+c)}},flipfit:{left:function(){w.ui.position.flip.left.apply(this,arguments),w.ui.position.fit.left.apply(this,arguments)},top:function(){w.ui.position.flip.top.apply(this,arguments),w.ui.position.fit.top.apply(this,arguments)}}},w.ui.position,w.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},w.fn.extend({uniqueId:(e=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&w(this).removeAttr("id")})}}),w.ui.safeActiveElement=function(t){var i;try{i=t.activeElement}catch(e){i=t.body}return(i=i||t.body).nodeName?i:t.body},w.widget("ui.menu",{version:"1.13.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault(),this._activateItem(e)},"click .ui-menu-item":function(e){var t=w(e.target),i=w(w.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&t.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),t.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active)&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this._menuItems().first();t||this.focus(e,i)},blur:function(e){this._delay(function(){w.contains(this.element[0],w.ui.safeActiveElement(this.document[0]))||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e,!0),this.mouseHandled=!1}})},_activateItem:function(e){var t,i;this.previousFilter||e.clientX===this.lastMousePosition.x&&e.clientY===this.lastMousePosition.y||(this.lastMousePosition={x:e.clientX,y:e.clientY},t=w(e.target).closest(".ui-menu-item"),i=w(e.currentTarget),t[0]!==i[0])||i.is(".ui-state-active")||(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,i))},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each(function(){var e=w(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var t,i,n,r=!0;switch(e.keyCode){case w.ui.keyCode.PAGE_UP:this.previousPage(e);break;case w.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case w.ui.keyCode.HOME:this._move("first","first",e);break;case w.ui.keyCode.END:this._move("last","last",e);break;case w.ui.keyCode.UP:this.previous(e);break;case w.ui.keyCode.DOWN:this.next(e);break;case w.ui.keyCode.LEFT:this.collapse(e);break;case w.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case w.ui.keyCode.ENTER:case w.ui.keyCode.SPACE:this._activate(e);break;case w.ui.keyCode.ESCAPE:this.collapse(e);break;default:t=this.previousFilter||"",n=r=!1,i=96<=e.keyCode&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),i===t?n=!0:i=t+i,t=this._filterMenuItems(i),(t=n&&-1!==t.index(this.active.next())?this.active.nextAll(".ui-menu-item"):t).length||(i=String.fromCharCode(e.keyCode),t=this._filterMenuItems(i)),t.length?(this.focus(e,t),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}r&&e.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var e,t,n=this,r=this.options.icons.submenu,i=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),t=i.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=w(this),t=e.prev(),i=w("<span>").data("ui-menu-submenu-caret",!0);n._addClass(i,"ui-menu-icon","ui-icon "+r),t.attr("aria-haspopup","true").prepend(i),e.attr("aria-labelledby",t.attr("id"))}),this._addClass(t,"ui-menu","ui-widget ui-widget-content ui-front"),(e=i.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var e=w(this);n._isDivider(e)&&n._addClass(e,"ui-menu-divider","ui-widget-content")}),i=(t=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(t,"ui-menu-item")._addClass(i,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!w.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){var i;"icons"===e&&(i=this.element.find(".ui-menu-icon"),this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(e){var t,i,n;this._hasScroll()&&(i=parseFloat(w.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(w.css(this.activeMenu[0],"paddingTop"))||0,t=e.offset().top-this.activeMenu.offset().top-i-n,i=this.activeMenu.scrollTop(),n=this.activeMenu.height(),e=e.outerHeight(),t<0?this.activeMenu.scrollTop(i+t):n<t+e&&this.activeMenu.scrollTop(i+t-n+e))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(e){var t=w.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var e=i?this.element:w(t&&t.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element),this._close(e),this.blur(t),this._removeClass(e.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=e},i?0:this.delay)},_close:function(e){(e=e||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!w(e.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,i){var n;(n=this.active?"first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").last():this.active[e+"All"](".ui-menu-item").first():n)&&n.length&&this.active||(n=this._menuItems(this.activeMenu)[t]()),this.focus(i,n)},nextPage:function(e){var t,i,n;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.innerHeight(),0===w.fn.jquery.indexOf("3.2.")&&(n+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each(function(){return(t=w(this)).offset().top-i-n<0}),this.focus(e,t)):this.focus(e,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var t,i,n;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.innerHeight(),0===w.fn.jquery.indexOf("3.2.")&&(n+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each(function(){return 0<(t=w(this)).offset().top-i+n}),this.focus(e,t)):this.focus(e,this._menuItems(this.activeMenu).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||w(e.target).closest(".ui-menu-item");var t={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,t)},_filterMenuItems:function(e){var e=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),t=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return t.test(String.prototype.trim.call(w(this).children(".ui-menu-item-wrapper").text()))})}}),w.widget("ui.autocomplete",{version:"1.13.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var i,n,r,e="textarea"===(t=this.element[0].nodeName.toLowerCase()),t="input"===t;this.isMultiLine=e||!t&&this._isContentEditable(this.element),this.valueMethod=this.element[e||t?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))n=r=i=!0;else{n=r=i=!1;var t=w.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:i=!0,this._move("previousPage",e);break;case t.PAGE_DOWN:i=!0,this._move("nextPage",e);break;case t.UP:i=!0,this._keyEvent("previous",e);break;case t.DOWN:i=!0,this._keyEvent("next",e);break;case t.ENTER:this.menu.active&&(i=!0,e.preventDefault(),this.menu.select(e));break;case t.TAB:this.menu.active&&this.menu.select(e);break;case t.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:n=!0,this._searchTimeout(e)}}},keypress:function(e){if(i)i=!1,this.isMultiLine&&!this.menu.element.is(":visible")||e.preventDefault();else if(!n){var t=w.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:this._move("previousPage",e);break;case t.PAGE_DOWN:this._move("nextPage",e);break;case t.UP:this._keyEvent("previous",e);break;case t.DOWN:this._keyEvent("next",e)}}},input:function(e){r?(r=!1,e.preventDefault()):this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=w("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(e,t){var i,n;this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent)&&/^mouse/.test(e.originalEvent.type)?(this.menu.blur(),this.document.one("mousemove",function(){w(e.target).trigger(e.originalEvent)})):(n=t.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:n})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value),(i=t.item.attr("aria-label")||n.value)&&String.prototype.trim.call(i).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(w("<div>").text(i))},100)))},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==w.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=w("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var t=this.menu.element[0];return e.target===this.element[0]||e.target===t||w.contains(t,e.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var e=this.options.appendTo;return(e=(e=e&&(e.jquery||e.nodeType?w(e):this.document.find(e).eq(0)))&&e[0]?e:this.element.closest(".ui-front, dialog")).length?e:this.document[0].body},_initSource:function(){var i,n,r=this;Array.isArray(this.options.source)?(i=this.options.source,this.source=function(e,t){t(w.ui.autocomplete.filter(i,e.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,t){r.xhr&&r.xhr.abort(),r.xhr=w.ajax({url:n,data:e,dataType:"json",success:function(e){t(e)},error:function(){t([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),t=this.menu.element.is(":visible"),i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;e&&(t||i)||(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(e){e=e&&this._normalize(e),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:w.map(e,function(e){return"string"==typeof e?{label:e,value:e}:w.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),t.show(),this._resizeMenu(),t.position(w.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,e){var n=this;w.each(e,function(e,t){n._renderItemData(i,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){return w("<li>").append(w("<div>").text(t.label)).appendTo(e)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){var t;return!!e.length&&("inherit"===(t=e.prop("contentEditable"))?this._isContentEditable(e.parent()):"true"===t)}}),w.extend(w.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var i=new RegExp(w.ui.autocomplete.escapeRegex(t),"i");return w.grep(e,function(e){return i.test(e.label||e.value||e)})}}),w.widget("ui.autocomplete",w.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(1<e?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(w("<div>").text(t))},100))}}),w.ui.autocomplete,w.widget("ui.tooltip",{version:"1.13.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=w(this).attr("title");return w("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,t){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(t),e.data("ui-tooltip-id",t).attr("aria-describedby",String.prototype.trim.call(i.join(" ")))},_removeDescribedBy:function(e){var t=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/);-1!==(t=w.inArray(t,i))&&i.splice(t,1),e.removeData("ui-tooltip-id"),(i=String.prototype.trim.call(i.join(" ")))?e.attr("aria-describedby",i):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=w("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=w([])},_setOption:function(e,t){var i=this;this._super(e,t),"content"===e&&w.each(this.tooltips,function(e,t){i._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var n=this;w.each(this.tooltips,function(e,t){var i=w.Event("blur");i.target=i.currentTarget=t.element[0],n.close(i,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=w(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var e=w(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))}),this.disabledTitles=w([])},open:function(e){var i=this,t=w(e?e.target:this.element).closest(this.options.items);t.length&&!t.data("ui-tooltip-id")&&(t.attr("title")&&t.data("ui-tooltip-title",t.attr("title")),t.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&t.parents().each(function(){var e,t=w(this);t.data("ui-tooltip-open")&&((e=w.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),t.attr("title")&&(t.uniqueId(),i.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._registerCloseHandlers(e,t),this._updateContent(t,e))},_updateContent:function(t,i){var e=this.options.content,n=this,r=i?i.type:null;if("string"==typeof e||e.nodeType||e.jquery)return this._open(i,t,e);(e=e.call(t[0],function(e){n._delay(function(){t.data("ui-tooltip-open")&&(i&&(i.type=r),this._open(i,t,e))})}))&&this._open(i,t,e)},_open:function(e,t,i){var n,r,o,a=w.extend({},this.options.position);function s(e){a.of=e,r.is(":hidden")||r.position(a)}i&&((n=this._find(t))?n.tooltip.find(".ui-tooltip-content").html(i):(t.is("[title]")&&(e&&"mouseover"===e.type?t.attr("title",""):t.removeAttr("title")),n=this._tooltip(t),r=n.tooltip,this._addDescribedBy(t,r.attr("id")),r.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),(i=w("<div>").html(r.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),i.removeAttr("id").find("[id]").removeAttr("id"),i.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:s}),s(e)):r.position(w.extend({of:t},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){r.is(":visible")&&(s(a.of),clearInterval(o))},13)),this._trigger("open",e,{tooltip:r})))},_registerCloseHandlers:function(e,t){var i={keyup:function(e){e.keyCode===w.ui.keyCode.ESCAPE&&((e=w.Event(e)).currentTarget=t[0],this.close(e,!0))}};t[0]!==this.element[0]&&(i.remove=function(){var e=this._find(t);e&&this._removeTooltip(e.tooltip)}),e&&"mouseover"!==e.type||(i.mouseleave="close"),e&&"focusin"!==e.type||(i.focusout="close"),this._on(!0,t,i)},close:function(e){var t,i=this,n=w(e?e.currentTarget:this.element),r=this._find(n);r?(t=r.tooltip,r.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),r.hiding=!0,t.stop(!0),this._hide(t,this.options.hide,function(){i._removeTooltip(w(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&w.each(this.parents,function(e,t){w(t.element).attr("title",t.title),delete i.parents[e]}),r.closing=!0,this._trigger("close",e,{tooltip:t}),r.hiding)||(r.closing=!1)):n.removeData("ui-tooltip-open")},_tooltip:function(e){var t=w("<div>").attr("role","tooltip"),i=w("<div>").appendTo(t),n=t.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(t,"ui-tooltip","ui-widget ui-widget-content"),t.appendTo(this._appendTo(e)),this.tooltips[n]={element:e,tooltip:t}},_find:function(e){return(e=e.data("ui-tooltip-id"))?this.tooltips[e]:null},_removeTooltip:function(e){clearInterval(this.delayedShow),e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){return(e=e.closest(".ui-front, dialog")).length?e:this.document[0].body},_destroy:function(){var n=this;w.each(this.tooltips,function(e,t){var i=w.Event("blur"),t=t.element;i.target=i.currentTarget=t[0],n.close(i,!0),w("#"+e).remove(),t.data("ui-tooltip-title")&&(t.attr("title")||t.attr("title",t.data("ui-tooltip-title")),t.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==w.uiBackCompat&&w.widget("ui.tooltip",w.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),w.ui.tooltip}),JustGage=function(e){var m=this;if(null==e)return console.log("* justgage: Make sure to pass options to the constructor!"),!1;if(null!==e.id&&void 0!==e.id){if(!(_=document.getElementById(e.id)))return console.log("* justgage: No element with id : %s found",e.id),!1}else{if(null===e.parentNode||void 0===e.parentNode)return console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor."),!1;_=e.parentNode}var t,i,n,r,o,a,s,l,c,u,d,h,p,f,g,v,_=_.dataset||{},y=null!==e.defaults&&void 0!==e.defaults&&e.defaults,b=(!1!==y&&delete(e=extend({},e,y)).defaults,m.config={id:e.id,value:kvLookup("value",e,_,0,"float"),defaults:kvLookup("defaults",e,_,0,!1),parentNode:kvLookup("parentNode",e,_,null),width:kvLookup("width",e,_,null),height:kvLookup("height",e,_,null),title:kvLookup("title",e,_,""),titleFontColor:kvLookup("titleFontColor",e,_,"#999999"),titleFontFamily:kvLookup("titleFontFamily",e,_,"sans-serif"),titlePosition:kvLookup("titlePosition",e,_,"above"),valueFontColor:kvLookup("valueFontColor",e,_,"#010101"),valueFontFamily:kvLookup("valueFontFamily",e,_,"Arial"),symbol:kvLookup("symbol",e,_,""),min:kvLookup("min",e,_,0,"float"),max:kvLookup("max",e,_,100,"float"),reverse:kvLookup("reverse",e,_,!1),humanFriendlyDecimal:kvLookup("humanFriendlyDecimal",e,_,0),textRenderer:kvLookup("textRenderer",e,_,null),gaugeWidthScale:kvLookup("gaugeWidthScale",e,_,1),gaugeColor:kvLookup("gaugeColor",e,_,"#edebeb"),label:kvLookup("label",e,_,""),labelFontColor:kvLookup("labelFontColor",e,_,"#b3b3b3"),shadowOpacity:kvLookup("shadowOpacity",e,_,.2),shadowSize:kvLookup("shadowSize",e,_,5),shadowVerticalOffset:kvLookup("shadowVerticalOffset",e,_,3),levelColors:kvLookup("levelColors",e,_,["#a9d70b","#f9c802","#ff0000"],"array",","),startAnimationTime:kvLookup("startAnimationTime",e,_,700),startAnimationType:kvLookup("startAnimationType",e,_,">"),refreshAnimationTime:kvLookup("refreshAnimationTime",e,_,700),refreshAnimationType:kvLookup("refreshAnimationType",e,_,">"),donutStartAngle:kvLookup("donutStartAngle",e,_,90),valueMinFontSize:kvLookup("valueMinFontSize",e,_,16),titleMinFontSize:kvLookup("titleMinFontSize",e,_,10),labelMinFontSize:kvLookup("labelMinFontSize",e,_,10),minLabelMinFontSize:kvLookup("minLabelMinFontSize",e,_,10),maxLabelMinFontSize:kvLookup("maxLabelMinFontSize",e,_,10),hideValue:kvLookup("hideValue",e,_,!1),hideMinMax:kvLookup("hideMinMax",e,_,!1),hideInnerShadow:kvLookup("hideInnerShadow",e,_,!1),humanFriendly:kvLookup("humanFriendly",e,_,!1),noGradient:kvLookup("noGradient",e,_,!1),donut:kvLookup("donut",e,_,!1),relativeGaugeSize:kvLookup("relativeGaugeSize",e,_,!1),counter:kvLookup("counter",e,_,!1),decimals:kvLookup("decimals",e,_,0),customSectors:kvLookup("customSectors",e,_,[]),formatNumber:kvLookup("formatNumber",e,_,!1),pointer:kvLookup("pointer",e,_,!1),pointerOptions:kvLookup("pointerOptions",e,_,[])},m.config.value>m.config.max&&(m.config.value=m.config.max),m.config.value<m.config.min&&(m.config.value=m.config.min),m.originalValue=kvLookup("value",e,_,-1,"float"),null!==m.config.id&&null!==document.getElementById(m.config.id)?m.canvas=Raphael(m.config.id,"100%","100%"):null!==m.config.parentNode&&(m.canvas=Raphael(m.config.parentNode,"100%","100%")),!0===m.config.relativeGaugeSize&&m.canvas.setViewBox(0,0,200,150,!0),y=!0===m.config.relativeGaugeSize?(b=200,150):null!==m.config.width&&null!==m.config.height?(b=m.config.width,m.config.height):null!==m.config.parentNode?(m.canvas.setViewBox(0,0,200,150,!0),b=200,150):(b=+getStyle(document.getElementById(m.config.id),"width").slice(0,-2),+getStyle(document.getElementById(m.config.id),"height").slice(0,-2)),v=(_=(e=!0===m.config.donut?(y<b?C=t=y:b<y?y<(t=C=b)&&(C=(t/=v=t/y)/v):t=C=b,r=10<t/8?t/10:10,a=(n=(y-t)/2)+t/11,s=16<t/6.4?t/5.4:18,c=""!==m.config.label?n+t/1.85:n+t/1.7,d=l=o=(i=(b-C)/2)+C/2,f=i+C/10+C/6.666666666666667*m.config.gaugeWidthScale/2,g=h=c+(u=10<t/16?t/16:10),p=10<t/16?t/16:10):(y<b?b<(C=1.25*(t=y))&&(C/=v=C/b,t/=v):b<y?y<(t=(C=b)/1.25)&&(C=(t/=v=t/y)/v):t=.75*(C=b),n=(y-t)/2,"below"===m.config.titlePosition&&(n-=t/6.4),r=t/8>m.config.titleMinFontSize?t/10:m.config.titleMinFontSize,a=n+("below"===m.config.titlePosition?1.07*t:t/6.4),s=t/6.5>m.config.valueMinFontSize?t/6.5:m.config.valueMinFontSize,u=t/16>m.config.labelMinFontSize?t/16:m.config.labelMinFontSize,d=l=o=(i=(b-C)/2)+C/2,p=t/16>m.config.minLabelMinFontSize?t/16:m.config.minLabelMinFontSize,f=i+C/10+C/6.666666666666667*m.config.gaugeWidthScale/2,g=h=(c=n+t/1.275)+s/2+5,t/16>m.config.maxLabelMinFontSize?t/16:m.config.maxLabelMinFontSize),i+C-C/10-C/6.666666666666667*m.config.gaugeWidthScale/2),h),m.params={canvasW:b,canvasH:y,widgetW:C,widgetH:t,dx:i,dy:n,titleFontSize:r,titleX:o,titleY:a,valueFontSize:s,valueX:l,valueY:c,labelFontSize:u,labelX:d,labelY:h,minFontSize:p,minX:f,minY:g,maxFontSize:e,maxX:_,maxY:v},v=null,m.canvas.customAttributes.pki=function(e,t,i,n,r,o,a,s,l,c){var u,d,h,p,f,m;return l?(u=(1-2*(e-t)/(i-t))*Math.PI,m="M"+((p=n/2+o)-(h=(d=n/2-n/7)-n/6.666666666666667*s))+","+(f=r/1.95+a)+" ",m+="L"+(p-d)+","+f+" ",(i-t)/2<e&&(m+="A"+d+","+d+" 0 0 1 "+(p+d)+","+f+" "),m=m+("A"+d+","+d+" 0 0 1 "+(n/2+o+d*Math.cos(u))+","+(r-(r-f)-d*Math.sin(u)))+" L"+(n/2+o+h*Math.cos(u))+","+(r-(r-f)-h*Math.sin(u))+" ",(i-t)/2<e&&(m+="A"+h+","+h+" 0 0 0 "+(p+h)+","+f+" "),{path:m=m+("A"+h+","+h+" 0 0 0 "+(p-h)+","+f+" ")+"Z "}):(u=(1-(e-t)/(i-t))*Math.PI,m="M"+((p=n/2+o)-(h=(d=n/2-n/10)-n/6.666666666666667*s))+","+(f=r/1.25+a)+" ",{path:m=(m=(m+="L"+(p-d)+","+f+" ")+("A"+d+","+d+" 0 0 1 "+(n/2+o+d*Math.cos(u))+","+(r-(r-f)-d*Math.sin(u))+" ")+("L"+(n/2+o+h*Math.cos(u))+","+(r-(r-f)-h*Math.sin(u))+" "))+("A"+h+","+h+" 0 0 0 "+(p-h)+","+f+" ")+"Z "})},m.canvas.customAttributes.ndl=function(e,t,i,n,r,o,a,s,l){var c,u,d,h=3.5*n/100,p=n/15,f=n/100;return null!=m.config.pointerOptions.toplength&&null!=m.config.pointerOptions.toplength&&(h=m.config.pointerOptions.toplength),null!=m.config.pointerOptions.bottomlength&&null!=m.config.pointerOptions.bottomlength&&(p=m.config.pointerOptions.bottomlength),null!=m.config.pointerOptions.bottomwidth&&null!=m.config.pointerOptions.bottomwidth&&(f=m.config.pointerOptions.bottomwidth),r=(o=(n=(d=(a=(s=(t=(i=(e=(l=l?(c=(1-2*(e-t)/(i-t))*Math.PI,u=(d=n/2-n/7)-n/6.666666666666667*s,r/1.95+a):(c=(1-(e-t)/(i-t))*Math.PI,u=(d=n/2-n/10)-n/6.666666666666667*s,r/1.25+a),n/2+o+d*Math.cos(c)),r-(r-l)-d*Math.sin(c)),n/2+o+u*Math.cos(c)),r-(r-l)-u*Math.sin(c)),e+h*Math.cos(c)),i-h*Math.sin(c)),t-p*Math.cos(c)),s+p*Math.sin(c)),"M"+(n+f*Math.sin(c))+","+(o+f*Math.cos(c))+" "),{path:r=(r+="L"+(n-f*Math.sin(c))+","+(o-f*Math.cos(c))+" ")+("L"+a+","+d+" ")+"Z "}},m.gauge=m.canvas.path().attr({stroke:"none",fill:m.config.gaugeColor,pki:[m.config.max,m.config.min,m.config.max,m.params.widgetW,m.params.widgetH,m.params.dx,m.params.dy,m.config.gaugeWidthScale,m.config.donut,m.config.reverse]}),m.level=m.canvas.path().attr({stroke:"none",fill:getColor(m.config.value,(m.config.value-m.config.min)/(m.config.max-m.config.min),m.config.levelColors,m.config.noGradient,m.config.customSectors),pki:[m.config.min,m.config.min,m.config.max,m.params.widgetW,m.params.widgetH,m.params.dx,m.params.dy,m.config.gaugeWidthScale,m.config.donut,m.config.reverse]}),m.config.donut&&m.level.transform("r"+m.config.donutStartAngle+", "+(m.params.widgetW/2+m.params.dx)+", "+(m.params.widgetH/1.95+m.params.dy)),m.config.pointer&&(m.needle=m.canvas.path().attr({stroke:null!==m.config.pointerOptions.stroke&&void 0!==m.config.pointerOptions.stroke?m.config.pointerOptions.stroke:"none","stroke-width":null!==m.config.pointerOptions.stroke_width&&void 0!==m.config.pointerOptions.stroke_width?m.config.pointerOptions.stroke_width:0,"stroke-linecap":null!==m.config.pointerOptions.stroke_linecap&&void 0!==m.config.pointerOptions.stroke_linecap?m.config.pointerOptions.stroke_linecap:"square",fill:null!==m.config.pointerOptions.color&&void 0!==m.config.pointerOptions.color?m.config.pointerOptions.color:"#000000",ndl:[m.config.min,m.config.min,m.config.max,m.params.widgetW,m.params.widgetH,m.params.dx,m.params.dy,m.config.gaugeWidthScale,m.config.donut]}),m.config.donut)&&m.needle.transform("r"+m.config.donutStartAngle+", "+(m.params.widgetW/2+m.params.dx)+", "+(m.params.widgetH/1.95+m.params.dy)),m.txtTitle=m.canvas.text(m.params.titleX,m.params.titleY,m.config.title),m.txtTitle.attr({"font-size":m.params.titleFontSize,"font-weight":"bold","font-family":m.config.titleFontFamily,fill:m.config.titleFontColor,"fill-opacity":"1"}),setDy(m.txtTitle,m.params.titleFontSize,m.params.titleY),m.txtValue=m.canvas.text(m.params.valueX,m.params.valueY,0),m.txtValue.attr({"font-size":m.params.valueFontSize,"font-weight":"bold","font-family":m.config.valueFontFamily,fill:m.config.valueFontColor,"fill-opacity":"0"}),setDy(m.txtValue,m.params.valueFontSize,m.params.valueY),m.txtLabel=m.canvas.text(m.params.labelX,m.params.labelY,m.config.label),m.txtLabel.attr({"font-size":m.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:m.config.labelFontColor,"fill-opacity":"0"}),setDy(m.txtLabel,m.params.labelFontSize,m.params.labelY),m.config.min),y=(m.config.reverse&&(b=m.config.max),m.txtMinimum=b,m.config.humanFriendly?m.txtMinimum=humanFriendlyNumber(b,m.config.humanFriendlyDecimal):m.config.formatNumber&&(m.txtMinimum=formatNumber(b)),m.txtMin=m.canvas.text(m.params.minX,m.params.minY,m.txtMinimum),m.txtMin.attr({"font-size":m.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:m.config.labelFontColor,"fill-opacity":m.config.hideMinMax||m.config.donut?"0":"1"}),setDy(m.txtMin,m.params.minFontSize,m.params.minY),m.config.max),x=(m.config.reverse&&(y=m.config.min),m.txtMaximum=y,m.config.humanFriendly?m.txtMaximum=humanFriendlyNumber(y,m.config.humanFriendlyDecimal):m.config.formatNumber&&(m.txtMaximum=formatNumber(y)),m.txtMax=m.canvas.text(m.params.maxX,m.params.maxY,m.txtMaximum),m.txtMax.attr({"font-size":m.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:m.config.labelFontColor,"fill-opacity":m.config.hideMinMax||m.config.donut?"0":"1"}),setDy(m.txtMax,m.params.maxFontSize,m.params.maxY),m.canvas.canvas.childNodes[1]),w="http://www.w3.org/2000/svg",C=("undefined"!==ie&&ie<9||("undefined"!==ie?onCreateElementNsReady(function(){m.generateShadow(w,x)}):m.generateShadow(w,x)),w=null,m.config.textRenderer?m.originalValue=m.config.textRenderer(m.originalValue):m.config.humanFriendly?m.originalValue=humanFriendlyNumber(m.originalValue,m.config.humanFriendlyDecimal)+m.config.symbol:m.config.formatNumber?m.originalValue=formatNumber(m.originalValue)+m.config.symbol:m.originalValue=(+m.originalValue).toFixed(m.config.decimals)+m.config.symbol,!0===m.config.counter?(eve.on("raphael.anim.frame."+m.level.id,function(){var e=m.level.attr("pki")[0];m.config.reverse&&(e=+m.config.max+ +m.config.min-+m.level.attr("pki")[0]),m.config.textRenderer?m.txtValue.attr("text",m.config.textRenderer(Math.floor(e))):m.config.humanFriendly?m.txtValue.attr("text",humanFriendlyNumber(Math.floor(e),m.config.humanFriendlyDecimal)+m.config.symbol):m.config.formatNumber?m.txtValue.attr("text",formatNumber(Math.floor(e))+m.config.symbol):m.txtValue.attr("text",(+e).toFixed(m.config.decimals)+m.config.symbol),setDy(m.txtValue,m.params.valueFontSize,m.params.valueY)}),eve.on("raphael.anim.finish."+m.level.id,function(){m.txtValue.attr({text:m.originalValue}),setDy(m.txtValue,m.params.valueFontSize,m.params.valueY)})):eve.on("raphael.anim.start."+m.level.id,function(){m.txtValue.attr({text:m.originalValue}),setDy(m.txtValue,m.params.valueFontSize,m.params.valueY)}),m.config.value);m.config.reverse&&(C=+m.config.max+ +m.config.min-+m.config.value),m.level.animate({pki:[C,m.config.min,m.config.max,m.params.widgetW,m.params.widgetH,m.params.dx,m.params.dy,m.config.gaugeWidthScale,m.config.donut,m.config.reverse]},m.config.startAnimationTime,m.config.startAnimationType),m.config.pointer&&m.needle.animate({ndl:[C,m.config.min,m.config.max,m.params.widgetW,m.params.widgetH,m.params.dx,m.params.dy,m.config.gaugeWidthScale,m.config.donut]},m.config.startAnimationTime,m.config.startAnimationType),m.txtValue.animate({"fill-opacity":m.config.hideValue?"0":"1"},m.config.startAnimationTime,m.config.startAnimationType),m.txtLabel.animate({"fill-opacity":"1"},m.config.startAnimationTime,m.config.startAnimationType)},JustGage.prototype.refresh=function(e,t){var i,n=this,e=(null!==(t=t||null)&&(n.config.max=t,n.txtMaximum=n.config.max,n.config.humanFriendly?n.txtMaximum=humanFriendlyNumber(n.config.max,n.config.humanFriendlyDecimal):n.config.formatNumber&&(n.txtMaximum=formatNumber(n.config.max)),n.config.reverse?(n.txtMin.attr({text:n.txtMaximum}),setDy(n.txtMin,n.params.minFontSize,n.params.minY)):(n.txtMax.attr({text:n.txtMaximum}),setDy(n.txtMax,n.params.maxFontSize,n.params.maxY))),i=getColor(e=+(e=+(t=e)>+n.config.max?+n.config.max:e)<+n.config.min?+n.config.min:e,(e-n.config.min)/(n.config.max-n.config.min),n.config.levelColors,n.config.noGradient,n.config.customSectors),t=n.config.textRenderer?n.config.textRenderer(t):n.config.humanFriendly?humanFriendlyNumber(t,n.config.humanFriendlyDecimal)+n.config.symbol:n.config.formatNumber?formatNumber((+t).toFixed(n.config.decimals))+n.config.symbol:(+t).toFixed(n.config.decimals)+n.config.symbol,n.originalValue=t,n.config.value=+e,n.config.counter||(n.txtValue.attr({text:t}),setDy(n.txtValue,n.params.valueFontSize,n.params.valueY)),n.config.value);n.config.reverse&&(e=+n.config.max+ +n.config.min-+n.config.value),n.level.animate({pki:[e,n.config.min,n.config.max,n.params.widgetW,n.params.widgetH,n.params.dx,n.params.dy,n.config.gaugeWidthScale,n.config.donut,n.config.reverse],fill:i},n.config.refreshAnimationTime,n.config.refreshAnimationType),n.config.pointer&&n.needle.animate({ndl:[e,n.config.min,n.config.max,n.params.widgetW,n.params.widgetH,n.params.dx,n.params.dy,n.config.gaugeWidthScale,n.config.donut]},n.config.refreshAnimationTime,n.config.refreshAnimationType)},JustGage.prototype.generateShadow=function(e,t){var i=this,n="inner-shadow-"+i.config.id,r=document.createElementNS(e,"filter");r.setAttribute("id",n),t.appendChild(r),(t=document.createElementNS(e,"feOffset")).setAttribute("dx",0),t.setAttribute("dy",i.config.shadowVerticalOffset),r.appendChild(t),(t=document.createElementNS(e,"feGaussianBlur")).setAttribute("result","offset-blur"),t.setAttribute("stdDeviation",i.config.shadowSize),r.appendChild(t),(t=document.createElementNS(e,"feComposite")).setAttribute("operator","out"),t.setAttribute("in","SourceGraphic"),t.setAttribute("in2","offset-blur"),t.setAttribute("result","inverse"),r.appendChild(t),(t=document.createElementNS(e,"feFlood")).setAttribute("flood-color","black"),t.setAttribute("flood-opacity",i.config.shadowOpacity),t.setAttribute("result","color"),r.appendChild(t),(t=document.createElementNS(e,"feComposite")).setAttribute("operator","in"),t.setAttribute("in","color"),t.setAttribute("in2","inverse"),t.setAttribute("result","shadow"),r.appendChild(t),(t=document.createElementNS(e,"feComposite")).setAttribute("operator","over"),t.setAttribute("in","shadow"),t.setAttribute("in2","SourceGraphic"),r.appendChild(t),i.config.hideInnerShadow||(i.canvas.canvas.childNodes[2].setAttribute("filter","url(#"+n+")"),i.canvas.canvas.childNodes[3].setAttribute("filter","url(#"+n+")"))};var ie=function(){for(var e=3,t=document.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",i[0];);return 4<e?e:void 0}();function extend(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&(e[i]=arguments[t][i]);return e}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Recorder=t():e.Recorder=t()}("undefined"!=typeof self?self:this,function(){return i=[function(e,t,i){!function(i){function t(e){if(!t.isRecordingSupported())throw new Error("Recording is not supported in this browser");this.state="inactive",this.config=Object.assign({bufferLength:4096,encoderApplication:2049,encoderFrameSize:20,encoderPath:"/static/js/encoderWorker.min.js",encoderSampleRate:48e3,leaveStreamOpen:!1,maxBuffersPerPage:40,mediaTrackConstraints:!0,monitorGain:0,numberOfChannels:1,recordingGain:1,resampleQuality:3,streamPages:!1,wavBitDepth:16},e),this.initWorker()}var n=i.AudioContext||i.webkitAudioContext;t.isRecordingSupported=function(){return n&&i.navigator&&i.navigator.mediaDevices&&i.navigator.mediaDevices.getUserMedia&&i.WebAssembly},t.prototype.clearStream=function(){this.stream&&(this.stream.getTracks?this.stream.getTracks().forEach(function(e){e.stop()}):this.stream.stop(),delete this.stream),this.audioContext&&(this.audioContext.close(),delete this.audioContext)},t.prototype.encodeBuffers=function(e){if("recording"===this.state){for(var t=[],i=0;i<e.numberOfChannels;i++)t[i]=e.getChannelData(i);this.encoder.postMessage({command:"encode",buffers:t})}},t.prototype.initAudioContext=function(e){return e&&e.context&&(this.audioContext=e.context),this.audioContext||(this.audioContext=new n),this.audioContext},t.prototype.initAudioGraph=function(){var t=this;this.encodeBuffers=function(){delete this.encodeBuffers},this.scriptProcessorNode=this.audioContext.createScriptProcessor(this.config.bufferLength,this.config.numberOfChannels,this.config.numberOfChannels),this.scriptProcessorNode.connect(this.audioContext.destination),this.scriptProcessorNode.onaudioprocess=function(e){t.encodeBuffers(e.inputBuffer)},this.monitorGainNode=this.audioContext.createGain(),this.setMonitorGain(this.config.monitorGain),this.monitorGainNode.connect(this.audioContext.destination),this.recordingGainNode=this.audioContext.createGain(),this.setRecordingGain(this.config.recordingGain),this.recordingGainNode.connect(this.scriptProcessorNode)},t.prototype.initSourceNode=function(e){var t=this;return e&&e.context?i.Promise.resolve(e):this.stream&&this.sourceNode?i.Promise.resolve(this.sourceNode):i.navigator.mediaDevices.getUserMedia({audio:this.config.mediaTrackConstraints}).then(function(e){return t.stream=e,t.audioContext.createMediaStreamSource(e)})},t.prototype.initWorker=function(){var t=this;this.recordedPages=[],this.totalLength=0,this.encoder=new i.Worker(this.config.encoderPath),this.encoder.addEventListener("message",this.config.streamPages?function(e){t.streamPage(e.data)}:function(e){t.storePage(e.data)})},t.prototype.pause=function(){"recording"===this.state&&(this.state="paused",this.onpause())},t.prototype.resume=function(){"paused"===this.state&&(this.state="recording",this.onresume())},t.prototype.setRecordingGain=function(e){this.config.recordingGain=e,this.recordingGainNode&&this.audioContext&&this.recordingGainNode.gain.setTargetAtTime(e,this.audioContext.currentTime,.01)},t.prototype.setMonitorGain=function(e){this.config.monitorGain=e,this.monitorGainNode&&this.audioContext&&this.monitorGainNode.gain.setTargetAtTime(e,this.audioContext.currentTime,.01)},t.prototype.start=function(e){var t;if("inactive"===this.state)return(t=this).initAudioContext(e),this.initAudioGraph(),this.initSourceNode(e).then(function(e){t.state="recording",t.encoder.postMessage(Object.assign({command:"init",originalSampleRate:t.audioContext.sampleRate,wavSampleRate:t.audioContext.sampleRate},t.config)),t.sourceNode=e,t.sourceNode.connect(t.monitorGainNode),t.sourceNode.connect(t.recordingGainNode),t.onstart()})},t.prototype.stop=function(){"inactive"!==this.state&&(this.state="inactive",this.monitorGainNode.disconnect(),this.scriptProcessorNode.disconnect(),this.recordingGainNode.disconnect(),this.sourceNode.disconnect(),this.config.leaveStreamOpen||this.clearStream(),this.encoder.postMessage({command:"done"}))},t.prototype.storePage=function(e){var i;null===e?(i=new Uint8Array(this.totalLength),this.recordedPages.reduce(function(e,t){return i.set(t,e),e+t.length},0),this.ondataavailable(i),this.initWorker(),this.onstop()):(this.recordedPages.push(e),this.totalLength+=e.length)},t.prototype.streamPage=function(e){null===e?(this.initWorker(),this.onstop()):this.ondataavailable(e)},t.prototype.ondataavailable=function(){},t.prototype.onpause=function(){},t.prototype.onresume=function(){},t.prototype.onstart=function(){},t.prototype.onstop=function(){},e.exports=t}.call(t,i(1))},function(e,t){var i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i}],r={},n.m=i,n.c=r,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0);function n(e){var t;return(r[e]||(t=r[e]={i:e,l:!1,exports:{}},i[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}var i,r}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hotkeys=t()}(this,function(){var e="undefined"!=typeof navigator&&0<navigator.userAgent.toLowerCase().indexOf("firefox");function l(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,function(){i(window.event)})}function c(e,t){for(var i=t.slice(0,t.length-1),n=0;n<i.length;n++)i[n]=e[i[n].toLowerCase()];return i}function u(e){for(var t=(e=(e=e||"").replace(/\s/g,"")).split(","),i=t.lastIndexOf("");0<=i;)t[i-1]+=",",t.splice(i,1),i=t.lastIndexOf("");return t}for(var t={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,"":20,",":188,".":190,"/":191,"`":192,"-":e?173:189,"=":e?61:187,";":e?59:186,"'":222,"[":219,"]":221,"\\":220},d={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":e?224:91,cmd:e?224:91,command:e?224:91},h=[],p={16:"shiftKey",18:"altKey",17:"ctrlKey"},f={16:!1,18:!1,17:!1},m={},i=1;i<20;i++)t["f"+i]=111+i;function g(e){return t[e.toLowerCase()]||d[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)}var n="all",v=f[e?224:91]=!(p[e?224:91]="metaKey");function o(e){n=e||"all"}function _(){return n||"all"}function y(e,t,i){var n=void 0;if(t.scope===i||"all"===t.scope){for(var r in n=0<t.mods.length,f)Object.prototype.hasOwnProperty.call(f,r)&&(!f[r]&&-1<t.mods.indexOf(+r)||f[r]&&-1===t.mods.indexOf(+r))&&(n=!1);(0!==t.mods.length||f[16]||f[18]||f[17]||f[91])&&!n&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble)&&(e.cancelBubble=!0)}}function b(e,t,i){var n=u(e),r=[],o="all",a=document,s=0;for(void 0===i&&"function"==typeof t&&(i=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(o=t.scope),t.element)&&(a=t.element),"string"==typeof t&&(o=t);s<n.length;s++)r=[],1<(e=n[s].split("+")).length&&(r=c(d,e)),(e="*"===(e=e[e.length-1])?"*":g(e))in m||(m[e]=[]),m[e].push({scope:o,mods:r,shortcut:n[s],method:i,key:n[s]});void 0===a||v||(v=!0,l(a,"keydown",function(e){!function(e){var t,i=m["*"],n=e.keyCode||e.which||e.charCode;if(-1===h.indexOf(n)&&h.push(n),(n=93!==n&&224!==n?n:91)in f){for(var r in f[n]=!0,d)d[r]===n&&(b[r]=!0);if(!i)return}for(t in f)Object.prototype.hasOwnProperty.call(f,t)&&(f[t]=e[p[t]]);if(b.filter.call(this,e)){var o=_();if(i)for(var a=0;a<i.length;a++)i[a].scope===o&&y(e,i[a],o);if(n in m)for(var s=0;s<m[n].length;s++)y(e,m[n][s],o)}}(e)}),l(a,"keyup",function(e){var t=e.keyCode||e.which||e.charCode,e=h.indexOf(t);if(e<0||h.splice(e,1),(t=93!==t&&224!==t?t:91)in f)for(var i in f[t]=!1,d)d[i]===t&&(b[i]=!1)}))}var r,a,s={setScope:o,getScope:_,deleteScope:function(e,t){var i,n=void 0,r=void 0;for(i in e=e||_(),m)if(Object.prototype.hasOwnProperty.call(m,i))for(n=m[i],r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++;_()===e&&o(t||"all")},getPressedKeyCodes:function(){return h.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=g(e)),-1!==h.indexOf(e)},filter:function(e){e=e.target.tagName||e.srcElement.tagName;return!("INPUT"===e||"SELECT"===e||"TEXTAREA"===e)},unbind:function(e,t){for(var i,n,r=u(e),o=[],a=0;a<r.length;a++){if(1<(i=r[a].split("+")).length&&(o=c(d,i)),e="*"===(e=i[i.length-1])?"*":g(e),t=t||_(),!m[e])return;for(var s=0;s<m[e].length;s++)(n=m[e][s]).scope===t&&function(e,t){for(var i=e.length<t.length?t:e,n=e.length<t.length?e:t,r=!0,o=0;o<i.length;o++)-1===n.indexOf(i[o])&&(r=!1);return r}(n.mods,o)&&(m[e][s]={})}}};for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(b[r]=s[r]);return"undefined"!=typeof window&&(a=window.hotkeys,b.noConflict=function(e){return e&&window.hotkeys===b&&(window.hotkeys=a),b},window.hotkeys=b),b}),!function(e,t){var i,n;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,i=e.Cookies,(n=e.Cookies=t()).noConflict=function(){return e.Cookies=i,n})}(this,function(){function a(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)e[i]=n[i]}return e}return function t(s,o){function i(e,t,i){if("undefined"!=typeof document){"number"==typeof(i=a({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n,r="";for(n in i)i[n]&&(r+="; "+n,!0!==i[n])&&(r+="="+i[n].split(";")[0]);return document.cookie=e+"="+s.write(t,e)+r}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],i={},n=0;n<t.length;n++){var r=t[n].split("="),o=r.slice(1).join("=");try{var a=decodeURIComponent(r[0]);if(i[a]=s.read(o,a),e===a)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",a({},t,{expires:-1}))},withAttributes:function(e){return t(this.converter,a({},this.attributes,e))},withConverter:function(e){return t(a({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(s)}})}({read:function(e){return(e='"'===e[0]?e.slice(1,-1):e).replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.L={})}(this,function(e){function l(e){for(var t,i,n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n])e[t]=i[t];return e}function h(e,t){var i,n=Array.prototype.slice;return e.bind?e.bind.apply(e,n.call(arguments,1)):(i=n.call(arguments,2),function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)})}function s(e){return e._leaflet_id=e._leaflet_id||++et,e._leaflet_id}function B(e,t,i){var n,r,o,a=function(){n=!1,r&&(o.apply(i,r),r=!1)};return o=function(){n?r=arguments:(e.apply(i,arguments),setTimeout(a,t),n=!0)}}function F(e,t,i){var n=t[1],t=t[0],r=n-t;return e===n&&i?e:((e-t)%r+r)%r+t}function c(){return!1}function i(e,t){t=Math.pow(10,void 0===t?6:t);return Math.round(e*t)/t}function N(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function j(e){return N(e).split(/\s+/)}function o(e,t){for(var i in e.hasOwnProperty("options")||(e.options=e.options?Qe(e.options):{}),t)e.options[i]=t[i];return e.options}function V(e,t,i){var n,r=[];for(n in e)r.push(encodeURIComponent(i?n.toUpperCase():n)+"="+encodeURIComponent(e[n]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}function U(e,i){return e.replace(tt,function(e,t){t=i[t];if(void 0===t)throw new Error("No value provided for variable "+e);return t="function"==typeof t?t(i):t})}function $(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}function q(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}function H(e){var t=+new Date,i=Math.max(0,16-(t-rt));return rt=t+i,window.setTimeout(e,i)}function b(e,t,i){if(!i||ot!==H)return ot.call(window,h(e,t));e.call(t)}function a(e){e&&at.call(window,e)}function Z(){}function f(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t}function u(e,t,i){return e instanceof f?e:it(e)?new f(e[0],e[1]):null==e?e:"object"==typeof e&&"x"in e&&"y"in e?new f(e.x,e.y):new f(e,t,i)}function m(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}function d(e,t){return!e||e instanceof m?e:new m(e,t)}function p(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}function g(e,t){return e instanceof p?e:new p(e,t)}function v(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==i&&(this.alt=+i)}function x(e,t,i){return e instanceof v?e:it(e)&&"object"!=typeof e[0]?3===e.length?new v(e[0],e[1],e[2]):2===e.length?new v(e[0],e[1]):null:null==e?e:"object"==typeof e&&"lat"in e?new v(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new v(e,t,i)}function G(e,t,i,n){it(e)?(this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3]):(this._a=e,this._b=t,this._c=i,this._d=n)}function W(e,t,i,n){return new G(e,t,i,n)}function X(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Y(e,t){for(var i,n,r,o,a="",s=0,l=e.length;s<l;s++){for(i=0,n=(r=e[s]).length;i<n;i++)a+=(i?"L":"M")+(o=r[i]).x+" "+o.y;a+=t?qt?"z":"x":""}return a||"M0 0"}function t(e){return 0<=navigator.userAgent.toLowerCase().indexOf(e)}function K(e,t,i,n){function r(e){te(e,o)}var o,a,s,l,c,u;function d(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&te(e,a)}"touchstart"===t?(s=e,l=i,c=n,u=h(function(e){if("mouse"!==e.pointerType&&e.MSPOINTER_TYPE_MOUSE&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){if(!(Yt.indexOf(e.target.tagName)<0))return;E(e)}te(e,l)}),s["_leaflet_touchstart"+c]=u,s.addEventListener(Zt,u,!1),Jt||(document.documentElement.addEventListener(Zt,J,!0),document.documentElement.addEventListener(Gt,Q,!0),document.documentElement.addEventListener(Wt,ee,!0),document.documentElement.addEventListener(Xt,ee,!0),Jt=!0)):"touchmove"===t?(a=i,(c=e)["_leaflet_touchmove"+n]=d,c.addEventListener(Gt,d,!1)):"touchend"===t&&(o=i,(s=e)["_leaflet_touchend"+n]=r,s.addEventListener(Wt,r,!1),s.addEventListener(Xt,r,!1))}function J(e){Kt[e.pointerId]=e,Qt++}function Q(e){Kt[e.pointerId]&&(Kt[e.pointerId]=e)}function ee(e){delete Kt[e.pointerId],Qt--}function te(e,t){for(var i in e.touches=[],Kt)e.touches.push(Kt[i]);e.changedTouches=[e],t(e)}function ie(e,r,t){function i(e){var t,i;if(I){if(!Ct||"mouse"===e.pointerType)return;t=Qt}else t=e.touches.length;1<t||(i=(t=Date.now())-(o||t),a=e.touches?e.touches[0]:e,s=0<i&&i<=250,o=t)}function n(e){if(s&&!a.cancelBubble){if(I){if(!Ct||"mouse"===e.pointerType)return;var t,i,n={};for(i in a)t=a[i],n[i]=t&&t.bind?t.bind(a):t;a=n}a.type="dblclick",r(a),o=null}}var o,a,s=!1;return e[ii+ei+t]=i,e[ii+ti+t]=n,e[ii+"dblclick"+t]=r,e.addEventListener(ei,i,!1),e.addEventListener(ti,n,!1),e.addEventListener("dblclick",r,!1),this}function ne(e,t){var i=e[ii+ei+t],n=e[ii+ti+t],t=e[ii+"dblclick"+t];return e.removeEventListener(ei,i,!1),e.removeEventListener(ti,n,!1),Ct||e.removeEventListener("dblclick",t,!1),this}function re(e){return"string"==typeof e?document.getElementById(e):e}function oe(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];return"auto"===(i=i&&"auto"!==i||!document.defaultView?i:(e=document.defaultView.getComputedStyle(e,null))?e[t]:null)?null:i}function _(e,t,i){e=document.createElement(e);return e.className=t||"",i&&i.appendChild(e),e}function y(e){var t=e.parentNode;t&&t.removeChild(e)}function ae(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function se(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function le(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function ce(e,t){return void 0!==e.classList?e.classList.contains(t):0<(e=de(e)).length&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e)}function w(e,t){var i;if(void 0!==e.classList)for(var n=j(t),r=0,o=n.length;r<o;r++)e.classList.add(n[r]);else ce(e,t)||ue(e,((i=de(e))?i+" ":"")+t)}function C(e,t){void 0!==e.classList?e.classList.remove(t):ue(e,N((" "+de(e)+" ").replace(" "+t+" "," ")))}function ue(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function de(e){return void 0===(e=e.correspondingElement?e.correspondingElement:e).className.baseVal?e.className:e.className.baseVal}function T(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var i=e,e=t,t=!1,n="DXImageTransform.Microsoft.Alpha";try{t=i.filters.item(n)}catch(i){if(1===e)return}e=Math.round(100*e),t?(t.Enabled=100!==e,t.Opacity=e):i.style.filter+=" progid:"+n+"(opacity="+e+")"}}function he(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}function pe(e,t,i){t=t||new f(0,0);e.style[ni]=(zt?"translate("+t.x+"px,"+t.y+"px)":"translate3d("+t.x+"px,"+t.y+"px,0)")+(i?" scale("+i+")":"")}function S(e,t){e._leaflet_pos=t,P?pe(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function fe(e){return e._leaflet_pos||new f(0,0)}function me(){k(window,"dragstart",E)}function ge(){n(window,"dragstart",E)}function ve(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(_e(),li=(si=e).style.outline,e.style.outline="none",k(window,"keydown",_e))}function _e(){si&&(si.style.outline=li,li=si=void 0,n(window,"keydown",_e))}function ye(e){for(;!((e=e.parentNode).offsetWidth&&e.offsetHeight||e===document.body););return e}function be(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}function k(e,t,i,n){if("object"==typeof t)for(var r in t)xe(e,r,t[r],i);else for(var o=0,a=(t=j(t)).length;o<a;o++)xe(e,t[o],i,n);return this}function n(e,t,i,n){if("object"==typeof t)for(var r in t)we(e,r,t[r],i);else if(t)for(var o=0,a=(t=j(t)).length;o<a;o++)we(e,t[o],i,n);else{for(var s in e[D])we(e,s,e[D][s]);delete e[D]}return this}function xe(t,e,i,n){var r,o,a=e+s(i)+(n?"_"+s(n):"");t[D]&&t[D][a]||(o=r=function(e){return i.call(n||t,e||window.event)},I&&0===e.indexOf("touch")?K(t,e,r,a):!Nt||"dblclick"!==e||I&&Pt?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):"mouseenter"===e||"mouseleave"===e?t.addEventListener("mouseenter"===e?"mouseover":"mouseout",r=function(e){e=e||window.event,Ie(t,e)&&o(e)},!1):t.addEventListener(e,r="click"===e&&St?function(e){var t,i,n;t=o,i=(e=e).timeStamp||e.originalEvent&&e.originalEvent.timeStamp,((n=ci&&i-ci)&&100<n&&n<500||e.target._simulatedClick&&!e._simulated?ke:(ci=i,t))(e)}:r,!1):"attachEvent"in t&&t.attachEvent("on"+e,r):ie(t,r,a),t[D]=t[D]||{},t[D][a]=r)}function we(e,t,i,n){var r,o,a,i=t+s(i)+(n?"_"+s(n):""),n=e[D]&&e[D][i];n&&(I&&0===t.indexOf("touch")?(a=(r=e)["_leaflet_"+(o=t)+(a=i)],"touchstart"===o?r.removeEventListener(Zt,a,!1):"touchmove"===o?r.removeEventListener(Gt,a,!1):"touchend"===o&&(r.removeEventListener(Wt,a,!1),r.removeEventListener(Xt,a,!1))):!Nt||"dblclick"!==t||I&&Pt?"removeEventListener"in e?"mousewheel"===t?e.removeEventListener("onwheel"in e?"wheel":"mousewheel",n,!1):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,n,!1):"detachEvent"in e&&e.detachEvent("on"+t,n):ne(e,i),e[D][i]=null)}function Ce(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,Me(e),this}function Te(e){return xe(e,"mousewheel",Ce),this}function Se(e){return k(e,"mousedown touchstart dblclick",Ce),xe(e,"click",Pe),this}function E(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function ke(e){return E(e),Ce(e),this}function Ee(e,t){var i,n;return t?(n=(i=be(t)).boundingClientRect,new f((e.clientX-n.left)/i.x-t.clientLeft,(e.clientY-n.top)/i.y-t.clientTop)):new f(e.clientX,e.clientY)}function Ae(e){return Ct?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/ui:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Pe(e){di[e.type]=!0}function Me(e){var t=di[e.type];return di[e.type]=!1,t}function Ie(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch(e){return!1}return i!==e}function De(e,t){if(t&&e.length){var t=t*t,i=e=function(e,t){for(var i=[e[0]],n=1,r=0,o=e.length;n<o;n++)(function(e,t){var i=t.x-e.x,t=t.y-e.y;return i*i+t*t})(e[n],e[r])>t&&(i.push(e[n]),r=n);return r<o-1&&i.push(e[o-1]),i}(e,t),n=i.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function e(t,i,n,r,o){var a,s,l,c=0;for(s=r+1;s<=o-1;s++)(l=Be(t[s],t[r],t[o],!0))>c&&(a=s,c=l);n<c&&(i[a]=1,e(t,i,n,r,a),e(t,i,n,a,o))}(i,r,t,0,n-1);var o,a=[];for(o=0;o<n;o++)r[o]&&a.push(i[o]);return a}return e.slice()}function Le(e,t,i){return Math.sqrt(Be(e,t,i,!0))}function ze(e,t,i,n,r){var o,a,s,l=n?vi:Oe(e,i),c=Oe(t,i);for(vi=c;;){if(!(l|c))return[e,t];if(l&c)return!1;s=Oe(a=Re(e,t,o=l||c,i,r),i),o===l?(e=a,l=s):(t=a,c=s)}}function Re(e,t,i,n,r){var o,a,s=t.x-e.x,t=t.y-e.y,l=n.min,n=n.max;return 8&i?(o=e.x+s*(n.y-e.y)/t,a=n.y):4&i?(o=e.x+s*(l.y-e.y)/t,a=l.y):2&i?(o=n.x,a=e.y+t*(n.x-e.x)/s):1&i&&(o=l.x,a=e.y+t*(l.x-e.x)/s),new f(o,a,r)}function Oe(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i}function Be(e,t,i,n){var r=t.x,t=t.y,o=i.x-r,a=i.y-t,s=o*o+a*a;return 0<s&&(1<(s=((e.x-r)*o+(e.y-t)*a)/s)?(r=i.x,t=i.y):0<s&&(r+=o*s,t+=a*s)),o=e.x-r,a=e.y-t,n?o*o+a*a:new f(r,t)}function Fe(e){return!it(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function Ne(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fe(e)}function je(e,t,i){for(var n,r,o,a,s,l,c,u=[1,4,2,8],d=0,h=e.length;d<h;d++)e[d]._code=Oe(e[d],t);for(o=0;o<4;o++){for(l=u[o],n=[],d=0,r=(h=e.length)-1;d<h;r=d++)a=e[d],s=e[r],a._code&l?s._code&l||((c=Re(s,a,l,t,i))._code=Oe(c,t),n.push(c)):(s._code&l&&((c=Re(s,a,l,t,i))._code=Oe(c,t),n.push(c)),n.push(a));e=n}return e}function Ve(e,t){var i,n,r,o,a="Feature"===e.type?e.geometry:e,s=a?a.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||Ue;if(!s&&!a)return null;switch(a.type){case"Point":return i=u(s),c?c(e,i):new Ai(i);case"MultiPoint":for(r=0,o=s.length;r<o;r++)i=u(s[r]),l.push(c?c(e,i):new Ai(i));return new Ti(l);case"LineString":case"MultiLineString":return n=$e(s,"LineString"===a.type?0:1,u),new Di(n,t);case"Polygon":case"MultiPolygon":return n=$e(s,"Polygon"===a.type?1:2,u),new Li(n,t);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var d=Ve({geometry:a.geometries[r],type:"Feature",properties:e.properties},t);d&&l.push(d)}return new Ti(l);default:throw new Error("Invalid GeoJSON object.")}}function Ue(e){return new v(e[1],e[0],e[2])}function $e(e,t,i){for(var n,r=[],o=0,a=e.length;o<a;o++)n=t?$e(e[o],t-1,i):(i||Ue)(e[o]),r.push(n);return r}function qe(e,t){return t="number"==typeof t?t:6,void 0!==e.alt?[i(e.lng,t),i(e.lat,t),i(e.alt,t)]:[i(e.lng,t),i(e.lat,t)]}function He(e,t,i,n){for(var r=[],o=0,a=e.length;o<a;o++)r.push(t?He(e[o],t-1,i,n):qe(e[o],n));return!t&&i&&r.push(r[0]),r}function Ze(e,t){return e.feature?l({},e.feature,{geometry:t}):Ge(t)}function Ge(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}function We(e,t){return new zi(e,t)}function Xe(e,t){return new Ui(e,t)}function Ye(e){return $t?new Hi(e):null}function Ke(e){return qt||Ht?new Wi(e):null}var Je=Object.freeze,Qe=(Object.freeze=function(e){return e},Object.create||function(e){return lt.prototype=e,new lt}),et=0,tt=/\{ *([\w_-]+) *\}/g,it=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},nt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",rt=0,ot=window.requestAnimationFrame||q("RequestAnimationFrame")||H,at=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)},st=(Object.freeze||Object)({freeze:Je,extend:l,create:Qe,bind:h,lastId:et,stamp:s,throttle:B,wrapNum:F,falseFn:c,formatNum:i,trim:N,splitWords:j,setOptions:o,getParamString:V,template:U,isArray:it,indexOf:$,emptyImageUrl:nt,requestFn:ot,cancelFn:at,requestAnimFrame:b,cancelAnimFrame:a});function lt(){}Z.extend=function(e){function t(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var i,n=t.__super__=this.prototype,r=Qe(n);for(i in(r.constructor=t).prototype=r,this)this.hasOwnProperty(i)&&"prototype"!==i&&"__super__"!==i&&(t[i]=this[i]);if(e.statics&&(l(t,e.statics),delete e.statics),e.includes){var o=e.includes;if("undefined"!=typeof L&&L&&L.Mixin){o=it(o)?o:[o];for(var a=0;a<o.length;a++)o[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}l.apply(null,[r].concat(e.includes)),delete e.includes}return r.options&&(e.options=l(Qe(r.options),e.options)),l(r,e),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=r._initHooks.length;e<t;e++)r._initHooks[e].call(this)}},t},Z.include=function(e){return l(this.prototype,e),this},Z.mergeOptions=function(e){return l(this.prototype.options,e),this},Z.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var r={on:function(e,t,i){if("object"==typeof e)for(var n in e)this._on(n,e[n],t);else for(var r=0,o=(e=j(e)).length;r<o;r++)this._on(e[r],t,i);return this},off:function(e,t,i){if(e)if("object"==typeof e)for(var n in e)this._off(n,e[n],t);else for(var r=0,o=(e=j(e)).length;r<o;r++)this._off(e[r],t,i);else delete this._events;return this},_on:function(e,t,i){this._events=this._events||{};var n=this._events[e];n||(this._events[e]=n=[]);for(var e={fn:t,ctx:i=i===this?void 0:i},r=n,o=0,a=r.length;o<a;o++)if(r[o].fn===t&&r[o].ctx===i)return;r.push(e)},_off:function(e,t,i){var n,r,o;if(this._events&&(n=this._events[e]))if(t){if(i===this&&(i=void 0),n)for(r=0,o=n.length;r<o;r++){var a=n[r];if(a.ctx===i&&a.fn===t)return a.fn=c,this._firingCount&&(this._events[e]=n=n.slice()),void n.splice(r,1)}}else{for(r=0,o=n.length;r<o;r++)n[r].fn=c;delete this._events[e]}},fire:function(e,t,i){if(this.listens(e,i)){var n=l({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var r=this._events[e];if(r){this._firingCount=this._firingCount+1||1;for(var o=0,a=r.length;o<a;o++){var s=r[o];s.fn.call(s.ctx||this,n)}this._firingCount--}}i&&this._propagateEvent(n)}return this},listens:function(e,t){var i=this._events&&this._events[e];if(i&&i.length)return!0;if(t)for(var n in this._eventParents)if(this._eventParents[n].listens(e,t))return!0;return!1},once:function(e,t,i){if("object"==typeof e){for(var n in e)this.once(n,e[n],t);return this}var r=h(function(){this.off(e,t,i).off(e,r,i)},this);return this.on(e,t,i).on(e,r,i)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[s(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[s(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,l({layer:e.target,propagatedFrom:e.target},e),!0)}},ct=(r.addEventListener=r.on,r.removeEventListener=r.clearAllEventListeners=r.off,r.addOneTimeEventListener=r.once,r.fireEvent=r.fire,r.hasEventListeners=r.listens,Z.extend(r)),ut=Math.trunc||function(e){return 0<e?Math.floor(e):Math.ceil(e)},dt=(f.prototype={clone:function(){return new f(this.x,this.y)},add:function(e){return this.clone()._add(u(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(u(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new f(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new f(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ut(this.x),this.y=ut(this.y),this},distanceTo:function(e){var t=(e=u(e)).x-this.x,e=e.y-this.y;return Math.sqrt(t*t+e*e)},equals:function(e){return(e=u(e)).x===this.x&&e.y===this.y},contains:function(e){return e=u(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+i(this.x)+", "+i(this.y)+")"}},m.prototype={extend:function(e){return e=u(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new f((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new f(this.min.x,this.max.y)},getTopRight:function(){return new f(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return(e=("number"==typeof e[0]||e instanceof f?u:d)(e))instanceof m?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=d(e);var t=this.min,i=this.max,n=e.min,e=e.max,r=e.x>=t.x&&n.x<=i.x,e=e.y>=t.y&&n.y<=i.y;return r&&e},overlaps:function(e){e=d(e);var t=this.min,i=this.max,n=e.min,e=e.max,r=e.x>t.x&&n.x<i.x,e=e.y>t.y&&n.y<i.y;return r&&e},isValid:function(){return!(!this.min||!this.max)}},p.prototype={extend:function(e){var t,i,n=this._southWest,r=this._northEast;if(e instanceof v)i=t=e;else{if(!(e instanceof p))return e?this.extend(x(e)||g(e)):this;if(t=e._southWest,i=e._northEast,!t||!i)return this}return n||r?(n.lat=Math.min(t.lat,n.lat),n.lng=Math.min(t.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new v(t.lat,t.lng),this._northEast=new v(i.lat,i.lng)),this},pad:function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,e=Math.abs(t.lng-i.lng)*e;return new p(new v(t.lat-n,t.lng-e),new v(i.lat+n,i.lng+e))},getCenter:function(){return new v((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new v(this.getNorth(),this.getWest())},getSouthEast:function(){return new v(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e=("number"==typeof e[0]||e instanceof v||"lat"in e?x:g)(e);var t,i,n=this._southWest,r=this._northEast;return e instanceof p?(t=e.getSouthWest(),i=e.getNorthEast()):t=i=e,t.lat>=n.lat&&i.lat<=r.lat&&t.lng>=n.lng&&i.lng<=r.lng},intersects:function(e){e=g(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),e=e.getNorthEast(),r=e.lat>=t.lat&&n.lat<=i.lat,e=e.lng>=t.lng&&n.lng<=i.lng;return r&&e},overlaps:function(e){e=g(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),e=e.getNorthEast(),r=e.lat>t.lat&&n.lat<i.lat,e=e.lng>t.lng&&n.lng<i.lng;return r&&e},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=g(e),this._southWest.equals(e.getSouthWest(),t))&&this._northEast.equals(e.getNorthEast(),t)},isValid:function(){return!(!this._southWest||!this._northEast)}},{latLngToPoint:function(e,t){e=this.projection.project(e),t=this.scale(t);return this.transformation._transform(e,t)},pointToLatLng:function(e,t){t=this.scale(t),e=this.transformation.untransform(e,t);return this.projection.unproject(e)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){var t;return this.infinite?null:(t=this.projection.bounds,e=this.scale(e),new m(this.transformation.transform(t.min,e),this.transformation.transform(t.max,e)))},infinite:!(v.prototype={equals:function(e,t){return!!e&&(e=x(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+i(this.lat,e)+", "+i(this.lng,e)+")"},distanceTo:function(e){return ht.distance(this,x(e))},wrap:function(){return ht.wrapLatLng(this)},toBounds:function(e){var e=180*e/40075017,t=e/Math.cos(Math.PI/180*this.lat);return g([this.lat-e,this.lng-t],[this.lat+e,this.lng+t])},clone:function(){return new v(this.lat,this.lng,this.alt)}}),wrapLatLng:function(e){var t=this.wrapLng?F(e.lng,this.wrapLng,!0):e.lng;return new v(this.wrapLat?F(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),i=this.wrapLatLng(t),n=t.lat-i.lat,t=t.lng-i.lng;return 0==n&&0==t?e:(i=e.getSouthWest(),e=e.getNorthEast(),new p(new v(i.lat-n,i.lng-t),new v(e.lat-n,e.lng-t)))}}),ht=l({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var i=Math.PI/180,n=e.lat*i,r=t.lat*i,o=Math.sin((t.lat-e.lat)*i/2),t=Math.sin((t.lng-e.lng)*i/2),e=o*o+Math.cos(n)*Math.cos(r)*t*t,i=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return this.R*i}}),pt={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,i=Math.max(Math.min(i,e.lat),-i),i=Math.sin(i*t);return new f(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new v((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:new m([-(pt=6378137*Math.PI),-pt],[pt,pt])};G.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return e.x=(t=t||1)*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return new f((e.x/(t=t||1)-this._b)/this._a,(e.y/t-this._d)/this._c)}};var ft,mt,gt,vt,_t=l({},ht,{code:"EPSG:3857",projection:pt,transformation:W(_t=.5/(Math.PI*pt.R),.5,-_t,.5)}),yt=l({},_t,{code:"EPSG:900913"}),bt=document.documentElement.style,xt="ActiveXObject"in window,wt=xt&&!document.addEventListener,Ct="msLaunchUri"in navigator&&!("documentMode"in document),Tt=t("webkit"),St=t("android"),kt=t("android 2")||t("android 3"),Et=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),At=St&&t("Google")&&Et<537&&!("AudioNode"in window),Et=!!window.opera,Pt=t("chrome"),Mt=t("gecko")&&!Tt&&!Et&&!xt,It=!Pt&&t("safari"),A=t("phantom"),Dt="OTransition"in bt,Lt=0===navigator.platform.indexOf("Win"),zt=xt&&"transition"in bt,Rt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!kt,bt="MozPerspective"in bt,P=!window.L_DISABLE_3D&&(zt||Rt||bt)&&!Dt&&!A,Ot="undefined"!=typeof orientation||t("mobile"),Bt=Ot&&Tt,Ft=Ot&&Rt,M=!window.PointerEvent&&window.MSPointerEvent,I=!(!window.PointerEvent&&!M),Nt=!window.L_NO_TOUCH&&(I||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),jt=Ot&&Et,Vt=Ot&&Mt,Ut=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),$t=!!document.createElement("canvas").getContext,qt=!(!document.createElementNS||!X("svg").createSVGRect),Ht=!qt&&function(){try{var e=document.createElement("div"),t=(e.innerHTML='<v:shape adj="1"/>',e.firstChild);return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}(),xt=(Object.freeze||Object)({ie:xt,ielt9:wt,edge:Ct,webkit:Tt,android:St,android23:kt,androidStock:At,opera:Et,chrome:Pt,gecko:Mt,safari:It,phantom:A,opera12:Dt,win:Lt,ie3d:zt,webkit3d:Rt,gecko3d:bt,any3d:P,mobile:Ot,mobileWebkit:Bt,mobileWebkit3d:Ft,msPointer:M,pointer:I,touch:Nt,mobileOpera:jt,mobileGecko:Vt,retina:Ut,canvas:$t,svg:qt,vml:Ht}),Zt=M?"MSPointerDown":"pointerdown",Gt=M?"MSPointerMove":"pointermove",Wt=M?"MSPointerUp":"pointerup",Xt=M?"MSPointerCancel":"pointercancel",Yt=["INPUT","SELECT","OPTION"],Kt={},Jt=!1,Qt=0,ei=M?"MSPointerDown":I?"pointerdown":"touchstart",ti=M?"MSPointerUp":I?"pointerup":"touchend",ii="_leaflet_",ni=he(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ri=he(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),oi="webkitTransition"===ri||"OTransition"===ri?ri+"End":"transitionend";vt="onselectstart"in document?(gt=function(){k(window,"selectstart",E)},function(){n(window,"selectstart",E)}):(mt=he(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),gt=function(){var e;mt&&(e=document.documentElement.style,ft=e[mt],e[mt]="none")},function(){mt&&(document.documentElement.style[mt]=ft,ft=void 0)});function ai(e){return new R(e)}var si,li,ci,Tt=(Object.freeze||Object)({TRANSFORM:ni,TRANSITION:ri,TRANSITION_END:oi,get:re,getStyle:oe,create:_,remove:y,empty:ae,toFront:se,toBack:le,hasClass:ce,addClass:w,removeClass:C,setClass:ue,getClass:de,setOpacity:T,testProp:he,setTransform:pe,setPosition:S,getPosition:fe,disableTextSelection:gt,enableTextSelection:vt,disableImageDrag:me,enableImageDrag:ge,preventOutline:ve,restoreOutline:_e,getSizedParentNode:ye,getScale:be}),D="_leaflet_events",ui=Lt&&Pt?2*window.devicePixelRatio:Mt?window.devicePixelRatio:1,di={},Et=(Object.freeze||Object)({on:k,off:n,stopPropagation:Ce,disableScrollPropagation:Te,disableClickPropagation:Se,preventDefault:E,stop:ke,getMousePosition:Ee,getWheelDelta:Ae,fakeStop:Pe,skipped:Me,isExternalTarget:Ie,addListener:k,removeListener:n}),hi=ct.extend({run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=fe(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=b(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,i=1e3*this._duration;t<i?this._runFrame(this._easeOut(t/i),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){e=this._startPos.add(this._offset.multiplyBy(e));t&&e._round(),S(this._el,e),this.fire("step")},_complete:function(){a(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),z=ct.extend({options:{crs:_t,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=o(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(x(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ri&&P&&!jt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),k(this._proxy,oi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(x(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=l({animate:i.animate},i.zoom),i.pan=l({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan))?clearTimeout(this._sizeTimer):this._resetView(e,t),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(P?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(P?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,i){var n=this.getZoomScale(t),r=this.getSize().divideBy(2),e=(e instanceof f?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/n),n=this.containerPointToLatLng(r.add(e));return this.setView(n,t,{zoom:i})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():g(e);var i=u(t.paddingTopLeft||t.padding||[0,0]),n=u(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,i.add(n));return(r="number"==typeof t.maxZoom?Math.min(t.maxZoom,r):r)===1/0?{center:e.getCenter(),zoom:r}:(t=n.subtract(i).divideBy(2),n=this.project(e.getSouthWest(),r),i=this.project(e.getNorthEast(),r),{center:this.unproject(n.add(i).divideBy(2).add(t),r),zoom:r})},fitBounds:function(e,t){if((e=g(e)).isValid())return e=this._getBoundsCenterZoom(e,t),this.setView(e.center,e.zoom,t);throw new Error("Bounds are not valid.")},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){var i;return t=t||{},(e=u(e).round()).x||e.y?(!0===t.animate||this.getSize().contains(e)?(this._panAnim||(this._panAnim=new hi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate?(w(this._mapPane,"leaflet-pan-anim"),i=this._getMapPanePos().subtract(e).round(),this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)):(this._rawPanBy(e),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this):this.fire("moveend")},flyTo:function(n,r,e){function t(e){e=(h*h-d*d+(e?-1:1)*m*m*p*p)/(2*(e?h:d)*m*p),e=Math.sqrt(e*e+1)-e;return e<1e-9?-18:Math.log(e)}function i(e){return(Math.exp(e)-Math.exp(-e))/2}function o(e){return(Math.exp(e)+Math.exp(-e))/2}function a(e){return d*(o(g)*(i(e=g+f*e)/o(e))-i(g))/m}if(!1===(e=e||{}).animate||!P)return this.setView(n,r,e);this._stop();var s=this.project(this.getCenter()),l=this.project(n),c=this.getSize(),u=this._zoom,d=(n=x(n),r=void 0===r?u:r,Math.max(c.x,c.y)),h=d*this.getZoomScale(u,r),p=l.distanceTo(s)||1,f=1.42,m=f*f,g=t(0),v=Date.now(),_=(t(1)-g)/f,y=e.duration?1e3*e.duration:1e3*_*.8;return this._moveStart(!0,e.noMoveStart),function e(){var t=(Date.now()-v)/y,i=(1-Math.pow(1-t,1.5))*_;t<=1?(this._flyToFrame=b(e,this),this._move(this.unproject(s.add(l.subtract(s).multiplyBy(a(i)/p)),u),this.getScaleZoom(d/(t=i,d*(o(g)/o(g+f*t))),u),{flyTo:!0})):this._move(n,r)._moveEnd(!0)}.call(this),this},flyToBounds:function(e,t){e=this._getBoundsCenterZoom(e,t);return this.flyTo(e.center,e.zoom,t)},setMaxBounds:function(e){return(e=g(e)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var i=this.getCenter(),e=this._limitCenter(i,this._zoom,g(e));return i.equals(e)||this.panTo(e,t),this._enforcingBounds=!1,this},panInside:function(e,t){var i,n,r=u((t=t||{}).paddingTopLeft||t.padding||[0,0]),o=u(t.paddingBottomRight||t.padding||[0,0]),a=this.getCenter(),a=this.project(a),e=this.project(e),s=this.getPixelBounds(),l=s.getSize().divideBy(2),s=d([s.min.add(r),s.max.subtract(o)]);return s.contains(e)||(this._enforcingBounds=!0,i=a.subtract(e),n=u(e.x+i.x,e.y+i.y),(e.x<s.min.x||e.x>s.max.x)&&(n.x=a.x-i.x,0<i.x?n.x+=l.x-r.x:n.x-=l.x-o.x),(e.y<s.min.y||e.y>s.max.y)&&(n.y=a.y-i.y,0<i.y?n.y+=l.y-r.y:n.y-=l.y-o.y),this.panTo(this.unproject(n),t),this._enforcingBounds=!1),this},invalidateSize:function(e){if(!this._loaded)return this;e=l({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize(),i=(this._sizeChanged=!0,this._lastCenter=null,this.getSize()),n=t.divideBy(2).round(),r=i.divideBy(2).round(),n=n.subtract(r);return n.x||n.y?(e.animate&&e.pan?this.panBy(n):(e.pan&&this._rawPanBy(n),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){var t,i;return(e=this._locateOptions=l({timeout:1e4,watch:!1},e),"geolocation"in navigator)?(t=h(this._handleGeolocationResponse,this),i=h(this._handleGeolocationError,this),e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e)):this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,e=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+e+"."})},_handleGeolocationResponse:function(e){var t,i,n=new v(e.coords.latitude,e.coords.longitude),r=n.toBounds(2*e.coords.accuracy),o=this._locateOptions,a=(o.setView&&(t=this.getBoundsZoom(r),this.setView(n,o.maxZoom?Math.min(t,o.maxZoom):t)),{latlng:n,bounds:r,timestamp:e.timestamp});for(i in e.coords)"number"==typeof e.coords[i]&&(a[i]=e.coords[i]);this.fire("locationfound",a)},addHandler:function(e,t){return t&&(t=this[e]=new t(this),this._handlers.push(t),this.options[e])&&t.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}for(var e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),y(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(a(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)y(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){t=_("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=t),t},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new p(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=g(e),i=u(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=e.getNorthWest(),e=e.getSouthEast(),i=this.getSize().subtract(i),e=d(this.project(e,n),this.project(a,n)).getSize(),a=P?this.options.zoomSnap:1,s=i.x/e.x,i=i.y/e.y,e=t?Math.max(s,i):Math.min(s,i),n=this.getScaleZoom(e,n);return a&&(n=Math.round(n/(a/100))*(a/100),n=t?Math.ceil(n/a)*a:Math.floor(n/a)*a),Math.max(r,Math.min(o,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new f(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){e=this._getTopLeftPoint(e,t);return new m(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var i=this.options.crs;return t=void 0===t?this._zoom:t,i.scale(e)/i.scale(t)},getScaleZoom:function(e,t){var i=this.options.crs,e=(t=void 0===t?this._zoom:t,i.zoom(e*i.scale(t)));return isNaN(e)?1/0:e},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(x(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(u(e),t)},layerPointToLatLng:function(e){e=u(e).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(e){return this.project(x(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(x(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(g(e))},distance:function(e,t){return this.options.crs.distance(x(e),x(t))},containerPointToLayerPoint:function(e){return u(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return u(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){e=this.containerPointToLayerPoint(u(e));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(x(e)))},mouseEventToContainerPoint:function(e){return Ee(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){e=this._container=re(e);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");k(e,"scroll",this._onScroll,this),this._containerId=s(e)},_initLayout:function(){var e=this._container,t=(this._fadeAnimated=this.options.fadeAnimation&&P,w(e,"leaflet-container"+(Nt?" leaflet-touch":"")+(Ut?" leaflet-retina":"")+(wt?" leaflet-oldie":"")+(It?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":"")),oe(e,"position"));"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),S(this._mapPane,new f(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(w(e.markerPane,"leaflet-zoom-hide"),w(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){S(this._mapPane,new f(0,0));var i=!this._loaded,n=(this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset"),this._zoom!==t);this._moveStart(n,!1)._move(e,t)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,i){void 0===t&&(t=this._zoom);var n=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return a(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){S(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={};var t=e?n:k;t((this._targets[s(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),P&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){a(this._resizeRequest),this._resizeRequest=b(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var i,n=[],r="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,a=!1;o;){if((i=this._targets[s(o)])&&("click"===t||"preclick"===t)&&!e._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(t,!0)){if(r&&!Ie(o,e))break;if(n.push(i),r)break}if(o===this._container)break;o=o.parentNode}return n=n.length||a||r||!Ie(o,e)?n:[this]},_handleDOMEvent:function(e){var t;this._loaded&&!Me(e)&&("mousedown"!==(t=e.type)&&"keypress"!==t||ve(e.target||e.srcElement),this._fireDOMEvent(e,t))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if("click"===e.type&&((r=l({},e)).type="preclick",this._fireDOMEvent(r,r.type,i)),!e._stopped&&(i=(i||[]).concat(this._findEventTargets(e,t))).length){var n,r=i[0],o=("contextmenu"===t&&r.listens(t,!0)&&E(e),{originalEvent:e});"keypress"!==e.type&&(n=r.getLatLng&&(!r._radius||r._radius<=10),o.containerPoint=n?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(e),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=n?r.getLatLng():this.layerPointToLatLng(o.layerPoint));for(var a=0;a<i.length;a++)if(i[a].fire(t,o,!0),o.originalEvent._stopped||!1===i[a].options.bubblingMouseEvents&&-1!==$(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return fe(this._mapPane)||new f(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,i){i=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,i){i=this._getNewPixelOrigin(i,t);return d([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){var n,r;return!i||(n=this.project(e,t),r=this.getSize().divideBy(2),r=new m(n.subtract(r),n.add(r)),(r=this._getBoundsOffset(r,i,t)).round().equals([0,0]))?e:this.unproject(n.add(r),t)},_limitOffset:function(e,t){var i;return t?(i=new m((i=this.getPixelBounds()).min.add(e),i.max.add(e)),e.add(this._getBoundsOffset(i,t))):e},_getBoundsOffset:function(e,t,i){t=d(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),i=t.min.subtract(e.min),t=t.max.subtract(e.max);return new f(this._rebound(i.x,-t.x),this._rebound(i.y,-t.y))},_rebound:function(e,t){return 0<e+t?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),n=P?this.options.zoomSnap:1;return n&&(e=Math.round(e/n)*n),Math.max(t,Math.min(i,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){C(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){e=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(e)||(this.panBy(e,t),0))},_createAnimProxy:function(){var e=this._proxy=_("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=ni,i=this._proxy.style[t];pe(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),i===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),t=this.getZoom();pe(this._proxy,this.project(e,t),this.getZoomScale(t,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){y(this._proxy),delete this._proxy},_catchTransitionEnd:function(e){this._animatingZoom&&0<=e.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){var n;return!(!this._animatingZoom&&(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold||(n=this.getZoomScale(t),n=this._getCenterOffset(e)._divideBy(1-1/n),!0!==i.animate&&!this.getSize().contains(n))||(b(function(){this._moveStart(!0,!1)._animateZoom(e,t,!0)},this),0)))},_animateZoom:function(e,t,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,w(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:n}),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&C(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),b(function(){this._moveEnd(!0)},this))}}),R=Z.extend({options:{position:"topright"},initialize:function(e){o(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),e=e._controlCorners[i];return w(t,"leaflet-control"),-1!==i.indexOf("bottom")?e.insertBefore(t,e.firstChild):e.appendChild(t),this},remove:function(){return this._map&&(y(this._container),this.onRemove&&this.onRemove(this._map),this._map=null),this},_refocusOnMap:function(e){this._map&&e&&0<e.screenX&&0<e.screenY&&this._map.getContainer().focus()}}),pi=(z.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){function e(e,t){i[e+t]=_("div",n+e+" "+n+t,r)}var i=this._controlCorners={},n="leaflet-",r=this._controlContainer=_("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)y(this._controlCorners[e]);y(this._controlContainer),delete this._controlCorners,delete this._controlContainer}}),R.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,i,n){return i<n?-1:n<i?1:0}},initialize:function(e,t,i){for(var n in o(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},onAdd:function(e){this._initLayout(),this._update(),(this._map=e).on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return R.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);e=this._getLayer(s(e));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){w(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(w(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):C(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return C(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=_("div",e),i=this.options.collapsed,n=(t.setAttribute("aria-haspopup",!0),Se(t),Te(t),this._section=_("section",e+"-list")),r=(i&&(this._map.on("click",this.collapse,this),St||k(t,{mouseenter:this.expand,mouseleave:this.collapse},this)),this._layersLink=_("a",e+"-toggle",t));r.href="#",r.title="Layers",Nt?(k(r,"click",ke),k(r,"click",this.expand,this)):k(r,"focus",this.expand,this),i||this.expand(),this._baseLayersList=_("div",e+"-base",n),this._separator=_("div",e+"-separator",n),this._overlaysList=_("div",e+"-overlays",n),t.appendChild(n)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&s(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,i){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:i}),this.options.sortLayers&&this._layers.sort(h(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(this._container){ae(this._baseLayersList),ae(this._overlaysList),this._layerControlInputs=[];for(var e,t,i,n=0,r=0;r<this._layers.length;r++)i=this._layers[r],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,n+=i.overlay?0:1;this.options.hideSingleBase&&(this._baseLayersList.style.display=(e=e&&1<n)?"":"none"),this._separator.style.display=t&&e?"":"none"}return this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(s(e.target)),e=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;e&&this._map.fire(e,t)},_createRadioElement:function(e,t){e='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",t=document.createElement("div");return t.innerHTML=e,t.firstChild},_addItem:function(e){var t,i=document.createElement("label"),n=this._map.hasLayer(e.layer),n=(e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=n):t=this._createRadioElement("leaflet-base-layers",n),this._layerControlInputs.push(t),t.layerId=s(e.layer),k(t,"click",this._onInputClick,this),document.createElement("span")),r=(n.innerHTML=" "+e.name,document.createElement("div"));return i.appendChild(r),r.appendChild(t),r.appendChild(n),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var e,t,i=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(var o=i.length-1;0<=o;o--)e=i[o],t=this._getLayer(e.layerId).layer,e.checked?n.push(t):e.checked||r.push(t);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])||this._map.addLayer(n[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e,t,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;0<=r;r--)e=i[r],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&n<t.options.minZoom||void 0!==t.options.maxZoom&&n>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}})),fi=R.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=_("div",t+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,t+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,t+"-out",i,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,i,n,r){i=_("a",i,n);return i.innerHTML=e,i.href="#",i.title=t,i.setAttribute("role","button"),i.setAttribute("aria-label",t),Se(i),k(i,"click",ke),k(i,"click",r,this),k(i,"click",this._refocusOnMap,this),i},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";C(this._zoomInButton,t),C(this._zoomOutButton,t),!this._disabled&&e._zoom!==e.getMinZoom()||w(this._zoomOutButton,t),!this._disabled&&e._zoom!==e.getMaxZoom()||w(this._zoomInButton,t)}}),mi=(z.mergeOptions({zoomControl:!0}),z.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fi,this.addControl(this.zoomControl))}),R.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t=_("div","leaflet-control-scale"),i=this.options;return this._addScales(i,"leaflet-control-scale-line",t),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),t},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=_("div",t,i)),e.imperial&&(this._iScale=_("div",t,i))},_update:function(){var e=this._map,t=e.getSize().y/2,e=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(e)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e);this._updateScale(this._mScale,t<1e3?t+" m":t/1e3+" km",t/e)},_updateImperial:function(e){var t,i,e=3.2808399*e;5280<e?(i=this._getRoundNum(t=e/5280),this._updateScale(this._iScale,i+" mi",i/t)):(i=this._getRoundNum(e),this._updateScale(this._iScale,i+" ft",i/e))},_updateScale:function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),e=e/t;return t*(10<=e?10:5<=e?5:3<=e?3:2<=e?2:1)}})),gi=R.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){o(this,e),this._attributions={}},onAdd:function(e){for(var t in(e.attributionControl=this)._container=_("div","leaflet-control-attribution"),Se(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e&&(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update()),this},removeAttribution:function(e){return e&&this._attributions[e]&&(this._attributions[e]--,this._update()),this},_update:function(){if(this._map){var e,t=[];for(e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}}),A=(z.mergeOptions({attributionControl:!0}),z.addInitHook(function(){this.options.attributionControl&&(new gi).addTo(this)}),R.Layers=pi,R.Zoom=fi,R.Scale=mi,R.Attribution=gi,ai.layers=function(e,t,i){return new pi(e,t,i)},ai.zoom=function(e){return new fi(e)},ai.scale=function(e){return new mi(e)},ai.attribution=function(e){return new gi(e)},Z.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}}));A.addTo=function(e,t){return e.addHandler(t,this),this};var vi,Dt={Events:r},_i=Nt?"touchstart mousedown":"mousedown",yi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},bi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},xi=ct.extend({options:{clickTolerance:3},initialize:function(e,t,i,n){o(this,n),this._element=e,this._dragStartTarget=t||e,this._preventOutline=i},enable:function(){this._enabled||(k(this._dragStartTarget,_i,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xi._dragging===this&&this.finishDrag(),n(this._dragStartTarget,_i,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){var t,i;e._simulated||!this._enabled||(this._moved=!1,ce(this._element,"leaflet-zoom-anim"))||(xi._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||((xi._dragging=this)._preventOutline&&ve(this._element),me(),gt(),this._moving))||(this.fire("down"),t=e.touches?e.touches[0]:e,i=ye(this._element),this._startPoint=new f(t.clientX,t.clientY),this._parentScale=be(i),k(document,bi[e.type],this._onMove,this),k(document,yi[e.type],this._onUp,this))},_onMove:function(e){var t;!e._simulated&&this._enabled&&(e.touches&&1<e.touches.length?this._moved=!0:!(t=new f((t=e.touches&&1===e.touches.length?e.touches[0]:e).clientX,t.clientY)._subtract(this._startPoint)).x&&!t.y||Math.abs(t.x)+Math.abs(t.y)<this.options.clickTolerance||(t.x/=this._parentScale.x,t.y/=this._parentScale.y,E(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=fe(this._element).subtract(t),w(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),w(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(t),this._moving=!0,a(this._animRequest),this._lastEvent=e,this._animRequest=b(this._updatePosition,this,!0)))},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),S(this._element,this._newPos),this.fire("drag",e)},_onUp:function(e){!e._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var e in C(document.body,"leaflet-dragging"),this._lastTarget&&(C(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),bi)n(document,bi[e],this._onMove,this),n(document,yi[e],this._onUp,this);ge(),vt(),this._moved&&this._moving&&(a(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,xi._dragging=!1}}),Rt=(Object.freeze||Object)({simplify:De,pointToSegmentDistance:Le,closestPointOnSegment:function(e,t,i){return Be(e,t,i)},clipSegment:ze,_getEdgeIntersection:Re,_getBitCode:Oe,_sqClosestPointOnSegment:Be,isFlat:Fe,_flat:Ne}),bt=(Object.freeze||Object)({clipPolygon:je}),Bt={project:function(e){return new f(e.lng,e.lat)},unproject:function(e){return new v(e.y,e.x)},bounds:new m([-180,-90],[180,90])},Ft={R:6378137,R_MINOR:6356752.314245179,bounds:new m([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,i=this.R,n=e.lat*t,r=this.R_MINOR/i,r=Math.sqrt(1-r*r),o=r*Math.sin(n),o=Math.tan(Math.PI/4-n/2)/Math.pow((1-o)/(1+o),r/2),n=-i*Math.log(Math.max(o,1e-10));return new f(e.lng*t*i,n)},unproject:function(e){for(var t,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=Math.exp(-e.y/n),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&1e-7<Math.abs(c);l++)t=o*Math.sin(s),t=Math.pow((1-t)/(1+t),o/2),s+=c=Math.PI/2-2*Math.atan(a*t)-s;return new v(s*i,e.x*i/n)}},Vt=(Object.freeze||Object)({LonLat:Bt,Mercator:Ft,SphericalMercator:pt}),Lt=l({},ht,{code:"EPSG:3395",projection:Ft,transformation:W(M=.5/(Math.PI*Ft.R),.5,-M,.5)}),wi=l({},ht,{code:"EPSG:4326",projection:Bt,transformation:W(1/180,1,-1/180,.5)}),Mt=l({},dt,{projection:Bt,transformation:W(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var i=t.lng-e.lng,t=t.lat-e.lat;return Math.sqrt(i*i+t*t)},infinite:!0}),O=(dt.Earth=ht,dt.EPSG3395=Lt,dt.EPSG3857=_t,dt.EPSG900913=yt,dt.EPSG4326=wi,dt.Simple=Mt,ct.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[s(e)]=this},removeInteractiveTarget:function(e){return delete this._map._targets[s(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t,i=e.target;i.hasLayer(this)&&(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents&&(t=this.getEvents(),i.on(t,this),this.once("remove",function(){i.off(t,this)},this)),this.onAdd(i),this.getAttribution&&i.attributionControl&&i.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),i.fire("layeradd",{layer:this}))}})),Ci=(z.include({addLayer:function(e){var t;if(e._layerAdd)return t=s(e),this._layers[t]||((this._layers[t]=e)._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this;throw new Error("The provided object is not a Layer.")},removeLayer:function(e){var t=s(e);return this._layers[t]&&(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null),this},hasLayer:function(e){return!!e&&s(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},_addLayers:function(e){for(var t=0,i=(e=e?it(e)?e:[e]:[]).length;t<i;t++)this.addLayer(e[t])},_addZoomLimit:function(e){!isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[s(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){e=s(e);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var e,t=1/0,i=-1/0,n=this._getZoomSpan();for(e in this._zoomBoundLayers)var r=this._zoomBoundLayers[e].options,t=void 0===r.minZoom?t:Math.min(t,r.minZoom),i=void 0===r.maxZoom?i:Math.max(i,r.maxZoom);this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}}),O.extend({initialize:function(e,t){var i,n;if(o(this,t),this._layers={},e)for(i=0,n=e.length;i<n;i++)this.addLayer(e[i])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){e=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,i,n=Array.prototype.slice.call(arguments,1);for(t in this._layers)(i=this._layers[t])[e]&&i[e].apply(i,n);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:s})),Ti=Ci.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Ci.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?((e=e in this._layers?this._layers[e]:e).removeEventParent(this),Ci.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e,t=new p;for(e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Si=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(e){o(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(i)return i=this._createImg(i,t&&"IMG"===t.tagName?t:null),this._setIconStyles(i,e),i;if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null},_setIconStyles:function(e,t){var i=this.options,n=i[t+"Size"],n=u(n="number"==typeof n?[n,n]:n),r=u("shadow"===t&&i.shadowAnchor||i.iconAnchor||n&&n.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(i.className||""),r&&(e.style.marginLeft=-r.x+"px",e.style.marginTop=-r.y+"px"),n&&(e.style.width=n.x+"px",e.style.height=n.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Ut&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),ki=Si.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return ki.imagePath||(ki.imagePath=this._detectIconPath()),(this.options.imagePath||ki.imagePath)+Si.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=_("div","leaflet-default-icon-path",document.body),t=oe(e,"background-image")||oe(e,"backgroundImage");return document.body.removeChild(e),null===t||0!==t.indexOf("url")?"":t.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Ei=A.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new xi(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),w(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&C(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,i=t._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=fe(t._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),s=d(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));s.contains(o)||(r=u((Math.max(s.max.x,o.x)-s.max.x)/(a.max.x-s.max.x)-(Math.min(s.min.x,o.x)-s.min.x)/(a.min.x-s.min.x),(Math.max(s.max.y,o.y)-s.max.y)/(a.max.y-s.max.y)-(Math.min(s.min.y,o.y)-s.min.y)/(a.min.y-s.min.y)).multiplyBy(n),i.panBy(r,{animate:!1}),this._draggable._newPos._add(r),this._draggable._startPos._add(r),S(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=b(this._adjustPan.bind(this,e)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(a(this._panRequest),this._panRequest=b(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,i=t._shadow,n=fe(t._icon),r=t._map.layerPointToLatLng(n);i&&S(i,n),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){a(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Ai=O.extend({options:{icon:new ki,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){o(this,t),this._latlng=x(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=x(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var e;return this._icon&&this._map&&(e=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(e)),this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),n=!1,i=(i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,e.title&&(i.title=e.title),"IMG"===i.tagName)&&(i.alt=e.alt||""),w(i,t),e.keyboard&&(i.tabIndex="0"),this._icon=i,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),e.icon.createShadow(this._shadow)),r=!1;i!==this._shadow&&(this._removeShadow(),r=!0),i&&(w(i,t),i.alt=""),this._shadow=i,e.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),y(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&y(this._shadow),this._shadow=null},_setPos:function(e){S(this._icon,e),this._shadow&&S(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){e=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(e)},_initInteraction:function(){var e;this.options.interactive&&(w(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ei)&&(e=this.options.draggable,this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ei(this),e&&this.dragging.enable())},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;T(this._icon,e),this._shadow&&T(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Pi=O.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return o(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Mi=Pi.extend({options:{fill:!0,radius:10},initialize:function(e,t){o(this,t),this._latlng=x(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=x(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Pi.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),e=[e+i,t+i];this._pxBounds=new m(this._point.subtract(e),this._point.add(e))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Ii=Mi.extend({initialize:function(e,t,i){if(o(this,t="number"==typeof t?l({},i,{radius:t}):t),this._latlng=x(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new p(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Pi.prototype.setStyle,_project:function(){var e,t,i,n,r,o=this._latlng.lng,a=this._latlng.lat,s=this._map,l=s.options.crs;l.distance===ht.distance?(n=Math.PI/180,r=this._mRadius/ht.R/n,e=s.project([a+r,o]),t=s.project([a-r,o]),t=e.add(t).divideBy(2),i=s.unproject(t).lat,n=Math.acos((Math.cos(r*n)-Math.sin(a*n)*Math.sin(i*n))/(Math.cos(a*n)*Math.cos(i*n)))/n,!isNaN(n)&&0!==n||(n=r/Math.cos(Math.PI/180*a)),this._point=t.subtract(s.getPixelOrigin()),this._radius=isNaN(n)?0:t.x-s.project([i,o-n]).x,this._radiusY=t.y-e.y):(r=l.unproject(l.project(this._latlng).subtract([this._mRadius,0])),this._point=s.latLngToLayerPoint(this._latlng),this._radius=this._point.x-s.latLngToLayerPoint(r).x),this._updateBounds()}}),Di=Pi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){o(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,i,n=1/0,r=null,o=Be,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var d=o(e,t=l[c-1],i=l[c],!0);d<n&&(n=d,r=o(e,t,i))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,i,n,r,o,a=this._rings[0],s=a.length;if(!s)return null;for(t=e=0;e<s-1;e++)t+=a[e].distanceTo(a[e+1])/2;if(0===t)return this._map.layerPointToLatLng(a[0]);for(i=e=0;e<s-1;e++)if(n=a[e],r=a[e+1],(i+=o=n.distanceTo(r))>t)return this._map.layerPointToLatLng([r.x-(o=(i-t)/o)*(r.x-n.x),r.y-o*(r.y-n.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=x(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new p,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Fe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],i=Fe(e),n=0,r=e.length;n<r;n++)i?(t[n]=x(e[n]),this._bounds.extend(t[n])):t[n]=this._convertLatLngs(e[n]);return t},_project:function(){var e=new m,t=(this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._clickTolerance()),t=new f(t,t);this._bounds.isValid()&&e.isValid()&&(e.min._subtract(t),e.max._add(t),this._pxBounds=e)},_projectLatlngs:function(e,t,i){var n,r,o=e[0]instanceof v,a=e.length;if(o){for(r=[],n=0;n<a;n++)r[n]=this._map.latLngToLayerPoint(e[n]),i.extend(r[n]);t.push(r)}else for(n=0;n<a;n++)this._projectLatlngs(e[n],t,i)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var t,i,n,r,o=this._parts,a=0,s=0,l=this._rings.length;a<l;a++)for(t=0,i=(r=this._rings[a]).length;t<i-1;t++)(n=ze(r[t],r[t+1],e,t,!0))&&(o[s]=o[s]||[],o[s].push(n[0]),n[1]===r[t+1]&&t!==i-2||(o[s].push(n[1]),s++))},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,i=0,n=e.length;i<n;i++)e[i]=De(e[i],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var i,n,r,o,a,s,l=this._clickTolerance();if(this._pxBounds&&this._pxBounds.contains(e))for(i=0,o=this._parts.length;i<o;i++)for(n=0,r=(a=(s=this._parts[i]).length)-1;n<a;r=n++)if((t||0!==n)&&Le(e,s[r],s[n])<=l)return!0;return!1}}),Li=(Di._flat=Ne,Di.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,i,n,r,o,a,s,l,c=this._rings[0],u=c.length;if(!u)return null;for(e=o=a=s=0,t=u-1;e<u;t=e++)i=c[e],n=c[t],r=i.y*n.x-n.y*i.x,a+=(i.x+n.x)*r,s+=(i.y+n.y)*r,o+=3*r;return l=0===o?c[0]:[a/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(e){var e=Di.prototype._convertLatLngs.call(this,e),t=e.length;return 2<=t&&e[0]instanceof v&&e[0].equals(e[t-1])&&e.pop(),e},_setLatLngs:function(e){Di.prototype._setLatLngs.call(this,e),Fe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return(Fe(this._latlngs[0])?this._latlngs:this._latlngs[0])[0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,t=new f(t,t),e=new m(e.min.subtract(t),e.max.add(t));if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,n=0,r=this._rings.length;n<r;n++)(i=je(this._rings[n],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,i,n,r,o,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(l=(t=this._parts[r]).length)-1;o<l;a=o++)i=t[o],n=t[a],i.y>e.y!=n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||Di.prototype._containsPoint.call(this,e,!0)}})),zi=Ti.extend({initialize:function(e,t){o(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,i,n,r=it(e)?e:e.features;if(r){for(t=0,i=r.length;t<i;t++)((n=r[t]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var o,a=this.options;return(!a.filter||a.filter(e))&&(o=Ve(e,a))?(o.feature=Ge(e),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return e.options=l({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),r={toGeoJSON:function(e){return Ze(this,{type:"Point",coordinates:qe(this.getLatLng(),e)})}},pt=(Ai.include(r),Ii.include(r),Mi.include(r),Di.include({toGeoJSON:function(e){var t=!Fe(this._latlngs);return Ze(this,{type:(t?"Multi":"")+"LineString",coordinates:He(this._latlngs,t?1:0,!1,e)})}}),Li.include({toGeoJSON:function(e){var t=!Fe(this._latlngs),i=t&&!Fe(this._latlngs[0]),e=He(this._latlngs,i?2:t?1:0,!0,e);return Ze(this,{type:(i?"Multi":"")+"Polygon",coordinates:e=t?e:[e]})}}),Ci.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(e){i.push(e.toGeoJSON(t).geometry.coordinates)}),Ze(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i,n,e=this.feature&&this.feature.geometry&&this.feature.geometry.type;return"MultiPoint"===e?this.toMultiPoint(t):(i="GeometryCollection"===e,n=[],this.eachLayer(function(e){e.toGeoJSON&&(e=e.toGeoJSON(t),i?n.push(e.geometry):"FeatureCollection"===(e=Ge(e)).type?n.push.apply(n,e.features):n.push(e))}),i?Ze(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n})}}),We),Ri=O.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,i){this._url=e,this._bounds=g(t),o(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(w(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){y(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&se(this._image),this},bringToBack:function(){return this._map&&le(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=g(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:_("img");w(t,"leaflet-image-layer"),this._zoomAnimated&&w(t,"leaflet-zoom-animated"),this.options.className&&w(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=h(this.fire,this,"load"),t.onerror=h(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),e=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;pe(this._image,e,t)},_reset:function(){var e=this._image,t=new m(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();S(e,t.min),e.style.width=i.x+"px",e.style.height=i.y+"px"},_updateOpacity:function(){T(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),Oi=Ri.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:_("video");if(w(t,"leaflet-image-layer"),this._zoomAnimated&&w(t,"leaflet-zoom-animated"),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=h(this.fire,this,"load"),e){for(var i=t.getElementsByTagName("source"),n=[],r=0;r<i.length;r++)n.push(i[r].src);this._url=0<i.length?n:[t.src]}else{it(this._url)||(this._url=[this._url]),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var a=_("source");a.src=this._url[o],t.appendChild(a)}}}}),Bi=O.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){o(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&T(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&T(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(T(this._container,0),this._removeTimeout=setTimeout(h(y,void 0,this._container),200)):y(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=x(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&se(this._container),this},bringToBack:function(){return this._map&&le(this._container),this},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){var e,t,i;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),e=u(this.options.offset),i=this._getAnchor(),this._zoomAnimated?S(this._container,t.add(i)):e=e.add(t).add(i),t=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x,this._container.style.bottom=t+"px",this._container.style.left=i+"px")},_getAnchor:function(){return[0,0]}}),Fi=Bi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){Bi.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Pi||this._source.on("preclick",Ce))},onRemove:function(e){Bi.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Pi||this._source.off("preclick",Ce))},getEvents:function(){var e=Bi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=_("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=_("div",e+"-content-wrapper",t);this._contentNode=_("div",e+"-content",i),Se(i),Te(this._contentNode),k(i,"contextmenu",Ce),this._tipContainer=_("div",e+"-tip-container",t),this._tip=_("div",e+"-tip",this._tipContainer),this.options.closeButton&&((i=this._closeButton=_("a",e+"-close-button",t)).href="#close",i.innerHTML="&#215;",k(i,"click",this._onCloseButtonClick,this))},_updateLayout:function(){var e=this._contentNode,t=e.style,i=(t.width="",t.whiteSpace="nowrap",e.offsetWidth),i=Math.min(i,this.options.maxWidth),i=(i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="",e.offsetHeight),n=this.options.maxHeight;(n&&n<i?(t.height=n+"px",w):C)(e,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var e=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),t=this._getAnchor();S(this._container,e.add(t))},_adjustPan:function(){var e,t,i,n,r,o,a,s;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),e=this._map,t=parseInt(oe(this._container,"marginBottom"),10)||0,t=this._container.offsetHeight+t,s=this._containerWidth,(i=new f(this._containerLeft,-t-this._containerBottom))._add(fe(this._container)),i=e.layerPointToContainerPoint(i),r=u(this.options.autoPanPadding),n=u(this.options.autoPanPaddingTopLeft||r),r=u(this.options.autoPanPaddingBottomRight||r),o=e.getSize(),a=0,i.x+s+r.x>o.x&&(a=i.x+s-o.x+r.x),i.x-a-n.x<(s=0)&&(a=i.x-n.x),i.y+t+r.y>o.y&&(s=i.y+t-o.y+r.y),i.y-s-n.y<0&&(s=i.y-n.y),a||s)&&e.fire("autopanstart").panBy([a,s])},_onCloseButtonClick:function(e){this._close(),ke(e)},_getAnchor:function(){return u(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ni=(z.mergeOptions({closePopupOnClick:!0}),z.include({openPopup:function(e,t,i){return e instanceof Fi||(e=new Fi(i).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),O.include({bindPopup:function(e,t){return e instanceof Fi?(o(e,t),(this._popup=e)._source=this):(this._popup&&!t||(this._popup=new Fi(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){if(e instanceof O||(t=e,e=this),e instanceof Ti)for(var i in this._layers){e=this._layers[i];break}return t=t||(e.getCenter?e.getCenter():e.getLatLng()),this._popup&&this._map&&(this._popup._source=e,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){var t=e.layer||e.target;this._popup&&this._map&&(ke(e),t instanceof Pi?this.openPopup(e.layer||e.target,e.latlng):this._map.hasLayer(this._popup)&&this._popup._source===t?this.closePopup():this.openPopup(t,e.latlng))},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}}),Bi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(e){Bi.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){Bi.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=Bi.prototype.getEvents.call(this);return Nt&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=_("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,i=this._container,n=t.latLngToContainerPoint(t.getCenter()),t=t.layerPointToContainerPoint(e),r=this.options.direction,o=i.offsetWidth,a=i.offsetHeight,s=u(this.options.offset),l=this._getAnchor();e="top"===r?e.add(u(-o/2+s.x,-a+s.y+l.y,!0)):"bottom"===r?e.subtract(u(o/2-s.x,-s.y,!0)):"center"===r?e.subtract(u(o/2+s.x,a/2-l.y+s.y,!0)):"right"===r||"auto"===r&&t.x<n.x?(r="right",e.add(u(s.x+l.x,l.y-a/2+s.y,!0))):(r="left",e.subtract(u(o+l.x-s.x,a/2-l.y-s.y,!0))),C(i,"leaflet-tooltip-right"),C(i,"leaflet-tooltip-left"),C(i,"leaflet-tooltip-top"),C(i,"leaflet-tooltip-bottom"),w(i,"leaflet-tooltip-"+r),S(i,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&T(this._container,e)},_animateZoom:function(e){e=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(e)},_getAnchor:function(){return u(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}})),ji=(z.include({openTooltip:function(e,t,i){return e instanceof Ni||(e=new Ni(i).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),O.include({bindTooltip:function(e,t){return e instanceof Ni?(o(e,t),(this._tooltip=e)._source=this):(this._tooltip&&!t||(this._tooltip=new Ni(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){var t,i;!e&&this._tooltipHandlersAdded||(t=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),Nt&&(i.click=this._openTooltip)),this[t](i),this._tooltipHandlersAdded=!e)},openTooltip:function(e,t){if(e instanceof O||(t=e,e=this),e instanceof Ti)for(var i in this._layers){e=this._layers[i];break}return t=t||(e.getCenter?e.getCenter():e.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=e,this._tooltip.update(),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive)&&this._tooltip._container&&(w(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container)),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive)&&this._tooltip._container&&(C(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container)),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(e){var t=e.layer||e.target;this._tooltip&&this._map&&this.openTooltip(t,this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(e=this._map.mouseEventToContainerPoint(e.originalEvent),e=this._map.containerPointToLayerPoint(e),t=this._map.layerPointToLatLng(e)),this._tooltip.setLatLng(t)}}),Si.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var e=e&&"DIV"===e.tagName?e:document.createElement("div"),t=this.options;return e.innerHTML=!1!==t.html?t.html:"",t.bgPos&&(t=u(t.bgPos),e.style.backgroundPosition=-t.x+"px "+-t.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}})),Vi=(Si.Default=ki,O.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ot,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){o(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),y(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(se(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=B(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof f?e:new f(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,i=this.getPane().children,n=-e(-1/0,1/0),r=0,o=i.length;r<o;r++)t=i[r].style.zIndex,i[r]!==this._container&&t&&(n=e(n,+t));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!wt){T(this._container,this.options.opacity);var e,t=+new Date,i=!1,n=!1;for(e in this._tiles){var r,o=this._tiles[e];o.current&&o.loaded&&(r=Math.min(1,(t-o.loaded)/200),T(o.el,r),r<1?i=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0))}n&&!this._noPrune&&this._pruneTiles(),i&&(a(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=_("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var i in this._levels)this._levels[i].el.children.length||i===e?(this._levels[i].el.style.zIndex=t-Math.abs(e-i),this._onUpdateLevel(i)):(y(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[e],r=this._map;return n||((n=this._levels[e]={}).el=_("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=t,n.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),n.zoom=e,this._setZoomTransform(n,r.getCenter(),r.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,i,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)(t=this._tiles[e]).current&&!t.active&&(i=t.coords,this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2));for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)y(this._levels[e].el),this._onRemoveLevel(e),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,i,n){var e=Math.floor(e/2),t=Math.floor(t/2),i=i-1,r=new f(+e,+t),r=(r.z=i,this._tileCoordsToKey(r)),r=this._tiles[r];return r&&r.active?r.retain=!0:(r&&r.loaded&&(r.retain=!0),n<i&&this._retainParent(e,t,i,n))},_retainChildren:function(e,t,i,n){for(var r=2*e;r<2*e+2;r++)for(var o=2*t;o<2*t+2;o++){var a=new f(r,o),a=(a.z=i+1,this._tileCoordsToKey(a)),a=this._tiles[a];a&&a.active?a.retain=!0:(a&&a.loaded&&(a.retain=!0),i+1<n&&this._retainChildren(r,o,i+1,n))}},_resetView:function(e){e=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,i,n){var r=this._clampZoom(Math.round(t)),o=((void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0),this.options.updateWhenZooming&&r!==this._tileZoom);n&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],e,t)},_setZoomTransform:function(e,t,i){var n=this._map.getZoomScale(i,e.zoom),t=e.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(t,i)).round();P?pe(e.el,t,n):S(e.el,t)},_resetGrid:function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],n).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],n).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],n).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(i,this._tileZoom),e=t.project(e,this._tileZoom).floor(),t=t.getSize().divideBy(2*i);return new m(e.subtract(t),e.add(t))},_update:function(e){var t=this._map;if(t){var i=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var n,t=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(t),o=r.getCenter(),a=[],t=this.options.keepBuffer,s=new m(r.getBottomLeft().subtract([t,-t]),r.getTopRight().add([t,-t]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(n in this._tiles){var l=this._tiles[n].coords;l.z===this._tileZoom&&s.contains(new f(l.x,l.y))||(this._tiles[n].current=!1)}if(1<Math.abs(i-this._tileZoom))this._setView(e,i);else{for(var c=r.min.y;c<=r.max.y;c++)for(var u=r.min.x;u<=r.max.x;u++){var d,h=new f(u,c);h.z=this._tileZoom,this._isValidTile(h)&&((d=this._tiles[this._tileCoordsToKey(h)])?d.current=!0:a.push(h))}if(a.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));for(var p=document.createDocumentFragment(),u=0;u<a.length;u++)this._addTile(a[u],p);this._level.el.appendChild(p)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}return!this.options.bounds||(t=this._tileCoordsToBounds(e),g(this.options.bounds).overlaps(t))},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,i=this.getTileSize(),n=e.scaleBy(i),i=n.add(i);return[t.unproject(n,e.z),t.unproject(i,e.z)]},_tileCoordsToBounds:function(e){e=this._tileCoordsToNwSe(e),e=new p(e[0],e[1]);return e=this.options.noWrap?e:this._map.wrapLatLngBounds(e)},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var e=e.split(":"),t=new f(+e[0],+e[1]);return t.z=+e[2],t},_removeTile:function(e){var t=this._tiles[e];t&&(y(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){w(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,wt&&this.options.opacity<1&&T(e,this.options.opacity),St&&!kt&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var i=this._getTilePos(e),n=this._tileCoordsToKey(e),r=this.createTile(this._wrapCoords(e),h(this._tileReady,this,e));this._initTile(r),this.createTile.length<2&&b(h(this._tileReady,this,e,null,r)),S(r,i),this._tiles[n]={el:r,coords:e,current:!0},t.appendChild(r),this.fire("tileloadstart",{tile:r,coords:e})},_tileReady:function(e,t,i){t&&this.fire("tileerror",{error:t,tile:i,coords:e});var n=this._tileCoordsToKey(e);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(T(i.el,0),a(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),t||(w(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:e})),this._noTilesToLoad())&&(this._loading=!1,this.fire("load"),wt||!this._map._fadeAnimated?b(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new f(this._wrapX?F(e.x,this._wrapX):e.x,this._wrapY?F(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new m(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}})),Ui=Vi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,(t=o(this,t)).detectRetina&&Ut&&0<t.maxZoom&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=Math.max(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),St||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var i=document.createElement("img");return k(i,"load",h(this._tileOnLoad,this,t,i)),k(i,"error",h(this._tileOnError,this,t,i)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(e),i},getTileUrl:function(e){var t={r:Ut?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(e=this._globalTileRange.max.y-e.y,this.options.tms&&(t.y=e),t["-y"]=e),U(this._url,l(t,this.options))},_tileOnLoad:function(e,t){wt?setTimeout(h(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,i){var n=this.options.errorTileUrl;n&&t.getAttribute("src")!==n&&(t.src=n),e(i,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return(e=this.options.zoomReverse?t-e:e)+this.options.zoomOffset},_getSubdomain:function(e){e=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,t.complete||(t.src=nt,y(t),delete this._tiles[e]))},_removeTile:function(e){var t=this._tiles[e];if(t)return At||t.el.setAttribute("src",nt),Vi.prototype._removeTile.call(this,e)},_tileReady:function(e,t,i){if(this._map&&(!i||i.getAttribute("src")!==nt))return Vi.prototype._tileReady.call(this,e,t,i)}}),$i=Ui.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i,n=l({},this.defaultWmsParams);for(i in t)i in this.options||(n[i]=t[i]);var e=(t=o(this,t)).detectRetina&&Ut?2:1,r=this.getTileSize();n.width=r.x*e,n.height=r.y*e,this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[t]=this._crs.code,Ui.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,i=d(i.project(t[0]),i.project(t[1])),t=i.min,i=i.max,t=(1.3<=this._wmsVersion&&this._crs===wi?[t.y,t.x,i.y,i.x]:[t.x,t.y,i.x,i.y]).join(","),i=Ui.prototype.getTileUrl.call(this,e);return i+V(this.wmsParams,i,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+t},setParams:function(e,t){return l(this.wmsParams,e),t||this.redraw(),this}}),qi=(Ui.WMS=$i,Xe.wms=function(e,t){return new $i(e,t)},O.extend({options:{padding:.1,tolerance:0},initialize:function(e){o(this,e),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&w(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var i=this._map.getZoomScale(t,this._zoom),n=fe(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),e=this._map.project(e,t).subtract(o),t=r.multiplyBy(-i).add(n).add(r).subtract(e);P?pe(this._container,t,i):S(this._container,t)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new m(i,i.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}})),Hi=qi.extend({getEvents:function(){var e=qi.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");k(e,"mousemove",B(this._onMouseMove,32,this),this),k(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),k(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){a(this._redrawRequest),delete this._ctx,y(this._container),n(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){var e,t,i,n;this._map._animatingZoom&&this._bounds||(qi.prototype._update.call(this),e=this._bounds,t=this._container,i=e.getSize(),n=Ut?2:1,S(t,e.min),t.width=n*i.x,t.height=n*i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",Ut&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update"))},_reset:function(){qi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e);e=(this._layers[s(e)]=e)._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,i=t.next,t=t.prev;i?i.prev=t:this._drawLast=t,t?t.next=i:this._drawFirst=i,delete e._order,delete this._layers[s(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"==typeof e.options.dashArray){for(var t,i=e.options.dashArray.split(/[, ]+/),n=[],r=0;r<i.length;r++){if(t=Number(i[r]),isNaN(t))return;n.push(t)}e.options._dashArray=n}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||b(this._redraw,this))},_extendRedrawBounds:function(e){var t;e._pxBounds&&(t=(e.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new m,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e,t=this._redrawBounds;t?(e=t.getSize(),this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)):this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var e,t,i=this._redrawBounds;this._ctx.save(),i&&(t=i.getSize(),this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,t.x,t.y),this._ctx.clip()),this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)e=n.layer,(!i||e._pxBounds&&e._pxBounds.intersects(i))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var i,n,r,o,a=e._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,r=a[i].length;n<r;n++)o=a[i][n],l[n?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){var t,i,n,r;this._drawing&&!e._empty()&&(t=e._point,i=this._ctx,n=Math.max(Math.round(e._radius),1),1!=(r=(Math.max(Math.round(e._radiusY),1)||n)/n)&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(t.x,t.y/r,n,0,2*Math.PI,!1),1!=r&&i.restore(),this._fillStroke(i,e))},_fillStroke:function(e,t){var i=t.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke())},_onClick:function(e){for(var t,i,n=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)(t=r.layer).options.interactive&&t._containsPoint(n)&&!this._map._draggableMoved(t)&&(i=t);i&&(Pe(e),this._fireEvent([i],e))},_onMouseMove:function(e){var t;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(t=this._map.mouseEventToLayerPoint(e),this._handleMouseHover(e,t))},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(C(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(e,t){for(var i,n,r=this._drawFirst;r;r=r.next)(i=r.layer).options.interactive&&i._containsPoint(t)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(e),n)&&(w(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseover"),this._hoveredLayer=n),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e)},_fireEvent:function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},_bringToFront:function(e){var t,i,n=e._order;n&&(t=n.next,i=n.prev,t)&&((t.prev=i)?i.next=t:t&&(this._drawFirst=t),n.prev=this._drawLast,(this._drawLast.next=n).next=null,this._drawLast=n,this._requestRedraw(e))},_bringToBack:function(e){var t,i,n=e._order;n&&(t=n.next,i=n.prev)&&((i.next=t)?t.prev=i:i&&(this._drawLast=i),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(e))}}),Zi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Ft={_initContainer:function(){this._container=_("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qi.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Zi("shape");w(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Zi("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;y(t),e.removeInteractiveTarget(t),delete this._layers[s(e)]},_updateStyle:function(e){var t=e._stroke,i=e._fill,n=e.options,r=e._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(t=t||(e._stroke=Zi("stroke")),r.appendChild(t),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=it(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=n.lineCap.replace("butt","flat"),t.joinstyle=n.lineJoin):t&&(r.removeChild(t),e._stroke=null),n.fill?(i=i||(e._fill=Zi("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),i=Math.round(e._radius),n=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+n+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){se(e._container)},_bringToBack:function(e){le(e._container)}},Gi=Ht?Zi:X,Wi=qi.extend({getEvents:function(){var e=qi.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=Gi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){y(this._container),n(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){var e,t,i;this._map._animatingZoom&&this._bounds||(qi.prototype._update.call(this),t=(e=this._bounds).getSize(),i=this._container,this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,i.setAttribute("width",t.x),i.setAttribute("height",t.y)),S(i,e.min),i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update"))},_initPath:function(e){var t=e._path=Gi("path");e.options.className&&w(t,e.options.className),e.options.interactive&&w(t,"leaflet-interactive"),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){y(e._path),e.removeInteractiveTarget(e._path),delete this._layers[s(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,e=e.options;t&&(e.stroke?(t.setAttribute("stroke",e.color),t.setAttribute("stroke-opacity",e.opacity),t.setAttribute("stroke-width",e.weight),t.setAttribute("stroke-linecap",e.lineCap),t.setAttribute("stroke-linejoin",e.lineJoin),e.dashArray?t.setAttribute("stroke-dasharray",e.dashArray):t.removeAttribute("stroke-dasharray"),e.dashOffset?t.setAttribute("stroke-dashoffset",e.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),e.fill?(t.setAttribute("fill",e.fillColor||e.color),t.setAttribute("fill-opacity",e.fillOpacity),t.setAttribute("fill-rule",e.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Y(e._parts,t))},_updateCircle:function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),n="a"+i+","+(Math.max(Math.round(e._radiusY),1)||i)+" 0 1,0 ",t=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(e,t)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){se(e._path)},_bringToBack:function(e){le(e._path)}}),Xi=(Ht&&Wi.include(Ft),z.include({getRenderer:function(e){e=(e=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer());return this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(e){var t;return"overlayPane"!==e&&void 0!==e&&(void 0===(t=this._paneRenderers[e])&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t)},_createRenderer:function(e){return this.options.preferCanvas&&Ye(e)||Ke(e)}}),Li.extend({initialize:function(e,t){Li.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=g(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}})),M=(Wi.create=Gi,Wi.pointsToPath=Y,zi.geometryToLayer=Ve,zi.coordsToLatLng=Ue,zi.coordsToLatLngs=$e,zi.latLngToCoords=qe,zi.latLngsToCoords=He,zi.getFeature=Ze,zi.asFeature=Ge,z.mergeOptions({boxZoom:!0}),A.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){k(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){n(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){y(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),gt(),me(),this._startPoint=this._map.mouseEventToContainerPoint(e),k(document,{contextmenu:ke,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=_("div","leaflet-zoom-box",this._container),w(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var e=new m(this._point,this._startPoint),t=e.getSize();S(this._box,e.min),this._box.style.width=t.x+"px",this._box.style.height=t.y+"px"},_finish:function(){this._moved&&(y(this._box),C(this._container,"leaflet-crosshair")),vt(),ge(),n(document,{contextmenu:ke,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){1!==e.which&&1!==e.button||(this._finish(),!this._moved)||(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0),e=new p(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e}))},_onKeyDown:function(e){27===e.keyCode&&this._finish()}})),Bt=(z.addInitHook("addHandler","boxZoom",M),z.mergeOptions({doubleClickZoom:!0}),A.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom(),n=t.options.zoomDelta,i=e.originalEvent.shiftKey?i-n:i+n;"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}})),Lt=(z.addInitHook("addHandler","doubleClickZoom",Bt),z.mergeOptions({dragging:!0,inertia:!kt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),A.extend({addHooks:function(){var e;this._draggable||(e=this._map,this._draggable=new xi(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))),w(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){C(this._map._container,"leaflet-grab"),C(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e,t=this._map;t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(e=g(this._map.options.maxBounds),this._offsetLimit=d(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){var t,i;this._map.options.inertia&&(t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(i),this._times.push(t),this._prunePositions(t)),this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;1<this._positions.length&&50<e-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){var e,t;this._viscosity&&this._offsetLimit&&(e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit,e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e))},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-t+i)%e+t-i,n=(n+t+i)%e-t-i,e=Math.abs(r+i)<Math.abs(n+i)?r:n;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=e},_onDragEnd:function(e){var t,i,n,r,o=this._map,a=o.options,s=!a.inertia||this._times.length<2;o.fire("dragend",e),!s&&(this._prunePositions(+new Date),e=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,t=a.easeLinearity,s=(e=e.multiplyBy(t/s)).distanceTo([0,0]),i=Math.min(a.inertiaMaxSpeed,s),e=e.multiplyBy(i/s),n=i/(a.inertiaDeceleration*t),(r=e.multiplyBy(-n/2).round()).x||r.y)?(r=o._limitOffset(r,o.options.maxBounds),b(function(){o.panBy(r,{duration:n,easeLinearity:t,noMoveStart:!0,animate:!0})})):o.fire("moveend")}})),_t=(z.addInitHook("addHandler","dragging",Lt),z.mergeOptions({keyboard:!0,keyboardPanDelta:80}),A.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),k(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),n(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var e,t,i;this._focused||(i=document.body,e=document.documentElement,t=i.scrollTop||e.scrollTop,i=i.scrollLeft||e.scrollLeft,this._map._container.focus(),window.scrollTo(i,t))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){for(var t=this._panKeys={},i=this.keyCodes,n=0,r=i.left.length;n<r;n++)t[i.left[n]]=[-1*e,0];for(n=0,r=i.right.length;n<r;n++)t[i.right[n]]=[e,0];for(n=0,r=i.down.length;n<r;n++)t[i.down[n]]=[0,e];for(n=0,r=i.up.length;n<r;n++)t[i.up[n]]=[0,-1*e]},_setZoomDelta:function(e){for(var t=this._zoomKeys={},i=this.keyCodes,n=0,r=i.zoomIn.length;n<r;n++)t[i.zoomIn[n]]=e;for(n=0,r=i.zoomOut.length;n<r;n++)t[i.zoomOut[n]]=-e},_addHooks:function(){k(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){n(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,i=e.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(t=this._panKeys[i],e.shiftKey&&(t=u(t).multiplyBy(3)),n.panBy(t),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}ke(e)}}})),yt=(z.addInitHook("addHandler","keyboard",_t),z.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),A.extend({addHooks:function(){k(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){n(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Ae(e),i=this._map.options.wheelDebounceTime,t=(this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date),Math.max(i-(+new Date-this._startTime),0));clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),t),ke(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0,n=(e._stop(),this._delta/(4*this._map.options.wheelPxPerZoomLevel)),n=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,i=i?Math.ceil(n/i)*i:n,n=e._limitZoom(t+(0<this._delta?i:-i))-t;this._delta=0,this._startTime=null,n&&("center"===e.options.scrollWheelZoom?e.setZoom(t+n):e.setZoomAround(this._lastMousePos,t+n))}})),Mt=(z.addInitHook("addHandler","scrollWheelZoom",yt),z.mergeOptions({tap:!0,tapTolerance:15}),A.extend({addHooks:function(){k(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){n(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){var t;e.touches&&(E(e),this._fireClick=!0,1<e.touches.length?(this._fireClick=!1,clearTimeout(this._holdTimeout)):(e=(t=e.touches[0]).target,this._startPos=this._newPos=new f(t.clientX,t.clientY),e.tagName&&"a"===e.tagName.toLowerCase()&&w(e,"leaflet-active"),this._holdTimeout=setTimeout(h(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))},this),1e3),this._simulateEvent("mousedown",t),k(document,{touchmove:this._onMove,touchend:this._onUp},this)))},_onUp:function(e){var t;clearTimeout(this._holdTimeout),n(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches&&((t=(e=e.changedTouches[0]).target)&&t.tagName&&"a"===t.tagName.toLowerCase()&&C(t,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid())&&this._simulateEvent("click",e)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){e=e.touches[0];this._newPos=new f(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(e,t){var i=document.createEvent("MouseEvents");i._simulated=!0,t.target._simulatedClick=!0,i.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}})),r=(Nt&&!I&&z.addInitHook("addHandler","tap",Mt),z.mergeOptions({touchZoom:Nt&&!kt,bounceAtZoomLimits:!0}),A.extend({addHooks:function(){w(this._map._container,"leaflet-touch-zoom"),k(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){C(this._map._container,"leaflet-touch-zoom"),n(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t,i,n=this._map;!e.touches||2!==e.touches.length||n._animatingZoom||this._zooming||(t=n.mouseEventToContainerPoint(e.touches[0]),i=n.mouseEventToContainerPoint(e.touches[1]),this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),"center"!==n.options.touchZoom&&(this._pinchStartLatLng=n.containerPointToLatLng(t.add(i)._divideBy(2))),this._startDist=t.distanceTo(i),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),k(document,"touchmove",this._onTouchMove,this),k(document,"touchend",this._onTouchEnd,this),E(e))},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]),r=i.distanceTo(n)/this._startDist;if(this._zoom=t.getScaleZoom(r,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&r<1||this._zoom>t.getMaxZoom()&&1<r)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1==r)return}else{i=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1==r&&0===i.x&&0===i.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(i),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),a(this._animRequest);n=h(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=b(n,this,!0),E(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,a(this._animRequest),n(document,"touchmove",this._onTouchMove),n(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}})),Yi=(z.addInitHook("addHandler","touchZoom",r),z.BoxZoom=M,z.DoubleClickZoom=Bt,z.Drag=Lt,z.Keyboard=_t,z.ScrollWheelZoom=yt,z.Tap=Mt,z.TouchZoom=r,Object.freeze=Je,e.version="1.4.0+HEAD.3337f36",e.Control=R,e.control=ai,e.Browser=xt,e.Evented=ct,e.Mixin=Dt,e.Util=st,e.Class=Z,e.Handler=A,e.extend=l,e.bind=h,e.stamp=s,e.setOptions=o,e.DomEvent=Et,e.DomUtil=Tt,e.PosAnimation=hi,e.Draggable=xi,e.LineUtil=Rt,e.PolyUtil=bt,e.Point=f,e.point=u,e.Bounds=m,e.bounds=d,e.Transformation=G,e.transformation=W,e.Projection=Vt,e.LatLng=v,e.latLng=x,e.LatLngBounds=p,e.latLngBounds=g,e.CRS=dt,e.GeoJSON=zi,e.geoJSON=We,e.geoJson=pt,e.Layer=O,e.LayerGroup=Ci,e.layerGroup=function(e,t){return new Ci(e,t)},e.FeatureGroup=Ti,e.featureGroup=function(e){return new Ti(e)},e.ImageOverlay=Ri,e.imageOverlay=function(e,t,i){return new Ri(e,t,i)},e.VideoOverlay=Oi,e.videoOverlay=function(e,t,i){return new Oi(e,t,i)},e.DivOverlay=Bi,e.Popup=Fi,e.popup=function(e,t){return new Fi(e,t)},e.Tooltip=Ni,e.tooltip=function(e,t){return new Ni(e,t)},e.Icon=Si,e.icon=function(e){return new Si(e)},e.DivIcon=ji,e.divIcon=function(e){return new ji(e)},e.Marker=Ai,e.marker=function(e,t){return new Ai(e,t)},e.TileLayer=Ui,e.tileLayer=Xe,e.GridLayer=Vi,e.gridLayer=function(e){return new Vi(e)},e.SVG=Wi,e.svg=Ke,e.Renderer=qi,e.Canvas=Hi,e.canvas=Ye,e.Path=Pi,e.CircleMarker=Mi,e.circleMarker=function(e,t){return new Mi(e,t)},e.Circle=Ii,e.circle=function(e,t,i){return new Ii(e,t,i)},e.Polyline=Di,e.polyline=function(e,t){return new Di(e,t)},e.Polygon=Li,e.polygon=function(e,t){return new Li(e,t)},e.Rectangle=Xi,e.rectangle=function(e,t){return new Xi(e,t)},e.Map=z,e.map=function(e,t){return new z(e,t)},window.L);e.noConflict=function(){return window.L=Yi,this},window.L=e}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).maplibregl=t()}(this,function(){var r,o,a;function e(e,t){var i,n;r?o?(i="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",r(n={}),a=t(n),"undefined"!=typeof window&&(a.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"})))):o=t:r=t}return e(0,function(se){var P=I;function I(e,t,i,n){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=n}function L(e,t,i,n){let r=new P(e,t,i,n);return function(e){return r.solve(e)}}I.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(1<e)return 1;for(var i=e,n=0;n<8;n++){var r=this.sampleCurveX(i)-e;if(Math.abs(r)<t)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i-=r/o}for(var a=0,s=1,i=e,n=0;n<20&&(r=this.sampleCurveX(i),!(Math.abs(r-e)<t));n++)r<e?a=i:s=i,i=.5*(s-a)+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var z=L(.25,.1,.25,1);function R(e,t,i){return Math.min(i,Math.max(t,e))}function O(e,t,i){var n=i-t,e=((e-t)%n+n)%n+t;return e===t?i:e}function B(t,...e){for(var i of e)for(let e in i)t[e]=i[e];return t}let F=1;function N(e,t){e.forEach(e=>{t[e]&&(t[e]=t[e].bind(t))})}function j(e,t,i){var n,r={};for(n in e)r[n]=t.call(i||this,e[n],n,e);return r}function V(e,t,i){var n,r={};for(n in e)t.call(i||this,e[n],n,e)&&(r[n]=e[n]);return r}function U(e){return Array.isArray(e)?e.map(U):"object"==typeof e&&e?j(e,U):e}let $={};function le(e){$[e]||("undefined"!=typeof console&&console.warn(e),$[e]=!0)}function q(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function H(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Z(e){let r={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,t,i,n)=>{i=i||n;return r[t]=!i||i.toLowerCase(),""}),r["max-age"]){let e=parseInt(r["max-age"],10);isNaN(e)?delete r["max-age"]:r["max-age"]=e}return r}let G,W,Y=null;function K(e){var t;return null==Y&&(t=e.navigator?e.navigator.userAgent:null,Y=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))),Y}function J(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}let Q={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(e){let t=requestAnimationFrame(e);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(e,t=0){var i=window.document.createElement("canvas"),n=i.getContext("2d");if(n)return i.width=e.width,i.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(-t,-t,e.width+2*t,e.height+2*t);throw new Error("failed to create canvas 2d context")},resolveURL:e=>((G=G||document.createElement("a")).href=e,G.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(W=null==W?matchMedia("(prefers-reduced-motion: reduce)"):W).matches}};var M=ee;function ee(e,t){this.x=e,this.y=t}ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,e=e.y-this.y;return t*t+e*e},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),e=Math.sin(e),i=e*this.x+t*this.y;return this.x=t*this.x-e*this.y,this.y=i,this},_rotateAround:function(e,t){var i=Math.cos(e),e=Math.sin(e),n=t.y+e*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-e*(this.y-t.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};let te={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},ie="mapbox-tiles",ne,re=500,oe=50;function ae(){"undefined"!=typeof caches&&(ne=ne||caches.open(ie))}let de=1/0,he={supported:!(ee.convert=function(e){return!(e instanceof ee)&&Array.isArray(e)?new ee(e[0],e[1]):e}),testSupport:function(e){!me&&fe&&(ge?ve(e):pe=e)}},pe,fe,me=!1,ge=!1;function ve(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,fe),e.isContextLost())return;he.supported=!0}catch(e){}e.deleteTexture(t),me=!0}"undefined"!=typeof document&&((fe=document.createElement("img")).onload=function(){pe&&ve(pe),pe=null,ge=!0},fe.onerror=function(){me=!0,pe=null},fe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var _e={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(_e);class ye extends Error{constructor(e,t,i,n){super(`AJAXError: ${t} (${e}): `+i),this.status=e,this.statusText=t,this.url=i,this.body=n}}let be=H()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function xe(n,r){let e=new AbortController,t=new Request(n.url,{method:n.method||"GET",body:n.body,credentials:n.credentials,headers:n.headers,referrer:be(),signal:e.signal}),o=!1,a=!1;if("json"===n.type&&t.headers.set("Accept","application/json"),!a){let e=Date.now();fetch(t).then(t=>{return t.ok?(i=t,e,void("arrayBuffer"===n.type?i.arrayBuffer():"json"===n.type?i.json():i.text()).then(e=>{a||(o=!0,r(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))}).catch(e=>{a||r(new Error(e.message))})):t.blob().then(e=>r(new ye(t.status,t.statusText,n.url,e)));var i}).catch(e=>{20!==e.code&&r(new Error(e.message))})}return{cancel:()=>{a=!0,o||e.abort()}}}function we(i,n){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){if(H()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,n);if(!H()){let e=i.url.substring(0,i.url.indexOf("://"));return(te.REGISTERED_PROTOCOLS[e]||xe)(i,n)}}if(!(/^file:/.test(e=i.url)||/^file:/.test(be())&&!/^\w+:/.test(e))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return xe(i,n);if(H()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,n,void 0,!0)}var e;{var r=i,o=n;let t=new XMLHttpRequest;t.open(r.method||"GET",r.url,!0),"arrayBuffer"===r.type&&(t.responseType="arraybuffer");for(let e in r.headers)t.setRequestHeader(e,r.headers[e]);return"json"===r.type&&(t.responseType="text",t.setRequestHeader("Accept","application/json")),t.withCredentials="include"===r.credentials,t.onerror=()=>{o(new Error(t.statusText))},t.onload=()=>{if((200<=t.status&&t.status<300||0===t.status)&&null!==t.response){let e=t.response;if("json"===r.type)try{e=JSON.parse(t.response)}catch(e){return o(e)}o(null,e,t.getResponseHeader("Cache-Control"),t.getResponseHeader("Expires"))}else{var e=new Blob([t.response],{type:t.getResponseHeader("Content-Type")});o(new ye(t.status,t.statusText,r.url,e))}},t.send(r.body),{cancel:()=>t.abort()}}}function Ce(e,t){return we(B(e,{type:"arrayBuffer"}),t)}function Te(t,l){if(he.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Ee>=te.MAX_PARALLEL_IMAGE_REQUESTS){let e={requestParameters:t,callback:l,cancelled:!1,cancel(){this.cancelled=!0}};return ke.push(e),e}Ee++;let e=!1,c=()=>{if(!e)for(e=!0,Ee--;ke.length&&Ee<te.MAX_PARALLEL_IMAGE_REQUESTS;){let e=ke.shift(),{requestParameters:t,callback:i,cancelled:n}=e;n||(e.cancel=Te(t,i).cancel)}},i=Ce(t,(t,i,n,r)=>{if(c(),t)l(t);else if(i){var o,a,t=i,i=(e,t)=>{null!=e?l(e):null!=t&&l(null,t,{cacheControl:n,expires:r})};if("function"==typeof createImageBitmap)o=i,a=new Blob([new Uint8Array(t)],{type:"image/png"}),createImageBitmap(a).then(e=>{o(null,e)}).catch(e=>{o(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))});else{a=t;var s=i;let e=new Image;e.onload=()=>{s(null,e),URL.revokeObjectURL(e.src),e.onload=null,window.requestAnimationFrame(()=>{e.src=Se})},e.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),t=new Blob([new Uint8Array(a)],{type:"image/png"}),e.src=a.byteLength?URL.createObjectURL(t):Se}}});return{cancel:()=>{i.cancel(),c()}}}let Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",ke,Ee;ke=[],Ee=0;function Ae(e,t,i){i[e]&&-1!==i[e].indexOf(t)||(i[e]=i[e]||[],i[e].push(t))}function Pe(e,t,i){i&&i[e]&&-1!==(t=i[e].indexOf(t))&&i[e].splice(t,1)}class Me{constructor(e,t={}){B(this,t),this.type=e}}class Ie extends Me{constructor(e,t={}){super("error",B({error:e},t))}}class De{on(e,t){return this._listeners=this._listeners||{},Ae(e,t,this._listeners),this}off(e,t){return Pe(e,t,this._listeners),Pe(e,t,this._oneTimeListeners),this}once(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Ae(e,t,this._oneTimeListeners),this}fire(i,e){let n=(i="string"==typeof i?new Me(i,e||{}):i).type;if(this.listens(n)){let t=(i.target=this)._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(let e of t)e.call(this,i);for(let e of this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[])Pe(n,e,this._oneTimeListeners),e.call(this,i);var r=this._eventedParent;r&&(B(i,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(i))}else i instanceof Ie&&console.error(i.error);return this}listens(e){return this._listeners&&this._listeners[e]&&0<this._listeners[e].length||this._oneTimeListeners&&this._oneTimeListeners[e]&&0<this._oneTimeListeners[e].length||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var o={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class p{constructor(e,t,i,n){this.message=(e?e+": ":"")+i,n&&(this.identifier=n),null!=t&&t.__line__&&(this.line=t.__line__)}}function Le(e){var t=e.value;return t?[new p(e.key,t,"constants have been deprecated as of v8")]:[]}function ze(t,...e){for(var i of e)for(let e in i)t[e]=i[e];return t}function f(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Re(e){if(Array.isArray(e))return e.map(Re);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t,i={};for(t in e)i[t]=Re(e[t]);return i}return f(e)}class Oe extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Be{constructor(e,i=[]){this.parent=e,this.bindings={};for(let[e,t]of i)this.bindings[e]=t}concat(e){return new Be(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}let Fe={kind:"null"},u={kind:"number"},s={kind:"string"},c={kind:"boolean"},Ne={kind:"color"},je={kind:"object"},d={kind:"value"},Ve={kind:"collator"},Ue={kind:"formatted"},$e={kind:"padding"},qe={kind:"resolvedImage"};function l(e,t){return{kind:"array",itemType:e,N:t}}function h(e){var t;return"array"===e.kind?(t=h(e.itemType),"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`):e.kind}let He=[Fe,u,s,c,Ne,Ue,je,l(d),$e,qe];function Ze(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Ze(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(let e of He)if(!Ze(e,t))return null}return`Expected ${h(e)} but found ${h(t)} instead.`}function Ge(t,e){return e.some(e=>e.kind===t.kind)}function We(t,e){return e.some(e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t)}var Xe,Ye={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ke(e){return(e=Math.round(e))<0?0:255<e?255:e}function Je(e){return Ke("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Qe(e){return(e="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:1<e?1:e}function et(e,t,i){return i<0?i+=1:1<i&&--i,6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}try{Xe={}.parseCSSColor=function(e){e=e.replace(/ /g,"").toLowerCase();if(e in Ye)return Ye[e].slice();if("#"===e[0])return 4===e.length?0<=(t=parseInt(e.substr(1),16))&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===e.length&&0<=(t=parseInt(e.substr(1),16))&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var t=e.indexOf("("),i=e.indexOf(")");if(-1!==t&&i+1===e.length){var n,r,o,a=e.substr(0,t),s=e.substr(t+1,i-(t+1)).split(","),l=1;switch(a){case"rgba":if(4!==s.length)return null;l=Qe(s.pop());case"rgb":return 3!==s.length?null:[Je(s[0]),Je(s[1]),Je(s[2]),l];case"hsla":if(4!==s.length)return null;l=Qe(s.pop());case"hsl":return 3!==s.length?null:(n=(parseFloat(s[0])%360+360)%360/360,o=Qe(s[1]),[Ke(255*et(o=2*(r=Qe(s[2]))-(r=r<=.5?r*(o+1):r+o-r*o),r,n+1/3)),Ke(255*et(o,r,n)),Ke(255*et(o,r,n-1/3)),l]);default:return null}}return null}}catch(se){}class m{constructor(e,t,i,n=1){this.r=e,this.g=t,this.b=i,this.a=n}static parse(e){if(e)return e instanceof m?e:"string"==typeof e&&(e=Xe(e))?new m(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){var[e,t,i,n]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(i)},${n})`}toArray(){var{r:e,g:t,b:i,a:n}=this;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*i/n,n]}}m.black=new m(0,0,0,1),m.white=new m(1,1,1,1),m.transparent=new m(0,0,0,0),m.red=new m(1,0,0,1);class tt{constructor(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale||[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale||[]).resolvedOptions().locale}}class it{constructor(e,t,i,n,r){this.text=e,this.image=t,this.scale=i,this.fontStack=n,this.textColor=r}}class nt{constructor(e){this.sections=e}static fromString(e){return new nt([new it(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof nt?e:nt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}}class rt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof rt)return e;if("number"==typeof e)return new rt([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||4<e.length)){for(var t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new rt(e)}}toString(){return JSON.stringify(this.values)}}class ot{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ot({name:e,available:!1}):null}}function at(e,t,i,n){return"number"==typeof e&&0<=e&&e<=255&&"number"==typeof t&&0<=t&&t<=255&&"number"==typeof i&&0<=i&&i<=255?void 0===n||"number"==typeof n&&0<=n&&n<=1?null:`Invalid rgba value [${[e,t,i,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[e,t,i,n]:[e,t,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function st(e){if(null===e)return 1;if("string"==typeof e)return 1;if("boolean"==typeof e)return 1;if("number"==typeof e)return 1;if(e instanceof m)return 1;if(e instanceof tt)return 1;if(e instanceof nt)return 1;if(e instanceof rt)return 1;if(e instanceof ot)return 1;if(Array.isArray(e)){for(var t of e)if(!st(t))return;return 1}if("object"==typeof e){for(var i in e)if(!st(e[i]))return;return 1}}function g(e){if(null===e)return Fe;if("string"==typeof e)return s;if("boolean"==typeof e)return c;if("number"==typeof e)return u;if(e instanceof m)return Ne;if(e instanceof tt)return Ve;if(e instanceof nt)return Ue;if(e instanceof rt)return $e;if(e instanceof ot)return qe;if(Array.isArray(e)){var i,n=e.length;let t;for(i of e){let e=g(i);if(t){if(t===e)continue;t=d;break}t=e}return l(t||d,n)}return je}function lt(e){var t=typeof e;return null===e?"":"string"==t||"number"==t||"boolean"==t?String(e):e instanceof m||e instanceof nt||e instanceof rt||e instanceof ot?e.toString():JSON.stringify(e)}class ct{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!st(e[1]))return t.error("invalid value");e=e[1];let i=g(e);t=t.expectedType;return"array"!==i.kind||0!==i.N||!t||"array"!==t.kind||"number"==typeof t.N&&0!==t.N||(i=t),new ct(i,e)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class v{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}let ut={string:s,number:u,boolean:c,object:je};class dt{constructor(e,t){this.type=e,this.args=t}static parse(i,n){if(i.length<2)return n.error("Expected at least one argument.");let r,o=1;var e=i[0];if("array"===e){let t,e;if(2<i.length){let e=i[1];if("string"!=typeof e||!(e in ut)||"object"===e)return n.error('The item type argument of "array" must be one of string, number, boolean',1);t=ut[e],o++}else t=d;if(3<i.length){if(null!==i[2]&&("number"!=typeof i[2]||i[2]<0||i[2]!==Math.floor(i[2])))return n.error('The length argument to "array" must be a positive integer literal',2);e=i[2],o++}r=l(t,e)}else{if(!ut[e])throw new Error("Types doesn't contain name = "+e);r=ut[e]}for(var t=[];o<i.length;o++){let e=n.parse(i[o],o,d);if(!e)return null;t.push(e)}return new dt(r,t)}evaluate(t){for(let e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!Ze(this.type,g(i)))return i;if(e===this.args.length-1)throw new v(`Expected value to be of type ${h(this.type)}, but found ${h(g(i))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}let ht={"to-boolean":c,"to-color":Ne,"to-number":u,"to-string":s};class pt{constructor(e,t){this.type=e,this.args=t}static parse(i,n){if(i.length<2)return n.error("Expected at least one argument.");var e=i[0];if(!ht[e])throw new Error(`Can't parse ${e} as it is not part of the known types`);if(("to-boolean"===e||"to-string"===e)&&2!==i.length)return n.error("Expected one argument.");let t=ht[e],r=[];for(let t=1;t<i.length;t++){let e=n.parse(i[t],t,d);if(!e)return null;r.push(e)}return new pt(t,r)}evaluate(i){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(i));if("color"===this.type.kind){let e,t;for(var n of this.args){if(e=n.evaluate(i),t=null,e instanceof m)return e;if("string"==typeof e){n=i.parseColor(e);if(n)return n}else if(Array.isArray(e)&&!(t=e.length<3||4<e.length?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:at(e[0],e[1],e[2],e[3])))return new m(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new v(t||`Could not parse color from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("padding"===this.type.kind){let e;for(var t of this.args){e=t.evaluate(i);t=rt.parse(e);if(t)return t}throw new v(`Could not parse padding from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("number"!==this.type.kind)return"formatted"===this.type.kind?nt.fromString(lt(this.args[0].evaluate(i))):"resolvedImage"===this.type.kind?ot.fromString(lt(this.args[0].evaluate(i))):lt(this.args[0].evaluate(i));{let e=null;for(var r of this.args){if(null===(e=r.evaluate(i)))return 0;r=Number(e);if(!isNaN(r))return r}throw new v(`Could not convert ${JSON.stringify(e)} to number.`)}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}let ft=["Unknown","Point","LineString","Polygon"];class mt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ft[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t=t||(this._parseColorCache[e]=m.parse(e))}}class gt{constructor(e,t,i,n){this.name=e,this.type=t,this._evaluate=i,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(s,n){let t=s[0],e=gt.definitions[t];if(!e)return n.error(`Unknown expression "${t}". If you wanted a literal array, use ["literal", [...]].`,0);let i=Array.isArray(e)?e[0]:e.type,r=Array.isArray(e)?[[e[1],e[2]]]:e.overloads,o=r.filter(([e])=>!Array.isArray(e)||e.length===s.length-1),l=null;for(let[a,e]of o){l=new zt(n.registry,n.path,null,n.scope);let r=[],o=!1;for(let n=1;n<s.length;n++){let e=s[n],t=Array.isArray(a)?a[n-1]:a.type,i=l.parse(e,1+r.length,t);if(!i){o=!0;break}r.push(i)}if(!o)if(Array.isArray(a)&&a.length!==r.length)l.error(`Expected ${a.length} arguments, but found ${r.length} instead.`);else{for(let i=0;i<r.length;i++){let e=Array.isArray(a)?a[i]:a.type,t=r[i];l.concat(i+1).checkSubtype(e,t.type)}if(0===l.errors.length)return new gt(t,i,e,r)}}if(1===o.length)n.errors.push(...l.errors);else{let e=(o.length?o:r).map(([e])=>{return e=e,Array.isArray(e)?`(${e.map(h).join(", ")})`:`(${h(e.type)}...)`}).join(" | "),i=[];for(let t=1;t<s.length;t++){let e=n.parse(s[t],1+i.length);if(!e)return null;i.push(h(e.type))}n.error(`Expected arguments of type ${e}, but found (${i.join(", ")}) instead.`)}return null}static register(e,t){for(var i in gt.definitions=t)e[i]=gt}}class vt{constructor(e,t,i){this.type=Ve,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");e=e[1];if("object"!=typeof e||Array.isArray(e))return t.error("Collator options argument must be an object.");var i=t.parse(void 0!==e["case-sensitive"]&&e["case-sensitive"],1,c);if(!i)return null;var n=t.parse(void 0!==e["diacritic-sensitive"]&&e["diacritic-sensitive"],1,c);if(!n)return null;let r=null;return e.locale&&!(r=t.parse(e.locale,1,s))?null:new vt(i,n,r)}evaluate(e){return new tt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}let _t=8192;function yt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function bt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function xt(i,n){let r=!1;for(let e=0,t=n.length;e<t;e++){var o=n[e];for(let e=0,t=o.length;e<t-1;e++){if(a=i,s=o[e],c=o[e+1],l=u=void 0,u=a[0]-s[0],s=a[1]-s[1],l=a[0]-c[0],a=a[1]-c[1],u*a-l*s==0&&u*l<=0&&s*a<=0)return;(c=o[e])[1]>i[1]!=(u=o[e+1])[1]>i[1]&&i[0]<(u[0]-c[0])*(i[1]-c[1])/(u[1]-c[1])+c[0]&&(r=!r)}}var a,s,l,c,u;return r}function wt(e,t,i,n){var r=n[0]-i[0],n=n[1]-i[1],e=(e[0]-i[0])*n-r*(e[1]-i[1]),n=(t[0]-i[0])*n-r*(t[1]-i[1]);return 0<e&&n<0||e<0&&0<n}function Ct(t,i){for(let e=0;e<t.length;++e)if(!xt(t[e],i))return;for(let e=0;e<t.length-1;++e)if(function(t,i,e){for(var n of e)for(let e=0;e<n.length-1;++e)if(0!=(l=[(s=n[e+1])[0]-(a=n[e])[0],s[1]-a[1]])[0]*(c=[(o=i)[0]-(r=t)[0],o[1]-r[1]])[1]-l[1]*c[0]&&wt(r,o,a,s)&&wt(a,s,r,o))return 1;var r,o,a,s,l,c}(t[e],t[e+1],i))return;return 1}function Tt(i,n,r){var o,a,e=[];for(let t=0;t<i.length;t++){var s=[];for(let e=0;e<i[t].length;e++){o=i[t][e],a=r,l=void 0,l=(180+o[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,a=Math.pow(2,a.z);var l=[Math.round(l*a*_t),Math.round(o*a*_t)];yt(n,l),s.push(l)}e.push(s)}return e}function St(t,i,n){var r=[];for(let e=0;e<t.length;e++){var o=Tt(t[e],i,n);r.push(o)}return r}function kt(i,e,n,r){if(i[0]<n[0]||i[0]>n[2]){let e=.5*r,t=i[0]-n[0]>e?-r:n[0]-i[0]>e?r:0;0===t&&(t=i[0]-n[2]>e?-r:n[2]-i[0]>e?r:0),i[0]+=t}yt(e,i)}function Et(t,i,n,e){var r=Math.pow(2,e.z)*_t,o=[e.x*_t,e.y*_t],a=[];for(let e of t)for(let t of e){let e=[t.x+o[0],t.y+o[1]];kt(e,i,n,r),a.push(e)}return a}function At(t,n,i,e){var r=Math.pow(2,e.z)*_t,o=[e.x*_t,e.y*_t],a=[];for(let e of t){let i=[];for(let t of e){let e=[t.x+o[0],t.y+o[1]];yt(n,e),i.push(e)}a.push(i)}if(n[2]-n[0]<=r/2){(e=n)[0]=e[1]=1/0,e[2]=e[3]=-1/0;for(let t of a)for(let e of t)kt(e,n,i,r)}return a}class Pt{constructor(e,t){this.type=c,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(st(e[1])){let t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){var i=t.features[e].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Pt(t,t.features[e].geometry)}else if("Feature"===t.type){let e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new Pt(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new Pt(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType()){var t=e;var i=this.geometries;var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],o=t.canonicalID();if("Polygon"===i.type){var a=Tt(i.coordinates,r,o),s=Et(t.geometry(),n,r,o);if(!bt(n,r))return!1;for(let e of s)if(!xt(e,a))return!1}if("MultiPolygon"===i.type){var l=St(i.coordinates,r,o),s=Et(t.geometry(),n,r,o);if(!bt(n,r))return!1;for(let e of s)if(!function(t,i){for(let e=0;e<i.length;e++)if(xt(t,i[e]))return 1}(e,l))return!1}return!0;return}if("LineString"===e.geometryType()){var c=e;i=this.geometries;t=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],n=c.canonicalID();if("Polygon"===i.type){var u=Tt(i.coordinates,o,n),d=At(c.geometry(),t,o,n);if(!bt(t,o))return!1;for(let e of d)if(!Ct(e,u))return!1}if("MultiPolygon"===i.type){var h=St(i.coordinates,o,n),d=At(c.geometry(),t,o,n);if(!bt(t,o))return!1;for(let e of d)if(!function(t,i){for(let e=0;e<i.length;e++)if(Ct(t,i[e]))return 1}(e,h))return!1}return!0;return}}return!1}eachChild(){}outputDefined(){return!0}}function Mt(e){if(e instanceof gt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Pt)return!1;let t=!0;return e.eachChild(e=>{t&&!Mt(e)&&(t=!1)}),t}function It(e){if(!(e instanceof gt&&"feature-state"===e.name)){let t=!0;return e.eachChild(e=>{t&&!It(e)&&(t=!1)}),t}}function Dt(e,t){if(e instanceof gt&&0<=t.indexOf(e.name))return!1;let i=!0;return e.eachChild(e=>{i&&!Dt(e,t)&&(i=!1)}),i}class Lt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){return 2!==e.length||"string"!=typeof e[1]?t.error("'var' expression requires exactly one string literal argument."):(e=e[1],t.scope.has(e)?new Lt(e,t.scope.get(e)):t.error(`Unknown variable "${e}". Make sure "${e}" has been bound in an enclosing "let" expression before using it.`,1))}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class zt{constructor(e,t=[],i,n=new Be,r=[]){this.registry=e,this.path=t,this.key=t.map(e=>`[${e}]`).join(""),this.scope=n,this.errors=r,this.expectedType=i}parse(e,t,i,n,r={}){return(t?this.concat(t,i,n):this)._parse(e,r)}_parse(t,n){function r(e,t,i){return"assert"===i?new dt(t,[e]):"coerce"===i?new pt(t,[e]):e}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var e=t[0];if("string"!=typeof e)return this.error(`Expression name must be a string, but found ${typeof e} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;var o=this.registry[e];if(o){let i=o.parse(t,this);if(!i)return null;if(this.expectedType){let e=this.expectedType,t=i.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==t.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==t.kind&&"string"!==t.kind)if("padding"!==e.kind||"value"!==t.kind&&"number"!==t.kind&&"array"!==t.kind){if(this.checkSubtype(e,t))return null}else i=r(i,e,n.typeAnnotation||"coerce");else i=r(i,e,n.typeAnnotation||"coerce");else i=r(i,e,n.typeAnnotation||"assert")}if(!(i instanceof ct)&&"resolvedImage"!==i.type.kind&&function t(e){if(e instanceof Lt)return t(e.boundExpression);if(e instanceof gt&&"error"===e.name)return!1;if(e instanceof vt)return!1;if(e instanceof Pt)return!1;let i=e instanceof pt||e instanceof dt;let n=!0;return e.eachChild(e=>{n=i?n&&t(e):n&&e instanceof ct}),!!n&&Mt(e)&&Dt(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(i)){let e=new mt;try{i=new ct(i.type,i.evaluate(e))}catch(t){return this.error(t.message),null}}return i}return this.error(`Unknown expression "${e}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(e,t,i){e="number"==typeof e?this.path.concat(e):this.path,i=i?this.scope.concat(i):this.scope;return new zt(this.registry,e,t||null,i,this.errors)}error(e,...t){t=""+this.key+t.map(e=>`[${e}]`).join("");this.errors.push(new Oe(t,e))}checkSubtype(e,t){e=Ze(e,t);return e&&this.error(e),e}}function Rt(e,t){var i=e.length-1;let n,r,o=0,a=i,s;for(;o<=a;)if(n=e[s=Math.floor((o+a)/2)],r=e[s+1],n<=t){if(s===i||t<r)return s;o=s+1}else{if(!(t<n))throw new v("Input is not a number.");a=s-1}return 0}class Ot{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(let[e,t]of i)this.labels.push(e),this.outputs.push(t)}static parse(t,i){if(t.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");var e=i.parse(t[1],1,u);if(!e)return null;var n=[];let r=null;i.expectedType&&"value"!==i.expectedType.kind&&(r=i.expectedType);for(let e=1;e<t.length;e+=2){var o=1===e?-1/0:t[e],a=t[e+1],s=e,l=e+1;if("number"!=typeof o)return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=o)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);s=i.parse(a,l,r);if(!s)return null;r=r||s.type,n.push([o,s])}return new Ot(r,e,n)}evaluate(e){var t,i,n=this.labels,r=this.outputs;return(1===n.length||(t=this.input.evaluate(e))<=n[0]?r[0]:t>=n[(i=n.length)-1]?r[i-1]:r[Rt(n,t)]).evaluate(e)}eachChild(e){e(this.input);for(var t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function y(e,t,i){return e*(1-i)+t*i}var Bt=Object.freeze({__proto__:null,number:y,color:function(e,t,i){return new m(y(e.r,t.r,i),y(e.g,t.g,i),y(e.b,t.b,i),y(e.a,t.a,i))},array:function(e,i,n){return e.map((e,t)=>y(e,i[t],n))},padding:function(e,t,i){e=e.values,t=t.values;return new rt([y(e[0],t[0],i),y(e[1],t[1],i),y(e[2],t[2],i),y(e[3],t[3],i)])}});let Ft=4/29,Nt=6/29,jt=3*Nt*Nt,Vt=Math.PI/180,Ut=180/Math.PI;function $t(e){return.008856451679035631<e?Math.pow(e,1/3):e/jt+Ft}function qt(e){return e>Nt?e*e*e:jt*(e-Ft)}function Ht(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Zt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Gt(e){var t=Zt(e.r),i=Zt(e.g),n=Zt(e.b),r=$t((.4124564*t+.3575761*i+.1804375*n)/.95047),o=$t(.2126729*t+.7151522*i+.072175*n);return{l:116*o-16,a:500*(r-o),b:200*(o-$t((.0193339*t+.119192*i+.9503041*n)/1.08883)),alpha:e.a}}function Wt(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200,t=+qt(t),i=.95047*qt(i),n=1.08883*qt(n);return new m(Ht(3.2404542*i-1.5371385*t-.4985314*n),Ht(-.969266*i+1.8760108*t+.041556*n),Ht(.0556434*i-.2040259*t+1.0572252*n),e.alpha)}let Xt={forward:Gt,reverse:Wt,interpolate:function(e,t,i){return{l:y(e.l,t.l,i),a:y(e.a,t.a,i),b:y(e.b,t.b,i),alpha:y(e.alpha,t.alpha,i)}}},Yt={forward:function(e){var{l:t,a:i,b:n}=Gt(e),r=Math.atan2(n,i)*Ut;return{h:r<0?360+r:r,c:Math.sqrt(i*i+n*n),l:t,alpha:e.a}},reverse:function(e){var t=e.h*Vt,i=e.c;return Wt({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:(n=e.h,r=t.h,n+i*(180<(r-=n)||r<-180?r-360*Math.round(r/360):r)),c:y(e.c,t.c,i),l:y(e.l,t.l,i),alpha:y(e.alpha,t.alpha,i)};var n,r}};var Kt=Object.freeze({__proto__:null,lab:Xt,hcl:Yt});class Jt{constructor(e,t,i,n,r){this.type=e,this.operator=t,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(let[e,t]of r)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,i,n){let r=0;return"exponential"===e.name?r=Qt(t,e.base,i,n):"linear"===e.name?r=Qt(t,1,i,n):"cubic-bezier"===e.name&&(e=e.controlPoints,r=new P(e[0],e[1],e[2],e[3]).solve(Qt(t,1,i,n))),r}static parse(e,o){let[t,i,n,...a]=e;if(!Array.isArray(i)||0===i.length)return o.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){let e=i[1];if("number"!=typeof e)return o.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:e}}else{if("cubic-bezier"!==i[0])return o.error("Unknown interpolation type "+String(i[0]),1,0);{let e=i.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||1<e))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(!(n=o.parse(n,2,u)))return null;var s=[];let l=null;"interpolate-hcl"===t||"interpolate-lab"===t?l=Ne:o.expectedType&&"value"!==o.expectedType.kind&&(l=o.expectedType);for(let r=0;r<a.length;r+=2){let e=a[r],t=a[r+1],i=r+3,n=r+4;if("number"!=typeof e)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(s.length&&s[s.length-1][0]>=e)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);var c=o.parse(t,n,l);if(!c)return null;l=l||c.type,s.push([e,c])}return"number"===l.kind||"color"===l.kind||"padding"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Jt(l,t,i,n,s):o.error(`Type ${h(l)} is not interpolatable.`)}evaluate(e){var t,i,n=this.labels,r=this.outputs;return 1===n.length||(i=this.input.evaluate(e))<=n[0]?r[0].evaluate(e):i>=n[(t=n.length)-1]?r[t-1].evaluate(e):(t=Rt(n,i),i=Jt.interpolationFactor(this.interpolation,i,n[t],n[t+1]),n=r[t].evaluate(e),r=r[t+1].evaluate(e),"interpolate"===this.operator?Bt[this.type.kind.toLowerCase()](n,r,i):"interpolate-hcl"===this.operator?Yt.reverse(Yt.interpolate(Yt.forward(n),Yt.forward(r),i)):Xt.reverse(Xt.interpolate(Xt.forward(n),Xt.forward(r),i)))}eachChild(e){e(this.input);for(var t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Qt(e,t,i,n){n-=i,e-=i;return 0==n?0:1===t?e/n:(Math.pow(t,e)-1)/(Math.pow(t,n)-1)}class ei{constructor(e,t){this.type=e,this.args=t}static parse(e,i){if(e.length<2)return i.error("Expectected at least one argument.");let n=null,t=i.expectedType;t&&"value"!==t.kind&&(n=t);var r=[];for(let t of e.slice(1)){let e=i.parse(t,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,r.push(e)}if(n)return e=t&&r.some(e=>Ze(t,e.type)),new ei(e?d:n,r);throw new Error("No output type")}evaluate(e){let t,i=null,n=0;for(var r of this.args)if(n++,i=r.evaluate(e),i&&i instanceof ot&&!i.available&&(t=t||i.name,i=null,n===this.args.length)&&(i=t),null!==i)break;return i}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}class ti{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(var t of this.bindings)e(t[1]);e(this.result)}static parse(t,i){if(t.length<4)return i.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);var n=[];for(let e=1;e<t.length-1;e+=2){var r=t[e];if("string"!=typeof r)return i.error(`Expected string, but found ${typeof r} instead.`,e);if(/[^a-zA-Z0-9_]/.test(r))return i.error("Variable names must contain only alphanumeric characters or '_'.",e);var o=i.parse(t[e+1],e+1);if(!o)return null;n.push([r,o])}var e=i.parse(t[t.length-1],t.length-1,i.expectedType,n);return e?new ti(n,e):null}outputDefined(){return this.result.outputDefined()}}function ii(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function ni(e,t,i,n){return 0===n.compare(t,i)}function ri(o,a,e){let s="=="!==o&&"!="!==o;return class l{constructor(e,t,i){this.type=c,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var i=e[0];let n=t.parse(e[1],1,d);if(!n)return null;if(!ii(i,n.type))return t.concat(1).error(`"${i}" comparisons are not supported for type '${h(n.type)}'.`);let r=t.parse(e[2],2,d);if(!r)return null;if(!ii(i,r.type))return t.concat(2).error(`"${i}" comparisons are not supported for type '${h(r.type)}'.`);if(n.type.kind!==r.type.kind&&"value"!==n.type.kind&&"value"!==r.type.kind)return t.error(`Cannot compare types '${h(n.type)}' and '${h(r.type)}'.`);s&&("value"===n.type.kind&&"value"!==r.type.kind?n=new dt(r.type,[n]):"value"!==n.type.kind&&"value"===r.type.kind&&(r=new dt(n.type,[r])));let o=null;if(4===e.length){if("string"!==n.type.kind&&"string"!==r.type.kind&&"value"!==n.type.kind&&"value"!==r.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(o=t.parse(e[3],3,Ve)))return null}return new l(n,r,o)}evaluate(i){var n=this.lhs.evaluate(i),r=this.rhs.evaluate(i);if(s&&this.hasUntypedArgument){let e=g(n),t=g(r);if(e.kind!==t.kind||"string"!==e.kind&&"number"!==e.kind)throw new v(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${e.kind}, ${t.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){let e=g(n),t=g(r);if("string"!==e.kind||"string"!==t.kind)return a(i,n,r)}return this.collator?e(i,n,r,this.collator.evaluate(i)):a(i,n,r)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}var oi=ri("==",function(e,t,i){return t===i},ni),e=ri("!=",function(e,t,i){return t!==i},function(e,t,i,n){return!ni(0,t,i,n)}),ai=ri("<",function(e,t,i){return t<i},function(e,t,i,n){return n.compare(t,i)<0}),si=ri(">",function(e,t,i){return i<t},function(e,t,i,n){return 0<n.compare(t,i)}),li=ri("<=",function(e,t,i){return t<=i},function(e,t,i,n){return n.compare(t,i)<=0});class ci{constructor(e){this.type=Ue,this.sections=e}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");var e=t[1];if(!Array.isArray(e)&&"object"==typeof e)return n.error("First argument must be an image or text section.");var r=[];let o=!1;for(let e=1;e<=t.length-1;++e){var a=t[e];if(o&&"object"==typeof a&&!Array.isArray(a)){o=!1;let e=null;if(a["font-scale"]&&!(e=n.parse(a["font-scale"],1,u)))return null;let t=null;if(a["text-font"]&&!(t=n.parse(a["text-font"],1,l(s))))return null;let i=null;if(a["text-color"]&&!(i=n.parse(a["text-color"],1,Ne)))return null;a=r[r.length-1];a.scale=e,a.font=t,a.textColor=i}else{a=n.parse(t[e],1,d);if(!a)return null;var i=a.type.kind;if("string"!==i&&"value"!==i&&"null"!==i&&"resolvedImage"!==i)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:a,scale:null,font:null,textColor:null})}}return new ci(r)}evaluate(i){return new nt(this.sections.map(e=>{var t=e.content.evaluate(i);return g(t)===qe?new it("",t,null,null,null):new it(lt(t),null,e.scale?e.scale.evaluate(i):null,e.font?e.font.evaluate(i).join(","):null,e.textColor?e.textColor.evaluate(i):null)}))}eachChild(e){for(var t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}let ui={"==":oi,"!=":e,">":si,"<":ai,">=":ri(">=",function(e,t,i){return i<=t},function(e,t,i,n){return 0<=n.compare(t,i)}),"<=":li,array:dt,at:class Jl{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){var i;return 3!==e.length?t.error(`Expected 2 arguments, but found ${e.length-1} instead.`):(i=t.parse(e[1],1,u),e=t.parse(e[2],2,l(t.expectedType||d)),i&&e?new Jl(e.type.itemType,i,e):null)}evaluate(e){var t=this.index.evaluate(e),e=this.input.evaluate(e);if(t<0)throw new v(`Array index out of bounds: ${t} < 0.`);if(t>=e.length)throw new v(`Array index out of bounds: ${t} > ${e.length-1}.`);if(t!==Math.floor(t))throw new v(`Array index must be an integer, but found ${t} instead.`);return e[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},boolean:dt,case:class Ql{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(t,i){if(t.length<4)return i.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return i.error("Expected an odd number of arguments.");let n;i.expectedType&&"value"!==i.expectedType.kind&&(n=i.expectedType);var r=[];for(let e=1;e<t.length-1;e+=2){var o=i.parse(t[e],e,c);if(!o)return null;var a=i.parse(t[e+1],e+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var e=i.parse(t[t.length-1],t.length-1,n);if(!e)return null;if(n)return new Ql(n,r,e);throw new Error("Can't infer output type")}evaluate(e){for(var[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(var[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([,e])=>e.outputDefined())&&this.otherwise.outputDefined()}},coalesce:ei,collator:vt,format:ci,image:class ec{constructor(e){this.type=qe,this.input=e}static parse(e,t){return 2!==e.length?t.error("Expected two arguments."):(e=t.parse(e[1],1,s))?new ec(e):t.error("No image name provided.")}evaluate(e){var t=this.input.evaluate(e),i=ot.fromString(t);return i&&e.availableImages&&(i.available=-1<e.availableImages.indexOf(t)),i}eachChild(e){e(this.input)}outputDefined(){return!1}},in:class tc{constructor(e,t){this.type=c,this.needle=e,this.haystack=t}static parse(e,t){var i;return 3!==e.length?t.error(`Expected 2 arguments, but found ${e.length-1} instead.`):(i=t.parse(e[1],1,d),e=t.parse(e[2],2,d),i&&e?Ge(i.type,[c,s,u,Fe,d])?new tc(i,e):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${h(i.type)} instead`):null)}evaluate(e){var t=this.needle.evaluate(e);if(!(e=this.haystack.evaluate(e)))return!1;if(!We(t,["boolean","string","number","null"]))throw new v(`Expected first argument to be of type boolean, string, number or null, but found ${h(g(t))} instead.`);if(We(e,["string","array"]))return 0<=e.indexOf(t);throw new v(`Expected second argument to be of type array or string, but found ${h(g(e))} instead.`)}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},"index-of":class ic{constructor(e,t,i){this.type=u,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){var i,n;return e.length<=2||5<=e.length?t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`):(i=t.parse(e[1],1,d),n=t.parse(e[2],2,d),i&&n?Ge(i.type,[c,s,u,Fe,d])?4===e.length?(e=t.parse(e[3],3,u))?new ic(i,n,e):null:new ic(i,n):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${h(i.type)} instead`):null)}evaluate(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!We(t,["boolean","string","number","null"]))throw new v(`Expected first argument to be of type boolean, string, number or null, but found ${h(g(t))} instead.`);if(We(i,["string","array"]))return this.fromIndex?(e=this.fromIndex.evaluate(e),i.indexOf(t,e)):i.indexOf(t);throw new v(`Expected second argument to be of type array or string, but found ${h(g(i))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},interpolate:Jt,"interpolate-hcl":Jt,"interpolate-lab":Jt,length:class nc{constructor(e){this.type=u,this.input=e}static parse(e,t){return 2!==e.length?t.error(`Expected 1 argument, but found ${e.length-1} instead.`):(e=t.parse(e[1],1))?"array"!==e.type.kind&&"string"!==e.type.kind&&"value"!==e.type.kind?t.error(`Expected argument of type string or array, but found ${h(e.type)} instead.`):new nc(e):null}evaluate(e){if("string"==typeof(e=this.input.evaluate(e)))return e.length;if(Array.isArray(e))return e.length;throw new v(`Expected value to be of type string or array, but found ${h(g(e))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}},let:ti,literal:ct,match:class rc{constructor(e,t,i,n,r,o){this.inputType=e,this.type=t,this.input=i,this.cases=n,this.outputs=r,this.otherwise=o}static parse(i,n){if(i.length<5)return n.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return n.error("Expected an even number of arguments.");let r,o;n.expectedType&&"value"!==n.expectedType.kind&&(o=n.expectedType);var a={},s=[];for(let e=2;e<i.length-1;e+=2){let t=i[e];var l=i[e+1],c=(Array.isArray(t)||(t=[t]),n.concat(e));if(0===t.length)return c.error("Expected at least one branch label.");for(let e of t){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,g(e)))return null}else r=g(e);if(void 0!==a[String(e)])return c.error("Branch labels must be unique.");a[String(e)]=s.length}if(!(l=n.parse(l,e,o)))return null;o=o||l.type,s.push(l)}var e,t=n.parse(i[1],1,d);return!t||!(e=n.parse(i[i.length-1],i.length-1,o))||"value"!==t.type.kind&&n.concat(1).checkSubtype(r,t.type)?null:new rc(r,o,t,a,s,e)}evaluate(e){var t=this.input.evaluate(e);return(g(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},number:dt,"number-format":class oc{constructor(e,t,i,n,r){this.type=s,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=r}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");var i=t.parse(e[1],1,u);if(!i)return null;if("object"!=typeof(e=e[2])||Array.isArray(e))return t.error("NumberFormat options argument must be an object.");let n=null;if(e.locale&&!(n=t.parse(e.locale,1,s)))return null;let r=null;if(e.currency&&!(r=t.parse(e.currency,1,s)))return null;let o=null;if(e["min-fraction-digits"]&&!(o=t.parse(e["min-fraction-digits"],1,u)))return null;let a=null;return e["max-fraction-digits"]&&!(a=t.parse(e["max-fraction-digits"],1,u))?null:new oc(i,n,r,o,a)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},object:dt,slice:class ac{constructor(e,t,i,n){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=n}static parse(e,t){var i,n;return e.length<=2||5<=e.length?t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`):(i=t.parse(e[1],1,d),n=t.parse(e[2],2,u),i&&n?Ge(i.type,[l(d),s,d])?4===e.length?(e=t.parse(e[3],3,u))?new ac(i.type,i,n,e):null:new ac(i.type,i,n):t.error(`Expected first argument to be of type array or string, but found ${h(i.type)} instead`):null)}evaluate(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(We(t,["string","array"]))return this.endIndex?(e=this.endIndex.evaluate(e),t.slice(i,e)):t.slice(i);throw new v(`Expected first argument to be of type array or string, but found ${h(g(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}},step:Ot,string:dt,"to-boolean":pt,"to-color":pt,"to-number":pt,"to-string":pt,var:Lt,within:Pt};function di(e,[t,i,n,r]){t=t.evaluate(e),i=i.evaluate(e),n=n.evaluate(e);r=r?r.evaluate(e):1,e=at(t,i,n,r);if(e)throw new v(e);return new m(t/255*r,i/255*r,n/255*r,r)}function hi(e,t){t=t[e];return void 0===t?null:t}function pi(e){return{type:e}}function fi(e){return{result:"success",value:e}}function mi(e){return{result:"error",value:e}}function gi(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function vi(e){return e.expression&&-1<e.expression.parameters.indexOf("zoom")}function _i(e){return e.expression&&e.expression.interpolated}function _(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function yi(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function bi(e){return e}function xi(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function wi(e,t,i,n,r){return xi(typeof i===r?n[i]:void 0,e.default,t.default)}function Ci(e,t,i){return"number"!==_(i)?xi(e.default,t.default):(1===(t=e.stops.length)||i<=e.stops[0][0]?e.stops[0]:i>=e.stops[t-1][0]?e.stops[t-1]:(t=Rt(e.stops.map(e=>e[0]),i),e.stops[t]))[1]}function Ti(e,t,i){var n=void 0!==e.base?e.base:1;if("number"!==_(i))return xi(e.default,t.default);var r,o=e.stops.length;if(1===o)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[o-1][0])return e.stops[o-1][1];let a=Rt(e.stops.map(e=>e[0]),i),s=(o=i,i=n,n=e.stops[a][0],r=e.stops[a+1][0]-n,o-=n,0==r?0:1===i?o/r:(Math.pow(i,o)-1)/(Math.pow(i,r)-1)),l=e.stops[a][1],c=e.stops[a+1][1],u=Bt[t.type]||bi;if(e.colorSpace&&"rgb"!==e.colorSpace){let i=Kt[e.colorSpace];u=(e,t)=>i.reverse(i.interpolate(i.forward(e),i.forward(t),s))}return"function"==typeof l.evaluate?{evaluate(...e){var t=l.evaluate.apply(void 0,e),e=c.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==e)return u(t,e,s)}}:u(l,c,s)}function Si(e,t,i){switch(t.type){case"color":i=m.parse(i);break;case"formatted":i=nt.fromString(i.toString());break;case"resolvedImage":i=ot.fromString(i.toString());break;case"padding":i=rt.parse(i);break;default:_(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0)}return xi(i,e.default,t.default)}gt.register(ui,{error:[{kind:"error"},[s],(e,[t])=>{throw new v(t.evaluate(e))}],typeof:[s,[d],(e,[t])=>h(g(t.evaluate(e)))],"to-rgba":[l(u,4),[Ne],(e,[t])=>t.evaluate(e).toArray()],rgb:[Ne,[u,u,u],di],rgba:[Ne,[u,u,u,u],di],has:{type:c,overloads:[[[s],(e,[t])=>t.evaluate(e)in e.properties()],[[s,je],(e,[t,i])=>t.evaluate(e)in i.evaluate(e)]]},get:{type:d,overloads:[[[s],(e,[t])=>hi(t.evaluate(e),e.properties())],[[s,je],(e,[t,i])=>hi(t.evaluate(e),i.evaluate(e))]]},"feature-state":[d,[s],(e,[t])=>hi(t.evaluate(e),e.featureState||{})],properties:[je,[],e=>e.properties()],"geometry-type":[s,[],e=>e.geometryType()],id:[d,[],e=>e.id()],zoom:[u,[],e=>e.globals.zoom],"heatmap-density":[u,[],e=>e.globals.heatmapDensity||0],"line-progress":[u,[],e=>e.globals.lineProgress||0],accumulated:[d,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[u,pi(u),(e,t)=>{let i=0;for(var n of t)i+=n.evaluate(e);return i}],"*":[u,pi(u),(e,t)=>{let i=1;for(var n of t)i*=n.evaluate(e);return i}],"-":{type:u,overloads:[[[u,u],(e,[t,i])=>t.evaluate(e)-i.evaluate(e)],[[u],(e,[t])=>-t.evaluate(e)]]},"/":[u,[u,u],(e,[t,i])=>t.evaluate(e)/i.evaluate(e)],"%":[u,[u,u],(e,[t,i])=>t.evaluate(e)%i.evaluate(e)],ln2:[u,[],()=>Math.LN2],pi:[u,[],()=>Math.PI],e:[u,[],()=>Math.E],"^":[u,[u,u],(e,[t,i])=>Math.pow(t.evaluate(e),i.evaluate(e))],sqrt:[u,[u],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[u,[u],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[u,[u],(e,[t])=>Math.log(t.evaluate(e))],log2:[u,[u],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[u,[u],(e,[t])=>Math.sin(t.evaluate(e))],cos:[u,[u],(e,[t])=>Math.cos(t.evaluate(e))],tan:[u,[u],(e,[t])=>Math.tan(t.evaluate(e))],asin:[u,[u],(e,[t])=>Math.asin(t.evaluate(e))],acos:[u,[u],(e,[t])=>Math.acos(t.evaluate(e))],atan:[u,[u],(e,[t])=>Math.atan(t.evaluate(e))],min:[u,pi(u),(t,e)=>Math.min(...e.map(e=>e.evaluate(t)))],max:[u,pi(u),(t,e)=>Math.max(...e.map(e=>e.evaluate(t)))],abs:[u,[u],(e,[t])=>Math.abs(t.evaluate(e))],round:[u,[u],(e,[t])=>{t=t.evaluate(e);return t<0?-Math.round(-t):Math.round(t)}],floor:[u,[u],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[u,[u],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[c,[s,d],(e,[t,i])=>e.properties()[t.value]===i.value],"filter-id-==":[c,[d],(e,[t])=>e.id()===t.value],"filter-type-==":[c,[s],(e,[t])=>e.geometryType()===t.value],"filter-<":[c,[s,d],(e,[t,i])=>{e=e.properties()[t.value],t=i.value;return typeof e==typeof t&&e<t}],"filter-id-<":[c,[d],(e,[t])=>{e=e.id(),t=t.value;return typeof e==typeof t&&e<t}],"filter->":[c,[s,d],(e,[t,i])=>{e=e.properties()[t.value],t=i.value;return typeof e==typeof t&&t<e}],"filter-id->":[c,[d],(e,[t])=>{e=e.id(),t=t.value;return typeof e==typeof t&&t<e}],"filter-<=":[c,[s,d],(e,[t,i])=>{e=e.properties()[t.value],t=i.value;return typeof e==typeof t&&e<=t}],"filter-id-<=":[c,[d],(e,[t])=>{e=e.id(),t=t.value;return typeof e==typeof t&&e<=t}],"filter->=":[c,[s,d],(e,[t,i])=>{e=e.properties()[t.value],t=i.value;return typeof e==typeof t&&t<=e}],"filter-id->=":[c,[d],(e,[t])=>{e=e.id(),t=t.value;return typeof e==typeof t&&t<=e}],"filter-has":[c,[d],(e,[t])=>t.value in e.properties()],"filter-has-id":[c,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[c,[l(s)],(e,[t])=>0<=t.value.indexOf(e.geometryType())],"filter-id-in":[c,[l(d)],(e,[t])=>0<=t.value.indexOf(e.id())],"filter-in-small":[c,[s,l(d)],(e,[t,i])=>0<=i.value.indexOf(e.properties()[t.value])],"filter-in-large":[c,[s,l(d)],(e,[t,i])=>{for(var n=e.properties()[t.value],r=i.value,o=0,a=i.value.length-1;o<=a;){var s=o+a>>1;if(r[s]===n)return!0;r[s]>n?a=s-1:o=1+s}return!1}],all:{type:c,overloads:[[[c,c],(e,[t,i])=>t.evaluate(e)&&i.evaluate(e)],[pi(c),(e,t)=>{for(var i of t)if(!i.evaluate(e))return!1;return!0}]]},any:{type:c,overloads:[[[c,c],(e,[t,i])=>t.evaluate(e)||i.evaluate(e)],[pi(c),(e,t)=>{for(var i of t)if(i.evaluate(e))return!0;return!1}]]},"!":[c,[c],(e,[t])=>!t.evaluate(e)],"is-supported-script":[c,[s],(e,[t])=>{var i=e.globals&&e.globals.isSupportedScript;return!i||i(t.evaluate(e))}],upcase:[s,[s],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[s,[s],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[s,pi(d),(t,e)=>e.map(e=>lt(e.evaluate(t))).join("")],"resolved-locale":[s,[Ve],(e,[t])=>t.evaluate(e).resolvedLocale()]});class ki{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new mt,this._defaultValue=t?"color"===(e=t).type&&yi(e.default)?new m(0,0,0,0):"color"===e.type?m.parse(e.default)||null:"padding"===e.type?rt.parse(e.default)||null:void 0===e.default?null:e.default:null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,i,n,r,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,n,r,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{let e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(!this._enumValues||e in this._enumValues)return e;throw new v(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`)}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Ei(e){return Array.isArray(e)&&0<e.length&&"string"==typeof e[0]&&e[0]in ui}function Ai(e,t){var i=new zt(ui,[],t?(n=t,i={color:Ne,string:s,number:u,enum:s,boolean:c,formatted:Ue,padding:$e,resolvedImage:qe},"array"===n.type?l(i[n.value]||d,n.length):i[n.type]):void 0),n=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?fi(new ki(n,t)):mi(i.errors)}class Pi{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!It(t.expression)}evaluateWithoutErrorHandling(e,t,i,n,r,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,n,r,o)}evaluate(e,t,i,n,r,o){return this._styleExpression.evaluate(e,t,i,n,r,o)}}class Mi{constructor(e,t,i,n){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent="camera"!==e&&!It(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,i,n,r,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,n,r,o)}evaluate(e,t,i,n,r,o){return this._styleExpression.evaluate(e,t,i,n,r,o)}interpolationFactor(e,t,i){return this.interpolationType?Jt.interpolationFactor(this.interpolationType,e,t,i):0}}function Ii(e,t){var i,n,r,e=Ai(e,t);return"error"===e.result?e:(i=Mt(r=e.value.expression))||gi(t)?(n=Dt(r,["zoom"]))||vi(t)?(r=function i(e){let n=null;if(e instanceof ti)n=i(e.result);else if(e instanceof ei){for(var t of e.args)if(n=i(t),n)break}else(e instanceof Ot||e instanceof Jt)&&e.input instanceof gt&&"zoom"===e.input.name&&(n=e);return n instanceof Oe||e.eachChild(e=>{let t=i(e);t instanceof Oe?n=t:!n&&t?n=new Oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&t&&n!==t&&(n=new Oe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(r))||n?r instanceof Oe?mi([r]):r instanceof Jt&&!_i(t)?mi([new Oe("",'"interpolate" expressions cannot be used with this property')]):fi(r?new Mi(i?"camera":"composite",e.value,r.labels,r instanceof Jt?r.interpolation:void 0):new Pi(i?"constant":"source",e.value)):mi([new Oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):mi([new Oe("","zoom expressions not supported")]):mi([new Oe("","data expressions not supported")])}class Di{constructor(e,t){this._parameters=e,this._specification=t,ze(this,function t(o,a){let e="color"===a.type,i=o.stops&&"object"==typeof o.stops[0][0],n=i||!(i||void 0!==o.property),r=o.type||(_i(a)?"exponential":"interval");if(e||"padding"===a.type){let t=(e?m:rt).parse;(o=ze({},o)).stops&&(o.stops=o.stops.map(e=>[e[0],t(e[1])])),o.default=t(o.default||a.default)}if(o.colorSpace&&"rgb"!==o.colorSpace&&!Kt[o.colorSpace])throw new Error("Unknown color space: "+o.colorSpace);let s,l,c;if("exponential"===r)s=Ti;else if("interval"===r)s=Ci;else if("categorical"===r){s=wi,l=Object.create(null);for(let e of o.stops)l[e[0]]=e[1];c=typeof o.stops[0][0]}else{if("identity"!==r)throw new Error(`Unknown function type "${r}"`);s=Si}if(i){let n={},r=[];for(let i=0;i<o.stops.length;i++){let e=o.stops[i],t=e[0].zoom;void 0===n[t]&&(n[t]={zoom:t,type:o.type,property:o.property,default:o.default,stops:[]},r.push(t)),n[t].stops.push([e[0].value,e[1]])}let i=[];for(let e of r)i.push([n[e].zoom,t(n[e],a)]);let e={name:"linear"};return{kind:"composite",interpolationType:e,interpolationFactor:Jt.interpolationFactor.bind(void 0,e),zoomStops:i.map(e=>e[0]),evaluate:({zoom:e},t)=>Ti({stops:i,base:o.base},a,e).evaluate(e,t)}}if(n){let e="exponential"===r?{name:"exponential",base:void 0!==o.base?o.base:1}:null;return{kind:"camera",interpolationType:e,interpolationFactor:Jt.interpolationFactor.bind(void 0,e),zoomStops:o.stops.map(e=>e[0]),evaluate:({zoom:e})=>s(o,a,e,l,c)}}return{kind:"source",evaluate(e,t){return void 0===(t=t&&t.properties?t.properties[o.property]:void 0)?xi(o.default,a.default):s(o,a,t,l,c)}}}(this._parameters,this._specification))}static deserialize(e){return new Di(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Li(e){var r=e.key,o=e.value,a=e.valueSpec||{},s=e.objectElementValidators||{},l=e.style,c=e.styleSpec;let u=[],t=_(o);if("object"!==t)return[new p(r,o,`object expected, ${t} found`)];for(let n in o){let e=n.split(".")[0],t=a[e]||a["*"],i;if(s[e])i=s[e];else if(a[e])i=b;else if(s["*"])i=s["*"];else{if(!a["*"]){u.push(new p(r,o[n],`unknown property "${n}"`));continue}i=b}u=u.concat(i({key:(r&&r+".")+n,value:o[n],valueSpec:t,style:l,styleSpec:c,object:o,objectKey:n},o))}for(let e in a)s[e]||a[e].required&&void 0===a[e].default&&void 0===o[e]&&u.push(new p(r,o,`missing required property "${e}"`));return u}function zi(e){var t=e.value,i=e.valueSpec,n=e.style,r=e.styleSpec,o=e.key,a=e.arrayElementValidator||b;if("array"!==_(t))return[new p(o,t,`array expected, ${_(t)} found`)];if(i.length&&t.length!==i.length)return[new p(o,t,`array length ${i.length} expected, length ${t.length} found`)];if(i["min-length"]&&t.length<i["min-length"])return[new p(o,t,`array length at least ${i["min-length"]} expected, length ${t.length} found`)];let s={type:i.value,values:i.values},l=(r.$version<7&&(s.function=i.function),"object"===_(i.value)&&(s=i.value),[]);for(let e=0;e<t.length;e++)l=l.concat(a({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:n,styleSpec:r,key:`${o}[${e}]`}));return l}function Ri(e){var t=e.key,i=e.value,e=e.valueSpec;let n=_(i);return"number"!==(n="number"===n&&i!=i?"NaN":n)?[new p(t,i,`number expected, ${n} found`)]:"minimum"in e&&i<e.minimum?[new p(t,i,i+" is less than the minimum value "+e.minimum)]:"maximum"in e&&i>e.maximum?[new p(t,i,i+" is greater than the maximum value "+e.maximum)]:[]}function Oi(e){let r=e.valueSpec,o=f(e.value.type),a,s,l,c={},t="categorical"!==o&&void 0===e.value.property,i=!t,u="array"===_(e.value.stops)&&"array"===_(e.value.stops[0])&&"object"===_(e.value.stops[0][0]),n=Li({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===o)return[new p(e.key,e.value,'identity function may not have a "stops" property')];let t=[];var i=e.value;return t=t.concat(zi({key:e.key,value:i,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===_(i)&&0===i.length&&t.push(new p(e.key,i,"array must have at least one stop")),t},default:function(e){return b({key:e.key,value:e.value,valueSpec:r,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===o&&t&&n.push(new p(e.key,e.value,'missing required property "property"')),"identity"===o||e.value.stops||n.push(new p(e.key,e.value,'missing required property "stops"')),"exponential"===o&&e.valueSpec.expression&&!_i(e.valueSpec)&&n.push(new p(e.key,e.value,"exponential functions not supported")),8<=e.styleSpec.$version&&(i&&!gi(e.valueSpec)?n.push(new p(e.key,e.value,"property functions not supported")):t&&!vi(e.valueSpec)&&n.push(new p(e.key,e.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==e.value.property||n.push(new p(e.key,e.value,'"property" property is required')),n;function d(e){let t=[];var i=e.value,n=e.key;if("array"!==_(i))return[new p(n,i,`array expected, ${_(i)} found`)];if(2!==i.length)return[new p(n,i,`array length 2 expected, length ${i.length} found`)];if(u){if("object"!==_(i[0]))return[new p(n,i,`object expected, ${_(i[0])} found`)];if(void 0===i[0].zoom)return[new p(n,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new p(n,i,"object stop key must have value")];if(l&&l>f(i[0].zoom))return[new p(n,i[0].zoom,"stop zoom values must appear in ascending order")];f(i[0].zoom)!==l&&(l=f(i[0].zoom),s=void 0,c={}),t=t.concat(Li({key:n+"[0]",value:i[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Ri,value:h}}))}else t=t.concat(h({key:n+"[0]",value:i[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},i));return Ei(Re(i[1]))?t.concat([new p(n+"[1]",i[1],"expressions are not allowed in function stops.")]):t.concat(b({key:n+"[1]",value:i[1],valueSpec:r,style:e.style,styleSpec:e.styleSpec}))}function h(t,i){var n=_(t.value),e=f(t.value),i=null!==t.value?t.value:i;if(a){if(n!==a)return[new p(t.key,i,n+" stop domain type must match previous stop domain type "+a)]}else a=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new p(t.key,i,"stop domain value must be a number, string, or boolean")];if("number"===n||"categorical"===o)return"categorical"!==o||"number"!==n||isFinite(e)&&Math.floor(e)===e?"categorical"!==o&&"number"===n&&void 0!==s&&e<s?[new p(t.key,i,"stop domain values must appear in ascending order")]:(s=e,"categorical"===o&&e in c?[new p(t.key,i,"stop domain values must be unique")]:(c[e]=!0,[])):[new p(t.key,i,"integer expected, found "+e)];{let e=`number expected, ${n} found`;return gi(r)&&void 0===o&&(e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new p(t.key,i,e)]}}}function Bi(t){var e=("property"===t.expressionContext?Ii:Ai)(Re(t.value),t.valueSpec);if("error"===e.result)return e.value.map(e=>new p(""+t.key+e.key,t.value,e.message));e=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!e.outputDefined())return[new p(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!It(e))return[new p(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!It(e))return[new p(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Dt(e,["zoom","feature-state"]))return[new p(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Mt(e))return[new p(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fi(e){var t=e.key,i=e.value,e=e.valueSpec,n=[];return Array.isArray(e.values)?-1===e.values.indexOf(f(i))&&n.push(new p(t,i,`expected one of [${e.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(e.values).indexOf(f(i))&&n.push(new p(t,i,`expected one of [${Object.keys(e.values).join(", ")}], ${JSON.stringify(i)} found`)),n}function Ni(e){if(!0===e||!1===e)return 1;if(Array.isArray(e)&&0!==e.length)switch(e[0]){case"has":return 2<=e.length&&"$id"!==e[1]&&"$type"!==e[1];case"in":return 3<=e.length&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t of e.slice(1))if(!Ni(t)&&"boolean"!=typeof t)return;return 1;default:return 1}}let ji={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Vi(e){if(null==e)return{filter:()=>!0,needGeometry:!1};let n=Ai(e=Ni(e)?e:$i(e),ji);if("error"===n.result)throw new Error(n.value.map(e=>e.key+": "+e.message).join(", "));return{filter:(e,t,i)=>n.value.evaluate(e,t,{},i),needGeometry:function t(i){if(!Array.isArray(i))return!1;if("within"===i[0])return!0;for(let e=1;e<i.length;e++)if(t(i[e]))return!0;return!1}(e)}}function Ui(e,t){return e<t?-1:t<e?1:0}function $i(e){var t,i;return!e||(t=e[0],e.length<=1?"any"!==t:"=="===t?qi(e[1],e[2],"=="):"!="===t?Gi(qi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?qi(e[1],e[2],t):"any"===t?(i=e.slice(1),["any"].concat(i.map($i))):"all"===t?["all"].concat(e.slice(1).map($i)):"none"===t?["all"].concat(e.slice(1).map($i).map(Gi)):"in"===t?Hi(e[1],e.slice(2)):"!in"===t?Gi(Hi(e[1],e.slice(2))):"has"===t?Zi(e[1]):"!has"===t?Gi(Zi(e[1])):"within"!==t||e)}function qi(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function Hi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return 200<t.length&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(Ui)]]:["filter-in-small",e,["literal",t]]}}function Zi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Gi(e){return["!",e]}function Wi(e){return Ni(Re(e.value))?Bi(ze({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){let n=i.value,r=i.key;if("array"!==_(n))return[new p(r,n,`array expected, ${_(n)} found`)];let o=i.styleSpec;let a,s=[];if(n.length<1)return[new p(r,n,"filter array must have at least 1 element")];switch(s=s.concat(Fi({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:i.style,styleSpec:i.styleSpec})),f(n[0])){case"<":case"<=":case">":case">=":2<=n.length&&"$type"===f(n[1])&&s.push(new p(r,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":3!==n.length&&s.push(new p(r,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":2<=n.length&&"string"!==(a=_(n[1]))&&s.push(new p(r+"[1]",n[1],`string expected, ${a} found`));for(let e=2;e<n.length;e++)a=_(n[e]),"$type"===f(n[1])?s=s.concat(Fi({key:`${r}[${e}]`,value:n[e],valueSpec:o.geometry_type,style:i.style,styleSpec:i.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&s.push(new p(`${r}[${e}]`,n[e],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let e=1;e<n.length;e++)s=s.concat(t({key:`${r}[${e}]`,value:n[e],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":a=_(n[1]),2!==n.length?s.push(new p(r,n,`filter array for "${n[0]}" operator must have 2 elements`)):"string"!==a&&s.push(new p(r+"[1]",n[1],`string expected, ${a} found`));break;case"within":a=_(n[1]),2!==n.length?s.push(new p(r,n,`filter array for "${n[0]}" operator must have 2 elements`)):"object"!==a&&s.push(new p(r+"[1]",n[1],`object expected, ${a} found`))}return s}(e)}function Xi(e,t){var i=e.key,n=e.style,r=e.styleSpec,o=e.value,a=e.objectKey,s=r[t+"_"+e.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return b({key:i,value:o,valueSpec:r.transition,style:n,styleSpec:r});l=e.valueSpec||s[a];if(!l)return[new p(i,o,`unknown property "${a}"`)];let c;return"string"===_(o)&&gi(l)&&!l.tokens&&(c=/^{([^}]+)}$/.exec(o))?[new p(i,o,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)]:(s=[],"symbol"===e.layerType&&("text-field"===a&&n&&!n.glyphs&&s.push(new p(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a)&&yi(Re(o))&&"identity"===f(o.type)&&s.push(new p(i,o,'"text-font" does not support identity functions')),s.concat(b({key:e.key,value:o,valueSpec:l,style:n,styleSpec:r,expressionContext:"property",propertyType:t,propertyKey:a})))}function Yi(e){return Xi(e,"paint")}function Ki(e){return Xi(e,"layout")}function Ji(e){let n=[],r=e.value,o=e.key,a=e.style,t=e.styleSpec,i=(r.type||r.ref||n.push(new p(o,r,'either "type" or "ref" is required')),f(r.type)),s=f(r.ref);if(r.id){let i=f(r.id);for(let t=0;t<e.arrayIndex;t++){let e=a.layers[t];f(e.id)===i&&n.push(new p(o,r.id,`duplicate layer id "${r.id}", previously used at line `+e.id.__line__))}}if("ref"in r){let t;["type","source","source-layer","filter","layout"].forEach(e=>{e in r&&n.push(new p(o,r[e],`"${e}" is prohibited for ref layers`))}),a.layers.forEach(e=>{f(e.id)===s&&(t=e)}),t?t.ref?n.push(new p(o,r.ref,"ref cannot reference another ref layer")):i=f(t.type):n.push(new p(o,r.ref,`ref layer "${s}" not found`))}else if("background"!==i)if(r.source){let e=a.sources&&a.sources[r.source],t=e&&f(e.type);e?"vector"===t&&"raster"===i?n.push(new p(o,r.source,`layer "${r.id}" requires a raster source`)):"raster"===t&&"raster"!==i?n.push(new p(o,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==t||r["source-layer"]?"raster-dem"===t&&"hillshade"!==i?n.push(new p(o,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==i||!r.paint||!r.paint["line-gradient"]||"geojson"===t&&e.lineMetrics||n.push(new p(o,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new p(o,r,`layer "${r.id}" must specify a "source-layer"`)):n.push(new p(o,r.source,`source "${r.source}" not found`))}else n.push(new p(o,r,'missing required property "source"'));return n=n.concat(Li({key:o,value:r,valueSpec:t.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>b({key:o+".type",value:r.type,valueSpec:t.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"}),filter:Wi,layout:e=>Li({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Ki(ze({layerType:i},e))}}),paint:e=>Li({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Yi(ze({layerType:i},e))}})}}))}function Qi(e){var t=e.value,e=e.key,i=_(t);return"string"!==i?[new p(e,t,`string expected, ${i} found`)]:[]}let en={promoteId:function({key:e,value:t}){if("string"===_(t))return Qi({key:e,value:t});var i,n=[];for(i in t)n.push(...Qi({key:e+"."+i,value:t[i]}));return n}};function tn(e){let r=e.value,o=e.key,t=e.styleSpec,i=e.style;if(!r.type)return[new p(o,r,'"type" is required')];let n=f(r.type),a;switch(n){case"vector":case"raster":case"raster-dem":return a=Li({key:o,value:r,valueSpec:t["source_"+n.replace("-","_")],style:e.style,styleSpec:t,objectElementValidators:en});case"geojson":if(a=Li({key:o,value:r,valueSpec:t.source_geojson,style:i,styleSpec:t,objectElementValidators:en}),r.cluster)for(let n in r.clusterProperties){let[e,t]=r.clusterProperties[n],i="string"==typeof e?[e,["accumulated"],["get",n]]:e;a.push(...Bi({key:`${o}.${n}.map`,value:t,expressionContext:"cluster-map"})),a.push(...Bi({key:`${o}.${n}.reduce`,value:i,expressionContext:"cluster-reduce"}))}return a;case"video":return Li({key:o,value:r,valueSpec:t.source_video,style:i,styleSpec:t});case"image":return Li({key:o,value:r,valueSpec:t.source_image,style:i,styleSpec:t});case"canvas":return[new p(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fi({key:o+".type",value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:t})}}function nn(e){var i=e.value,n=e.styleSpec,r=n.light,o=e.style;let a=[],t=_(i);if(void 0!==i)if("object"!==t)a=a.concat([new p("light",i,`object expected, ${t} found`)]);else for(let t in i){let e=t.match(/^(.*)-transition$/);a=a.concat(e&&r[e[1]]&&r[e[1]].transition?b({key:t,value:i[t],valueSpec:n.transition,style:o,styleSpec:n}):r[t]?b({key:t,value:i[t],valueSpec:r[t],style:o,styleSpec:n}):[new p(t,i[t],`unknown property "${t}"`)])}return a}function rn(e){var t=e.value,i=e.styleSpec,n=i.terrain,r=e.style;let o=[];e=_(t);if(void 0!==t)if("object"!==e)o=o.concat([new p("terrain",t,`object expected, ${e} found`)]);else for(let e in t)o=o.concat(n[e]?b({key:e,value:t[e],valueSpec:n[e],style:r,styleSpec:i}):[new p(e,t[e],`unknown property "${e}"`)]);return o}let on={"*":()=>[],array:zi,boolean:function(e){var t=e.value,e=e.key,i=_(t);return"boolean"!==i?[new p(e,t,`boolean expected, ${i} found`)]:[]},number:Ri,color:function(e){var t=e.key,e=e.value,i=_(e);return"string"!==i?[new p(t,e,`color expected, ${i} found`)]:null===Xe(e)?[new p(t,e,`color expected, "${e}" found`)]:[]},constants:Le,enum:Fi,filter:Wi,function:Oi,layer:Ji,object:Li,source:tn,light:nn,terrain:rn,string:Qi,formatted:function(e){return 0===Qi(e).length?[]:Bi(e)},resolvedImage:function(e){return 0===Qi(e).length?[]:Bi(e)},padding:function(e){var n=e.key,r=e.value;if("array"!==_(r))return Ri({key:n,value:r,valueSpec:{}});{if(r.length<1||4<r.length)return[new p(n,r,`padding requires 1 to 4 values; ${r.length} values found`)];let t={type:"number"},i=[];for(let e=0;e<r.length;e++)i=i.concat(b({key:`${n}[${e}]`,value:r[e],valueSpec:t}));return i}}};function b(e){var t=e.value,i=e.valueSpec,n=e.styleSpec;return i.expression&&yi(f(t))?Oi(e):i.expression&&Ei(Re(t))?Bi(e):i.type&&on[i.type]?on[i.type](e):Li(ze({},e,{valueSpec:i.type?n[i.type]:i}))}function an(e){var t=e.value,i=e.key,e=Qi(e);return e.length||(-1===t.indexOf("{fontstack}")&&e.push(new p(i,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&e.push(new p(i,t,'"glyphs" url must include a "{range}" token'))),e}function sn(e,t=o){let i=[];return i=i.concat(b({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:an,"*":()=>[]}})),ln(i=e.constants?i.concat(Le({key:"constants",value:e.constants,style:e,styleSpec:t})):i)}function ln(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function cn(t){return function(...e){return ln(t.apply(this,e))}}sn.source=cn(tn),sn.light=cn(nn),sn.terrain=cn(rn),sn.layer=cn(Ji),sn.filter=cn(Wi),sn.paintProperty=cn(Yi),sn.layoutProperty=cn(Ki);let un=sn,dn=un.light,hn=un.paintProperty,pn=un.layoutProperty;function fn(e,t){let i=!1;if(t&&t.length)for(var n of t)e.fire(new Ie(new Error(n.message))),i=!0;return i}class mn{constructor(e,t,i){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;let n=new Int32Array(this.arrayBuffer);e=n[0],this.d=(t=n[1])+2*(i=n[2]);for(let i=0;i<this.d*this.d;i++){let e=n[3+i],t=n[3+i+1];r.push(e===t?null:n.subarray(e,t))}var o=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],o),this.bboxes=n.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*i;for(let e=0;e<this.d*this.d;e++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;let n=i/t*e;this.min=-n,this.max=e+n}insert(e,t,i,n,r){this._forEachCell(t,i,n,r,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,i,n,r,o){this.cells[r].push(o)}query(t,i,n,r,o){let e=this.min,a=this.max;if(t<=e&&i<=e&&a<=n&&a<=r&&!o)return Array.prototype.slice.call(this.keys);{let e=[];return this._forEachCell(t,i,n,r,this._queryCell,e,{},o),e}}_queryCell(n,r,o,a,e,s,l,c){let u=this.cells[e];if(null!==u){let t=this.keys,i=this.bboxes;for(let e=0;e<u.length;e++){var d=u[e];if(void 0===l[d]){let e=4*d;(c?c(i[0+e],i[1+e],i[2+e],i[3+e]):n<=i[2+e]&&r<=i[3+e]&&o>=i[0+e]&&a>=i[1+e])?(l[d]=!0,s.push(t[d])):l[d]=!1}}}}_forEachCell(n,r,o,a,s,l,c,u){let e=this._convertToCellCoord(n),d=this._convertToCellCoord(r),t=this._convertToCellCoord(o),h=this._convertToCellCoord(a);for(let i=e;i<=t;i++)for(let t=d;t<=h;t++){let e=this.d*t+i;if((!u||u(this._convertFromCellCoord(i),this._convertFromCellCoord(t),this._convertFromCellCoord(i+1),this._convertFromCellCoord(t+1)))&&s.call(this,n,r,o,a,e,l,c,u))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;var i=this.cells,e=3+this.cells.length+1+1;let t=0;for(let e=0;e<this.cells.length;e++)t+=this.cells[e].length;var n=new Int32Array(e+t+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;let r=e;for(let t=0;t<i.length;t++){let e=i[t];n[3+t]=r,n.set(e,r),r+=e.length}return n[3+i.length]=r,n.set(this.keys,r),r+=this.keys.length,n[3+i.length+1]=r,n.set(this.bboxes,r),r+=this.bboxes.length,n.buffer}static serialize(e,t){e=e.toArrayBuffer();return t&&t.push(e),{buffer:e}}static deserialize(e){return new mn(e.buffer)}}let gn={};function t(e,t,i={}){if(gn[e])throw new Error(e+" is already registered.");Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),gn[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}t("Object",Object),t("TransferableGridIndex",mn),t("Color",m),t("Error",Error),t("AJAXError",ye),t("ResolvedImage",ot),t("StylePropertyFunction",Di),t("StyleExpression",ki,{omit:["_evaluator"]}),t("ZoomDependentExpression",Mi),t("ZoomConstantExpression",Pi),t("CompoundExpression",gt,{omit:["_evaluate"]});for(let e in ui)ui[e]._classRegistryKey||t("Expression_"+e,ui[e]);function vn(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function _n(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob)return e;if(vn(e))return t&&t.push(e),e;if(J(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e))return r=e,t&&t.push(r.buffer),r;if(e instanceof ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var i,n=[];for(i of e)n.push(_n(i,t));return n}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);var r=e.constructor,o=r._classRegistryKey;if(!o)throw new Error("can't serialize object of unregistered class");if(!gn[o])throw new Error(o+" is not registered.");var a,s=r.serialize?r.serialize(e,t):{};if(r.serialize){if(t&&s===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(var l in e)!e.hasOwnProperty(l)||0<=gn[o].omit.indexOf(l)||(a=e[l],s[l]=0<=gn[o].shallow.indexOf(l)?a:_n(a,t));e instanceof Error&&(s.message=e.message)}if(s.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==o&&(s.$name=o),s}function yn(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||vn(e)||J(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(yn);if("object"!=typeof e)throw new Error("can't deserialize object of type "+typeof e);var t=e.$name||"Object";if(!gn[t])throw new Error("can't deserialize unregistered class "+t);var i=gn[t]["klass"];if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);var n,r,o=Object.create(i.prototype);for(n of Object.keys(e))"$name"!==n&&(r=e[n],o[n]=0<=gn[t].shallow.indexOf(n)?r:yn(r));return o}class bn{constructor(){this.first=!0}update(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))}}let X={"Latin-1 Supplement":e=>128<=e&&e<=255,Arabic:e=>1536<=e&&e<=1791,"Arabic Supplement":e=>1872<=e&&e<=1919,"Arabic Extended-A":e=>2208<=e&&e<=2303,"Hangul Jamo":e=>4352<=e&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>5120<=e&&e<=5759,Khmer:e=>6016<=e&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>6320<=e&&e<=6399,"General Punctuation":e=>8192<=e&&e<=8303,"Letterlike Symbols":e=>8448<=e&&e<=8527,"Number Forms":e=>8528<=e&&e<=8591,"Miscellaneous Technical":e=>8960<=e&&e<=9215,"Control Pictures":e=>9216<=e&&e<=9279,"Optical Character Recognition":e=>9280<=e&&e<=9311,"Enclosed Alphanumerics":e=>9312<=e&&e<=9471,"Geometric Shapes":e=>9632<=e&&e<=9727,"Miscellaneous Symbols":e=>9728<=e&&e<=9983,"Miscellaneous Symbols and Arrows":e=>11008<=e&&e<=11263,"CJK Radicals Supplement":e=>11904<=e&&e<=12031,"Kangxi Radicals":e=>12032<=e&&e<=12255,"Ideographic Description Characters":e=>12272<=e&&e<=12287,"CJK Symbols and Punctuation":e=>12288<=e&&e<=12351,Hiragana:e=>12352<=e&&e<=12447,Katakana:e=>12448<=e&&e<=12543,Bopomofo:e=>12544<=e&&e<=12591,"Hangul Compatibility Jamo":e=>12592<=e&&e<=12687,Kanbun:e=>12688<=e&&e<=12703,"Bopomofo Extended":e=>12704<=e&&e<=12735,"CJK Strokes":e=>12736<=e&&e<=12783,"Katakana Phonetic Extensions":e=>12784<=e&&e<=12799,"Enclosed CJK Letters and Months":e=>12800<=e&&e<=13055,"CJK Compatibility":e=>13056<=e&&e<=13311,"CJK Unified Ideographs Extension A":e=>13312<=e&&e<=19903,"Yijing Hexagram Symbols":e=>19904<=e&&e<=19967,"CJK Unified Ideographs":e=>19968<=e&&e<=40959,"Yi Syllables":e=>40960<=e&&e<=42127,"Yi Radicals":e=>42128<=e&&e<=42191,"Hangul Jamo Extended-A":e=>43360<=e&&e<=43391,"Hangul Syllables":e=>44032<=e&&e<=55215,"Hangul Jamo Extended-B":e=>55216<=e&&e<=55295,"Private Use Area":e=>57344<=e&&e<=63743,"CJK Compatibility Ideographs":e=>63744<=e&&e<=64255,"Arabic Presentation Forms-A":e=>64336<=e&&e<=65023,"Vertical Forms":e=>65040<=e&&e<=65055,"CJK Compatibility Forms":e=>65072<=e&&e<=65103,"Small Form Variants":e=>65104<=e&&e<=65135,"Arabic Presentation Forms-B":e=>65136<=e&&e<=65279,"Halfwidth and Fullwidth Forms":e=>65280<=e&&e<=65519};function xn(e){for(var t of e)if(Cn(t.charCodeAt(0)))return!0;return!1}function wn(e){for(var t of e)if(t=t.charCodeAt(0),X.Arabic(t)||X["Arabic Supplement"](t)||X["Arabic Extended-A"](t)||X["Arabic Presentation Forms-A"](t)||X["Arabic Presentation Forms-B"](t))return;return 1}function Cn(e){return 746===e||747===e||!(e<4352)&&(X["Bopomofo Extended"](e)||X.Bopomofo(e)||X["CJK Compatibility Forms"](e)&&!(65097<=e&&e<=65103)||X["CJK Compatibility Ideographs"](e)||X["CJK Compatibility"](e)||X["CJK Radicals Supplement"](e)||X["CJK Strokes"](e)||!(!X["CJK Symbols and Punctuation"](e)||12296<=e&&e<=12305||12308<=e&&e<=12319||12336===e)||X["CJK Unified Ideographs Extension A"](e)||X["CJK Unified Ideographs"](e)||X["Enclosed CJK Letters and Months"](e)||X["Hangul Compatibility Jamo"](e)||X["Hangul Jamo Extended-A"](e)||X["Hangul Jamo Extended-B"](e)||X["Hangul Jamo"](e)||X["Hangul Syllables"](e)||X.Hiragana(e)||X["Ideographic Description Characters"](e)||X.Kanbun(e)||X["Kangxi Radicals"](e)||X["Katakana Phonetic Extensions"](e)||X.Katakana(e)&&12540!==e||!(!X["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||65306<=e&&e<=65310||65339===e||65341===e||65343===e||65371<=e&&e<=65503||65507===e||65512<=e&&e<=65519)||!(!X["Small Form Variants"](e)||65112<=e&&e<=65118||65123<=e&&e<=65126)||X["Unified Canadian Aboriginal Syllabics"](e)||X["Unified Canadian Aboriginal Syllabics Extended"](e)||X["Vertical Forms"](e)||X["Yijing Hexagram Symbols"](e)||X["Yi Syllables"](e)||X["Yi Radicals"](e))}function Tn(e){return!(Cn(e)||(e=e,X["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e))||X["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||X["Letterlike Symbols"](e)||X["Number Forms"](e)||X["Miscellaneous Technical"](e)&&(8960<=e&&e<=8967||8972<=e&&e<=8991||8996<=e&&e<=9e3||9003===e||9085<=e&&e<=9114||9150<=e&&e<=9165||9167===e||9169<=e&&e<=9179||9186<=e&&e<=9215)||X["Control Pictures"](e)&&9251!==e||X["Optical Character Recognition"](e)||X["Enclosed Alphanumerics"](e)||X["Geometric Shapes"](e)||X["Miscellaneous Symbols"](e)&&!(9754<=e&&e<=9759)||X["Miscellaneous Symbols and Arrows"](e)&&(11026<=e&&e<=11055||11088<=e&&e<=11097||11192<=e&&e<=11243)||X["CJK Symbols and Punctuation"](e)||X.Katakana(e)||X["Private Use Area"](e)||X["CJK Compatibility Forms"](e)||X["Small Form Variants"](e)||X["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||9984<=e&&e<=10087||10102<=e&&e<=10131||65532===e||65533===e)}function Sn(e){return 1424<=e&&e<=2303||X["Arabic Presentation Forms-A"](e)||X["Arabic Presentation Forms-B"](e)}function kn(e){e&&"string"==typeof e&&-1<e.indexOf("NetworkError")&&(x="error"),Mn&&Mn(e)}let En="deferred",An="loading",Pn="loaded",Mn=null,x="unavailable",In=null;function Dn(){Rn.fire(new Me("pluginStateChange",{pluginStatus:x,pluginURL:In}))}function Ln(){return x}function zn(){if(x!==En||!In)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");x=An,Dn(),In&&Ce({url:In},e=>{e?kn(e):(x=Pn,Dn())})}let Rn=new De,On={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>x===Pn||null!=On.applyArabicShaping,isLoading:()=>x===An,setState(e){if(!H())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");x=e.pluginStatus,In=e.pluginURL},isParsed(){if(H())return null!=On.applyArabicShaping&&null!=On.processBidirectionalText&&null!=On.processStyledBidirectionalText;throw new Error("rtl-text-plugin is only parsed on the worker-threads")},getPluginURL(){if(H())return In;throw new Error("rtl-text-plugin url can only be queried from the worker threads")}};class w{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bn,this.transition={})}isSupportedScript(e){var t,i,n=On.isLoaded();for(t of e)if(t=t.charCodeAt(0),i=n,!i&&Sn(t)||2304<=t&&t<=3583||3840<=t&&t<=4255||X.Khmer(t))return!1;return!0}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}}}class Bn{constructor(e,t){this.property=e,this.value=t,this.expression=function(t,i){if(yi(t))return new Di(t,i);if(Ei(t)){var e=Ii(t,i);if("error"===e.result)throw new Error(e.value.map(e=>e.key+": "+e.message).join(", "));return e.value}{let e=t;return"color"===i.type&&"string"==typeof t?e=m.parse(t):"padding"!==i.type||"number"!=typeof t&&!Array.isArray(t)||(e=rt.parse(t)),{kind:"constant",evaluate:()=>e}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)}}class Fn{constructor(e){this.property=e,this.value=new Bn(e,void 0)}transitioned(e,t){return new jn(this.property,this.value,t,B({},e.transition,this.transition),e.now)}untransitioned(){return new jn(this.property,this.value,null,{},0)}}class Nn{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return U(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Fn(this._values[e].property)),this._values[e].value=new Bn(this._values[e].property,null===t?void 0:U(t))}getTransition(e){return U(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Fn(this._values[e].property)),this._values[e].transition=U(t)||void 0}serialize(){var e,t={};for(e of Object.keys(this._values)){var i=this.getValue(e),i=(void 0!==i&&(t[e]=i),this.getTransition(e));void 0!==i&&(t[e+"-transition"]=i)}return t}transitioned(e,t){var i,n=new Vn(this._properties);for(i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(e,t._values[i]);return n}untransitioned(){var e,t=new Vn(this._properties);for(e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class jn{constructor(e,t,i,n,r){this.property=e,this.value=t,this.begin=r+n.delay||0,this.end=this.begin+n.duration||0,e.specification.transition&&(n.delay||n.duration)&&(this.prior=i)}possiblyEvaluate(e,t,i){var n=e.now||0,r=this.value.possiblyEvaluate(e,t,i),o=this.prior;return o?n>this.end||this.value.isDataDriven()?(this.prior=null,r):n<this.begin?o.possiblyEvaluate(e,t,i):(n=(n-this.begin)/(this.end-this.begin),this.property.interpolate(o.possiblyEvaluate(e,t,i),r,n<=0?0:1<=n?1:(e=(o=n*n)*n,4*(n<.5?e:3*(n-o)+e-.75)))):r}}class Vn{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,i){var n,r=new qn(this._properties);for(n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(e,t,i);return r}hasTransition(){for(var e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Un{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return U(this._values[e].value)}setValue(e,t){this._values[e]=new Bn(this._values[e].property,null===t?void 0:U(t))}serialize(){var e,t={};for(e of Object.keys(this._values)){var i=this.getValue(e);void 0!==i&&(t[e]=i)}return t}possiblyEvaluate(e,t,i){var n,r=new qn(this._properties);for(n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(e,t,i);return r}}class $n{constructor(e,t,i){this.property=e,this.value=t,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,i,n){return this.property.evaluate(this.value,this.parameters,e,t,i,n)}}class qn{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class i{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,i){var n=Bt[this.specification.type];return n?n(e,t,i):e}}class n{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,i,n){return new $n(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},i,n)}:e.expression,t)}interpolate(e,t,i){var n;return"constant"!==e.value.kind||"constant"!==t.value.kind?e:void 0===e.value.value||void 0===t.value.value?new $n(this,{kind:"constant",value:void 0},e.parameters):(n=Bt[this.specification.type])?new $n(this,{kind:"constant",value:n(e.value.value,t.value.value,i)},e.parameters):e}evaluate(e,t,i,n,r,o){return"constant"===e.kind?e.value:e.evaluate(t,i,n,r,o)}}class Hn extends n{possiblyEvaluate(t,i,e,n){if(void 0===t.value)return new $n(this,{kind:"constant",value:void 0},i);if("constant"===t.expression.kind)return e=t.expression.evaluate(i,null,{},e,n),n="resolvedImage"===t.property.specification.type&&"string"!=typeof e?e.name:e,e=this._calculate(n,n,n,i),new $n(this,{kind:"constant",value:e},i);if("camera"!==t.expression.kind)return new $n(this,t.expression,i);{let e=this._calculate(t.expression.evaluate({zoom:i.zoom-1}),t.expression.evaluate({zoom:i.zoom}),t.expression.evaluate({zoom:i.zoom+1}),i);return new $n(this,{kind:"constant",value:e},i)}}evaluate(e,t,i,n,r,o){return"source"===e.kind?(r=e.evaluate(t,i,n,r,o),this._calculate(r,r,r,t)):"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},i,n),e.evaluate({zoom:Math.floor(t.zoom)},i,n),e.evaluate({zoom:Math.floor(t.zoom)+1},i,n),t):e.value}_calculate(e,t,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}interpolate(e){return e}}class Zn{constructor(e){this.specification=e}possiblyEvaluate(e,t,i,n){if(void 0!==e.value)return"constant"===e.expression.kind?(i=e.expression.evaluate(t,null,{},i,n),this._calculate(i,i,i,t)):this._calculate(e.expression.evaluate(new w(Math.floor(t.zoom-1),t)),e.expression.evaluate(new w(Math.floor(t.zoom),t)),e.expression.evaluate(new w(Math.floor(t.zoom+1),t)),t)}_calculate(e,t,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}interpolate(e){return e}}class Gn{constructor(e){this.specification=e}possiblyEvaluate(e,t,i,n){return!!e.expression.evaluate(t,null,{},i,n)}interpolate(){return!1}}class r{constructor(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t],n=(i.specification.overridable&&this.overridableProperties.push(t),this.defaultPropertyValues[t]=new Bn(i,void 0)),i=this.defaultTransitionablePropertyValues[t]=new Fn(i);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=n.possiblyEvaluate({})}}}t("DataDrivenProperty",n),t("DataConstantProperty",i),t("CrossFadedDataDrivenProperty",Hn),t("CrossFadedProperty",Zn),t("ColorRampProperty",Gn);let Wn="-transition";class Xn extends De{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Un(e.layout)),e.paint)){this._transitionablePaint=new Nn(e.paint);for(let e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(let e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qn(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,i={}){null!=t&&this._validate(pn,`layers.${this.id}.layout.`+e,e,t,i)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(Wn)?this._transitionablePaint.getTransition(e.slice(0,-Wn.length)):this._transitionablePaint.getValue(e)}setPaintProperty(r,o,e={}){if(null!=o&&this._validate(hn,`layers.${this.id}.paint.`+r,r,o,e))return!1;if(r.endsWith(Wn))return this._transitionablePaint.setTransition(r.slice(0,-Wn.length),o||void 0),!1;{let e=this._transitionablePaint._values[r],t="cross-faded-data-driven"===e.property.specification["property-type"],i=e.value.isDataDriven(),n=e.value;this._transitionablePaint.setValue(r,o),this._handleSpecialPaintPropertyUpdate(r);o=this._transitionablePaint._values[r].value;return o.isDataDriven()||i||t||this._handleOverridablePaintPropertyUpdate(r,n,o)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,i){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),V(e,(e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length))}_validate(e,t,i,n,r={}){return(!r||!1!==r.validate)&&fn(this,e.call(un,{key:t,layerType:this.type,objectKey:i,value:n,styleSpec:o,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(var e in this.paint._values){e=this.paint.get(e);if(e instanceof $n&&gi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}let Yn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Kn{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class a{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){e>this.capacity&&(this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),e=this.uint8,this._refreshViews(),e)&&this.uint8.set(e)}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function C(e,r=1){let o=0,a=0;return{members:e.map(e=>{var t=Yn[e.type].BYTES_PER_ELEMENT,i=o=Jn(o,Math.max(r,t)),n=e.components||1;return a=Math.max(a,t),o+=t*n,{name:e.name,type:e.type,components:n,offset:i}}),size:Jn(o,Math.max(a,r)),alignment:r}}function Jn(e,t){return Math.ceil(e/t)*t}class Qn extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){var n=2*e;return this.int16[0+n]=t,this.int16[1+n]=i,e}}Qn.prototype.bytesPerElement=4,t("StructArrayLayout2i4",Qn);class er extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,n)}emplace(e,t,i,n,r){var o=4*e;return this.int16[0+o]=t,this.int16[1+o]=i,this.int16[2+o]=n,this.int16[3+o]=r,e}}er.prototype.bytesPerElement=8,t("StructArrayLayout4i8",er);class tr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,n,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,n,r,o)}emplace(e,t,i,n,r,o,a){var s=6*e;return this.int16[0+s]=t,this.int16[1+s]=i,this.int16[2+s]=n,this.int16[3+s]=r,this.int16[4+s]=o,this.int16[5+s]=a,e}}tr.prototype.bytesPerElement=12,t("StructArrayLayout2i4i12",tr);class ir extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,n,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,n,r,o)}emplace(e,t,i,n,r,o,a){var s=4*e,l=8*e;return this.int16[0+s]=t,this.int16[1+s]=i,this.uint8[4+l]=n,this.uint8[5+l]=r,this.uint8[6+l]=o,this.uint8[7+l]=a,e}}ir.prototype.bytesPerElement=8,t("StructArrayLayout2i4ub8",ir);class nr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){var n=2*e;return this.float32[0+n]=t,this.float32[1+n]=i,e}}nr.prototype.bytesPerElement=8,t("StructArrayLayout2f8",nr);class rr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,n,r,o,a,s,l,c){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,i,n,r,o,a,s,l,c)}emplace(e,t,i,n,r,o,a,s,l,c,u){var d=10*e;return this.uint16[0+d]=t,this.uint16[1+d]=i,this.uint16[2+d]=n,this.uint16[3+d]=r,this.uint16[4+d]=o,this.uint16[5+d]=a,this.uint16[6+d]=s,this.uint16[7+d]=l,this.uint16[8+d]=c,this.uint16[9+d]=u,e}}rr.prototype.bytesPerElement=20,t("StructArrayLayout10ui20",rr);class or extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,n,r,o,a,s,l,c,u,d){var h=this.length;return this.resize(h+1),this.emplace(h,e,t,i,n,r,o,a,s,l,c,u,d)}emplace(e,t,i,n,r,o,a,s,l,c,u,d,h){var p=12*e;return this.int16[0+p]=t,this.int16[1+p]=i,this.int16[2+p]=n,this.int16[3+p]=r,this.uint16[4+p]=o,this.uint16[5+p]=a,this.uint16[6+p]=s,this.uint16[7+p]=l,this.int16[8+p]=c,this.int16[9+p]=u,this.int16[10+p]=d,this.int16[11+p]=h,e}}or.prototype.bytesPerElement=24,t("StructArrayLayout4i4ui4i24",or);class ar extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i)}emplace(e,t,i,n){var r=3*e;return this.float32[0+r]=t,this.float32[1+r]=i,this.float32[2+r]=n,e}}ar.prototype.bytesPerElement=12,t("StructArrayLayout3f12",ar);class sr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[+e+0]=t,e}}sr.prototype.bytesPerElement=4,t("StructArrayLayout1ul4",sr);class lr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,n,r,o,a,s,l){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,i,n,r,o,a,s,l)}emplace(e,t,i,n,r,o,a,s,l,c){var u=10*e,d=5*e;return this.int16[0+u]=t,this.int16[1+u]=i,this.int16[2+u]=n,this.int16[3+u]=r,this.int16[4+u]=o,this.int16[5+u]=a,this.uint32[3+d]=s,this.uint16[8+u]=l,this.uint16[9+u]=c,e}}lr.prototype.bytesPerElement=20,t("StructArrayLayout6i1ul2ui20",lr);class cr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,n,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,n,r,o)}emplace(e,t,i,n,r,o,a){var s=6*e;return this.int16[0+s]=t,this.int16[1+s]=i,this.int16[2+s]=n,this.int16[3+s]=r,this.int16[4+s]=o,this.int16[5+s]=a,e}}cr.prototype.bytesPerElement=12,t("StructArrayLayout2i2i2i12",cr);class ur extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,n,r){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,n,r)}emplace(e,t,i,n,r,o){var a=4*e,s=8*e;return this.float32[0+a]=t,this.float32[1+a]=i,this.float32[2+a]=n,this.int16[6+s]=r,this.int16[7+s]=o,e}}ur.prototype.bytesPerElement=16,t("StructArrayLayout2f1f2i16",ur);class dr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,n)}emplace(e,t,i,n,r){var o=12*e,a=3*e;return this.uint8[0+o]=t,this.uint8[1+o]=i,this.float32[1+a]=n,this.float32[2+a]=r,e}}dr.prototype.bytesPerElement=12,t("StructArrayLayout2ub2f12",dr);class hr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i)}emplace(e,t,i,n){var r=3*e;return this.uint16[0+r]=t,this.uint16[1+r]=i,this.uint16[2+r]=n,e}}hr.prototype.bytesPerElement=6,t("StructArrayLayout3ui6",hr);class pr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,n,r,o,a,s,l,c,u,d,h,p,f,m,g){var v=this.length;return this.resize(v+1),this.emplace(v,e,t,i,n,r,o,a,s,l,c,u,d,h,p,f,m,g)}emplace(e,t,i,n,r,o,a,s,l,c,u,d,h,p,f,m,g,v){var _=24*e,y=12*e,b=48*e;return this.int16[0+_]=t,this.int16[1+_]=i,this.uint16[2+_]=n,this.uint16[3+_]=r,this.uint32[2+y]=o,this.uint32[3+y]=a,this.uint32[4+y]=s,this.uint16[10+_]=l,this.uint16[11+_]=c,this.uint16[12+_]=u,this.float32[7+y]=d,this.float32[8+y]=h,this.uint8[36+b]=p,this.uint8[37+b]=f,this.uint8[38+b]=m,this.uint32[10+y]=g,this.int16[22+_]=v,e}}pr.prototype.bytesPerElement=48,t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",pr);class fr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,n,r,o,a,s,l,c,u,d,h,p,f,m,g,v,_,y,b,x,w,C,T,S,k,E){var A=this.length;return this.resize(A+1),this.emplace(A,e,t,i,n,r,o,a,s,l,c,u,d,h,p,f,m,g,v,_,y,b,x,w,C,T,S,k,E)}emplace(e,t,i,n,r,o,a,s,l,c,u,d,h,p,f,m,g,v,_,y,b,x,w,C,T,S,k,E,A){var P=34*e,M=17*e;return this.int16[0+P]=t,this.int16[1+P]=i,this.int16[2+P]=n,this.int16[3+P]=r,this.int16[4+P]=o,this.int16[5+P]=a,this.int16[6+P]=s,this.int16[7+P]=l,this.uint16[8+P]=c,this.uint16[9+P]=u,this.uint16[10+P]=d,this.uint16[11+P]=h,this.uint16[12+P]=p,this.uint16[13+P]=f,this.uint16[14+P]=m,this.uint16[15+P]=g,this.uint16[16+P]=v,this.uint16[17+P]=_,this.uint16[18+P]=y,this.uint16[19+P]=b,this.uint16[20+P]=x,this.uint16[21+P]=w,this.uint16[22+P]=C,this.uint32[12+M]=T,this.float32[13+M]=S,this.float32[14+M]=k,this.float32[15+M]=E,this.float32[16+M]=A,e}}fr.prototype.bytesPerElement=68,t("StructArrayLayout8i15ui1ul4f68",fr);class mr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[+e+0]=t,e}}mr.prototype.bytesPerElement=4,t("StructArrayLayout1f4",mr);class gr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i)}emplace(e,t,i,n){var r=3*e;return this.int16[0+r]=t,this.int16[1+r]=i,this.int16[2+r]=n,e}}gr.prototype.bytesPerElement=6,t("StructArrayLayout3i6",gr);class vr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i)}emplace(e,t,i,n){var r=4*e;return this.uint32[2*e+0]=t,this.uint16[2+r]=i,this.uint16[3+r]=n,e}}vr.prototype.bytesPerElement=8,t("StructArrayLayout1ul2ui8",vr);class _r extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){var n=2*e;return this.uint16[0+n]=t,this.uint16[1+n]=i,e}}_r.prototype.bytesPerElement=4,t("StructArrayLayout2ui4",_r);class yr extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[+e+0]=t,e}}yr.prototype.bytesPerElement=2,t("StructArrayLayout1ui2",yr);class br extends a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,n)}emplace(e,t,i,n,r){var o=4*e;return this.float32[0+o]=t,this.float32[1+o]=i,this.float32[2+o]=n,this.float32[3+o]=r,e}}br.prototype.bytesPerElement=16,t("StructArrayLayout4f16",br);class xr extends Kn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}xr.prototype.size=20;class wr extends lr{get(e){return new xr(this,e)}}t("CollisionBoxArray",wr);class Cr extends Kn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Cr.prototype.size=48;class Tr extends pr{get(e){return new Cr(this,e)}}t("PlacedSymbolArray",Tr);class Sr extends Kn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Sr.prototype.size=68;class kr extends fr{get(e){return new Sr(this,e)}}t("SymbolInstanceArray",kr);class Er extends mr{getoffsetX(e){return this.float32[+e+0]}}t("GlyphOffsetArray",Er);class Ar extends gr{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}t("SymbolLineVertexArray",Ar);class Pr extends Kn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Pr.prototype.size=8;class Mr extends vr{get(e){return new Pr(this,e)}}t("FeatureIndexArray",Mr);class Ir extends Qn{}class Dr extends Qn{}class Lr extends Qn{}class zr extends tr{}class Rr extends ir{}class Or extends nr{}class Br extends rr{}class Fr extends or{}class Nr extends ar{}class jr extends sr{}class Vr extends cr{}class Ur extends dr{}class $r extends hr{}class qr extends _r{}let Hr=C([{name:"a_pos",components:2,type:"Int16"}],4),Zr=Hr["members"];class T{constructor(e=[]){this.segments=e}prepareSegment(e,t,i,n){let r=this.segments[this.segments.length-1];return e>T.MAX_VERTEX_ARRAY_LENGTH&&le(`Max vertices per segment is ${T.MAX_VERTEX_ARRAY_LENGTH}: bucket requested `+e),(!r||r.vertexLength+e>T.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==n)&&(r={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==n&&(r.sortKey=n),this.segments.push(r)),r}get(){return this.segments}destroy(){for(var e of this.segments)for(var t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,i,n){return new T([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:n,vaos:{},sortKey:0}])}}function Gr(e,t){return 256*(e=R(Math.floor(e),0,255))+R(Math.floor(t),0,255)}T.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,t("SegmentVector",T);let Wr=C([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Xr={exports:{}},oi={exports:{}},e=(oi.exports=function(e,t){for(var i,n,r,o=e.length-(i=3&e.length),a=t,s=3432918353,l=461845907,c=0;c<o;)r=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,a=27492+(65535&(n=5*(65535&(a=(a^=r=(65535&(r=(r=(65535&r)*s+(((r>>>16)*s&65535)<<16)&4294967295)<<15|r>>>17))*l+(((r>>>16)*l&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(n>>>16)&65535)<<16);switch(r=0,i){case 3:r^=(255&e.charCodeAt(c+2))<<16;case 2:r^=(255&e.charCodeAt(c+1))<<8;case 1:a^=r=(65535&(r=(r=(65535&(r^=255&e.charCodeAt(c)))*s+(((r>>>16)*s&65535)<<16)&4294967295)<<15|r>>>17))*l+(((r>>>16)*l&65535)<<16)&4294967295}return a=2246822507*(65535&(a=(a^=e.length)^a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,((a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295)^a>>>16)>>>0},{exports:{}}),si=(e.exports=function(e,t){for(var i,n=e.length,r=t^n,o=0;4<=n;)i=1540483477*(65535&(i=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return((r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16))^r>>>15)>>>0},oi.exports),ai=e.exports;Xr.exports=si,Xr.exports.murmur3=si,Xr.exports.murmur2=ai;class Yr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,i,n){this.ids.push(Kr(e)),this.positions.push(t,i,n)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");var t=Kr(e);let i=0,n=this.ids.length-1;for(;i<n;){let e=i+n>>1;this.ids[e]>=t?n=e:i=1+e}for(var r=[];this.ids[i]===t;)r.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return r}static serialize(e,t){var i=new Float64Array(e.ids),e=new Uint32Array(e.positions);return function n(r,o,a,s){for(;a<s;){let e=r[a+s>>1],t=a-1,i=s+1;for(;;){for(;t++,r[t]<e;);for(;i--,r[i]>e;);if(t>=i)break;Jr(r,t,i),Jr(o,3*t,3*i),Jr(o,3*t+1,3*i+1),Jr(o,3*t+2,3*i+2)}i-a<s-i?(n(r,o,a,i),a=i+1):(n(r,o,i+1,s),s=i)}}(i,e,0,i.length-1),t&&t.push(i.buffer,e.buffer),{ids:i,positions:e}}static deserialize(e){var t=new Yr;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Kr(e){var t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Xr.exports(String(e))}function Jr(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}t("FeaturePositionMap",Yr);class Qr{constructor(e,t){this.gl=e.gl,this.location=t}}class eo extends Qr{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class to extends Qr{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class io extends Qr{constructor(e,t){super(e,t),this.current=m.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}let no=new Float32Array(16);function ro(e){return[Gr(255*e.r,255*e.g),Gr(255*e.b,255*e.a)]}class oo{constructor(e,t,i){this.value=e,this.uniformNames=t.map(e=>"u_"+e),this.type=i}setUniform(e,t,i){e.set(i.constantOr(this.value))}getBinding(e,t,i){return new("color"===this.type?io:eo)(e,t)}}class ao{constructor(e,t){this.uniformNames=t.map(e=>"u_"+e),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,i,n){n="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;n&&e.set(n)}getBinding(e,t,i){return new("u_pattern"===i.substr(0,9)?to:eo)(e,t)}}class so{constructor(e,t,i,n){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===i?2:1,offset:0})),this.paintVertexArray=new n}populatePaintArray(e,t,i,n,r){var o=this.paintVertexArray.length,t=this.expression.evaluate(new w(0),t,{},n,[],r);this.paintVertexArray.resize(e),this._setPaintValue(o,e,t)}updatePaintArray(e,t,i,n){i=this.expression.evaluate({zoom:0},i,n);this._setPaintValue(e,t,i)}_setPaintValue(t,i,n){if("color"===this.type){var r=ro(n);for(let e=t;e<i;e++)this.paintVertexArray.emplace(e,r[0],r[1])}else{for(let e=t;e<i;e++)this.paintVertexArray.emplace(e,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class lo{constructor(e,t,i,n,r,o){this.expression=e,this.uniformNames=t.map(e=>`u_${e}_t`),this.type=i,this.useIntegerZoom=n,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===i?4:2,offset:0})),this.paintVertexArray=new o}populatePaintArray(e,t,i,n,r){var o=this.expression.evaluate(new w(this.zoom),t,{},n,[],r),t=this.expression.evaluate(new w(this.zoom+1),t,{},n,[],r),n=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(n,e,o,t)}updatePaintArray(e,t,i,n){var r=this.expression.evaluate({zoom:this.zoom},i,n),i=this.expression.evaluate({zoom:this.zoom+1},i,n);this._setPaintValue(e,t,r,i)}_setPaintValue(t,i,n,r){if("color"===this.type){var o=ro(n),a=ro(r);for(let e=t;e<i;e++)this.paintVertexArray.emplace(e,o[0],o[1],a[0],a[1])}else{for(let e=t;e<i;e++)this.paintVertexArray.emplace(e,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){t=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,t=R(this.expression.interpolationFactor(t,this.zoom,this.zoom+1),0,1);e.set(t)}getBinding(e,t,i){return new eo(e,t)}}class co{constructor(e,t,i,n,r,o){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=n,this.layerId=o,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r}populatePaintArray(e,t,i){var n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],i)}updatePaintArray(e,t,i,n,r){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],r)}_setPaintValues(t,i,e,n){if(n&&e){var{min:e,mid:r,max:o}=e,a=n[e],s=n[r],l=n[o];if(a&&s&&l)for(let e=t;e<i;e++)this.zoomInPaintVertexArray.emplace(e,s.tl[0],s.tl[1],s.br[0],s.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],s.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(e,s.tl[0],s.tl[1],s.br[0],s.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],s.pixelRatio,l.pixelRatio)}}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Wr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Wr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class uo{constructor(t,i,e){this.binders={},this._buffers=[];var n,r=[];for(n in t.paint._values)if(e(n)){var o=t.paint.get(n);if(o instanceof $n&&gi(o.property.specification)){a=n,s=t.type;var a={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(s+"-","").replace(/-/g,"_")],s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,o=o.property.specification["property-type"],o="cross-faded"===o||"cross-faded-data-driven"===o;if("constant"===s.kind)this.binders[n]=o?new ao(s.value,a):new oo(s.value,a,l),r.push("/u_"+n);else if("source"===s.kind||o){let e=po(n,l,"source");this.binders[n]=o?new co(s,l,c,i,e,t.id):new so(s,a,l,e),r.push("/a_"+n)}else{let e=po(n,l,"composite");this.binders[n]=new lo(s,a,l,c,i,e),r.push("/z_"+n)}}}this.cacheKey=r.sort().join("")}getMaxValue(e){e=this.binders[e];return e instanceof so||e instanceof lo?e.maxValue:0}populatePaintArrays(e,t,i,n,r){for(var o in this.binders){o=this.binders[o];(o instanceof so||o instanceof lo||o instanceof co)&&o.populatePaintArray(e,t,i,n,r)}}setConstantPatternPositions(e,t){for(var i in this.binders){i=this.binders[i];i instanceof ao&&i.setConstantPatternPositions(e,t)}}updatePaintArrays(i,e,n,r,o){let a=!1;for(var s in i){var l=e.getPositions(s);for(let t of l){var c=n.feature(t.index);for(let e in this.binders){var u,d=this.binders[e];(d instanceof so||d instanceof lo||d instanceof co)&&!0===d.expression.isStateDependent&&(u=r.paint.get(e),d.expression=u.value,d.updatePaintArray(t.start,t.end,c,i[s],o),a=!0)}}}return a}defines(){var e,t=[];for(e in this.binders){var i=this.binders[e];(i instanceof oo||i instanceof ao)&&t.push(...i.uniformNames.map(e=>"#define HAS_UNIFORM_"+e))}return t}getBinderAttributes(){var e,t=[];for(e in this.binders){var i=this.binders[e];if(i instanceof so||i instanceof lo)for(let e=0;e<i.paintVertexAttributes.length;e++)t.push(i.paintVertexAttributes[e].name);else if(i instanceof co)for(let e=0;e<Wr.members.length;e++)t.push(Wr.members[e].name)}return t}getBinderUniforms(){var e,t=[];for(e in this.binders){var i=this.binders[e];if(i instanceof oo||i instanceof ao||i instanceof lo)for(var n of i.uniformNames)t.push(n)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){var i,n=[];for(i in this.binders){var r,o=this.binders[i];if(o instanceof oo||o instanceof ao||o instanceof lo)for(var a of o.uniformNames)t[a]&&(r=o.getBinding(e,t[a],a),n.push({name:a,property:i,binding:r}))}return n}setUniforms(e,n,r,o){for(let{name:e,property:t,binding:i}of n)this.binders[t].setUniform(i,o,r.get(t),e)}updatePaintBuffers(e){for(var t in this._buffers=[],this.binders){var i,t=this.binders[t];e&&t instanceof co?(i=2===e.fromScale?t.zoomInPaintVertexBuffer:t.zoomOutPaintVertexBuffer)&&this._buffers.push(i):(t instanceof so||t instanceof lo)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(var t in this.binders){t=this.binders[t];(t instanceof so||t instanceof lo||t instanceof co)&&t.upload(e)}this.updatePaintBuffers()}destroy(){for(var e in this.binders){e=this.binders[e];(e instanceof so||e instanceof lo||e instanceof co)&&e.destroy()}}}class ho{constructor(e,t,i=()=>!0){this.programConfigurations={};for(var n of e)this.programConfigurations[n.id]=new uo(n,t,i);this.needsUpload=!1,this._featureMap=new Yr,this._bufferOffset=0}populatePaintArrays(t,i,e,n,r,o){for(let e in this.programConfigurations)this.programConfigurations[e].populatePaintArrays(t,i,n,r,o);void 0!==i.id&&this._featureMap.add(i.id,e,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(e,t,i,n){for(var r of i)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(e,this._featureMap,t,r,n)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}function po(e,t,i){var n={color:{source:nr,composite:br},number:{source:mr,composite:nr}},e=(e=e,{"line-pattern":{source:Br,composite:Br},"fill-pattern":{source:Br,composite:Br},"fill-extrusion-pattern":{source:Br,composite:Br}}[e]);return e&&e[i]||n[t][i]}t("ConstantBinder",oo),t("CrossFadedConstantBinder",ao),t("SourceExpressionBinder",so),t("CrossFadedCompositeBinder",co),t("CompositeExpressionBinder",lo),t("ProgramConfiguration",uo,{omit:["_buffers"]}),t("ProgramConfigurationSet",ho);var ce=8192;let fo=Math.pow(2,14)-1,mo=-fo-1;function go(e){let r=ce/e.extent,t=e.loadGeometry();for(let e=0;e<t.length;e++){var o=t[e];for(let n=0;n<o.length;n++){let e=o[n],t=Math.round(e.x*r),i=Math.round(e.y*r);e.x=R(t,mo,fo),e.y=R(i,mo,fo),(t<e.x||t>e.x+1||i<e.y||i>e.y+1)&&le("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return t}function vo(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?go(e):[]}}function _o(e,t,i,n,r){e.emplaceBack(2*t+(n+1)/2,2*i+(r+1)/2)}class yo{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Dr,this.indexArray=new $r,this.segments=new T,this.programConfigurations=new ho(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(a,o,s){let e=this.layers[0],l=[],c=null,u=!1;"circle"===e.type&&(c=e.layout.get("circle-sort-key"),u=!c.isConstant());for(let{feature:i,id:n,index:r,sourceLayerIndex:o}of a){let e=this.layers[0]._featureFilter.needGeometry,t=vo(i,e);var d;this.layers[0]._featureFilter.filter(new w(this.zoom),t,s)&&(d=u?c.evaluate(t,{},s):void 0,d={id:n,properties:i.properties,type:i.type,sourceLayerIndex:o,index:r,geometry:e?t.geometry:go(i),patterns:{},sortKey:d},l.push(d))}u&&l.sort((e,t)=>e.sortKey-t.sortKey);for(let r of l){let{geometry:e,index:t,sourceLayerIndex:i}=r,n=a[t].feature;this.addFeature(r,e,t,s),o.featureIndex.insert(n,e,t,i,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Zr),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,t,e,i){for(let e of t)for(let i of e){let e=i.x,t=i.y;var r,o;e<0||e>=ce||t<0||t>=ce||(o=(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey)).vertexLength,_o(this.layoutVertexArray,e,t,-1,-1),_o(this.layoutVertexArray,e,t,1,-1),_o(this.layoutVertexArray,e,t,1,1),_o(this.layoutVertexArray,e,t,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),r.vertexLength+=4,r.primitiveLength+=2)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,e,{},i)}}function bo(t,i){for(let e=0;e<t.length;e++)if(ko(i,t[e]))return!0;for(let e=0;e<i.length;e++)if(ko(t,i[e]))return!0;return!!wo(t,i)}function xo(t,i){if(1===t.length)return So(i,t[0]);for(let e=0;e<i.length;e++){var n=i[e];for(let e=0;e<n.length;e++)if(ko(t,n[e]))return!0}for(let e=0;e<t.length;e++)if(So(i,t[e]))return!0;for(let e=0;e<i.length;e++)if(wo(t,i[e]))return!0;return!1}function wo(t,i){var n,r,o,a;if(0!==t.length&&0!==i.length)for(let e=0;e<t.length-1;e++){var s=t[e],l=t[e+1];for(let e=0;e<i.length-1;e++)if(n=s,r=l,o=i[e],a=i[e+1],q(n,o,a)!==q(r,o,a)&&q(n,r,o)!==q(n,r,a))return 1}}function Co(t,i,e){var n=e*e;if(1===i.length)return t.distSqr(i[0])<n;for(let e=1;e<i.length;e++)if(To(t,i[e-1],i[e])<n)return 1}function To(e,t,i){var n=t.distSqr(i);return 0===n?e.distSqr(t):(n=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/n,e.distSqr(n<0?t:1<n?i:i.sub(t)._mult(n)._add(t)))}function So(n,r){let o,a,s,l=!1;for(let i=0;i<n.length;i++)for(let e=0,t=(o=n[i]).length-1;e<o.length;t=e++)a=o[e],s=o[t],a.y>r.y!=s.y>r.y&&r.x<(s.x-a.x)*(r.y-a.y)/(s.y-a.y)+a.x&&(l=!l);return l}function ko(i,n){let r=!1;for(let e=0,t=i.length-1;e<i.length;t=e++){var o=i[e],a=i[t];o.y>n.y!=a.y>n.y&&n.x<(a.x-o.x)*(n.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function Eo(e,t,i){var n=t.paint.get(e).value;return"constant"===n.kind?n.value:i.programConfigurations.get(t.id).getMaxValue(e)}function Ao(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Po(t,e,i,n,r){if(!e[0]&&!e[1])return t;var o=M.convert(e)._mult(r),a=("viewport"===i&&o._rotate(-n),[]);for(let e=0;e<t.length;e++)a.push(t[e].sub(o));return a}t("CircleBucket",yo,{omit:["layers"]});var li=new r({"circle-sort-key":new n(o.layout_circle["circle-sort-key"])}),Mo={paint:new r({"circle-radius":new n(o.paint_circle["circle-radius"]),"circle-color":new n(o.paint_circle["circle-color"]),"circle-blur":new n(o.paint_circle["circle-blur"]),"circle-opacity":new n(o.paint_circle["circle-opacity"]),"circle-translate":new i(o.paint_circle["circle-translate"]),"circle-translate-anchor":new i(o.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new i(o.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new i(o.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new n(o.paint_circle["circle-stroke-width"]),"circle-stroke-color":new n(o.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new n(o.paint_circle["circle-stroke-opacity"])}),layout:li},D=1e-6,S="undefined"!=typeof Float32Array?Float32Array:Array;function Io(){var e=new S(9);return S!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Do(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Lo(e,t,i){var n=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],m=t[12],g=t[13],v=t[14],t=t[15],_=i[0],y=i[1],b=i[2],x=i[3];return e[0]=_*n+y*s+b*d+x*m,e[1]=_*r+y*l+b*h+x*g,e[2]=_*o+y*c+b*p+x*v,e[3]=_*a+y*u+b*f+x*t,e[4]=(_=i[4])*n+(y=i[5])*s+(b=i[6])*d+(x=i[7])*m,e[5]=_*r+y*l+b*h+x*g,e[6]=_*o+y*c+b*p+x*v,e[7]=_*a+y*u+b*f+x*t,e[8]=(_=i[8])*n+(y=i[9])*s+(b=i[10])*d+(x=i[11])*m,e[9]=_*r+y*l+b*h+x*g,e[10]=_*o+y*c+b*p+x*v,e[11]=_*a+y*u+b*f+x*t,e[12]=(_=i[12])*n+(y=i[13])*s+(b=i[14])*d+(x=i[15])*m,e[13]=_*r+y*l+b*h+x*g,e[14]=_*o+y*c+b*p+x*v,e[15]=_*a+y*u+b*f+x*t,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});oi=Lo;function zo(){var e=new S(3);S!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0)}function Ro(e,t,i){var n=new S(3);n[0]=e,n[1]=t,n[2]=i}function Oo(e,t,i){var n=t[0],r=t[1],o=t[2],t=t[3];return e[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*t,e[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*t,e[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*t,e[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*t,e}function Bo(){var e=new S(4);S!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1}function Fo(e,t){e=Oo([],[e.x,e.y,0,1],t);return new M(e[0]/e[3],e[1]/e[3])}zo(),e=new S(4),S!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),zo(),Ro(1,0,0),Ro(0,1,0),Bo(),Bo(),Io(),si=new S(2),S!=Float32Array&&(si[0]=0,si[1]=0);class No extends yo{}t("HeatmapBucket",No,{omit:["layers"]});var jo={paint:new r({"heatmap-radius":new n(o.paint_heatmap["heatmap-radius"]),"heatmap-weight":new n(o.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new i(o.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Gn(o.paint_heatmap["heatmap-color"]),"heatmap-opacity":new i(o.paint_heatmap["heatmap-opacity"])})};function Vo(e,{width:t,height:i},n,r){if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==t*i*n)throw new RangeError(`mismatched image size. expected: ${r.length} but got: `+t*i*n)}else r=new Uint8Array(t*i*n);return e.width=t,e.height=i,e.data=r,e}function Uo(e,{width:t,height:i},n){var r;t===e.width&&i===e.height||($o(e,r=Vo({},{width:t,height:i},n),{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,i)},n),e.width=t,e.height=i,e.data=r.data)}function $o(t,i,n,r,o,a){if(0!==o.width&&0!==o.height){if(o.width>t.width||o.height>t.height||n.x>t.width-o.width||n.y>t.height-o.height)throw new RangeError("out of range source coordinates for image copy");if(o.width>i.width||o.height>i.height||r.x>i.width-o.width||r.y>i.height-o.height)throw new RangeError("out of range destination coordinates for image copy");var s=t.data,l=i.data;if(s===l)throw new Error("srcData equals dstData, so image is already copied");for(let e=0;e<o.height;e++){var c=((n.y+e)*t.width+n.x)*a,u=((r.y+e)*i.width+r.x)*a;for(let e=0;e<o.width*a;e++)l[u+e]=s[c+e]}}}class qo{constructor(e,t){Vo(this,e,1,t)}resize(e){Uo(this,e,1)}clone(){return new qo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,n,r){$o(e,t,i,n,r,1)}}class Ho{constructor(e,t){Vo(this,e,4,t)}resize(e){Uo(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ho({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,n,r){$o(e,t,i,n,r,4)}}function Zo(r){let n={},o=r.resolution||256,e=r.clips?r.clips.length:1,a=r.image||new Ho({width:o,height:e});if(Math.log(o)/Math.LN2%1!=0)throw new Error("width is not a power of 2 - "+o);var s=(e,t,i)=>{n[r.evaluationKey]=i;i=r.expression.evaluate(n);a.data[e+t+0]=Math.floor(255*i.r/i.a),a.data[e+t+1]=Math.floor(255*i.g/i.a),a.data[e+t+2]=Math.floor(255*i.b/i.a),a.data[e+t+3]=Math.floor(255*i.a)};if(r.clips)for(let i=0,n=0;i<e;++i,n+=4*o)for(let e=0,t=0;e<o;e++,t+=4){var l=e/(o-1),{start:c,end:u}=r.clips[i];s(n,t,c*(1-l)+u*l)}else for(let e=0,t=0;e<o;e++,t+=4)s(0,t,e/(o-1));return a}t("AlphaImage",qo),t("RGBAImage",Ho);var Go={paint:new r({"hillshade-illumination-direction":new i(o.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new i(o.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new i(o.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new i(o.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new i(o.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new i(o.paint_hillshade["hillshade-accent-color"])})};let Wo=C([{name:"a_pos",components:2,type:"Int16"}],4),Xo=Wo["members"];var Yo={exports:{}};function Ko(e,t,i){i=i||2;var n,r,o,a,s,l=t&&t.length,c=l?t[0]*i:e.length,u=Jo(e,0,c,i,!0),d=[];if(u&&u.next!==u.prev){if(l&&(u=function(e,t,i,n){for(var r,o,a,s,l=[],c=0,u=t.length;c<u;c++)(r=Jo(e,t[c]*n,c<u-1?t[c+1]*n:e.length,n,!1))===r.next&&(r.steiner=!0),l.push(function(e){var t=e,i=e;for(;(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next,t!==e;);return i}(r));for(l.sort(ta),c=0;c<l.length;c++)s=void 0,i=(s=function(e,t){var i,n=t,r=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&a<s&&(i=n.x<n.next.x?n:n.next,(a=s)===r))return i}}while((n=n.next)!==t);if(!i)return null;for(var l,c,u,d=i,h=i.x,p=i.y,f=1/0,n=i;r>=n.x&&n.x>=h&&r!==n.x&&na(o<p?r:a,o,h,p,o<p?a:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),la(n,e))&&(l<f||l===f&&(n.x>i.x||n.x===i.x&&(u=n,k((c=i).prev,c,u.prev)<0)&&k(u.next,c,c.next)<0))&&(i=n,f=l),(n=n.next)!==d;);return i}(o=l[c],a=i))?(Qo(o=ca(s,o),o.next),Qo(s,s.next)):a;return i}(e,t,u,i)),e.length>80*i){for(var h=n=e[0],p=r=e[1],f=i;f<c;f+=i)(o=e[f])<h&&(h=o),(a=e[f+1])<p&&(p=a),n<o&&(n=o),r<a&&(r=a);s=0!==(s=Math.max(n-h,r-p))?32767/s:0}ea(u,d,i,h,p,s,0)}return d}function Jo(e,t,i,n,r){var o,a;if(r===0<pa(e,t,i,n))for(o=t;o<i;o+=n)a=ua(o,e[o],e[o+1],a);else for(o=i-n;t<=o;o-=n)a=ua(o,e[o],e[o+1],a);return a&&ra(a,a.next)&&(da(a),a=a.next),a}function Qo(e,t){if(!e)return e;t=t||e;var i,n=e;do{if(i=!1,n.steiner||!ra(n,n.next)&&0!==k(n.prev,n,n.next))n=n.next;else{if(da(n),(n=t=n.prev)===n.next)break;i=!0}}while(i||n!==t);return t}function ea(e,t,i,n,r,o,a){if(e){if(!a&&o){var s=e;var l=n;var c=r;var u=o;for(var d=s;0===d.z&&(d.z=ia(d.x,d.y,l,c,u)),d.prevZ=d.prev,d.nextZ=d.next,(d=d.next)!==s;);d.prevZ.nextZ=null,d.prevZ=null;var h,p,f,m,g,v,_,y,b=d,x=1;do{for(p=b,g=b=null,v=0;p;){for(v++,f=p,h=_=0;h<x&&(_++,f=f.nextZ);h++);for(y=x;0<_||0<y&&f;)0!==_&&(0===y||!f||p.z<=f.z)?(p=(m=p).nextZ,_--):(f=(m=f).nextZ,y--),g?g.nextZ=m:b=m,m.prevZ=g,g=m;p=f}}while(g.nextZ=null,x*=2,1<v)}for(var w,C,T=e;e.prev!==e.next;)if(w=e.prev,C=e.next,o?function(e,t,i,n){var r=e.prev,o=e,a=e.next;if(0<=k(r,o,a))return;for(var s=r.x,l=o.x,c=a.x,u=r.y,d=o.y,h=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=l<s?c<s?s:c:c<l?l:c,g=d<u?h<u?u:h:h<d?d:h,v=ia(p,f,t,i,n),_=ia(m,g,t,i,n),y=e.prevZ,b=e.nextZ;y&&y.z>=v&&b&&b.z<=_;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==r&&y!==a&&na(s,u,l,d,c,h,y.x,y.y)&&0<=k(y.prev,y,y.next))return;if(y=y.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&na(s,u,l,d,c,h,b.x,b.y)&&0<=k(b.prev,b,b.next))return;b=b.nextZ}for(;y&&y.z>=v;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==r&&y!==a&&na(s,u,l,d,c,h,y.x,y.y)&&0<=k(y.prev,y,y.next))return;y=y.prevZ}for(;b&&b.z<=_;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&na(s,u,l,d,c,h,b.x,b.y)&&0<=k(b.prev,b,b.next))return;b=b.nextZ}return 1}(e,n,r,o):function(e){var t=e.prev,i=e,e=e.next;if(0<=k(t,i,e))return;for(var n=t.x,r=i.x,o=e.x,a=t.y,s=i.y,l=e.y,c=n<r?n<o?n:o:r<o?r:o,u=a<s?a<l?a:l:s<l?s:l,d=r<n?o<n?n:o:o<r?r:o,h=s<a?l<a?a:l:l<s?s:l,p=e.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=u&&p.y<=h&&na(n,a,r,s,o,l,p.x,p.y)&&0<=k(p.prev,p,p.next))return;p=p.next}return 1}(e))t.push(w.i/i|0),t.push(e.i/i|0),t.push(C.i/i|0),da(e),e=C.next,T=C.next;else if((e=C)===T){a?1===a?ea(e=function(e,t,i){var n=e;do{var r=n.prev,o=n.next.next}while(!ra(r,o)&&oa(r,n,n.next,o)&&la(r,o)&&la(o,r)&&(t.push(r.i/i|0),t.push(n.i/i|0),t.push(o.i/i|0),da(n),da(n.next),n=e=o),n=n.next,n!==e);return Qo(n)}(Qo(e),t,i),t,i,n,r,o,2):2===a&&function(e,t,i,n,r,o){var a=e;do{for(var s,l=a.next.next;l!==a.prev;){if(a.i!==l.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&oa(i,i.next,e,t))return 1}while((i=i.next)!==e)}(e,t)&&(la(e,t)&&la(t,e)&&function(e,t){for(var i=e,n=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==e;);return n}(e,t)&&(k(e.prev,e,t.prev)||k(e,t.prev,t))||ra(e,t)&&0<k(e.prev,e,e.next)&&0<k(t.prev,t,t.next))}(a,l))return s=ca(a,l),a=Qo(a,a.next),s=Qo(s,s.next),ea(a,t,i,n,r,o,0),ea(s,t,i,n,r,o,0);l=l.next}}while(a=a.next,a!==e)}(e,t,i,n,r,o):ea(Qo(e),t,i,n,r,o,1);break}}}function ta(e,t){return e.x-t.x}function ia(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function na(e,t,i,n,r,o,a,s){return(e-a)*(o-s)<=(r-a)*(t-s)&&(i-a)*(t-s)<=(e-a)*(n-s)&&(r-a)*(n-s)<=(i-a)*(o-s)}function k(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function ra(e,t){return e.x===t.x&&e.y===t.y}function oa(e,t,i,n){var r=sa(k(e,t,i)),o=sa(k(e,t,n)),a=sa(k(i,n,e)),s=sa(k(i,n,t));return r!==o&&a!==s||0===r&&aa(e,i,t)||0===o&&aa(e,n,t)||0===a&&aa(i,e,n)||0===s&&aa(i,t,n)}function aa(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function sa(e){return 0<e?1:e<0?-1:0}function la(e,t){return k(e.prev,e,e.next)<0?0<=k(e,t,e.next)&&0<=k(e,e.prev,t):k(e,t,e.prev)<0||k(e,e.next,t)<0}function ca(e,t){var i=new ha(e.i,e.x,e.y),n=new ha(t.i,t.x,t.y),r=e.next,o=t.prev;return(e.next=t).prev=e,(i.next=r).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n}function ua(e,t,i,n){e=new ha(e,t,i);return n?(e.next=n.next,(e.prev=n).next.prev=e,n.next=e):(e.prev=e).next=e,e}function da(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ha(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pa(e,t,i,n){for(var r=0,o=t,a=i-n;o<i;o+=n)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}function fa(e,t,i,n,r){!function e(t,i,n,r,o){for(;n<r;){600<r-n&&(a=r-n+1,s=i-n+1,c=Math.log(a),l=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*l*(a-l)/a)*(s-a/2<0?-1:1),e(t,i,Math.max(n,Math.floor(i-s*l/a+c)),Math.min(r,Math.floor(i+(a-s)*l/a+c)),o));var a,s,l,c,u=t[i],d=n,h=r;for(ma(t,n,i),0<o(t[r],u)&&ma(t,n,r);d<h;){for(ma(t,d,h),d++,h--;o(t[d],u)<0;)d++;for(;0<o(t[h],u);)h--}0===o(t[n],u)?ma(t,n,h):ma(t,++h,r),h<=i&&(n=h+1),i<=h&&(r=h-1)}}(e,t,i||0,n||e.length-1,r||ga)}function ma(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function ga(e,t){return e<t?-1:t<e?1:0}function va(i,t){let e=i.length;if(e<=1)return[i];var n=[];let r,o;for(let t=0;t<e;t++){let e=function(o){let a=0;for(let e,t,i=0,n=o.length,r=n-1;i<n;r=i++)e=o[i],t=o[r],a+=(t.x-e.x)*(e.y+t.y);return a}(i[t]);0!==e&&(i[t].area=Math.abs(e),(o=void 0===o?e<0:o)===e<0?(r&&n.push(r),r=[i[t]]):r.push(i[t]))}if(r&&n.push(r),1<t)for(let e=0;e<n.length;e++)n[e].length<=t||(fa(n[e],t,1,n[e].length-1,_a),n[e]=n[e].slice(0,t));return n}function _a(e,t){return t.area-e.area}function ya(i,e,t){var n=t.patternDependencies;let r=!1;for(let t of e){let e=t.paint.get(i+"-pattern");e.isConstant()||(r=!0);var o=e.constantOr(null);o&&(r=!0,n[o.to]=!0,n[o.from]=!0)}return r}function ba(t,e,i,n,r){var o,a,s,l,c=r.patternDependencies;for(o of e){let e=o.paint.get(t+"-pattern").value;"constant"!==e.kind&&(a=e.evaluate({zoom:n-1},i,{},r.availableImages),s=e.evaluate({zoom:n},i,{},r.availableImages),l=e.evaluate({zoom:n+1},i,{},r.availableImages),a=a&&a.name?a.name:a,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,c[a]=!0,c[s]=!0,c[l]=!0,i.patterns[o.id]={min:a,mid:s,max:l})}return i}Yo.exports=Ko,(Yo.exports.default=Ko).deviation=function(e,t,i,n){var r=t&&t.length,o=Math.abs(pa(e,0,r?t[0]*i:e.length,i));if(r)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(pa(e,t[a]*i,a<s-1?t[a+1]*i:e.length,i));for(var l=0,a=0;a<n.length;a+=3){var c=n[a]*i,u=n[a+1]*i,d=n[a+2]*i;l+=Math.abs((e[c]-e[d])*(e[1+u]-e[1+c])-(e[c]-e[u])*(e[1+d]-e[1+c]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Ko.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var a=0;a<t;a++)i.vertices.push(e[r][o][a]);0<r&&i.holes.push(n+=e[r-1].length)}return i};class xa{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Lr,this.indexArray=new $r,this.indexArray2=new qr,this.programConfigurations=new ho(e.layers,e.zoom),this.segments=new T,this.segments2=new T,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(r,o,a){this.hasPattern=ya("fill",this.layers,o);let i=this.layers[0].layout.get("fill-sort-key"),n=!i.isConstant(),s=[];for(var{feature:l,id:c,index:u,sourceLayerIndex:d}of r){let e=this.layers[0]._featureFilter.needGeometry,t=vo(l,e);var h;this.layers[0]._featureFilter.filter(new w(this.zoom),t,a)&&(h=n?i.evaluate(t,{},a,o.availableImages):void 0,c={id:c,properties:l.properties,type:l.type,sourceLayerIndex:d,index:u,geometry:e?t.geometry:go(l),patterns:{},sortKey:h},s.push(c))}n&&s.sort((e,t)=>e.sortKey-t.sortKey);for(let n of s){let{geometry:e,index:t,sourceLayerIndex:i}=n;if(this.hasPattern){let e=ba("fill",this.layers,n,this.zoom,o);this.patternFeatures.push(e)}else this.addFeature(n,e,t,a,{});o.featureIndex.insert(r[t].feature,e,t,i,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}addFeatures(e,t,i){for(let e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Xo),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,i,n,r){for(let o of va(t,500)){let t=0;for(let e of o)t+=e.length;let e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),i=e.vertexLength,n=[],r=[];for(let i of o)if(0!==i.length){i!==o[0]&&r.push(n.length/2);let e=this.segments2.prepareSegment(i.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(i[0].x,i[0].y),this.indexArray2.emplaceBack(t+i.length-1,t),n.push(i[0].x),n.push(i[0].y);for(let e=1;e<i.length;e++)this.layoutVertexArray.emplaceBack(i[e].x,i[e].y),this.indexArray2.emplaceBack(t+e-1,t+e),n.push(i[e].x),n.push(i[e].y);e.vertexLength+=i.length,e.primitiveLength+=i.length}var a=Yo.exports(n,r);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(i+a[e],i+a[e+1],i+a[e+2]);e.vertexLength+=t,e.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,r,n)}}t("FillBucket",xa,{omit:["layers","patternFeatures"]});var ai=new r({"fill-sort-key":new n(o.layout_fill["fill-sort-key"])}),wa={paint:new r({"fill-antialias":new i(o.paint_fill["fill-antialias"]),"fill-opacity":new n(o.paint_fill["fill-opacity"]),"fill-color":new n(o.paint_fill["fill-color"]),"fill-outline-color":new n(o.paint_fill["fill-outline-color"]),"fill-translate":new i(o.paint_fill["fill-translate"]),"fill-translate-anchor":new i(o.paint_fill["fill-translate-anchor"]),"fill-pattern":new Hn(o.paint_fill["fill-pattern"])}),layout:ai};let Ca=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ta=C([{name:"a_centroid",components:2,type:"Int16"}],4),Sa=Ca["members"];var ka={},Ea=M,li=Aa;function Aa(e,t,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=r,e.readFields(Pa,this,t)}function Pa(e,t,i){if(1==e)t.id=i.readVarint();else if(2!=e)3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos);else for(var n=i,r=t,o=n.readVarint()+n.pos;n.pos<o;){var a=r._keys[n.readVarint()],s=r._values[n.readVarint()];r.properties[a]=s}}Aa.types=["Unknown","Point","LineString","Polygon"],Aa.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i,n=e.readVarint()+e.pos,r=1,o=0,a=0,s=0,l=[];e.pos<n;)if(o<=0&&(r=7&(i=e.readVarint()),o=i>>3),o--,1===r||2===r)a+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&l.push(t),t=[]),t.push(new Ea(a,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}return t&&l.push(t),l},Aa.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,n=1,r=0,o=0,a=0,s=1/0,l=-1/0,c=1/0,u=-1/0;e.pos<i;)if(r<=0&&(n=7&(t=e.readVarint()),r=t>>3),r--,1===n||2===n)(o+=e.readSVarint())<s&&(s=o),l<o&&(l=o),(a+=e.readSVarint())<c&&(c=a),u<a&&(u=a);else if(7!==n)throw new Error("unknown command "+n);return[s,c,l,u]},Aa.prototype.toGeoJSON=function(e,t,i){var n,r=this.extent*Math.pow(2,i),o=this.extent*e,a=this.extent*t,s=this.loadGeometry(),i=Aa.types[this.type];function l(e){for(var t=0;t<e.length;t++){var i=e[t];e[t]=[360*(i.x+o)/r-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+a)/r)*Math.PI/180))-90]}}switch(this.type){case 1:for(var c=[],u=0;u<s.length;u++)c[u]=s[u][0];l(s=c);break;case 2:for(u=0;u<s.length;u++)l(s[u]);break;case 3:for(s=function(e){var t=e.length;if(t<=1)return[e];for(var i,n,r=[],o=0;o<t;o++){var a=function(e){for(var t,i,n=0,r=0,o=e.length,a=o-1;r<o;a=r++)n+=((i=e[a]).x-(t=e[r]).x)*(t.y+i.y);return n}(e[o]);0!==a&&((n=void 0===n?a<0:n)===a<0?(i&&r.push(i),i=[e[o]]):i.push(e[o]))}return i&&r.push(i),r}(s),u=0;u<s.length;u++)for(n=0;n<s[u].length;n++)l(s[u][n])}1===s.length?s=s[0]:i="Multi"+i;e={type:"Feature",geometry:{type:i,coordinates:s},properties:this.properties};return"id"in this&&(e.id=this.id),e};var Ma=li,e=Ia;function Ia(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Da,this,t),this.length=this._features.length}function Da(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(function(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;)var n=e.readVarint()>>3,t=1==n?e.readString():2==n?e.readFloat():3==n?e.readDouble():4==n?e.readVarint64():5==n?e.readVarint():6==n?e.readSVarint():7==n?e.readBoolean():null;return t}(i))}Ia.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];e=this._pbf.readVarint()+this._pbf.pos;return new Ma(this._pbf,e,this.extent,this._keys,this._values)};var La=e;function za(e,t,i){3===e&&(e=new La(i,i.readVarint()+i.pos)).length&&(t[e.name]=e)}ka.VectorTile=function(e,t){this.layers=e.readFields(za,{},t)},ka.VectorTileFeature=li,ka.VectorTileLayer=e;let Ra=ka.VectorTileFeature.types,Oa=Math.pow(2,13);function Ba(e,t,i,n,r,o,a,s){e.emplaceBack(t,i,2*Math.floor(n*Oa)+a,r*Oa*2,o*Oa*2,Math.round(s))}class Fa{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new zr,this.centroidVertexArray=new Ir,this.indexArray=new $r,this.programConfigurations=new ho(e.layers,e.zoom),this.segments=new T,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,i,n){this.features=[],this.hasPattern=ya("fill-extrusion",this.layers,i);for(var{feature:r,id:o,index:a,sourceLayerIndex:s}of e){let e=this.layers[0]._featureFilter.needGeometry,t=vo(r,e);this.layers[0]._featureFilter.filter(new w(this.zoom),t,n)&&(o={id:o,sourceLayerIndex:s,index:a,geometry:e?t.geometry:go(r),properties:r.properties,type:r.type,patterns:{}},this.hasPattern?this.features.push(ba("fill-extrusion",this.layers,o,this.zoom,i)):this.addFeature(o,o.geometry,a,n,{}),i.featureIndex.insert(r,o.geometry,a,s,this.index,!0))}}addFeatures(e,t,i){for(let e of this.features){var n=e["geometry"];this.addFeature(e,n,e.index,t,i)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Sa),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Ta.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,i,n,r){var a,s,l={x:0,y:0,vertexCount:0};for(let o of va(t,500)){let i=0;for(let e of o)i+=e.length;let r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let t of o)if(0!==t.length&&!((s=t).every(e=>e.x<0)||s.every(e=>e.x>ce)||s.every(e=>e.y<0)||s.every(e=>e.y>ce))){let n=0;for(let e=0;e<t.length;e++){let i=t[e];if(1<=e){var c=t[e-1];if(a=i,u=c,!(a.x===u.x&&(a.x<0||a.x>ce)||a.y===u.y&&(a.y<0||a.y>ce))){r.vertexLength+4>T.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let e=i.sub(c)._perp()._unit(),t=c.dist(i);32768<n+t&&(n=0),Ba(this.layoutVertexArray,i.x,i.y,e.x,e.y,0,0,n),Ba(this.layoutVertexArray,i.x,i.y,e.x,e.y,0,1,n),l.x+=2*i.x,l.y+=2*i.y,l.vertexCount+=2,n+=t,Ba(this.layoutVertexArray,c.x,c.y,e.x,e.y,0,0,n),Ba(this.layoutVertexArray,c.x,c.y,e.x,e.y,0,1,n),l.x+=2*c.x,l.y+=2*c.y,l.vertexCount+=2;var u=r.vertexLength;this.indexArray.emplaceBack(u,u+2,u+1),this.indexArray.emplaceBack(u+1,u+2,u+3),r.vertexLength+=4,r.primitiveLength+=2}}}}if(r.vertexLength+i>T.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(i,this.layoutVertexArray,this.indexArray)),"Polygon"===Ra[e.type]){let n=[],e=[],t=r.vertexLength;for(let i of o)if(0!==i.length){i!==o[0]&&e.push(n.length/2);for(let t=0;t<i.length;t++){let e=i[t];Ba(this.layoutVertexArray,e.x,e.y,0,0,1,1,0),l.x+=e.x,l.y+=e.y,l.vertexCount+=1,n.push(e.x),n.push(e.y)}}var d=Yo.exports(n,e);for(let e=0;e<d.length;e+=3)this.indexArray.emplaceBack(t+d[e],t+d[e+2],t+d[e+1]);r.primitiveLength+=d.length/3,r.vertexLength+=i}}for(let e=0;e<l.vertexCount;e++)this.centroidVertexArray.emplaceBack(Math.floor(l.x/l.vertexCount),Math.floor(l.y/l.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,r,n)}}t("FillExtrusionBucket",Fa,{omit:["layers","features"]});var Na={paint:new r({"fill-extrusion-opacity":new i(o["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new n(o["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new i(o["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new i(o["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Hn(o["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new n(o["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new n(o["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new i(o["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function ja(e,t){return e.x*t.x+e.y*t.y}function Va(i,n){if(1===i.length){let e=0;var r=n[e++];let t;for(;!t||r.equals(t);)if(!(t=n[e++]))return 1/0;for(;e<n.length;e++){var o=n[e],a=i[0],s=t.sub(r),l=o.sub(r),a=a.sub(r),c=ja(s,s),u=ja(s,l),d=ja(l,l),s=ja(a,s),a=ja(a,l),l=c*d-u*u,d=(d*s-u*a)/l,c=(c*a-u*s)/l,a=r.z*(1-d-c)+t.z*d+o.z*c;if(isFinite(a))return a}return 1/0}{let e=1/0;for(var t of n)e=Math.min(e,t.z);return e}}let Ua=C([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),$a=Ua["members"],qa=C([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),Ha=qa["members"],Za=ka.VectorTileFeature.types,Ga=Math.cos(Math.PI/180*37.5),Wa=Math.pow(2,14)/.5;class Xa{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new Rr,this.layoutVertexArray2=new Or,this.indexArray=new $r,this.programConfigurations=new ho(e.layers,e.zoom),this.segments=new T,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(a,r,s){this.hasPattern=ya("line",this.layers,r);let l=this.layers[0].layout.get("line-sort-key"),c=!l.isConstant(),u=[];for(let{feature:i,id:n,index:r,sourceLayerIndex:o}of a){let e=this.layers[0]._featureFilter.needGeometry,t=vo(i,e);var d;this.layers[0]._featureFilter.filter(new w(this.zoom),t,s)&&(d=c?l.evaluate(t,{},s):void 0,d={id:n,properties:i.properties,type:i.type,sourceLayerIndex:o,index:r,geometry:e?t.geometry:go(i),patterns:{},sortKey:d},u.push(d))}c&&u.sort((e,t)=>e.sortKey-t.sortKey);for(let n of u){let{geometry:e,index:t,sourceLayerIndex:i}=n;if(this.hasPattern){let e=ba("line",this.layers,n,this.zoom,r);this.patternFeatures.push(e)}else this.addFeature(n,e,t,s,{});r.featureIndex.insert(a[t].feature,e,t,i,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}addFeatures(e,t,i){for(let e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Ha)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$a),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(t,i,e,n,r){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(let e of i)this.addLine(e,t,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,e,r,n)}addLine(i,e,c,u,d,h){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<i.length-1;e++)this.totalDistance+=i[e].dist(i[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}var p="Polygon"===Za[e.type];let f=i.length;for(;2<=f&&i[f-1].equals(i[f-2]);)f--;let m=0;for(;m<f-1&&i[m].equals(i[m+1]);)m++;if(!(f<(p?3:2))){"bevel"===c&&(d=1.05);var g=this.overscaling<=16?122880/(512*this.overscaling):0,v=this.segments.prepareSegment(10*f,this.layoutVertexArray,this.indexArray);let r,o,a,s,l;this.e1=this.e2=-1,p&&(r=i[f-2],l=i[m].sub(r)._unit()._perp());for(let e=m;e<f;e++)if(!(a=e===f-1?p?i[m+1]:void 0:i[e+1])||!i[e].equals(a)){l&&(s=l),r&&(o=r),r=i[e],l=a?a.sub(r)._unit()._perp():s;let t=(s=s||l).add(l);0===t.x&&0===t.y||t._unit();var _=s.x*l.x+s.y*l.y,y=t.x*l.x+t.y*l.y,b=0!=y?1/y:1/0,x=2*Math.sqrt(2-2*y),y=y<Ga&&o&&a,w=0<s.x*l.y-s.y*l.x;if(y&&e>m){let t=r.dist(o);if(t>2*g){let e=r.sub(r.sub(o)._mult(g/t)._round());this.updateDistance(o,e),this.addCurrentVertex(e,s,0,0,v),o=e}}var C=o&&a;let n=C?c:p?"butt":u;if(C&&"round"===n&&(b<h?n="miter":b<=2&&(n="fakeround")),"bevel"===(n="miter"===n&&d<b?"bevel":n)&&(2<b&&(n="flipbevel"),b<d)&&(n="miter"),o&&this.updateDistance(o,r),"miter"===n)t._mult(b),this.addCurrentVertex(r,t,0,0,v);else if("flipbevel"===n){if(100<b)t=l.mult(-1);else{let e=b*s.add(l).mag()/s.sub(l).mag();t._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(r,t,0,0,v),this.addCurrentVertex(r,t.mult(-1),0,0,v)}else if("bevel"===n||"fakeround"===n){let e=-Math.sqrt(b*b-1),t=w?e:0,i=w?0:e;if(o&&this.addCurrentVertex(r,s,t,i,v),"fakeround"===n){let n=Math.round(180*x/Math.PI/20);for(let i=1;i<n;i++){let t=i/n;if(.5!==t){let e=t-.5;t+=t*e*(t-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*e*e+(.848013+_*(.215638*_-1.06021)))}let e=l.sub(s)._mult(t)._add(s)._unit()._mult(w?-1:1);this.addHalfVertex(r,e.x,e.y,!1,w,0,v)}}a&&this.addCurrentVertex(r,l,-t,-i,v)}else if("butt"===n)this.addCurrentVertex(r,t,0,0,v);else if("square"===n){let e=o?1:-1;this.addCurrentVertex(r,t,e,e,v)}else"round"===n&&(o&&(this.addCurrentVertex(r,s,0,0,v),this.addCurrentVertex(r,s,1,1,v,!0)),a)&&(this.addCurrentVertex(r,l,-1,-1,v,!0),this.addCurrentVertex(r,l,0,0,v));if(y&&e<f-1){let t=r.dist(a);if(t>2*g){let e=r.add(a.sub(r)._mult(g/t)._round());this.updateDistance(r,e),this.addCurrentVertex(e,l,0,0,v),r=e}}}}}addCurrentVertex(e,t,i,n,r,o=!1){var a=t.y*n-t.x,s=-t.y-t.x*n;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,o,!1,i,r),this.addHalfVertex(e,a,s,o,!0,-n,r),this.distance>Wa/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,i,n,r,o))}addHalfVertex({x:e,y:t},i,n,r,o,a,s){var l=.5*(this.lineClips?this.scaledDistance*(Wa-1):this.scaledDistance),e=(this.layoutVertexArray.emplaceBack((e<<1)+(r?1:0),(t<<1)+(o?1:0),Math.round(63*i)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length),s.vertexLength++);0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,e),s.primitiveLength++),o?this.e2=e:this.e1=e}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}t("LineBucket",Xa,{omit:["layers","patternFeatures"]});var si=new r({"line-cap":new i(o.layout_line["line-cap"]),"line-join":new n(o.layout_line["line-join"]),"line-miter-limit":new i(o.layout_line["line-miter-limit"]),"line-round-limit":new i(o.layout_line["line-round-limit"]),"line-sort-key":new n(o.layout_line["line-sort-key"])}),Ya={paint:new r({"line-opacity":new n(o.paint_line["line-opacity"]),"line-color":new n(o.paint_line["line-color"]),"line-translate":new i(o.paint_line["line-translate"]),"line-translate-anchor":new i(o.paint_line["line-translate-anchor"]),"line-width":new n(o.paint_line["line-width"]),"line-gap-width":new n(o.paint_line["line-gap-width"]),"line-offset":new n(o.paint_line["line-offset"]),"line-blur":new n(o.paint_line["line-blur"]),"line-dasharray":new Zn(o.paint_line["line-dasharray"]),"line-pattern":new Hn(o.paint_line["line-pattern"]),"line-gradient":new Gn(o.paint_line["line-gradient"])}),layout:si};let Ka=new class extends n{possiblyEvaluate(e,t){return t=new w(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,i,n){return t=B({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,i,n)}}(Ya.paint.properties["line-width"].specification);function Ja(e,t){return 0<t?t+2*e:e}Ka.useIntegerZoom=!0;let Qa=C([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),es=C([{name:"a_projected_pos",components:3,type:"Float32"}],4),ts=(C([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),C([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),is=(C([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),C([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ns=C([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);C([{name:"triangle",components:3,type:"Uint16"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),C([{type:"Float32",name:"offsetX"}]),C([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);let rs={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function os(e,t,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=i?r-1:0,h=i?-1:1,r=e[t+d];for(d+=h,o=r&(1<<-u)-1,r>>=-u,u+=s;0<u;o=256*o+e[t+d],d+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;0<u;a=256*a+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(r?-1:1);a+=Math.pow(2,n),o-=c}return(r?-1:1)*a*Math.pow(2,o-n)}function as(e,t,i,n,r,o){var a,s,l=8*o-r-1,c=(1<<l)-1,u=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(t+=1<=a+u?d/n:d*Math.pow(2,1-u))*n&&(a++,n/=2),c<=a+u?(s=0,a=c):1<=a+u?(s=(t*n-1)*Math.pow(2,r),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,r),a=0));8<=r;e[i+h]=255&s,h+=p,s/=256,r-=8);for(a=a<<r|s,l+=r;0<l;e[i+h]=255&a,h+=p,a/=256,l-=8);e[i+h-p]|=128*o}var ue=24,ss=E;function E(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}E.Varint=0,E.Fixed64=1,E.Bytes=2,E.Fixed32=5;var ls=4294967296,cs=1/ls,us="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ds(e){return e.type===E.Bytes?e.readVarint()+e.pos:e.pos+1}function hs(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function ps(e,t,i){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;e<=r;r--)i.buf[r+n]=i.buf[r]}function fs(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function ms(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function gs(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function vs(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function _s(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function ys(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function bs(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function xs(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function ws(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Cs(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Ts(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Ss(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function ks(e,t,i){1===e&&i.readMessage(Es,t)}function Es(e,s,l){if(3===e){let{id:e,bitmap:t,width:i,height:n,left:r,top:o,advance:a}=l.readMessage(As,{});s.push({id:e,bitmap:new qo({width:i+6,height:n+6},t),metrics:{width:i,height:n,left:r,top:o,advance:a}})}}function As(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}function Ps(t){let i=0,n=0;for(let e of t)i+=e.w*e.h,n=Math.max(n,e.w);t.sort((e,t)=>t.h-e.h);let r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),n),h:1/0}],o=0,a=0;for(let i of t)for(let t=r.length-1;0<=t;t--){let e=r[t];if(!(i.w>e.w||i.h>e.h)){if(i.x=e.x,i.y=e.y,a=Math.max(a,i.y+i.h),o=Math.max(o,i.x+i.w),i.w===e.w&&i.h===e.h){let e=r.pop();t<r.length&&(r[t]=e)}else i.h===e.h?(e.x+=i.w,e.w-=i.w):(i.w!==e.w&&r.push({x:e.x+i.w,y:e.y,w:e.w-i.w,h:i.h}),e.y+=i.h,e.h-=i.h);break}}return{w:o,h:a,fill:i/(o*a)||0}}E.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,e(r,t,this),this.pos===o&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Cs(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Ss(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Cs(this.buf,this.pos)+Cs(this.buf,this.pos+4)*ls;return this.pos+=8,e},readSFixed64:function(){var e=Cs(this.buf,this.pos)+Ss(this.buf,this.pos+4)*ls;return this.pos+=8,e},readFloat:function(){var e=os(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=os(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i=127&(r=t[this.pos++]);if(r<128||(i|=(127&(r=t[this.pos++]))<<7,r<128)||(i|=(127&(r=t[this.pos++]))<<14,r<128)||(i|=(127&(r=t[this.pos++]))<<21,r<128))return i;var n,r=i|=(15&t[this.pos])<<28,t=e,i=this,e=i.buf,o=(112&(n=e[i.pos++]))>>4;if(n<128)return hs(r,o,t);if(o|=(127&(n=e[i.pos++]))<<3,n<128)return hs(r,o,t);if(o|=(127&(n=e[i.pos++]))<<10,n<128)return hs(r,o,t);if(o|=(127&(n=e[i.pos++]))<<17,n<128)return hs(r,o,t);if(o|=(127&(n=e[i.pos++]))<<24,n<128)return hs(r,o,t);if(o|=(1&(n=e[i.pos++]))<<31,n<128)return hs(r,o,t);throw new Error("Expected varint not more than 10 bytes")},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e,t=this.readVarint()+this.pos,i=this.pos;if(12<=(this.pos=t)-i&&us)return e=this.buf,us.decode(e.subarray(i,t));for(var n=this.buf,r=t,o="",a=i;a<r;){var s,l,c,u=n[a],d=null,h=239<u?4:223<u?3:191<u?2:1;if(r<a+h)break;1===h?u<128&&(d=u):2===h?128==(192&(s=n[a+1]))&&(d=(31&u)<<6|63&s)<=127&&(d=null):3===h?(l=n[a+2],128==(192&(s=n[a+1]))&&128==(192&l)&&((d=(15&u)<<12|(63&s)<<6|63&l)<=2047||55296<=d&&d<=57343)&&(d=null)):4===h&&(l=n[a+2],c=n[a+3],128==(192&(s=n[a+1])))&&128==(192&l)&&128==(192&c)&&((d=(15&u)<<18|(63&s)<<12|(63&l)<<6|63&c)<=65535||1114112<=d)&&(d=null),null===d?(d=65533,h=1):65535<d&&(d-=65536,o+=String.fromCharCode(d>>>10&1023|55296),d=56320|1023&d),o+=String.fromCharCode(d),a+=h}return o},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==E.Bytes)return e.push(this.readVarint(t));var i=ds(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==E.Bytes)return e.push(this.readSVarint());var t=ds(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==E.Bytes)return e.push(this.readBoolean());var t=ds(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==E.Bytes)return e.push(this.readFloat());var t=ds(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==E.Bytes)return e.push(this.readDouble());var t=ds(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==E.Bytes)return e.push(this.readFixed32());var t=ds(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==E.Bytes)return e.push(this.readSFixed32());var t=ds(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==E.Bytes)return e.push(this.readFixed64());var t=ds(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==E.Bytes)return e.push(this.readSFixed64());var t=ds(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){e&=7;if(e===E.Varint)for(;127<this.buf[this.pos++];);else if(e===E.Bytes)this.pos=this.readVarint()+this.pos;else if(e===E.Fixed32)this.pos+=4;else{if(e!==E.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t,i=this.length||16;i<this.pos+e;)i*=2;i!==this.length&&((t=new Uint8Array(i)).set(this.buf),this.buf=t,this.length=i)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Ts(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Ts(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Ts(this.buf,-1&e,this.pos),Ts(this.buf,Math.floor(e*cs),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Ts(this.buf,-1&e,this.pos),Ts(this.buf,Math.floor(e*cs),this.pos+4),this.pos+=8},writeVarint:function(e){if(268435455<(e=+e||0)||e<0){var t,i,n,r,o=this;if(0<=e?(n=e%4294967296|0,t=e/4294967296|0):(t=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:t=t+1|(n=0)),0x10000000000000000<=e||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),n=n,(r=o).buf[r.pos++]=127&n|128,n>>>=7,r.buf[r.pos++]=127&n|128,n>>>=7,r.buf[r.pos++]=127&n|128,n>>>=7,r.buf[r.pos++]=127&n|128,r.buf[r.pos]=127&(n>>>=7),i=(7&(r=t))<<4,(o=o).buf[o.pos++]|=i|((r>>>=3)?128:0),r&&(o.buf[o.pos++]=127&r|((r>>>=7)?128:0),r)&&(o.buf[o.pos++]=127&r|((r>>>=7)?128:0),r)&&(o.buf[o.pos++]=127&r|((r>>>=7)?128:0),r)&&(o.buf[o.pos++]=127&r|((r>>>=7)?128:0),r)&&(o.buf[o.pos++]=127&r)}else this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127)||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127)||(this.buf[this.pos++]=e>>>7&127)},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos,e=(this.pos=function(e,t,i){for(var n,r,o=0;o<t.length;o++){if(55295<(n=t.charCodeAt(o))&&n<57344){if(!r){56319<n||o+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):r=n;continue}if(n<56320){e[i++]=239,e[i++]=191,e[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(e[i++]=239,e[i++]=191,e[i++]=189,r=null);n<128?e[i++]=n:(n<2048?e[i++]=n>>6|192:(n<65536?e[i++]=n>>12|224:(e[i++]=n>>18|240,e[i++]=n>>12&63|128),e[i++]=n>>6&63|128),e[i++]=63&n|128)}return i}(this.buf,e,this.pos),this.pos-t);128<=e&&ps(t,e,this),this.pos=t-1,this.writeVarint(e),this.pos+=e},writeFloat:function(e){this.realloc(4),as(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),as(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos,e=(e(t,this),this.pos-i);128<=e&&ps(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeMessage:function(e,t,i){this.writeTag(e,E.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,fs,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ms,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,_s,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,gs,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,vs,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,ys,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,bs,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,xs,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,ws,t)},writeBytesField:function(e,t){this.writeTag(e,E.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,E.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,E.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,E.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,E.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,E.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,E.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,E.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,E.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,E.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class Ms{constructor(e,{pixelRatio:t,version:i,stretchX:n,stretchY:r,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=n,this.stretchY=r,this.content=o,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Is{constructor(n,s){let r={},l={},e=(this.haveRenderCallbacks=[],[]),{w:t,h:i}=(this.addImages(n,r,e),this.addImages(s,l,e),Ps(e)),c=new Ho({width:t||1,height:i||1});for(let i in n){let e=n[i],t=r[i].paddedRect;Ho.copy(e.data,c,{x:0,y:0},{x:t.x+1,y:t.y+1},e.data)}for(let a in s){let e=s[a],t=l[a].paddedRect,i=t.x+1,n=t.y+1,r=e.data.width,o=e.data.height;Ho.copy(e.data,c,{x:0,y:0},{x:i,y:n},e.data),Ho.copy(e.data,c,{x:0,y:o-1},{x:i,y:n-1},{width:r,height:1}),Ho.copy(e.data,c,{x:0,y:0},{x:i,y:n+o},{width:r,height:1}),Ho.copy(e.data,c,{x:r-1,y:0},{x:i-1,y:n},{width:1,height:o}),Ho.copy(e.data,c,{x:0,y:0},{x:i+r,y:n},{width:1,height:o})}this.image=c,this.iconPositions=r,this.patternPositions=l}addImages(e,t,i){for(var n in e){var r=e[n],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};i.push(o),t[n]=new Ms(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)}patchUpdatedImage(e,t,i){var n;e&&t&&e.version!==t.version&&(e.version=t.version,[e,n]=e.tl,i.update(t.data,void 0,{x:e,y:n}))}}t("ImagePosition",Ms),t("ImageAtlas",Is),se.WritingMode=void 0,(ai=se.WritingMode||(se.WritingMode={}))[ai.none=0]="none",ai[ai.horizontal=1]="horizontal",ai[ai.vertical=2]="vertical",ai[ai.horizontalOnly=3]="horizontalOnly";let Ds=-17;class Ls{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){var i=new Ls;return i.scale=e||1,i.fontStack=t,i}static forImage(e){var t=new Ls;return t.imageName=e,t}}class zs{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,i){var n=new zs;for(let e=0;e<t.sections.length;e++){var r=t.sections[e];r.image?n.addImageSection(r):n.addTextSection(r,i)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(t){let i="";for(let e=0;e<t.length;e++){var n=t.charCodeAt(e+1)||null,r=t.charCodeAt(e-1)||null;i+=n&&Tn(n)&&!rs[t[e+1]]||r&&Tn(r)&&!rs[t[e-1]]||!rs[t[e]]?t[e]:rs[t[e]]}return i}(this.text)}trim(){let t=0;for(let e=0;e<this.text.length&&Os[this.text.charCodeAt(e)];e++)t++;let i=this.text.length;for(let e=this.text.length-1;0<=e&&e>=t&&Os[this.text.charCodeAt(e)];e--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)}substring(e,t){var i=new zs;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,t)=>Math.max(e,this.sections[t].scale),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Ls.forText(t.scale,t.fontStack||e));var i=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(i)}addImageSection(e){var t,e=e.image?e.image.name:"";0===e.length?le("Can't add FormattedSection with an empty image."):(t=this.getNextImageSectionCharCode())?(this.text+=String.fromCharCode(t),this.sections.push(Ls.forImage(e)),this.sectionIndex.push(this.sections.length-1)):le("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Rs(s,l,c,u,d,h,p,g,v,_,e,y,b,x,w,C){var n=zs.fromFeature(s,d);let T;y===se.WritingMode.vertical&&n.verticalizePunctuation();var{processBidirectionalText:s,processStyledBidirectionalText:d}=On;if(s&&1===n.sections.length){T=[];let e=s(n.toString(),Vs(n,_,h,l,u,x,w));for(let i of e){let t=new zs;t.text=i,t.sections=n.sections;for(let e=0;e<i.length;e++)t.sectionIndex.push(0);T.push(t)}}else if(d){T=[];let e=d(n.text,n.sectionIndex,Vs(n,_,h,l,u,x,w));for(let t of e){let e=new zs;e.text=t[0],e.sectionIndex=t[1],e.sections=n.sections,T.push(e)}}else T=function(t,i){let n=[],e=t.text,r=0;for(let e of i)n.push(t.substring(r,e)),r=e;return r<e.length&&n.push(t.substring(r,e.length)),n}(n,Vs(n,_,h,l,u,x,w));var S,t=[],s={positionedLines:t,text:n.toString(),top:e[1],bottom:e[1],left:e[0],right:e[0],writingMode:y,iconsInText:!1,verticalizable:!1};{var k=s,E=l,A=c,U=u,P=T,M=p,I=g,D=v,$=y,L=_,z=b,q=C;let f=0,m=Ds,t=0,i=0,n="right"===D?1:"left"===D?0:.5,r=0;for(let p of P){p.trim();let c=p.getMaxScale(),u=(c-1)*ue,e={positionedGlyphs:[],lineOffset:0},d=(k.positionedLines[r]=e).positionedGlyphs,h=0;if(p.length()){for(let t=0;t<p.length();t++){let n=p.getSection(t),e=p.getSectionIndex(t),i=p.getCharCode(t),r=0,o=null,a=null,s=null,l=ue;S=!($===se.WritingMode.horizontal||!z&&!Cn(i)||z&&(Os[i]||(S=i,X.Arabic(S))||X["Arabic Supplement"](S)||X["Arabic Extended-A"](S)||X["Arabic Presentation Forms-A"](S)||X["Arabic Presentation Forms-B"](S)));if(n.imageName){let e=U[n.imageName];if(!e)continue;s=n.imageName,k.iconsInText=k.iconsInText||!0,a=e.paddedRect;let t=e.displaySize,i=(n.scale=n.scale*ue/q,o={width:t[0],height:t[1],left:1,top:-3,advance:S?t[1]:t[0]},r=u+(ue-t[1]*n.scale),l=o.advance,S?t[0]*n.scale-ue*c:t[1]*n.scale-ue*c);0<i&&i>h&&(h=i)}else{let e=A[n.fontStack],t=e&&e[i];if(t&&t.rect)a=t.rect,o=t.metrics;else{let e=E[n.fontStack],t=e&&e[i];if(!t)continue;o=t.metrics}r=(c-n.scale)*ue}S?(k.verticalizable=!0,d.push({glyph:i,imageName:s,x:f,y:m+r,vertical:S,scale:n.scale,fontStack:n.fontStack,sectionIndex:e,metrics:o,rect:a}),f+=l*n.scale+L):(d.push({glyph:i,imageName:s,x:f,y:m+r,vertical:S,scale:n.scale,fontStack:n.fontStack,sectionIndex:e,metrics:o,rect:a}),f+=o.advance*n.scale+L)}if(0!==d.length){t=Math.max(f-L,t);{R=void 0;O=void 0;B=void 0;F=void 0;N=void 0;j=void 0;V=void 0;var R=d;var O=0;var B=d.length-1;var F=n;var N=h;if(F||N){var j=R[B],V=(R[B].x+j.metrics.advance*j.scale)*F;for(let e=O;e<=B;e++)R[e].x-=V,R[e].y+=N}}}f=0;j=M*c+h;e.lineOffset=Math.max(h,u),m+=j,i=Math.max(j,i)}else m+=M;++r}let e=m-Ds,{horizontalAlign:o,verticalAlign:a}=Us(I);var H=k.positionedLines,Z=n,D=o,I=a,d=t,h=i,x=M,w=e,P=P.length,G=(Z-D)*d,W=h!==x?-w*I-Ds:(-I*P+.5)*x;for(let t of H)for(let e of t.positionedGlyphs)e.x+=G,e.y+=W;k.top+=-a*e,k.bottom=k.top+e,k.left+=-o*t,k.right=k.left+t}return!function(){for(var e of t)if(0!==e.positionedGlyphs.length)return;return 1}()&&s}let Os={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Bs={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Fs(i,n,r,t,o,a){if(n.imageName){let e=t[n.imageName];return e?e.displaySize[0]*n.scale*ue/a+o:0}{let e=r[n.fontStack],t=e&&e[i];return t?t.metrics.advance*n.scale+o:0}}function Ns(e,t,i,n){var r=Math.pow(e-t,2);return n?e<t?r/2:2*r:r+Math.abs(i)*i}function js(e,i,n,r,o,a){let s=null,l=Ns(i,n,o,a);for(let t of r){let e=Ns(i-t.x,n,o,a)+t.badness;e<=l&&(s=t,l=e)}return{index:e,x:i,priorBreak:s,badness:l}}function Vs(r,e,t,o,a,i,s){if("point"!==i)return[];if(!r)return[];var l,c=[],u=function(t,i,e,n,r,o){let a=0;for(let e=0;e<t.length();e++){var s=t.getSection(e);a+=Fs(t.getCharCode(e),s,n,r,i,o)}return a/Math.max(1,Math.ceil(a/e))}(r,e,t,o,a,s),d=0<=r.text.indexOf("");let h=0;for(let n=0;n<r.length();n++){let t=r.getSection(n),i=r.getCharCode(n);if(Os[i]||(h+=Fs(i,t,o,a,e,s)),n<r.length()-1){let e=!((l=i)<11904||!(X["Bopomofo Extended"](l)||X.Bopomofo(l)||X["CJK Compatibility Forms"](l)||X["CJK Compatibility Ideographs"](l)||X["CJK Compatibility"](l)||X["CJK Radicals Supplement"](l)||X["CJK Strokes"](l)||X["CJK Symbols and Punctuation"](l)||X["CJK Unified Ideographs Extension A"](l)||X["CJK Unified Ideographs"](l)||X["Enclosed CJK Letters and Months"](l)||X["Halfwidth and Fullwidth Forms"](l)||X.Hiragana(l)||X["Ideographic Description Characters"](l)||X["Kangxi Radicals"](l)||X["Katakana Phonetic Extensions"](l)||X.Katakana(l)||X["Vertical Forms"](l)||X["Yi Radicals"](l)||X["Yi Syllables"](l)));(Bs[i]||e||t.imageName)&&c.push(js(n+1,h,u,c,function(e,t,i){let n=0;return 10===e&&(n-=1e4),i&&(n+=150),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}(i,r.getCharCode(n+1),e&&d),!1))}}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(js(r.length(),h,u,c,0,!0))}function Us(e){let t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function $s(e,t,i,n,r,o){var a=e.image;let s;if(a.content){let e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}var e=t.left*o,l=t.right*o;let c,u,d,h;u="width"===i||"both"===i?(h=r[0]+e-n[3],r[0]+l+n[1]):(h=r[0]+(e+l-a.displaySize[0])/2)+a.displaySize[0];e=t.top*o,l=t.bottom*o;return d="height"===i||"both"===i?(c=r[1]+e-n[0],r[1]+l+n[2]):(c=r[1]+(e+l-a.displaySize[1])/2)+a.displaySize[1],{image:a,top:c,right:u,bottom:d,left:h,collisionPadding:s}}let qs=128;function Hs(r,e){var o=e["expression"];if("constant"===o.kind)return{kind:"constant",layoutSize:o.evaluate(new w(r+1))};if("source"===o.kind)return{kind:"source"};{let{zoomStops:e,interpolationType:t}=o,i=0;for(;i<e.length&&e[i]<=r;)i++;let n=i=Math.max(0,i-1);for(;n<e.length&&e[n]<r+1;)n++;n=Math.min(e.length-1,n);var a=e[i],s=e[n];return"composite"===o.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:t}:{kind:"camera",minZoom:a,maxZoom:s,minSize:o.evaluate(new w(a)),maxSize:o.evaluate(new w(s)),interpolationType:t}}}class Zs extends M{constructor(e,t,i,n){super(e,t),this.angle=i,void 0!==n&&(this.segment=n)}clone(){return new Zs(this.x,this.y,this.angle,this.segment)}}function Gs(o,t,a,s,l){if(void 0!==t.segment){let e=t,i=t.segment+1,n=0;for(;n>-a/2;){if(--i<0)return;n-=o[i].dist(e),e=o[i]}n+=o[i].dist(o[i+1]),i++;var c=[];let r=0;for(;n<a/2;){let e=o[i],t=o[i+1];if(!t)return;var u=o[i-1].angleTo(e)-e.angleTo(t),u=Math.abs((u+3*Math.PI)%(2*Math.PI)-Math.PI);for(c.push({distance:n,angleDelta:u}),r+=u;n-c[0].distance>s;)r-=c.shift().angleDelta;if(r>l)return;i++,n+=e.dist(t)}}return 1}function Ws(t){let i=0;for(let e=0;e<t.length-1;e++)i+=t[e].dist(t[e+1]);return i}function Xs(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Ys(e,t,i,n,r,o,a,s,l){var c=n?.6*o*a:0,n=Xs(n,r),r=n*a,u=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-r<t/4&&(t=r+t/4),function e(l,t,c,u,d,h,i,n,p){let f=h/2,m=Ws(l);let g=0,v=t-c,_=[];for(let s=0;s<l.length-1;s++){let n=l[s],r=l[s+1],o=n.dist(r),a=r.angleTo(n);for(;v+c<g+o;){let e=((v+=c)-g)/o,t=y(n.x,r.x,e),i=y(n.y,r.y,e);if(0<=t&&t<p&&0<=i&&i<p&&0<=v-f&&v+f<=m){let e=new Zs(t,i,a,s);e._round(),u&&!Gs(l,e,h,u,d)||_.push(e)}}g+=o}return n||_.length||i||(_=e(l,g/2,c,u,d,h,i,!0,p)),_}(e,u?t/2*s%t:(n/2+2*o)*a*s%t,t,c,i,r,u,!1,l)}function Ks(t,r,o,a,s){var l=[];for(let e=0;e<t.length;e++){var c=t[e];let n;for(let i=0;i<c.length-1;i++){let e=c[i],t=c[i+1];e.x<r&&t.x<r||(e.x<r?e=new M(r,e.y+(r-e.x)/(t.x-e.x)*(t.y-e.y))._round():t.x<r&&(t=new M(r,e.y+(r-e.x)/(t.x-e.x)*(t.y-e.y))._round()),e.y<o&&t.y<o)||(e.y<o?e=new M(e.x+(o-e.y)/(t.y-e.y)*(t.x-e.x),o)._round():t.y<o&&(t=new M(e.x+(o-e.y)/(t.y-e.y)*(t.x-e.x),o)._round()),e.x>=a&&t.x>=a)||(e.x>=a?e=new M(a,e.y+(a-e.x)/(t.x-e.x)*(t.y-e.y))._round():t.x>=a&&(t=new M(a,e.y+(a-e.x)/(t.x-e.x)*(t.y-e.y))._round()),e.y>=s&&t.y>=s)||(e.y>=s?e=new M(e.x+(s-e.y)/(t.y-e.y)*(t.x-e.x),s)._round():t.y>=s&&(t=new M(e.x+(s-e.y)/(t.y-e.y)*(t.x-e.x),s)._round()),n&&e.equals(n[n.length-1])||(n=[e],l.push(n)),n.push(t))}}return l}function Js(p,f,m,e){let o=[],g=p.image,v=g.pixelRatio,t=g.paddedRect.w-2,i=g.paddedRect.h-2,_=p.right-p.left,y=p.bottom-p.top,a=g.stretchX||[[0,t]],s=g.stretchY||[[0,i]],n=(e,t)=>e+t[1]-t[0],b=a.reduce(n,0),x=s.reduce(n,0),l=t-b,c=i-x,w=0,C=b,T=0,S=x,k=0,E=l,A=0,P=c;if(g.content&&e){let e=g.content;w=Qs(a,0,e[0]),T=Qs(s,0,e[1]),C=Qs(a,e[0],e[2]),S=Qs(s,e[1],e[3]),k=e[0]-w,A=e[1]-T,E=e[2]-e[0]-C,P=e[3]-e[1]-S}var u=(e,t,i,n)=>{var r=(e.stretch-w)/C*_+p.left,o=e.fixed-k-E*e.stretch/b,a=(t.stretch-T)/S*y+p.top,s=t.fixed-A-P*t.stretch/x,l=(i.stretch-w)/C*_+p.left,c=i.fixed-k-E*i.stretch/b,u=(n.stretch-T)/S*y+p.top,d=n.fixed-A-P*n.stretch/x,h=new M(r,a),a=new M(l,a),l=new M(l,u),r=new M(r,u),u=new M(o/v,s/v),o=new M(c/v,d/v),s=f*Math.PI/180;if(s){let e=Math.sin(s),t=Math.cos(s),i=[t,-e,e,t];h._matMult(i),a._matMult(i),r._matMult(i),l._matMult(i)}c=e.stretch+e.fixed,d=t.stretch+t.fixed;return{tl:h,tr:a,bl:r,br:l,tex:{x:g.paddedRect.x+1+c,y:g.paddedRect.y+1+d,w:i.stretch+i.fixed-c,h:n.stretch+n.fixed-d},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:u,pixelOffsetBR:o,minFontScaleX:E/v/_,minFontScaleY:P/v/y,isSDF:m}};if(e&&(g.stretchX||g.stretchY)){let n=el(a,l,b),r=el(s,c,x);for(let e=0;e<n.length-1;e++){let t=n[e],i=n[e+1];for(let e=0;e<r.length-1;e++)o.push(u(t,r[e],i,r[e+1]))}}else o.push(u({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:1+t},{fixed:0,stretch:1+i}));return o}function Qs(e,t,i){let n=0;for(var r of e)n+=Math.max(t,Math.min(i,r[1]))-Math.max(t,Math.min(i,r[0]));return n}function el(e,t,i){var n=[{fixed:-1,stretch:0}];for(let[t,i]of e){let e=n[n.length-1];n.push({fixed:t-e.stretch,stretch:e.stretch}),n.push({fixed:t-e.stretch,stretch:e.stretch+(i-t)})}return n.push({fixed:t+1,stretch:i}),n}t("Anchor",Zs);class tl{constructor(e,t,i,n,r,c,u,d,h,p){if(this.boxStartIndex=e.length,h){let e=c.top,t=c.bottom,i=c.collisionPadding;i&&(e-=i[1],t+=i[3]);h=t-e;0<h&&(h=Math.max(10,h),this.circleDiameter=h)}else{let o=c.top*u-d[0],a=c.bottom*u+d[2],s=c.left*u-d[3],l=c.right*u+d[1];h=c.collisionPadding;if(h&&(s-=h[0]*u,o-=h[1]*u,l+=h[2]*u,a+=h[3]*u),p){let e=new M(s,o),t=new M(l,o),i=new M(s,a),n=new M(l,a),r=p*Math.PI/180;e._rotate(r),t._rotate(r),i._rotate(r),n._rotate(r),s=Math.min(e.x,t.x,i.x,n.x),l=Math.max(e.x,t.x,i.x,n.x),o=Math.min(e.y,t.y,i.y,n.y),a=Math.max(e.y,t.y,i.y,n.y)}e.emplaceBack(t.x,t.y,s,o,l,a,i,n,r)}this.boxEndIndex=e.length}}class il{constructor(e=[],t=function(e,t){return e<t?-1:t<e?1:0}){if(this.data=e,this.length=this.data.length,this.compare=t,0<this.length)for(let e=(this.length>>1)-1;0<=e;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){var e,t;if(0!==this.length)return e=this.data[0],t=this.data.pop(),this.length--,0<this.length&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){for(var{data:t,compare:i}=this,n=t[e];0<e;){var r=e-1>>1,o=t[r];if(0<=i(n,o))break;t[e]=o,e=r}t[e]=n}_down(i){for(var{data:n,compare:r}=this,e=this.length>>1,o=n[i];i<e;){let e=1+(i<<1),t=n[e];var a=e+1;if(a<this.length&&r(n[a],t)<0&&(e=a,t=n[a]),0<=r(t,o))break;n[i]=t,i=e}n[i]=o}}function nl(e,t){return t.max-e.max}function rl(e,t,i,n){this.p=new M(e,t),this.h=i,this.d=function(n,t){let r=!1,o=1/0;for(let e=0;e<t.length;e++){var a=t[e];for(let e=0,t=a.length,i=t-1;e<t;i=e++){var s=a[e],l=a[i];s.y>n.y!=l.y>n.y&&n.x<(l.x-s.x)*(n.y-s.y)/(l.y-s.y)+s.x&&(r=!r),o=Math.min(o,To(n,s,l))}}return(r?1:-1)*Math.sqrt(o)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}let ol=Number.POSITIVE_INFINITY;function al(i,n){if(n[1]!==ol){var r=i,o=n[0],a=n[1];let e=0,t=0;switch(o=Math.abs(o),a=Math.abs(a),r){case"top-right":case"top-left":case"top":t=a-7;break;case"bottom-right":case"bottom-left":case"bottom":t=7-a}switch(r){case"top-right":case"bottom-right":case"right":e=-o;break;case"top-left":case"bottom-left":case"left":e=o}return[e,t]}{var r=i,s=n[0];let e=0,t=0;var l=(s=s<0?0:s)/Math.sqrt(2);switch(r){case"top-right":case"top-left":t=l-7;break;case"bottom-right":case"bottom-left":t=7-l;break;case"bottom":t=7-s;break;case"top":t=s-7}switch(r){case"top-right":case"bottom-right":e=-l;break;case"top-left":case"bottom-left":e=l;break;case"left":e=s;break;case"right":e=-s}return[e,t]}}function sl(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ll($,q,H,Z,G,W,X,e,Y,K,J){let t=W.textMaxSize.evaluate(q,{}),i=(void 0===t&&(t=X),$.layers[0].layout),Q=i.get("icon-offset").evaluate(q,{},J),n=dl(H.horizontal),r=X/24,ee=$.tilePixelRatio*r,o=$.tilePixelRatio*t/24,te=$.tilePixelRatio*e,a=$.tilePixelRatio*i.get("symbol-spacing"),ie=i.get("text-padding")*$.tilePixelRatio,ne=function(e,t,i,n=1){e=e.get("icon-padding").evaluate(t,{},i),t=e&&e.values;return[t[0]*n,t[1]*n,t[2]*n,t[3]*n]}(i,q,J,$.tilePixelRatio),s=i.get("text-max-angle")/180*Math.PI,re="viewport"!==i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),oe="map"===i.get("icon-rotation-alignment")&&"point"!==i.get("symbol-placement"),l=i.get("symbol-placement"),c=a/2,u=i.get("icon-text-fit"),ae;Z&&"none"!==u&&($.allowVerticalPlacement&&H.vertical&&(ae=$s(Z,H.vertical,u,i.get("icon-text-fit-padding"),Q,r)),n)&&(Z=$s(Z,n,u,i.get("icon-text-fit-padding"),Q,r));var d=(f,m)=>{if(!(m.x<0||m.x>=ce||m.y<0||m.y>=ce)){var g=$,v=m,_=f,y=H,b=Z,x=G,w=ae,C=$.layers[0],T=$.collisionBoxArray,S=q.index,k=q.sourceLayerIndex,E=$.index,A=ee,P=[ie,ie,ie,ie],M=re,I=Y,m=te,f=ne,D=oe,L=Q,z=q,R=W,O=K,B=J,F=X,N=g.addToLineVertexArray(v,_);let n,a,t,i,s=0,l=0,r=0,e=0,c=-1,u=-1;var j={};let o=Xr.exports(""),d=0,h=0;if(void 0===C._unevaluatedLayout.getValue("text-radial-offset")?[d,h]=C.layout.get("text-offset").evaluate(z,{},B).map(e=>e*ue):(d=C.layout.get("text-radial-offset").evaluate(z,{},B)*ue,h=ol),g.allowVerticalPlacement&&y.vertical){let e=C.layout.get("text-rotate").evaluate(z,{},B)+90;t=new tl(T,v,S,k,E,y.vertical,A,P,M,e),w&&(i=new tl(T,v,S,k,E,w,m,f,M,e))}if(b){let e=C.layout.get("icon-rotate").evaluate(z,{}),t="none"!==C.layout.get("icon-text-fit"),i=Js(b,e,O,t),n=w?Js(w,e,O,t):void 0,r=(a=new tl(T,v,S,k,E,b,m,f,!1,e),s=4*i.length,g.iconSizeData),o=null;"source"===r.kind?(o=[qs*C.layout.get("icon-size").evaluate(z,{})])[0]>cl&&le(g.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===r.kind&&((o=[qs*R.compositeIconSizes[0].evaluate(z,{},B),qs*R.compositeIconSizes[1].evaluate(z,{},B)])[0]>cl||o[1]>cl)&&le(g.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),g.addSymbols(g.icon,i,o,L,D,z,se.WritingMode.none,v,N.lineStartIndex,N.lineLength,-1,B),c=g.icon.placedSymbolArray.length-1,n&&(l=4*n.length,g.addSymbols(g.icon,n,o,L,D,z,se.WritingMode.vertical,v,N.lineStartIndex,N.lineLength,-1,B),u=g.icon.placedSymbolArray.length-1)}var V=Object.keys(y.horizontal);for(let i of V){let t=y.horizontal[i];if(!n){o=Xr.exports(t.text);let e=C.layout.get("text-rotate").evaluate(z,{},B);n=new tl(T,v,S,k,E,t,A,P,M,e)}let e=1===t.positionedLines.length;if(r+=ul(g,v,t,x,C,M,z,I,N,y.vertical?se.WritingMode.horizontal:se.WritingMode.horizontalOnly,e?V:[i],j,c,R,B),e)break}y.vertical&&(e+=ul(g,v,y.vertical,x,C,M,z,I,N,se.WritingMode.vertical,["vertical"],j,u,R,B)),_=n?n.boxStartIndex:g.collisionBoxArray.length,w=n?n.boxEndIndex:g.collisionBoxArray.length,O=t?t.boxStartIndex:g.collisionBoxArray.length,b=t?t.boxEndIndex:g.collisionBoxArray.length,m=a?a.boxStartIndex:g.collisionBoxArray.length,f=a?a.boxEndIndex:g.collisionBoxArray.length,L=i?i.boxStartIndex:g.collisionBoxArray.length,D=i?i.boxEndIndex:g.collisionBoxArray.length;let p=-1;var U=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;p=U(n,p),p=U(t,p),p=U(a,p),(U=-1<(p=U(i,p))?1:0)&&(p*=F/ue),g.glyphOffsetArray.length>=yl.MAX_GLYPHS&&le("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==z.sortKey&&g.addToSortKeyRanges(g.symbolInstances.length,z.sortKey),g.symbolInstances.emplaceBack(v.x,v.y,0<=j.right?j.right:-1,0<=j.center?j.center:-1,0<=j.left?j.left:-1,j.vertical||-1,c,u,o,_,w,O,b,m,f,L,D,S,r,e,s,l,U,0,A,d,h,p)}};if("line"===l)for(let i of Ks(q.geometry,0,0,ce,ce)){let e=Ys(i,a,s,H.vertical||n,Z,24,o,$.overscaling,ce);for(let t of e){let e=n;e&&function(e,i,n,r){var o=e.compareText;if(i in o){let t=o[i];for(let e=t.length-1;0<=e;e--)if(r.dist(t[e])<n)return 1}else o[i]=[];return o[i].push(r),0}($,e.text,c,t)||d(i,t)}}else if("line-center"===l){for(let t of q.geometry)if(1<t.length){let e=function(r,o,e,t,i,n){var a=e?.6*i*n:0,s=Xs(e,t)*n;let l=0;var c,u,d=Ws(r)/2;for(let n=0;n<r.length-1;n++){let e=r[n],t=r[n+1],i=e.dist(t);if(l+i>d)return c=(d-l)/i,u=y(e.x,t.x,c),c=y(e.y,t.y,c),(u=new Zs(u,c,t.angleTo(e),n))._round(),!a||Gs(r,u,s,a,o)?u:void 0;l+=i}}(t,s,H.vertical||n,Z,24,o);e&&d(t,e)}}else if("Polygon"===q.type)for(let t of va(q.geometry,0)){let e=function(i,t,n=!1){let r=1/0,o=1/0,a=-1/0,s=-1/0;var l=i[0];for(let t=0;t<l.length;t++){let e=l[t];(!t||e.x<r)&&(r=e.x),(!t||e.y<o)&&(o=e.y),(!t||e.x>a)&&(a=e.x),(!t||e.y>s)&&(s=e.y)}var c=Math.min(a-r,s-o);let u=c/2;var d=new il([],nl);if(0===c)return new M(r,o);for(let t=r;t<a;t+=c)for(let e=o;e<s;e+=c)d.push(new rl(t+u,e+u,u,i));let h=function(e){let n=0,r=0,o=0;var a=e[0];for(let e=0,t=a.length,i=t-1;e<t;i=e++){var s=a[e],l=a[i],c=s.x*l.y-l.x*s.y;r+=(s.x+l.x)*c,o+=(s.y+l.y)*c,n+=3*c}return new rl(r/n,o/n,0,e)}(i),p=d.length;for(;d.length;){let e=d.pop();(e.d>h.d||!h.d)&&(h=e,n)&&console.log("found best %d after %d probes",Math.round(1e4*e.d)/1e4,p),e.max-h.d<=t||(u=e.h/2,d.push(new rl(e.p.x-u,e.p.y-u,u,i)),d.push(new rl(e.p.x+u,e.p.y-u,u,i)),d.push(new rl(e.p.x-u,e.p.y+u,u,i)),d.push(new rl(e.p.x+u,e.p.y+u,u,i)),p+=4)}return n&&(console.log("num probes: "+p),console.log("best distance: "+h.d)),h.p}(t,16);d(t[0],new Zs(e.x,e.y,0))}else if("LineString"===q.type)for(let e of q.geometry)d(e,new Zs(e[0].x,e[0].y,0));else if("Point"===q.type)for(let t of q.geometry)for(let e of t)d([e],new Zs(e.x,e.y,0))}let cl=32640;function ul(t,e,i,n,r,o,a,s,l,c,u,d,h,p,f){i=function(c,u,e,d,t,h,p){var f=e.layout.get("text-rotate").evaluate(t,{})*Math.PI/180,m=[];for(let l of c.positionedLines)for(let s of l.positionedGlyphs)if(s.rect){let e=s.rect||{},t=4,i=!0,n=1,r=0;var g=(d||p)&&s.vertical,v=s.metrics.advance*s.scale/2;if(p&&c.verticalizable){let e=(s.scale-1)*ue,t=(ue-s.metrics.width*s.scale)/2;r=l.lineOffset/2-(s.imageName?-t:e)}if(s.imageName){let e=h[s.imageName];i=e.sdf,n=e.pixelRatio,t=1/n}var _=d?[s.x+v,s.y]:[0,0];let o=d?[0,0]:[s.x+v+u[0],s.y+u[1]-r],a=[0,0];g&&(a=o,o=[0,0]);var y=(s.metrics.left-t)*s.scale-v+o[0],b=(-s.metrics.top-t)*s.scale+o[1],x=y+e.w*s.scale/n,w=b+e.h*s.scale/n,C=new M(y,b),b=new M(x,b),y=new M(y,w),x=new M(x,w);if(g){let e=new M(-v,v-Ds),t=-Math.PI/2,i=12-v,n=new M(22-i,-(s.imageName?i:0)),r=new M(...a);C._rotateAround(t,e)._add(n)._add(r),b._rotateAround(t,e)._add(n)._add(r),y._rotateAround(t,e)._add(n)._add(r),x._rotateAround(t,e)._add(n)._add(r)}if(f){let e=Math.sin(f),t=Math.cos(f),i=[t,-e,e,t];C._matMult(i),b._matMult(i),y._matMult(i),x._matMult(i)}w=new M(0,0),g=new M(0,0);m.push({tl:C,tr:b,bl:y,br:x,tex:e,writingMode:c.writingMode,glyphOffset:_,sectionIndex:s.sectionIndex,isSDF:i,pixelOffsetTL:w,pixelOffsetBR:g,minFontScaleX:0,minFontScaleY:0})}return m}(i,s,r,o,a,n,t.allowVerticalPlacement),n=t.textSizeData;let m=null;"source"===n.kind?(m=[qs*r.layout.get("text-size").evaluate(a,{})])[0]>cl&&le(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===n.kind&&((m=[qs*p.compositeTextSizes[0].evaluate(a,{},f),qs*p.compositeTextSizes[1].evaluate(a,{},f)])[0]>cl||m[1]>cl)&&le(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,i,m,s,o,a,c,e,l.lineStartIndex,l.lineLength,h,f);for(let e of u)d[e]=t.text.placedSymbolArray.length-1;return 4*i.length}function dl(e){for(var t in e)return e[t];return null}let hl=ka.VectorTileFeature.types,pl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fl(e,t,i,n,r,o,a,s,l,c,u,d,h){var p=s?Math.min(cl,Math.round(s[0])):0,s=s?Math.min(cl,Math.round(s[1])):0;e.emplaceBack(t,i,Math.round(32*n),Math.round(32*r),o,a,(p<<1)+(l?1:0),s,16*c,16*u,256*d,256*h)}function ml(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function gl(e){for(var t of e.sections)if(function(e){for(var t of e)if(Sn(t.charCodeAt(0)))return 1}(t.text))return 1}class vl{constructor(e){this.layoutVertexArray=new Fr,this.indexArray=new $r,this.programConfigurations=e,this.segments=new T,this.dynamicLayoutVertexArray=new Nr,this.opacityVertexArray=new jr,this.placedSymbolArray=new Tr}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,i,n){!this.isEmpty()&&(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Qa.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,es.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,pl,!0),this.opacityVertexBuffer.itemSize=1),i||n)&&this.programConfigurations.upload(e)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}t("SymbolBuffers",vl);class _l{constructor(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new T,this.collisionVertexArray=new Ur}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ts.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}t("CollisionBuffers",_l);class yl{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Do([]),this.placementViewportMatrix=Do([]);var t=this.layers[0]._unevaluatedLayout._values,t=(this.textSizeData=Hs(this.zoom,t["text-size"]),this.iconSizeData=Hs(this.zoom,t["icon-size"]),this.layers[0].layout),i=t.get("symbol-sort-key"),n=t.get("symbol-z-order");this.canOverlap="never"!==Cl(t,"text-overlap","text-allow-overlap")||"never"!==Cl(t,"icon-overlap","icon-allow-overlap")||t.get("text-ignore-placement")||t.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==n&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===t.get("symbol-placement")&&(this.writingModes=t.get("text-writing-mode").map(e=>se.WritingMode[e])),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=e.sourceID}createArrays(){this.text=new vl(new ho(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new vl(new ho(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Er,this.lineVertexArray=new Ar,this.symbolInstances=new kr}calculateGlyphDependencies(i,n,e,r,o){for(let t=0;t<i.length;t++)if(n[i.charCodeAt(t)]=!0,(e||r)&&o){let e=rs[i.charAt(t)];e&&(n[e.charCodeAt(0)]=!0)}}populate(e,t,l){let c=this.layers[0],u=c.layout,d=u.get("text-font"),i=u.get("text-field"),n=u.get("icon-image"),h=("constant"!==i.value.kind||i.value.value instanceof nt&&!i.value.value.isEmpty()||0<i.value.value.toString().length)&&("constant"!==d.value.kind||0<d.value.value.length),p="constant"!==n.value.kind||!!n.value.value||0<Object.keys(n.parameters).length,f=u.get("symbol-sort-key");if(this.features=[],h||p){var m=t.iconDependencies,g=t.glyphDependencies,v=t.availableImages,a=new w(this.zoom);for(let{feature:n,id:r,index:o,sourceLayerIndex:s}of e){let e=c._featureFilter.needGeometry,i=vo(n,e);if(c._featureFilter.filter(a,i,l)){let a,t;if(e||(i.geometry=go(n)),h){let e=c.getValueAndResolveTokens("text-field",i,l,v),t=nt.factory(e);gl(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===x||this.hasRTLText&&On.isParsed())&&(a=function(e,i,t){return e.sections.forEach(e=>{e.text=function(e,t){t=i.layout.get("text-transform").evaluate(t,{});return"uppercase"===t?e=e.toLocaleUpperCase():"lowercase"===t&&(e=e.toLocaleLowerCase()),e=On.applyArabicShaping?On.applyArabicShaping(e):e}(e.text,t)}),e}(t,c,i))}if(p){let e=c.getValueAndResolveTokens("icon-image",i,l,v);t=e instanceof ot?e:ot.fromString(e)}if(a||t){var _=this.sortFeaturesByKey?f.evaluate(i,{},l):void 0;if(this.features.push({id:r,text:a,icon:t,index:o,sourceLayerIndex:s,geometry:i.geometry,properties:n.properties,type:hl[n.type],sortKey:_}),t&&(m[t.name]=!0),a){let r=d.evaluate(i,{},l).join(","),o="viewport"!==u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(se.WritingMode.vertical);for(let n of a.sections)if(n.image)m[n.image.name]=!0;else{let e=xn(a.toString()),t=n.fontStack||r,i=g[t]=g[t]||{};this.calculateGlyphDependencies(n.text,i,o,this.allowVerticalPlacement,e)}}}}}"line"===u.get("symbol-placement")&&(this.features=function(t){let r={},o={},a=[],i=0;function n(e){a.push(t[e]),i++}function s(e,t,i){var n=o[e];return delete o[e],o[t]=n,a[n].geometry[0].pop(),a[n].geometry[0]=a[n].geometry[0].concat(i[0]),n}function l(e,t,i){var n=r[t];return delete r[t],r[e]=n,a[n].geometry[0].shift(),a[n].geometry[0]=i[0].concat(a[n].geometry[0]),n}function c(e,t,i){i=i?t[0][t[0].length-1]:t[0][0];return`${e}:${i.x}:`+i.y}for(let e=0;e<t.length;e++){var u=t[e],d=u.geometry,u=u.text?u.text.toString():null;if(u){var h=c(u,d),p=c(u,d,!0);if(h in o&&p in r&&o[h]!==r[p]){let e=l(h,p,d),t=s(h,p,a[e].geometry);delete r[h],delete o[p],o[c(u,a[t].geometry,!0)]=t,a[e].geometry=null}else h in o?s(h,p,d):p in r?l(h,p,d):(n(e),r[h]=i-1,o[p]=i-1)}else n(e)}return a.filter(e=>e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((e,t)=>e.sortKey-t.sortKey)}}update(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,r){var e=this.lineVertexArray.length;if(void 0!==n.segment){let t=n.dist(r[n.segment+1]),i=n.dist(r[n.segment]);var o={};for(let e=n.segment+1;e<r.length;e++)o[e]={x:r[e].x,y:r[e].y,tileUnitDistanceFromAnchor:t},e<r.length-1&&(t+=r[e+1].dist(r[e]));for(let e=n.segment||0;0<=e;e--)o[e]={x:r[e].x,y:r[e].y,tileUnitDistanceFromAnchor:i},0<e&&(i+=r[e-1].dist(r[e]));for(let t=0;t<r.length;t++){let e=o[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:e,lineLength:this.lineVertexArray.length-e}}addSymbols(m,g,v,e,t,_,i,y,n,r,o,b){let x=m.indexArray,w=m.layoutVertexArray,C=m.segments.prepareSegment(4*g.length,w,x,this.canOverlap?_.sortKey:void 0),a=this.glyphOffsetArray.length,s=C.vertexLength,T=this.allowVerticalPlacement&&i===se.WritingMode.vertical?Math.PI/2:0,S=_.text&&_.text.sections;for(let f=0;f<g.length;f++){let{tl:e,tr:t,bl:i,br:n,tex:r,pixelOffsetTL:o,pixelOffsetBR:a,minFontScaleX:s,minFontScaleY:l,glyphOffset:c,isSDF:u,sectionIndex:d}=g[f],h=C.vertexLength,p=c[1];fl(w,y.x,y.y,e.x,p+e.y,r.x,r.y,v,u,o.x,o.y,s,l),fl(w,y.x,y.y,t.x,p+t.y,r.x+r.w,r.y,v,u,a.x,o.y,s,l),fl(w,y.x,y.y,i.x,p+i.y,r.x,r.y+r.h,v,u,o.x,a.y,s,l),fl(w,y.x,y.y,n.x,p+n.y,r.x+r.w,r.y+r.h,v,u,a.x,a.y,s,l),ml(m.dynamicLayoutVertexArray,y,T),x.emplaceBack(h,h+1,h+2),x.emplaceBack(h+1,h+2,h+3),C.vertexLength+=4,C.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(c[0]),f!==g.length-1&&d===g[f+1].sectionIndex||m.programConfigurations.populatePaintArrays(w.length,_,_.index,{},b,S&&S[d])}m.placedSymbolArray.emplaceBack(y.x,y.y,a,this.glyphOffsetArray.length-a,s,n,r,y.segment,v?v[0]:0,v?v[1]:0,e[0],e[1],i,0,!1,0,o)}_addCollisionDebugVertex(e,t,i,n,r,o){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,n,r,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,i,n,r,o,a){var s=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=s.vertexLength,c=r.layoutVertexArray,u=r.collisionVertexArray,d=a.anchorX,a=a.anchorY,t=(this._addCollisionDebugVertex(c,u,o,d,a,new M(e,t)),this._addCollisionDebugVertex(c,u,o,d,a,new M(i,t)),this._addCollisionDebugVertex(c,u,o,d,a,new M(i,n)),this._addCollisionDebugVertex(c,u,o,d,a,new M(e,n)),s.vertexLength+=4,r.indexArray);t.emplaceBack(l,l+1),t.emplaceBack(l+1,l+2),t.emplaceBack(l+2,l+3),t.emplaceBack(l+3,l),s.primitiveLength+=4}addDebugCollisionBoxes(e,i,n,r){for(let t=e;t<i;t++){let e=this.collisionBoxArray.get(t);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,r?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _l(Vr,is.members,qr),this.iconCollisionBox=new _l(Vr,is.members,qr);for(let e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(i,e,n,r,o,a,s,l,c){var u={};for(let t=e;t<n;t++){let e=i.get(t);u.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.textFeatureIndex=e.featureIndex;break}for(let t=r;t<o;t++){let e=i.get(t);u.verticalTextBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.verticalTextFeatureIndex=e.featureIndex;break}for(let t=a;t<s;t++){let e=i.get(t);u.iconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.iconFeatureIndex=e.featureIndex;break}for(let t=l;t<c;t++){let e=i.get(t);u.verticalIconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.verticalIconFeatureIndex=e.featureIndex;break}return u}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return 0<this.text.segments.get().length}hasIconData(){return 0<this.icon.segments.get().length}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length}hasIconCollisionBoxData(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length}addIndicesForPlacedSymbol(t,i){var i=t.placedSymbolArray.get(i),n=i.vertexStartIndex+4*i.numGlyphs;for(let e=i.vertexStartIndex;e<n;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;let t=Math.sin(e),i=Math.cos(e),n=[],r=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);var a=this.symbolInstances.get(e);n.push(0|Math.round(t*a.anchorX+i*a.anchorY)),r.push(a.featureIndex)}return o.sort((e,t)=>n[e]-n[t]||r[t]-r[e]),o}addToSortKeyRanges(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let e of this.symbolInstanceIndexes){var t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach((e,t,i)=>{0<=e&&i.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)}),0<=t.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),0<=t.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),0<=t.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}t("SymbolBucket",yl,{omit:["layers","collisionBoxArray","features","compareText"]}),yl.MAX_GLYPHS=65535,yl.addDynamicAttributes=ml;var li=new r({"symbol-placement":new i(o.layout_symbol["symbol-placement"]),"symbol-spacing":new i(o.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new i(o.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new n(o.layout_symbol["symbol-sort-key"]),"symbol-z-order":new i(o.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new i(o.layout_symbol["icon-allow-overlap"]),"icon-overlap":new i(o.layout_symbol["icon-overlap"]),"icon-ignore-placement":new i(o.layout_symbol["icon-ignore-placement"]),"icon-optional":new i(o.layout_symbol["icon-optional"]),"icon-rotation-alignment":new i(o.layout_symbol["icon-rotation-alignment"]),"icon-size":new n(o.layout_symbol["icon-size"]),"icon-text-fit":new i(o.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new i(o.layout_symbol["icon-text-fit-padding"]),"icon-image":new n(o.layout_symbol["icon-image"]),"icon-rotate":new n(o.layout_symbol["icon-rotate"]),"icon-padding":new n(o.layout_symbol["icon-padding"]),"icon-keep-upright":new i(o.layout_symbol["icon-keep-upright"]),"icon-offset":new n(o.layout_symbol["icon-offset"]),"icon-anchor":new n(o.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new i(o.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new i(o.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new i(o.layout_symbol["text-rotation-alignment"]),"text-field":new n(o.layout_symbol["text-field"]),"text-font":new n(o.layout_symbol["text-font"]),"text-size":new n(o.layout_symbol["text-size"]),"text-max-width":new n(o.layout_symbol["text-max-width"]),"text-line-height":new i(o.layout_symbol["text-line-height"]),"text-letter-spacing":new n(o.layout_symbol["text-letter-spacing"]),"text-justify":new n(o.layout_symbol["text-justify"]),"text-radial-offset":new n(o.layout_symbol["text-radial-offset"]),"text-variable-anchor":new i(o.layout_symbol["text-variable-anchor"]),"text-anchor":new n(o.layout_symbol["text-anchor"]),"text-max-angle":new i(o.layout_symbol["text-max-angle"]),"text-writing-mode":new i(o.layout_symbol["text-writing-mode"]),"text-rotate":new n(o.layout_symbol["text-rotate"]),"text-padding":new i(o.layout_symbol["text-padding"]),"text-keep-upright":new i(o.layout_symbol["text-keep-upright"]),"text-transform":new n(o.layout_symbol["text-transform"]),"text-offset":new n(o.layout_symbol["text-offset"]),"text-allow-overlap":new i(o.layout_symbol["text-allow-overlap"]),"text-overlap":new i(o.layout_symbol["text-overlap"]),"text-ignore-placement":new i(o.layout_symbol["text-ignore-placement"]),"text-optional":new i(o.layout_symbol["text-optional"])}),bl={paint:new r({"icon-opacity":new n(o.paint_symbol["icon-opacity"]),"icon-color":new n(o.paint_symbol["icon-color"]),"icon-halo-color":new n(o.paint_symbol["icon-halo-color"]),"icon-halo-width":new n(o.paint_symbol["icon-halo-width"]),"icon-halo-blur":new n(o.paint_symbol["icon-halo-blur"]),"icon-translate":new i(o.paint_symbol["icon-translate"]),"icon-translate-anchor":new i(o.paint_symbol["icon-translate-anchor"]),"text-opacity":new n(o.paint_symbol["text-opacity"]),"text-color":new n(o.paint_symbol["text-color"],{runtimeType:Ne,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new n(o.paint_symbol["text-halo-color"]),"text-halo-width":new n(o.paint_symbol["text-halo-width"]),"text-halo-blur":new n(o.paint_symbol["text-halo-blur"]),"text-translate":new i(o.paint_symbol["text-translate"]),"text-translate-anchor":new i(o.paint_symbol["text-translate-anchor"])}),layout:li};class xl{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:Fe,this.defaultValue=e}evaluate(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}t("FormatSectionOverride",xl,{omit:["defaultValue"]});class wl extends Xn{constructor(e){super(e,bl)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){let t=this.layout.get("text-writing-mode");if(t){let e=[];for(var i of t)e.indexOf(i)<0&&e.push(i);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,i,n){var r,i=this.layout.get(e).evaluate(t,{},i,n),n=this._unevaluatedLayout._values[e];return n.isDataDriven()||Ei(n.value)||!i?i:(r=t.properties,i.replace(/{([^{}]+)}/g,(e,t)=>t in r?String(r[t]):""))}createBucket(e){return new yl(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(var e of bl.paint.overridableProperties){var t,i,n;wl.hasPaintOverride(this.layout,e)&&(t=this.paint.get(e),i=new xl(t),i=new ki(i,t.property.specification),n=null,n="constant"===t.value.kind||"source"===t.value.kind?new Pi("source",i):new Mi("composite",i,t.value.zoomStops),this.paint._values[e]=new $n(t.property,n,t.parameters))}}_handleOverridablePaintPropertyUpdate(e,t,i){return!(!this.layout||t.isDataDriven()||i.isDataDriven())&&wl.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){let i=e.get("text-field"),n=bl.paint.properties[t],r=!1,o=e=>{for(var t of e)if(n.overrides&&n.overrides.hasOverride(t))return void(r=!0)};if("constant"===i.value.kind&&i.value.value instanceof nt)o(i.value.value.sections);else if("source"===i.value.kind){let t=e=>{r||(e instanceof ct&&g(e.value)===Ue?o(e.value.sections):e instanceof ci?o(e.sections):e.eachChild(t))},e=i.value;e._styleExpression&&t(e._styleExpression.expression)}return r}}function Cl(e,t,i){let n="never";t=e.get(t);return t?n=t:e.get(i)&&(n="always"),n}var Tl={paint:new r({"background-color":new i(o.paint_background["background-color"]),"background-pattern":new Zn(o.paint_background["background-pattern"]),"background-opacity":new i(o.paint_background["background-opacity"])})},Sl={paint:new r({"raster-opacity":new i(o.paint_raster["raster-opacity"]),"raster-hue-rotate":new i(o.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new i(o.paint_raster["raster-brightness-min"]),"raster-brightness-max":new i(o.paint_raster["raster-brightness-max"]),"raster-saturation":new i(o.paint_raster["raster-saturation"]),"raster-contrast":new i(o.paint_raster["raster-contrast"]),"raster-resampling":new i(o.paint_raster["raster-resampling"]),"raster-fade-duration":new i(o.paint_raster["raster-fade-duration"])})};class kl extends Xn{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}let El={circle:class extends Xn{constructor(e){super(e,Mo)}createBucket(e){return new yo(e)}queryRadius(e){return Eo("circle-radius",this,e)+Eo("circle-stroke-width",this,e)+Ao(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,i,n,r,o,a,s){let l=Po(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i),u="map"===this.paint.get("circle-pitch-alignment"),d=u?l:(p=s,l.map(e=>Fo(e,p))),h=u?c*a:c;var p,f,m,g;for(let e of n)for(let n of e){let e=u?n:Fo(n,s),t=h,i=Oo([],[n.x,n.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?t*=i[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(t*=o.cameraToCenterDistance/i[3]),f=d,m=e,g=t,ko(f,m)||Co(m,f,g))return!0}return!1}},heatmap:class extends Xn{constructor(e){super(e,jo),this._updateColorRamp()}createBucket(e){return new No(e)}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Zo({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends Xn{constructor(e){super(e,Go)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends Xn{constructor(e){super(e,wa)}recalculate(e,t){super.recalculate(e,t);e=this.paint._values["fill-outline-color"];"constant"===e.value.kind&&void 0===e.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new xa(e)}queryRadius(){return Ao(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,i,n,r,o,a){return xo(Po(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),n)}isTileClipped(){return!0}},"fill-extrusion":class extends Xn{constructor(e){super(e,Na)}createBucket(e){return new Fa(e)}queryRadius(){return Ao(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,t,i,n,r,o,a,s){e=Po(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),o=this.paint.get("fill-extrusion-height").evaluate(t,i),a=this.paint.get("fill-extrusion-base").evaluate(t,i),t=function(e,i){var n=[];for(let t of e){let e=[t.x,t.y,0,1];Oo(e,e,i),n.push(new M(e[0]/e[3],e[1]/e[3]))}return n}(e,s),i=function(t,e,i,g){let n=[],r=[],v=g[8]*e,_=g[9]*e,y=g[10]*e,b=g[11]*e,x=g[8]*i,w=g[9]*i,C=g[10]*i,T=g[11]*i;for(let e of t){let f=[],m=[];for(let p of e){let e=p.x,t=p.y,i=g[0]*e+g[4]*t+g[12],n=g[1]*e+g[5]*t+g[13],r=g[2]*e+g[6]*t+g[14],o=g[3]*e+g[7]*t+g[15],a=r+y,s=o+b,l=i+x,c=n+w,u=r+C,d=o+T,h=new M((i+v)/s,(n+_)/s);h.z=a/s,f.push(h);var S=new M(l/d,c/d);S.z=u/d,m.push(S)}n.push(f),r.push(m)}return[n,r]}(n,a,o,s);{var l=i[0],c=i[1],u=t;let n=1/0;xo(u,c)&&(n=Va(u,c[0]));for(let e=0;e<c.length;e++){var d=c[e],h=l[e];for(let i=0;i<d.length-1;i++){let e=d[i],t=[e,d[i+1],h[i+1],h[i],e];bo(u,t)&&(n=Math.min(n,Va(u,t)))}}return n!==1/0&&n}}},line:class extends Xn{constructor(e){super(e,Ya),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ot,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Ka.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Xa(e)}queryRadius(e){var t=Ja(Eo("line-width",this,e),Eo("line-gap-width",this,e)),e=Eo("line-offset",this,e);return t/2+Math.abs(e)+Ao(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,i,n,r,o,a){var e=Po(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),o=a/2*Ja(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),t=this.paint.get("line-offset").evaluate(t,i),s=(t&&(n=function(t,l){let i=[];for(let e=0;e<t.length;e++){var c=t[e],u=[];for(let s=0;s<c.length;s++){let e=c[s-1],t=c[s],i=c[s+1],n=0===s?new M(0,0):t.sub(e)._unit()._perp(),r=s===c.length-1?new M(0,0):i.sub(t)._unit()._perp(),o=n._add(r)._unit(),a=o.x*r.x+o.y*r.y;0!=a&&o._mult(1/a),u.push(o._mult(l)._add(t))}i.push(u)}return i}(n,t*a)),e),l=n,c=o;for(let e=0;e<l.length;e++){var u=l[e];if(3<=s.length)for(let e=0;e<u.length;e++)if(ko(s,u[e]))return!0;if(function(t,i,n){if(1<t.length){if(wo(t,i))return 1;for(let e=0;e<i.length;e++)if(Co(i[e],t,n))return 1}for(let e=0;e<t.length;e++)if(Co(t[e],i,n))return 1}(s,u,c))return!0}return!1}isTileClipped(){return!0}},symbol:wl,background:class extends Xn{constructor(e){super(e,Tl)}},raster:class extends Xn{constructor(e){super(e,Sl)}}};class Al{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}class A{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new A(O(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){var t=Math.PI/180,i=this.lat*t,n=e.lat*t,i=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(i,1))}toBounds(e=0){var e=360*e/40075017,t=e/Math.cos(Math.PI/180*this.lat);return new Pl(new A(this.lng-t,this.lat-e),new A(this.lng+t,this.lat+e))}static convert(e){if(e instanceof A)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new A(Number(e[0]),Number(e[1]));if(Array.isArray(e)||"object"!=typeof e||null===e)throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");return new A(Number("lng"in e?e.lng:e.lon),Number(e.lat))}}class Pl{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof A?new A(e.lng,e.lat):A.convert(e),this}setSouthWest(e){return this._sw=e instanceof A?new A(e.lng,e.lat):A.convert(e),this}extend(e){var t=this._sw,i=this._ne;let n,r;if(e instanceof A)n=e,r=e;else{if(!(e instanceof Pl))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Pl.convert(e)):this.extend(A.convert(e)):this;if(n=e._sw,r=e._ne,!n||!r)return this}return t||i?(t.lng=Math.min(n.lng,t.lng),t.lat=Math.min(n.lat,t.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new A(n.lng,n.lat),this._ne=new A(r.lng,r.lat)),this}getCenter(){return new A((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new A(this.getWest(),this.getNorth())}getSouthEast(){return new A(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){var{lng:e,lat:t}=A.convert(e);let i=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=t&&t<=this._ne.lat&&i}static convert(e){return e instanceof Pl?e:e&&new Pl(e)}}let Ml=2*Math.PI*6371008.8;function Il(e){return Ml*Math.cos(e*Math.PI/180)}function Dl(e){return(180+e)/360}function Ll(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function zl(e,t){return e/Il(t)}function Rl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}class Ol{constructor(e,t,i=0){this.x=+e,this.y=+t,this.z=+i}static fromLngLat(e,t=0){e=A.convert(e);return new Ol(Dl(e.lng),Ll(e.lat),zl(t,e.lat))}toLngLat(){return new A(360*this.x-180,Rl(this.y))}toAltitude(){return this.z*Il(Rl(this.y))}meterInMercatorCoordinateUnits(){return 1/Ml*(e=Rl(this.y),1/Math.cos(e*Math.PI/180));var e}}function Bl(e,t,i){i=2*Math.PI*6378137/256/Math.pow(2,i);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}class Fl{constructor(e,t,i){if(e<0||25<e||i<0||i>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))throw new Error(`x=${t}, y=${i}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=t,this.y=i,this.key=Vl(0,e,e,t,i)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,i){o=this.y,a=this.z,n=Bl(256*(r=this.x),256*(o=Math.pow(2,a)-o-1),a),r=Bl(256*(r+1),256*(1+o),a);var n,r,o=n[0]+","+n[1]+","+r[0]+","+r[1],a=function(t,i,n){let r,o="";for(let e=t;0<e;e--)r=1<<e-1,o+=(i&r?1:0)+(n&r?2:0);return o}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,1<t?"@2x":"").replace(/{quadkey}/g,a).replace(/{bbox-epsg-3857}/g,o)}isChildOf(e){var t=this.z-e.z;return 0<t&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){var t=Math.pow(2,this.z);return new M((e.x*t-this.x)*ce,(e.y*t-this.y)*ce)}toString(){return`${this.z}/${this.x}/`+this.y}}class Nl{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Vl(e,t.z,t.z,t.x,t.y)}}class jl{constructor(e,t,i,n,r){if(e<i)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = `+i);this.overscaledZ=e,this.wrap=t,this.canonical=new Fl(i,+n,+r),this.key=Vl(t,e,i,n,r)}clone(){return new jl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = `+this.overscaledZ);var t=this.canonical.z-e;return e>this.canonical.z?new jl(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jl(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = `+this.overscaledZ);var i=this.canonical.z-e;return e>this.canonical.z?Vl(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Vl(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)}isChildOf(e){var t;return e.wrap===this.wrap&&(t=this.canonical.z-e.canonical.z,0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t)}children(e){var t,i;return this.overscaledZ>=e?[new jl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)]:(e=this.canonical.z+1,t=2*this.canonical.x,i=2*this.canonical.y,[new jl(e,this.wrap,e,t,i),new jl(e,this.wrap,e,1+t,i),new jl(e,this.wrap,e,t,1+i),new jl(e,this.wrap,e,1+t,1+i)])}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new jl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new jl(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Nl(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/`+this.canonical.y}getTilePoint(e){return this.canonical.getTilePoint(new Ol(e.x-this.wrap,e.y))}}function Vl(e,t,i,n,r){var o=1<<i;return(o*o*(e=(e*=2)<0?-1*e-1:e)+o*r+n).toString(36)+i.toString(36)+t.toString(36)}t("CanonicalTileID",Fl),t("OverscaledTileID",jl,{omit:["posMatrix"]});class Ul{constructor(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)le(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);else{this.stride=t.height;var n=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(let e=0;e<n;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(n,e)]=this.data[this._idx(n-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,n)]=this.data[this._idx(e,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let i=0;i<n;i++)for(let t=0;t<n;t++){let e=this.get(i,t);e>this.max&&(this.max=e),e<this.min&&(this.min=e)}}}get(e,t){var i=new Uint8Array(this.data.buffer),e=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[e],i[1+e],i[2+e])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,i){return(256*e*256+256*t+i)/10-1e4}_unpackTerrarium(e,t,i){return 256*e+t+i/256-32768}getPixels(){return new Ho({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,e,t){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let n=e*this.dim,r=e*this.dim+this.dim,o=t*this.dim,a=t*this.dim+this.dim;switch(e){case-1:n=r-1;break;case 1:r=n+1}switch(t){case-1:o=a-1;break;case 1:a=o+1}var s=-e*this.dim,l=-t*this.dim;for(let t=o;t<a;t++)for(let e=n;e<r;e++)this.data[this._idx(e,t)]=i.data[this._idx(e+s,t+l)]}}t("DEMData",Ul);class $l{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length `+this._numberToString.length);return this._numberToString[e]}}class ql{constructor(e,t,i,n,r){this.type="Feature",(this._vectorTileFeature=e)._z=t,e._x=i,e._y=n,this.properties=e.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){var e,t={geometry:this.geometry};for(e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class Hl{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new mn(ce,16,0),this.grid3D=new mn(ce,16,0),this.featureIndexArray=new Mr,this.promoteId=t}insert(e,t,i,n,r,o){var a=this.featureIndexArray.length,s=(this.featureIndexArray.emplaceBack(i,n,r),o?this.grid3D:this.grid);for(let e=0;e<t.length;e++){let i=t[e],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<i.length;t++){let e=i[t];n[0]=Math.min(n[0],e.x),n[1]=Math.min(n[1],e.y),n[2]=Math.max(n[2],e.x),n[3]=Math.max(n[3],e.y)}n[0]<ce&&n[1]<ce&&0<=n[2]&&0<=n[3]&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ka.VectorTile(new ss(this.rawTileData)).layers,this.sourceLayerCoder=new $l(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,i,r,o){this.loadVTLayers();let a=u.params||{},s=ce/u.tileSize/u.scale,l=Vi(a.filter),c=u.queryGeometry,d=u.queryPadding*s,e=Gl(c),n=this.grid.query(e.minX-d,e.minY-d,e.maxX+d,e.maxY+d),t=Gl(u.cameraQueryGeometry),h=this.grid3D.query(t.minX-d,t.minY-d,t.maxX+d,t.maxY+d,(e,i,n,r)=>{{var o=u.cameraQueryGeometry,a=e-d,s=i-d,l=n+d,c=r+d;for(let e of o)if(a<=e.x&&s<=e.y&&l>=e.x&&c>=e.y)return!0;let t=[new M(a,s),new M(a,c),new M(l,c),new M(l,s)];if(2<o.length)for(let e of t)if(ko(o,e))return!0;for(let e=0;e<o.length-1;e++)if(function(e,t,i){var n=i[0],r=i[2];if(!(e.x<n.x&&t.x<n.x||e.x>r.x&&t.x>r.x||e.y<n.y&&t.y<n.y||e.y>r.y&&t.y>r.y))return(n=q(e,t,i[0]))!==q(e,t,i[1])||n!==q(e,t,i[2])||n!==q(e,t,i[3])}(o[e],o[e+1],t))return!0;return!1}});for(let e of h)n.push(e);n.sort(Wl);var p={};let f;for(let e=0;e<n.length;e++){let t=n[e];if(t!==f){f=t;let e=this.featureIndexArray.get(t),n=null;this.loadMatchingFeature(p,e.bucketIndex,e.sourceLayerIndex,e.featureIndex,l,a.layers,a.availableImages,i,r,o,(e,t,i)=>(n=n||go(e),t.queryIntersectsFeature(c,e,i,n,this.z,u.transform,s,u.pixelPosMatrix)))}}return p}loadMatchingFeature(n,e,t,r,i,o,a,s,l,c,u){var d=this.bucketLayerIDs[e];if(!o||function(t,i){for(let e=0;e<t.length;e++)if(0<=i.indexOf(t[e]))return 1}(o,d)){var e=this.sourceLayerCoder.decode(t),h=this.vtLayers[e].feature(r);if(i.needGeometry){let e=vo(h,!0);if(!i.filter(new w(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!i.filter(new w(this.tileID.overscaledZ),h))return;var p=this.getId(h,e);for(let e=0;e<d.length;e++){let i=d[e];if(!(o&&o.indexOf(i)<0)){let t=s[i];if(t){let e={};p&&c&&(e=c.getState(t.sourceLayer||"_geojsonTileLayer",p));var f=B({},l[i]),m=(f.paint=Zl(f.paint,t.paint,h,e,a),f.layout=Zl(f.layout,t.layout,h,e,a),!u||u(h,t,e));if(m){var g=new ql(h,this.z,this.x,this.y,p);g.layer=f;let e=n[i];(e=void 0===e?n[i]=[]:e).push({featureIndex:r,feature:g,intersectionZ:m})}}}}}}lookupSymbolFeatures(t,i,n,r,e,o,a,s){var l={},c=(this.loadVTLayers(),Vi(e));for(let e of t)this.loadMatchingFeature(l,n,r,e,c,o,a,s,i);return l}hasLayer(e){for(var t of this.bucketLayerIDs)for(var i of t)if(e===i)return!0;return!1}getId(e,t){let i=e.id;return i=this.promoteId&&"boolean"==typeof(i=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])?Number(i):i}}function Zl(e,i,n,r,o){return j(e,(e,t)=>{t=i instanceof qn?i.get(t):null;return t&&t.evaluate?t.evaluate(n,r,o):t})}function Gl(e){let t=1/0,i=1/0,n=-1/0,r=-1/0;for(var o of e)t=Math.min(t,o.x),i=Math.min(i,o.y),n=Math.max(n,o.x),r=Math.max(r,o.y);return{minX:t,minY:i,maxX:n,maxY:r}}function Wl(e,t){return t-e}t("FeatureIndex",Hl,{omit:["rawTileData","sourceLayerCoder"]}),se.PerformanceMarkers=void 0,(e=se.PerformanceMarkers||(se.PerformanceMarkers={})).create="create",e.load="load",e.fullLoad="fullLoad";let Xl=null,Yl=[],Kl={mark(e){performance.mark(e)},frame(e){null!=Xl&&Yl.push(e-Xl),Xl=e},clearMetrics(){for(var e in Xl=null,Yl=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime"),se.PerformanceMarkers)performance.clearMarks(se.PerformanceMarkers[e])},getPerformanceMetrics(){performance.measure("loadTime",se.PerformanceMarkers.create,se.PerformanceMarkers.load),performance.measure("fullLoadTime",se.PerformanceMarkers.create,se.PerformanceMarkers.fullLoad);var e=performance.getEntriesByName("loadTime")[0].duration,t=performance.getEntriesByName("fullLoadTime")[0].duration,i=Yl.length,n=1/(Yl.reduce((e,t)=>e+t,0)/i/1e3),r=Yl.filter(e=>1e3/30<e).reduce((e,t)=>e+(t-1e3/30)/(1e3/30),0);return{loadTime:e,fullLoadTime:t,fps:n,percentDroppedFrames:r/(i+r)*100}}};se.AJAXError=ye,se.ARRAY_TYPE=S,se.Actor=class{constructor(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},N(["receive","process"],this),this.invoker=new Al(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=H()?e:window}send(e,t,i,n,r=!1){let o=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[o]=i);var a=K(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!i,targetMapId:n,mustQueue:r,sourceMapId:this.mapId,data:_n(t,a)},a),{cancel:()=>{i&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(e){var e=e.data,t=e.id;if(t&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[t];let e=this.cancelCallbacks[t];delete this.cancelCallbacks[t],e&&e()}else H()||e.mustQueue?(this.tasks[t]=e,this.taskQueue.push(t),this.invoker.trigger()):this.processTask(t,e)}process(){var e,t;this.taskQueue.length&&(e=this.taskQueue.shift(),t=this.tasks[e],delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t)&&this.processTask(e,t)}processTask(o,a){if("<response>"===a.type){var s=this.callbacks[o];delete this.callbacks[o],s&&(a.error?s(yn(a.error)):s(null,yn(a.data)))}else{let i=!1,n=K(this.globalScope)?void 0:[],t=a.hasCallback?(e,t)=>{i=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:e?_n(e):null,data:_n(t,n)},n)}:e=>{i=!0},r=null;s=yn(a.data);if(this.parent[a.type])r=this.parent[a.type](a.sourceMapId,s,t);else if(this.parent.getWorkerSource){let e=a.type.split(".");r=this.parent.getWorkerSource(a.sourceMapId,e[0],s.source)[e[1]](s,t)}else t(new Error("Could not find function "+a.type));!i&&r&&r.cancel&&(this.cancelCallbacks[o]=r.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},se.AlphaImage=qo,se.CanonicalTileID=Fl,se.CollisionBoxArray=wr,se.CollisionCircleLayoutArray=class extends ur{},se.Color=m,se.DEMData=Ul,se.DataConstantProperty=i,se.DictionaryCoder=$l,se.EXTENT=ce,se.ErrorEvent=Ie,se.EvaluationParameters=w,se.Event=Me,se.Evented=De,se.FeatureIndex=Hl,se.FillBucket=xa,se.FillExtrusionBucket=Fa,se.GeoJSONFeature=ql,se.ImageAtlas=Is,se.ImagePosition=Ms,se.LineBucket=Xa,se.LineStripIndexArray=class extends yr{},se.LngLat=A,se.LngLatBounds=Pl,se.MercatorCoordinate=Ol,se.ONE_EM=ue,se.OverscaledTileID=jl,se.PerformanceUtils=Kl,se.PosArray=Ir,se.Properties=r,se.QuadTriangleArray=class extends hr{},se.RGBAImage=Ho,se.RasterBoundsArray=class extends er{},se.RequestPerformance=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},se.ResourceType=_e,se.SegmentVector=T,se.SymbolBucket=yl,se.Transitionable=Nn,se.TriangleIndexArray=$r,se.Uniform1f=eo,se.Uniform1i=class extends Qr{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},se.Uniform2f=class extends Qr{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},se.Uniform3f=class extends Qr{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},se.Uniform4f=to,se.UniformColor=io,se.UniformMatrix4f=class extends Qr{constructor(e,t){super(e,t),this.current=no}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);else for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},se.UnwrappedTileID=Nl,se.ValidationError=p,se.ZoomHistory=bn,se.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},se.addDynamicAttributes=ml,se.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);let r=e.length,o=new Array(e.length),a=null;e.forEach((e,i)=>{t(e,(e,t)=>{e&&(a=e),o[i]=t,0==--r&&n(a,o)})})},se.bezier=L,se.bindAll=N,se.cacheEntryPossiblyAdded=function(e){++de>oe&&(e.getActor().send("enforceCacheSizeLimit",re),de=0)},se.clamp=R,se.clearTileCache=function(e){var t=caches.delete(ie);e&&t.catch(e).then(()=>e())},se.clipLine=Ks,se.clone=function(e){var t=new S(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},se.clone$1=U,se.clone$2=function(e){var t=new S(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},se.collisionCircleLayout=ns,se.config=te,se.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},se.create=function(){var e=new S(16);return S!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},se.create$1=Io,se.createExpression=Ai,se.createFilter=Vi,se.createLayout=C,se.createStyleLayer=function(e){return new("custom"===e.type?kl:El[e.type])(e)},se.cross=function(e,t,i){var n=t[0],r=t[1],t=t[2],o=i[0],a=i[1],i=i[2];return e[0]=r*i-t*a,e[1]=t*o-n*i,e[2]=n*a-r*o,e},se.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},se.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},se.ease=z,se.emitValidationErrors=fn,se.enforceCacheSizeLimit=function(n){ae(),ne&&ne.then(i=>{i.keys().then(t=>{for(let e=0;e<t.length-n;e++)i.delete(t[e])})})},se.equals=function(e,t){var i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],f=e[12],m=e[13],g=e[14],e=e[15],v=t[0],_=t[1],y=t[2],b=t[3],x=t[4],w=t[5],C=t[6],T=t[7],S=t[8],k=t[9],E=t[10],A=t[11],P=t[12],M=t[13],I=t[14],t=t[15];return Math.abs(i-v)<=D*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(n-_)<=D*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-y)<=D*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(o-b)<=D*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-x)<=D*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-w)<=D*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(l-C)<=D*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-T)<=D*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(u-S)<=D*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(d-k)<=D*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(h-E)<=D*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(p-A)<=D*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(f-P)<=D*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(m-M)<=D*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(g-I)<=D*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(e-t)<=D*Math.max(1,Math.abs(e),Math.abs(t))},se.evaluateSizeForFeature=function(e,{uSize:t,uSizeT:i},{lowerSize:n,upperSize:r}){return"source"===e.kind?n/qs:"composite"===e.kind?y(n/qs,r/qs,i):t},se.evaluateSizeForZoom=function(e,t){let i=0,n=0;var r,o,a;return"constant"===e.kind?n=e.layoutSize:"source"!==e.kind&&({interpolationType:a,minZoom:r,maxZoom:o}=e,a=a?R(Jt.interpolationFactor(a,t,r,o),0,1):0,"camera"===e.kind?n=y(e.minSize,e.maxSize,a):i=a),{uSizeT:i,uSize:n}},se.evaluateVariableOffset=al,se.evented=Rn,se.exported=Q,se.exported$1=he,se.extend=B,se.filterObject=V,se.fromRotation=function(e,t){var i=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=i,e[2]=0,e[3]=-i,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},se.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},se.getAnchorAlignment=Us,se.getAnchorJustification=sl,se.getArrayBuffer=Ce,se.getImage=Te,se.getJSON=function(e,t){return we(B(e,{type:"json"}),t)},se.getOverlapMode=Cl,se.getRTLTextPluginStatus=Ln,se.getReferrer=be,se.getVideo=function(t,e){let i=window.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(let e=0;e<t.length;e++){var n=window.document.createElement("source");r=t[e],o=void 0,(o=window.document.createElement("a")).href=r,o.protocol===window.document.location.protocol&&o.host===window.document.location.host||(i.crossOrigin="Anonymous"),n.src=t[e],i.appendChild(n)}var r,o;return{cancel:()=>{}}},se.identity=Do,se.invert=function(e,t){var i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],t=t[15],v=i*s-n*a,_=i*l-r*a,y=i*c-o*a,b=n*l-r*s,x=n*c-o*s,w=r*c-o*l,C=u*m-d*f,T=u*g-h*f,S=u*t-p*f,k=d*g-h*m,E=d*t-p*m,A=h*t-p*g,P=v*A-_*E+y*k+b*S-x*T+w*C;return P?(e[0]=(s*A-l*E+c*k)*(P=1/P),e[1]=(r*E-n*A-o*k)*P,e[2]=(m*w-g*x+t*b)*P,e[3]=(h*x-d*w-p*b)*P,e[4]=(l*S-a*A-c*T)*P,e[5]=(i*A-r*S+o*T)*P,e[6]=(g*y-f*w-t*_)*P,e[7]=(u*w-h*y+p*_)*P,e[8]=(a*E-s*S+c*C)*P,e[9]=(n*S-i*E-o*C)*P,e[10]=(f*x-m*y+t*v)*P,e[11]=(d*y-u*x-p*v)*P,e[12]=(s*T-a*k-l*C)*P,e[13]=(i*k-n*T+r*C)*P,e[14]=(m*_-f*b-g*v)*P,e[15]=(u*b-d*_+h*v)*P,e):null},se.isImageBitmap=J,se.isSafari=K,se.isWorker=H,se.keysDifference=function(e,t){var i,n=[];for(i in e)i in t||n.push(i);return n},se.lazyLoadRTLTextPlugin=function(){On.isLoading()||On.isLoaded()||"deferred"!==x||zn()},se.makeRequest=we,se.mapObject=j,se.mercatorXfromLng=Dl,se.mercatorYfromLat=Ll,se.mercatorZfromAltitude=zl,se.mul=oi,se.mul$1=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e},se.multiply=Lo,se.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},se.normalize=function(e,t){var i=t[0],n=t[1],r=t[2],i=i*i+n*n+r*r;return 0<i&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},se.number=y,se.ortho=function(e,t,i,n,r,o,a){var s=1/(t-i),l=1/(n-r),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*s,e[13]=(r+n)*l,e[14]=(a+o)*c,e[15]=1,e},se.parseCacheControl=Z,se.parseGlyphPbf=function(e){return new ss(e).readFields(ks,[])},se.pbf=ss,se.performSymbolLayout=function(g){g.bucket.createArrays(),g.bucket.tilePixelRatio=ce/(512*g.bucket.overscaling),g.bucket.compareText={},g.bucket.iconsNeedLinear=!1;let v=g.bucket.layers[0].layout,i=g.bucket.layers[0]._unevaluatedLayout._values,r={layoutIconSize:i["icon-size"].possiblyEvaluate(new w(g.bucket.zoom+1),g.canonical),layoutTextSize:i["text-size"].possiblyEvaluate(new w(g.bucket.zoom+1),g.canonical),textMaxSize:i["text-size"].possiblyEvaluate(new w(18))};if("composite"===g.bucket.textSizeData.kind){let{minZoom:e,maxZoom:t}=g.bucket.textSizeData;r.compositeTextSizes=[i["text-size"].possiblyEvaluate(new w(e),g.canonical),i["text-size"].possiblyEvaluate(new w(t),g.canonical)]}if("composite"===g.bucket.iconSizeData.kind){let{minZoom:e,maxZoom:t}=g.bucket.iconSizeData;r.compositeIconSizes=[i["icon-size"].possiblyEvaluate(new w(e),g.canonical),i["icon-size"].possiblyEvaluate(new w(t),g.canonical)]}let _=v.get("text-line-height")*ue,y="viewport"!==v.get("text-rotation-alignment")&&"point"!==v.get("symbol-placement"),b=v.get("text-keep-upright"),o=v.get("text-size");for(let n of g.bucket.features){let u=v.get("text-font").evaluate(n,{},g.canonical).join(","),d=o.evaluate(n,{},g.canonical),h=r.layoutTextSize.evaluate(n,{},g.canonical),e=r.layoutIconSize.evaluate(n,{},g.canonical),p={horizontal:{},vertical:void 0},f=n.text,t,m=[0,0];if(f){let t=f.toString(),e=v.get("text-letter-spacing").evaluate(n,{},g.canonical)*ue,r=wn(t)?e:0,i=v.get("text-anchor").evaluate(n,{},g.canonical),o=v.get("text-variable-anchor");if(!o){let e=v.get("text-radial-offset").evaluate(n,{},g.canonical);m=e?al(i,[e*ue,ol]):v.get("text-offset").evaluate(n,{},g.canonical).map(e=>e*ue)}let a=y?"center":v.get("text-justify").evaluate(n,{},g.canonical),s=v.get("symbol-placement"),l="point"===s?v.get("text-max-width").evaluate(n,{},g.canonical)*ue:0,c=()=>{g.bucket.allowVerticalPlacement&&xn(t)&&(p.vertical=Rs(f,g.glyphMap,g.glyphPositions,g.imagePositions,u,l,_,i,"left",r,m,se.WritingMode.vertical,!0,s,h,d))};if(!y&&o){let i="auto"===a?o.map(e=>sl(e)):[a],n=!1;for(let e=0;e<i.length;e++){let t=i[e];if(!p.horizontal[t])if(n)p.horizontal[t]=p.horizontal[0];else{let e=Rs(f,g.glyphMap,g.glyphPositions,g.imagePositions,u,l,_,"center",t,r,m,se.WritingMode.horizontal,!1,s,h,d);e&&(p.horizontal[t]=e,n=1===e.positionedLines.length)}}c()}else{"auto"===a&&(a=sl(i));let e=Rs(f,g.glyphMap,g.glyphPositions,g.imagePositions,u,l,_,i,a,r,m,se.WritingMode.horizontal,!1,s,h,d);e&&(p.horizontal[a]=e),c(),xn(t)&&y&&b&&(p.vertical=Rs(f,g.glyphMap,g.glyphPositions,g.imagePositions,u,l,_,i,a,r,m,se.WritingMode.vertical,!1,s,h,d))}}let i=!1;if(n.icon&&n.icon.name){let e=g.imageMap[n.icon.name];e&&(t=function(e,t,i){var{horizontalAlign:i,verticalAlign:n}=Us(i),i=t[0]-e.displaySize[0]*i,t=t[1]-e.displaySize[1]*n;return{image:e,top:t,bottom:t+e.displaySize[1],left:i,right:i+e.displaySize[0]}}(g.imagePositions[n.icon.name],v.get("icon-offset").evaluate(n,{},g.canonical),v.get("icon-anchor").evaluate(n,{},g.canonical)),i=!!e.sdf,void 0===g.bucket.sdfIcons?g.bucket.sdfIcons=i:g.bucket.sdfIcons!==i&&le("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),e.pixelRatio!==g.bucket.pixelRatio||0!==v.get("icon-rotate").constantOr(1))&&(g.bucket.iconsNeedLinear=!0)}var a=dl(p.horizontal)||p.vertical;g.bucket.iconsInText=!!a&&a.iconsInText,(a||t)&&ll(g.bucket,n,p,t,g.imageMap,r,h,e,m,i,g.canonical)}g.showCollisionBoxes&&g.bucket.generateCollisionDebugBuffers()},se.perspective=function(e,t,i,n,r){t=1/Math.tan(t/2);return e[0]=t/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=(r+n)*(i=1/(n-r)),e[14]=2*r*n*i):(e[10]=-1,e[14]=-2*n),e},se.pick=function(t,i){var n={};for(let e=0;e<i.length;e++){var r=i[e];r in t&&(n[r]=t[r])}return n},se.plugin=On,se.pointGeometry=M,se.polygonIntersectsPolygon=bo,se.potpack=Ps,se.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],se.register=t,se.registerForPluginStateChange=function(e){return e({pluginStatus:x,pluginURL:In}),Rn.on("pluginStateChange",e),e},se.renderColorRamp=Zo,se.rotateX=function(e,t,i){var n=Math.sin(i),i=Math.cos(i),r=t[4],o=t[5],a=t[6],s=t[7],l=t[8],c=t[9],u=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*i+l*n,e[5]=o*i+c*n,e[6]=a*i+u*n,e[7]=s*i+d*n,e[8]=l*i-r*n,e[9]=c*i-o*n,e[10]=u*i-a*n,e[11]=d*i-s*n,e},se.rotateZ=function(e,t,i){var n=Math.sin(i),i=Math.cos(i),r=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],u=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*i+l*n,e[1]=o*i+c*n,e[2]=a*i+u*n,e[3]=s*i+d*n,e[4]=l*i-r*n,e[5]=c*i-o*n,e[6]=u*i-a*n,e[7]=d*i-s*n,e},se.scale=function(e,t,i){var n=i[0],r=i[1],i=i[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},se.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},se.setCacheLimits=function(e,t){re=e,oe=t},se.setRTLTextPlugin=function(e,t,i=!1){if(x===En||x===An||x===Pn)throw new Error("setRTLTextPlugin cannot be called multiple times.");In=Q.resolveURL(e),x=En,Mn=t,Dn(),i||zn()},se.spec=o,se.sphericalToCartesian=function([e,t,i]){return t=(t+=90)*(Math.PI/180),i*=Math.PI/180,{x:e*Math.cos(t)*Math.sin(i),y:e*Math.sin(t)*Math.sin(i),z:e*Math.cos(i)}},se.sqrLen=function(e){var t=e[0],e=e[1];return t*t+e*e},se.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},se.toEvaluationFeature=vo,se.transformMat3=function(e,t,i){var n=t[0],r=t[1],t=t[2];return e[0]=n*i[0]+r*i[3]+t*i[6],e[1]=n*i[1]+r*i[4]+t*i[7],e[2]=n*i[2]+r*i[5]+t*i[8],e},se.transformMat4=Oo,se.transformMat4$1=function(e,t,i){var n=t[0],t=t[1];return e[0]=i[0]*n+i[4]*t+i[12],e[1]=i[1]*n+i[5]*t+i[13],e},se.translate=function(e,t,i){var n,r,o,a,s,l,c,u,d,h,p,f,m=i[0],g=i[1],i=i[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*i+t[12],e[13]=t[1]*m+t[5]*g+t[9]*i+t[13],e[14]=t[2]*m+t[6]*g+t[10]*i+t[14],e[15]=t[3]*m+t[7]*g+t[11]*i+t[15]):(r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],e[0]=n=t[0],e[1]=r,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=p,e[11]=f,e[12]=n*m+s*g+d*i+t[12],e[13]=r*m+l*g+h*i+t[13],e[14]=o*m+c*g+p*i+t[14],e[15]=a*m+u*g+f*i+t[15]),e},se.triggerPluginCompletionEvent=kn,se.unicodeBlockLookup=X,se.uniqueId=function(){return F++},se.validateCustomStyleLayer=function(e){var t=[],i=e.id;return void 0===i&&t.push({message:`layers.${i}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${i}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),t},se.validateLight=dn,se.validateStyle=un,se.vectorTile=ka,se.warnOnce=le,se.wrap=O}),e(0,function(m){function O(e){let t="";for(var i of m.refProperties)t+="/"+function i(n){var e=typeof n;if("number"==e||"boolean"==e||"string"==e||null==n)return JSON.stringify(n);if(Array.isArray(n)){let t="[";for(let e of n)t+=i(e)+",";return t+"]"}let t=Object.keys(n).sort(),r="{";for(let e=0;e<t.length;e++)r+=`${JSON.stringify(t[e])}:${i(n[t[e]])},`;return r+"}"}(e[i]);return t}class B{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(e,t){for(let t of e){this._layerConfigs[t.id]=t;let e=this._layers[t.id]=m.createStyleLayer(t);e._featureFilter=m.createFilter(e.filter),this.keyCache[t.id]&&delete this.keyCache[t.id]}for(let e of t)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};for(let e of function(i,n){var r={};for(let t=0;t<i.length;t++){var o=n&&n[i[t].id]||O(i[t]);n&&(n[i[t].id]=o);let e=r[o];(e=e||(r[o]=[])).push(i[t])}var t=[];for(let e in r)t.push(r[e]);return t}(Object.values(this._layerConfigs),this.keyCache)){let n=e.map(e=>this._layers[e.id]),r=n[0];if("none"!==r.visibility){let e=r.source||"",t=this.familiesBySource[e];t=t||(this.familiesBySource[e]={});var o=r.sourceLayer||"_geojsonTileLayer";let i=t[o];(i=i||(t[o]=[])).push(n)}}}}class g{constructor(r){let o={},a=[];for(let t in r){let e=r[t],n=o[t]={};for(let i in e){let t=e[+i];if(t&&0!==t.bitmap.width&&0!==t.bitmap.height){let e={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};a.push(e),n[i]={rect:e,metrics:t.metrics}}}}let{w:e,h:t}=m.potpack(a),s=new m.AlphaImage({width:e||1,height:t||1});for(let n in r){let i=r[n];for(let t in i){let e=i[+t];var l;e&&0!==e.bitmap.width&&0!==e.bitmap.height&&(l=o[n][t].rect,m.AlphaImage.copy(e.bitmap,s,{x:0,y:0},{x:l.x+1,y:l.y+1},e.bitmap))}}this.image=s,this.positions=o}}m.register("GlyphAtlas",g);class F{constructor(e){this.tileID=new m.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId}parse(e,t,s,i,r){this.status="parsing",this.data=e,this.collisionBoxArray=new m.CollisionBoxArray;let l=new m.DictionaryCoder(Object.keys(e.layers).sort()),c=new m.FeatureIndex(this.tileID,this.promoteId),u=(c.bucketLayerIDs=[],{}),d={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:s},h=t.familiesBySource[this.source];for(let a in h){let o=e.layers[a];if(o){1===o.version&&m.warnOnce(`Vector tile source "${this.source}" layer "${a}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let n=l.encode(a),r=[];for(let i=0;i<o.length;i++){let e=o.feature(i),t=c.getId(e,a);r.push({feature:e,id:t,index:i,sourceLayerIndex:n})}for(let t of h[a]){let e=t[0];e.source!==this.source&&m.warnOnce(`layer.source = ${e.source} does not equal this.source = `+this.source),e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(v(t,this.zoom,s),(u[e.id]=e.createBucket({index:c.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:n,sourceID:this.source})).populate(r,d,this.tileID.canonical),c.bucketLayerIDs.push(t.map(e=>e.id)))}}}let o,a,p,f;t=m.mapObject(d.glyphDependencies,e=>Object.keys(e).map(Number)),Object.keys(t).length?i.send("getGlyphs",{uid:this.uid,stacks:t},(e,t)=>{o||(o=e,a=t,n.call(this))}):a={},t=Object.keys(d.iconDependencies),t.length?i.send("getImages",{icons:t,source:this.source,tileID:this.tileID,type:"icons"},(e,t)=>{o||(o=e,p=t,n.call(this))}):p={},t=Object.keys(d.patternDependencies);function n(){if(o)return r(o);if(a&&p&&f){var t=new g(a),i=new m.ImageAtlas(p,f);for(let e in u){var n=u[e];n instanceof m.SymbolBucket?(v(n.layers,this.zoom,s),m.performSymbolLayout({bucket:n,glyphMap:a,glyphPositions:t.positions,imageMap:p,imagePositions:i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):n.hasPattern&&(n instanceof m.LineBucket||n instanceof m.FillBucket||n instanceof m.FillExtrusionBucket)&&(v(n.layers,this.zoom,s),n.addFeatures(d,this.tileID.canonical,i.patternPositions))}this.status="done",r(null,{buckets:Object.values(u).filter(e=>!e.isEmpty()),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:i,glyphMap:this.returnDependencies?a:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?t.positions:null})}}t.length?i.send("getImages",{icons:t,source:this.source,tileID:this.tileID,type:"patterns"},(e,t)=>{o||(o=e,f=t,n.call(this))}):f={},n.call(this)}}function v(t,e,i){var n=new m.EvaluationParameters(e);for(let e of t)e.recalculate(n,i)}function N(e,r){let t=m.getArrayBuffer(e.request,(e,t,i,n)=>{e?r(e):t&&r(null,{vectorTile:new m.vectorTile.VectorTile(new m.pbf(t)),rawData:t,cacheControl:i,expires:n})});return()=>{t.cancel(),r()}}class t{constructor(e,t,i,n){this.actor=e,this.layerIndex=t,this.availableImages=i,this.loadVectorData=n||N,this.loading={},this.loaded={}}loadTile(e,o){let a=e.uid,s=(this.loading||(this.loading={}),!!(e&&e.request&&e.request.collectResourceTiming)&&new m.RequestPerformance(e.request)),l=this.loading[a]=new F(e);l.abort=this.loadVectorData(e,(e,t)=>{if(delete this.loading[a],e||!t)return l.status="done",this.loaded[a]=l,o(e);let i=t.rawData,n={},r=(t.expires&&(n.expires=t.expires),t.cacheControl&&(n.cacheControl=t.cacheControl),{});if(s){let e=s.finish();e&&(r.resourceTiming=JSON.parse(JSON.stringify(e)))}l.vectorTile=t.vectorTile,l.parse(t.vectorTile,this.layerIndex,this.availableImages,this.actor,(e,t)=>{if(e||!t)return o(e);o(null,m.extend({rawTileData:i.slice(0)},t,n,r))}),this.loaded=this.loaded||{},this.loaded[a]=l})}reloadTile(e,r){let t=this.loaded,i=e.uid,o=this;if(t&&t[i]){let n=t[i];n.showCollisionBoxes=e.showCollisionBoxes;e=(e,t)=>{var i=n.reloadCallback;i&&(delete n.reloadCallback,n.parse(n.vectorTile,o.layerIndex,this.availableImages,o.actor,i)),r(e,t)};"parsing"===n.status?n.reloadCallback=e:"done"===n.status&&(n.vectorTile?n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,e):e())}}abortTile(e,t){var i=this.loading,e=e.uid;i&&i[e]&&i[e].abort&&(i[e].abort(),delete i[e]),t()}removeTile(e,t){var i=this.loaded,e=e.uid;i&&i[e]&&delete i[e],t()}}class j{constructor(){this.loaded={}}loadTile(e,t){var{uid:e,encoding:i,rawImageData:n}=e,n=m.isImageBitmap(n)?this.getImageData(n):n,n=new m.DEMData(e,n,i);this.loaded=this.loaded||{},t(null,this.loaded[e]=n)}getImageData(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);e=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new m.RGBAImage({width:e.width,height:e.height},e.data)}removeTile(e){var t=this.loaded,e=e.uid;t&&t[e]&&delete t[e]}}function o(e,t){var i,n=e&&e.type;if("FeatureCollection"===n)for(i=0;i<e.features.length;i++)o(e.features[i],t);else if("GeometryCollection"===n)for(i=0;i<e.geometries.length;i++)o(e.geometries[i],t);else if("Feature"===n)o(e.geometry,t);else if("Polygon"===n)r(e.coordinates,t);else if("MultiPolygon"===n)for(i=0;i<e.coordinates.length;i++)r(e.coordinates[i],t);return e}function r(e,t){if(0!==e.length){n(e[0],t);for(var i=1;i<e.length;i++)n(e[i],!t)}}function n(e,t){for(var i=0,n=0,r=0,o=e.length,a=o-1;r<o;a=r++){var s=(e[r][0]-e[a][0])*(e[a][1]+e[r][1]),l=i+s;n+=Math.abs(i)>=Math.abs(s)?i-l+s:s-l+i,i=l}0<=i+n!=!!t&&e.reverse()}let V=m.vectorTile.VectorTileFeature.prototype.toGeoJSON;class U{constructor(e){this._feature=e,this.extent=m.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){var e,t=[];for(e of this._feature.geometry)t.push([new m.pointGeometry(e[0],e[1])]);return t}var i,n=[];for(i of this._feature.geometry){var r,o=[];for(r of i)o.push(new m.pointGeometry(r[0],r[1]));n.push(o)}return n}toGeoJSON(e,t,i){return V.call(this,e,t,i)}}class ${constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=m.EXTENT,this.length=e.length,this._features=e}feature(e){return new U(this._features[e])}}var a={exports:{}},q=m.pointGeometry,H=m.vectorTile.VectorTileFeature,Z=e;function e(e,t){this.options=t||{},this.features=e,this.length=e.length}function i(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}e.prototype.feature=function(e){return new i(this.features[e],this.options.extent)},i.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var i=e[t],n=[],r=0;r<i.length;r++)n.push(new q(i[r][0],i[r][1]));this.geometry.push(n)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,n=1/0,r=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++)var l=a[s],t=Math.min(t,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.y);return[t,n,i,r]},i.prototype.toGeoJSON=H.prototype.toGeoJSON;var s,G=m.pbf,l=Z;function c(e){var t,i=new G,n=e,r=i;for(t in n.layers)r.writeMessage(3,W,n.layers[t]);return i.finish()}function W(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);for(var i={keys:[],values:[],keycache:{},valuecache:{}},n=0;n<e.length;n++)i.feature=e.feature(n),t.writeMessage(2,X,i);var r=i.keys;for(n=0;n<r.length;n++)t.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)t.writeMessage(4,J,o[n])}function X(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,Y,e),t.writeVarintField(3,i.type),t.writeMessage(4,K,i)}function Y(e,t){var i,n=e.feature,r=e.keys,o=e.values,a=e.keycache,s=e.valuecache;for(i in n.properties){var l,c=n.properties[i],u=a[i];null!==c&&(void 0===u&&(r.push(i),a[i]=u=r.length-1),t.writeVarint(u),void 0===(l=s[u=(u=typeof c)+":"+(c="string"!=u&&"boolean"!=u&&"number"!=u?JSON.stringify(c):c)])&&(o.push(c),s[u]=l=o.length-1),t.writeVarint(l))}}function f(e,t){return(t<<3)+(7&e)}function _(e){return e<<1^e>>31}function K(e,t){for(var i=e.loadGeometry(),n=e.type,r=0,o=0,a=i.length,s=0;s<a;s++){var l=i[s],c=1;1===n&&(c=l.length),t.writeVarint(f(1,c));for(var u=3===n?l.length-1:l.length,d=0;d<u;d++){1===d&&1!==n&&t.writeVarint(f(2,u-1));var h=l[d].x-r,p=l[d].y-o;t.writeVarint(_(h)),t.writeVarint(_(p)),r+=h,o+=p}3===n&&t.writeVarint(15)}}function J(e,t){var i=typeof e;"string"==i?t.writeStringField(1,e):"boolean"==i?t.writeBooleanField(7,e):"number"==i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function u(e,t,i,n,r,o){var a;r-n<=i||(function o(a,s,l,c,u,d){for(;c<u;){if(600<u-c){let e=u-c+1,t=l-c+1,i=Math.log(e),n=.5*Math.exp(2*i/3),r=.5*Math.sqrt(i*n*(e-n)/e)*(t-e/2<0?-1:1);o(a,s,l,Math.max(c,Math.floor(l-t*n/e+r)),Math.min(u,Math.floor(l+(e-t)*n/e+r)),d)}let e=s[2*l+d],t=c,i=u;for(h(a,s,c,l),s[2*u+d]>e&&h(a,s,c,u);t<i;){for(h(a,s,t,i),t++,i--;s[2*t+d]<e;)t++;for(;s[2*i+d]>e;)i--}s[2*c+d]===e?h(a,s,c,i):(i++,h(a,s,i,u)),i<=l&&(c=i+1),l<=i&&(u=i-1)}}(e,t,a=n+r>>1,n,r,o%2),u(e,t,i,n,a-1,o+1),u(e,t,i,1+a,r,o+1))}function h(e,t,i,n){d(e,i,n),d(t,2*i,2*n),d(t,2*i+1,2*n+1)}function d(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function y(e,t,i,n){e-=i,i=t-n;return e*e+i*i}a.exports=c,a.exports.fromVectorTileJs=c,a.exports.fromGeojsonVt=function(e,t){t=t||{};var i,n={};for(i in e)n[i]=new l(e[i].features,t),n[i].name=i,n[i].version=t.version,n[i].extent=t.extent;return c({layers:n})},a.exports.GeoJSONWrapper=l;class Q{constructor(t,i=e=>e[0],n=e=>e[1],e=64,r=Float64Array){this.nodeSize=e;var o=(this.points=t).length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length);for(let e=0;e<t.length;e++)s[2*(a[e]=e)]=i(t[e]),s[2*e+1]=n(t[e]);u(a,s,e,0,a.length-1,0)}range(e,n,r,o){{var a=this.ids,s=this.coords,l=e,c=n,u=r,d=o,h=this.nodeSize,p=[0,a.length-1,0],f=[];let t,i;for(;p.length;){var m=p.pop(),g=p.pop(),v=p.pop();if(g-v<=h)for(let e=v;e<=g;e++)t=s[2*e],i=s[2*e+1],t>=l&&t<=u&&i>=c&&i<=d&&f.push(a[e]);else{var _=Math.floor((v+g)/2),y=(t=s[2*_],i=s[2*_+1],t>=l&&t<=u&&i>=c&&i<=d&&f.push(a[_]),(m+1)%2);(0===m?l<=t:c<=i)&&(p.push(v),p.push(_-1),p.push(y)),(0===m?u>=t:d>=i)&&(p.push(_+1),p.push(g),p.push(y))}}return f}}within(e,t,i){for(var n=this.ids,r=this.coords,o=e,a=t,s=i,l=this.nodeSize,c=[0,n.length-1,0],u=[],d=s*s;c.length;){var h=c.pop(),p=c.pop(),f=c.pop();if(p-f<=l)for(let e=f;e<=p;e++)y(r[2*e],r[2*e+1],o,a)<=d&&u.push(n[e]);else{var m=Math.floor((f+p)/2),g=r[2*m],v=r[2*m+1],_=(y(g,v,o,a)<=d&&u.push(n[m]),(h+1)%2);(0===h?o-s<=g:a-s<=v)&&(c.push(f),c.push(m-1),c.push(_)),(0===h?g<=o+s:v<=a+s)&&(c.push(m+1),c.push(p),c.push(_))}}return u}}let ee={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},b=Math.fround||(s=new Float32Array(1),e=>(s[0]=+e,s[0]));class te{constructor(e){this.options=w(Object.create(ee),e),this.trees=new Array(this.options.maxZoom+1)}load(t){let{log:i,minZoom:e,maxZoom:n,nodeSize:r}=this.options;i&&console.time("total time");var o=`prepare ${t.length} points`;i&&console.time(o),this.points=t;let a=[];for(let e=0;e<t.length;e++)t[e].geometry&&a.push(function(e,t){var[e,i]=e.geometry.coordinates;return{x:b(p(e)),y:b(x(i)),zoom:1/0,index:t,parentId:-1}}(t[e],e));this.trees[n+1]=new Q(a,re,oe,r,Float32Array),i&&console.timeEnd(o);for(let t=n;t>=e;t--){let e=+Date.now();a=this._cluster(a,t),this.trees[t]=new Q(a,re,oe,r,Float32Array),i&&console.log("z%d: %d clusters in %dms",t,a.length,+Date.now()-e)}return i&&console.timeEnd("total time"),this}getClusters(e,i){let n=((e[0]+180)%360+360)%360-180;var r=Math.max(-90,Math.min(90,e[1]));let o=180===e[2]?180:((e[2]+180)%360+360)%360-180;var a=Math.max(-90,Math.min(90,e[3]));if(360<=e[2]-e[0])n=-180,o=180;else if(n>o){let e=this.getClusters([n,r,180,a],i),t=this.getClusters([-180,r,o,a],i);return e.concat(t)}let s=this.trees[this._limitZoom(i)],l=s.range(p(n),x(a),p(o),x(r)),c=[];for(let t of l){let e=s.points[t];c.push(e.numPoints?ie(e):this.points[e.index])}return c}getChildren(i){let e=this._getOriginId(i),t=this._getOriginZoom(i),n="No cluster with the specified id.",r=this.trees[t];if(!r)throw new Error(n);var o=r.points[e];if(!o)throw new Error(n);var a=this.options.radius/(this.options.extent*Math.pow(2,t-1)),s=[];for(let t of r.within(o.x,o.y,a)){let e=r.points[t];e.parentId===i&&s.push(e.numPoints?ie(e):this.points[e.index])}if(0===s.length)throw new Error(n);return s}getLeaves(e,t,i){var n=[];return this._appendLeaves(n,e,t=t||10,i=i||0,0),n}getTile(e,t,i){var n=this.trees[this._limitZoom(e)],e=Math.pow(2,e),{extent:r,radius:o}=this.options,o=o/r,r=(i-o)/e,a=(i+1+o)/e,s={features:[]};return this._addTileFeatures(n.range((t-o)/e,r,(t+1+o)/e,a),n.points,t,i,e,s),0===t&&this._addTileFeatures(n.range(1-o/e,r,1,a),n.points,e,i,e,s),t===e-1&&this._addTileFeatures(n.range(0,r,o/e,a),n.points,-1,i,e,s),s.features.length?s:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){var i=this.getChildren(e);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t}_appendLeaves(i,e,n,r,o){let a=this.getChildren(e);for(let t of a){let e=t.properties;if(e&&e.cluster?o+e.point_count<=r?o+=e.point_count:o=this._appendLeaves(i,e.cluster_id,n,r,o):o<r?o++:i.push(t),i.length===n)break}return o}_addTileFeatures(e,a,s,l,c,u){for(var d of e){let t=a[d],e=t.numPoints,i,n,r;if(e)i=ne(t),n=t.x,r=t.y;else{let e=this.points[t.index];i=e.properties,n=p(e.geometry.coordinates[0]),r=x(e.geometry.coordinates[1])}d={type:1,geometry:[[Math.round(this.options.extent*(n*c-s)),Math.round(this.options.extent*(r*c-l))]],tags:i};let o;e?o=t.id:this.options.generateId?o=t.index:this.points[t.index].id&&(o=this.points[t.index].id),void 0!==o&&(d.id=o),u.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(t,s){let l=[],{radius:e,extent:i,reduce:c,minPoints:n}=this.options,r=e/(i*Math.pow(2,s));for(let e=0;e<t.length;e++){let a=t[e];if(!(a.zoom<=s)){a.zoom=s;var u=this.trees[s+1],d=u.within(a.x,a.y,r),h=a.numPoints||1;let o=h;for(let t of d){let e=u.points[t];e.zoom>s&&(o+=e.numPoints||1)}if(o>h&&o>=n){let i=a.x*h,n=a.y*h,r=c&&1<h?this._map(a,!0):null;var p,f=(e<<5)+(s+1)+this.points.length;for(let t of d){let e=u.points[t];e.zoom<=s||(e.zoom=s,p=e.numPoints||1,i+=e.x*p,n+=e.y*p,e.parentId=f,c&&(r=r||this._map(a,!0),c(r,this._map(e))))}a.parentId=f,l.push((h=i/o,m=n/o,g=f,v=o,_=r,{x:b(h),y:b(m),zoom:1/0,id:g,parentId:-1,numPoints:v,properties:_}))}else if(l.push(a),1<o)for(let t of d){let e=u.points[t];e.zoom<=s||(e.zoom=s,l.push(e))}}}var m,g,v,_;return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){var i;return e.numPoints?t?w({},e.properties):e.properties:(e=this.points[e.index].properties,i=this.options.map(e),t&&i===e?w({},i):i)}}function ie(e){return{type:"Feature",id:e.id,properties:ne(e),geometry:{type:"Point",coordinates:[360*(e.x-.5),function(e){e=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}(e.y)]}}}function ne(e){var t=e.numPoints,i=1e4<=t?Math.round(t/1e3)+"k":1e3<=t?Math.round(t/100)/10+"k":t;return w(w({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:i})}function p(e){return e/360+.5}function x(e){e=Math.sin(e*Math.PI/180),e=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return e<0?0:1<e?1:e}function w(e,t){for(var i in t)e[i]=t[i];return e}function re(e){return e.x}function oe(e){return e.y}function C(e,t,i,n){for(var r,o=n,a=i-t>>1,s=i-t,l=e[t],c=e[t+1],u=e[i],d=e[i+1],h=t+3;h<i;h+=3){var p=function(e,t,i,n,r,o){var a=r-i,s=o-n;{var l;0==a&&0==s||(1<(l=((e-i)*a+(t-n)*s)/(a*a+s*s))?(i=r,n=o):0<l&&(i+=a*l,n+=s*l))}return(a=e-i)*a+(s=t-n)*s}(e[h],e[h+1],l,c,u,d);o<p?(r=h,o=p):p===o&&(p=Math.abs(h-a))<s&&(r=h,s=p)}n<o&&(3<r-t&&C(e,t,r,n),e[r+2]=o,3<i-r)&&C(e,r,i,n)}function S(e,t,i,n){var e={id:void 0===e?null:e,type:t,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},r=e,o=r.geometry,t=r.type;if("Point"===t||"MultiPoint"===t||"LineString"===t)T(r,o);else if("Polygon"===t||"MultiLineString"===t)for(var a=0;a<o.length;a++)T(r,o[a]);else if("MultiPolygon"===t)for(a=0;a<o.length;a++)for(var s=0;s<o[a].length;s++)T(r,o[a][s]);return e}function T(e,t){for(var i=0;i<t.length;i+=3)e.minX=Math.min(e.minX,t[i]),e.minY=Math.min(e.minY,t[i+1]),e.maxX=Math.max(e.maxX,t[i]),e.maxY=Math.max(e.maxY,t[i+1])}function k(e,t,i,n){if(t.geometry){var r=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=t.id;if(i.promoteId?l=t.properties[i.promoteId]:i.generateId&&(l=n||0),"Point"===o)ae(r,s);else if("MultiPoint"===o)for(var c=0;c<r.length;c++)ae(r[c],s);else if("LineString"===o)E(r,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(c=0;c<r.length;c++)E(r[c],s=[],a,!1),e.push(S(l,"LineString",s,t.properties));return}A(r,s,a,!1)}else if("Polygon"===o)A(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(c=0;c<t.geometry.geometries.length;c++)k(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},i,n);return}for(c=0;c<r.length;c++){var u=[];A(r[c],u,a,!0),s.push(u)}}e.push(S(l,o,s,t.properties))}}function ae(e,t){t.push(se(e[0])),t.push(le(e[1])),t.push(0)}function E(e,t,i,n){for(var r,o,a=0,s=0;s<e.length;s++){var l=se(e[s][0]),c=le(e[s][1]);t.push(l),t.push(c),t.push(0),0<s&&(a+=n?(r*c-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(c-o,2))),r=l,o=c}var u=t.length-3;t[2]=1,C(t,0,u,i),t[2+u]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function A(e,t,i,n){for(var r=0;r<e.length;r++){var o=[];E(e[r],o,i,n),t.push(o)}}function se(e){return e/360+.5}function le(e){e=Math.sin(e*Math.PI/180),e=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return e<0?0:1<e?1:e}function P(e,t,i,n,r,o,a,s){if(n/=t,o>=(i/=t)&&a<n)return e;if(a<i||n<=o)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=u.geometry,h=u.type,p=0===r?u.minX:u.minY,f=0===r?u.maxX:u.maxY;if(i<=p&&f<n)l.push(u);else if(!(f<i||n<=p)){var m=[];if("Point"===h||"MultiPoint"===h){g=void 0;v=void 0;_=void 0;y=void 0;b=void 0;x=void 0;w=void 0;var g=d;var v=m;var _=i;var y=n;var b=r;for(var x=0;x<g.length;x+=3){var w=g[x+b];_<=w&&w<=y&&(v.push(g[x]),v.push(g[x+1]),v.push(g[x+2]))}}else if("LineString"===h)ce(d,m,i,n,r,!1,s.lineMetrics);else if("MultiLineString"===h)M(d,m,i,n,r,!1);else if("Polygon"===h)M(d,m,i,n,r,!0);else if("MultiPolygon"===h)for(var C=0;C<d.length;C++){var T=[];M(d[C],T,i,n,r,!0),T.length&&m.push(T)}if(m.length)if(s.lineMetrics&&"LineString"===h)for(C=0;C<m.length;C++)l.push(S(u.id,h,m[C],u.tags));else"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(S(u.id,h,m,u.tags))}}return l.length?l:null}function ce(e,t,i,n,r,o,a){for(var s,l,c=ue(e),u=0===r?de:he,d=e.start,h=0;h<e.length-3;h+=3){var p=e[h],f=e[h+1],m=e[h+2],g=e[h+3],v=e[h+4],_=0===r?p:f,y=0===r?g:v,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-v,2))),_<i?i<y&&(l=u(c,p,f,g,v,i),a)&&(c.start=d+s*l):n<_?y<n&&(l=u(c,p,f,g,v,n),a)&&(c.start=d+s*l):I(c,p,f,m),y<i&&i<=_&&(l=u(c,p,f,g,v,i),b=!0),n<y&&_<=n&&(l=u(c,p,f,g,v,n),b=!0),!o&&b&&(a&&(c.end=d+s*l),t.push(c),c=ue(e)),a&&(d+=s)}var x=e.length-3,p=e[x],f=e[1+x],m=e[2+x];(_=0===r?p:f)>=i&&_<=n&&I(c,p,f,m),x=c.length-3,o&&3<=x&&(c[x]!==c[0]||c[1+x]!==c[1])&&I(c,c[0],c[1],c[2]),c.length&&t.push(c)}function ue(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function M(e,t,i,n,r,o){for(var a=0;a<e.length;a++)ce(e[a],t,i,n,r,o,!1)}function I(e,t,i,n){e.push(t),e.push(i),e.push(n)}function de(e,t,i,n,r,o){n=(o-t)/(n-t);return e.push(o),e.push(i+(r-i)*n),e.push(1),n}function he(e,t,i,n,r,o){r=(o-i)/(r-i);return e.push(t+(n-t)*r),e.push(o),e.push(1),r}function pe(e,t){for(var i=[],n=0;n<e.length;n++){var r=e[n],o=r.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=D(r.geometry,t);else if("MultiLineString"===o||"Polygon"===o)for(var a=[],s=0;s<r.geometry.length;s++)a.push(D(r.geometry[s],t));else if("MultiPolygon"===o)for(a=[],s=0;s<r.geometry.length;s++){for(var l=[],c=0;c<r.geometry[s].length;c++)l.push(D(r.geometry[s][c],t));a.push(l)}i.push(S(r.id,o,a,r.tags))}return i}function D(e,t){var i=[];i.size=e.size,void 0!==e.start&&(i.start=e.start,i.end=e.end);for(var n=0;n<e.length;n+=3)i.push(e[n]+t,e[n+1],e[n+2]);return i}function fe(e,t){if(!e.transformed){for(var i,n=1<<e.z,r=e.x,o=e.y,a=0;a<e.features.length;a++){var s=e.features[a],l=s.geometry,c=s.type;if(s.geometry=[],1===c)for(i=0;i<l.length;i+=2)s.geometry.push(me(l[i],l[i+1],t,n,r,o));else for(i=0;i<l.length;i++){for(var u=[],d=0;d<l[i].length;d+=2)u.push(me(l[i][d],l[i][d+1],t,n,r,o));s.geometry.push(u)}}e.transformed=!0}return e}function me(e,t,i,n,r,o){return[Math.round(i*(e*n-r)),Math.round(i*(t*n-o))]}function ge(e,t,i,n,r){for(var o=t===r.maxZoom?0:r.tolerance/((1<<t)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,y=_=v=g=m=f=p=h=d=u=c=l=void 0;var l=a,c=e[s],u=o,d=r,h=c.geometry,p=c.type,f=[];if("Point"===p||"MultiPoint"===p)for(var m=0;m<h.length;m+=3)f.push(h[m]),f.push(h[m+1]),l.numPoints++,l.numSimplified++;else if("LineString"===p)L(f,h,l,u,!1,!1);else if("MultiLineString"===p||"Polygon"===p)for(m=0;m<h.length;m++)L(f,h[m],l,u,"Polygon"===p,0===m);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var v=h[g];for(m=0;m<v.length;m++)L(f,v[m],l,u,!0,0===m)}if(f.length){var _=c.tags||null;if("LineString"===p&&d.lineMetrics){for(var y in _={},c.tags)_[y]=c.tags[y];_.mapbox_clip_start=h.start/h.size,_.mapbox_clip_end=h.end/h.size}d={geometry:f,type:"Polygon"===p||"MultiPolygon"===p?3:"LineString"===p||"MultiLineString"===p?2:1,tags:_};null!==c.id&&(d.id=c.id),l.features.push(d)}var d=e[s].minX,b=e[s].minY,x=e[s].maxX,w=e[s].maxY;d<a.minX&&(a.minX=d),b<a.minY&&(a.minY=b),a.maxX<x&&(a.maxX=x),a.maxY<w&&(a.maxY=w)}return a}function L(e,t,i,n,r,o){var a=n*n;if(0<n&&t.size<(r?a:n))i.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>a)&&(i.numSimplified++,s.push(t[l]),s.push(t[l+1])),i.numPoints++;if(r){var c=s;r=o;for(var u=0,d=0,h=c.length,p=h-2;d<h;p=d,d+=2)u+=(c[d]-c[p])*(c[d+1]+c[p+1]);if(0<u===r)for(d=0,h=c.length;d<h/2;d+=2){var f=c[d],m=c[d+1];c[d]=c[h-2-d],c[d+1]=c[h-1-d],c[h-2-d]=f,c[h-1-d]=m}}e.push(s)}}function z(e,t){var i=(t=this.options=function(e,t){for(var i in t)e[i]=t[i];return e}(Object.create(this.options),t)).debug;if(i&&console.time("preprocess data"),t.maxZoom<0||24<t.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n,r,o,a,s,e=function(e,t){var i=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)k(i,e.features[n],t,n);else k(i,"Feature"===e.type?e:{geometry:e},t);return i}(e,t);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=e,r=(t=t).buffer/t.extent,a=P(o=n,1,-1-r,r,0,-1,2,t),s=P(n,1,1-r,2+r,0,-1,2,t),(e=o=(a||s)&&(o=P(n,1,-r,1+r,0,-1,2,t)||[],a&&(o=pe(a,1).concat(o)),s)?o.concat(pe(s,-1)):o).length&&this.splitTile(e,0,0,0),i&&(e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function R(e,t,i){return 32*((1<<e)*i+t)+e}function ve(e,t){e=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);e=this._geoJSONIndex.getTile(e.z,e.x,e.y);if(!e)return t(null,null);e=new $(e.features);let i=a.exports(e);t(null,{vectorTile:e,rawData:(i=0===i.byteOffset&&i.byteLength===i.buffer.byteLength?i:new Uint8Array(i)).buffer})}z.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},z.prototype.splitTile=function(e,t,i,n,r,o,a){for(var s=[e,t,i,n],l=this.options,c=l.debug;s.length;){n=s.pop(),i=s.pop(),t=s.pop(),e=s.pop();var u,d,h,p,f,m,g,v,_,y=1<<t,b=R(t,i,n),x=this.tiles[b];if(!x&&(1<c&&console.time("creation"),x=this.tiles[b]=ge(e,t,i,n,l),this.tileCoords.push({z:t,x:i,y:n}),c)&&(1<c&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,n,x.numFeatures,x.numPoints,x.numSimplified),console.timeEnd("creation")),this.stats[b="z"+t]=(this.stats[b]||0)+1,this.total++),x.source=e,r){if(t===l.maxZoom||t===r)continue;var b=1<<r-t;if(i!==Math.floor(o/b)||n!==Math.floor(a/b))continue}else if(t===l.indexMaxZoom||x.numPoints<=l.indexMaxPoints)continue;x.source=null,0!==e.length&&(1<c&&console.time("clipping"),p=.5-(b=.5*l.buffer/l.extent),m=1+b,g=u=d=h=null,v=P(e,y,i-b,i+(f=.5+b),0,x.minX,x.maxX,l),_=P(e,y,i+p,i+m,0,x.minX,x.maxX,l),e=null,v&&(g=P(v,y,n-b,n+f,1,x.minY,x.maxY,l),u=P(v,y,n+p,n+m,1,x.minY,x.maxY,l),v=null),_&&(d=P(_,y,n-b,n+f,1,x.minY,x.maxY,l),h=P(_,y,n+p,n+m,1,x.minY,x.maxY,l),_=null),1<c&&console.timeEnd("clipping"),s.push(g||[],t+1,2*i,2*n),s.push(u||[],t+1,2*i,2*n+1),s.push(d||[],t+1,2*i+1,2*n),s.push(h||[],t+1,2*i+1,2*n+1))}},z.prototype.getTile=function(e,t,i){var n=this.options,r=n.extent,n=n.debug;if(e<0||24<e)return null;var o=1<<e,o=R(e,t=(t%o+o)%o,i);if(this.tiles[o])return fe(this.tiles[o],r);1<n&&console.log("drilling down to z%d-%d-%d",e,t,i);for(var a,s=e,l=t,c=i;!a&&0<s;)s--,l=Math.floor(l/2),c=Math.floor(c/2),a=this.tiles[R(s,l,c)];return a&&a.source&&(1<n&&console.log("found parent tile z%d-%d-%d",s,l,c),1<n&&console.time("drilling down"),this.splitTile(a.source,s,l,c,e,t,i),1<n&&console.timeEnd("drilling down"),this.tiles[o])?fe(this.tiles[o],r):null};class _e extends t{constructor(e,t,i,n){super(e,t,i,ve),n&&(this.loadGeoJSON=n)}loadData(n,t){var e;null!=(e=this._pendingRequest)&&e.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});let r=!!(n&&n.request&&n.request.collectResourceTiming)&&new m.RequestPerformance(n.request);this._pendingCallback=t,this._pendingRequest=this.loadGeoJSON(n,(e,i)=>{if(delete this._pendingCallback,delete this._pendingRequest,e||!i)return t(e);if("object"!=typeof i)return t(new Error(`Input data given to '${n.source}' is not a valid GeoJSON object.`));o(i,!0);try{if(n.filter){let t=m.createExpression(n.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===t.result)throw new Error(t.value.map(e=>e.key+": "+e.message).join(", "));let e=i.features.filter(e=>t.value.evaluate({zoom:0},e));i={type:"FeatureCollection",features:e}}this._geoJSONIndex=n.cluster?new te(function({superclusterOptions:e,clusterProperties:l}){if(l&&e){let o={},a={},i={accumulated:null,zoom:0},n={properties:null},s=Object.keys(l);for(let r of s){let[e,t]=l[r],i=m.createExpression(t),n=m.createExpression("string"==typeof e?[e,["accumulated"],["get",r]]:e);o[r]=i.value,a[r]=n.value}e.map=e=>{n.properties=e;var t={};for(let e of s)t[e]=o[e].evaluate(i,n);return t},e.reduce=(t,e)=>{n.properties=e;for(let e of s)i.accumulated=t[e],t[e]=a[e].evaluate(i,n)}}return e}(n)).load(i.features):new z(i,n.geojsonVtOptions)}catch(e){return t(e)}this.loaded={};i={};if(r){let e=r.finish();e&&(i.resourceTiming={},i.resourceTiming[n.source]=JSON.parse(JSON.stringify(e)))}t(null,i)})}reloadTile(e,t){var i=this.loaded;return i&&i[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,i){if(t.request)return m.getJSON(t.request,i);if("string"==typeof t.data)try{i(null,JSON.parse(t.data))}catch(e){i(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}else i(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class ye{constructor(e){this.self=e,this.actor=new m.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:t,geojson:_e},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=e=>{if(m.plugin.isParsed())throw new Error("RTL text plugin already registered.");m.plugin.applyArabicShaping=e.applyArabicShaping,m.plugin.processBidirectionalText=e.processBidirectionalText,m.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}setReferrer(e,t){this.referrer=t}setImages(t,i,e){this.availableImages[t]=i;for(let e in this.workerSources[t]){var n=this.workerSources[t][e];for(let e in n)n[e].availableImages=i}e()}setLayers(e,t,i){this.getLayerIndex(e).replace(t),i()}updateLayers(e,t,i){this.getLayerIndex(e).update(t.layers,t.removedIds),i()}loadTile(e,t,i){this.getWorkerSource(e,t.type,t.source).loadTile(t,i)}loadDEMTile(e,t,i){this.getDEMWorkerSource(e,t.source).loadTile(t,i)}reloadTile(e,t,i){this.getWorkerSource(e,t.type,t.source).reloadTile(t,i)}abortTile(e,t,i){this.getWorkerSource(e,t.type,t.source).abortTile(t,i)}removeTile(e,t,i){this.getWorkerSource(e,t.type,t.source).removeTile(t,i)}removeDEMTile(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)}removeSource(e,t,i){var n;this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]&&(n=this.workerSources[e][t.type][t.source],delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,i):i())}loadWorkerSource(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e.toString())}}syncRTLPluginState(e,i,n){try{m.plugin.setState(i);let t=m.plugin.getPluginURL();if(m.plugin.isLoaded()&&!m.plugin.isParsed()&&null!=t){this.self.importScripts(t);let e=m.plugin.isParsed();n(e?void 0:new Error("RTL Text Plugin failed to import scripts from "+t),e)}}catch(e){n(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t=t||[]}getLayerIndex(e){let t=this.layerIndexes[e];return t=t||(this.layerIndexes[e]=new B)}getWorkerSource(n,e,t){return this.workerSources[n]||(this.workerSources[n]={}),this.workerSources[n][e]||(this.workerSources[n][e]={}),this.workerSources[n][e][t]||(this.workerSources[n][e][t]=new this.workerSourceTypes[e]({send:(e,t,i)=>{this.actor.send(e,t,i,n)}},this.getLayerIndex(n),this.getAvailableImages(n))),this.workerSources[n][e][t]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new j),this.demWorkerSources[e][t]}enforceCacheSizeLimit(e,t){m.enforceCacheSizeLimit(t)}}return m.isWorker()&&(self.worker=new ye(self)),ye}),e(0,function(W){var _=D;function D(e){return e=e,!("undefined"==typeof window||"undefined"==typeof document||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if("Worker"in window&&"Blob"in window&&"URL"in window){var e,t,i=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(i);try{t=new Worker(i),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(i),e}}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(){var e=document.createElement("canvas"),t=(e.width=e.height=1,e.getContext("2d"));if(t)return(t=t.getImageData(0,0,1,1))&&t.width===e.width}()&&(void 0===L[r=e&&e.failIfMajorPerformanceCaveat]&&(L[r]=function(){n=r,t=document.createElement("canvas"),(i=Object.create(D.webGLContextAttributes)).failIfMajorPerformanceCaveat=n;var e,t,i,n=t.getContext("webgl",i)||t.getContext("experimental-webgl",i);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}()),L[r])&&!document.documentMode));var r}var L={};function T(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return;for(let e=0;e<t.length;e++)if(!T(t[e],i[e]))return;return 1}if("object"!=typeof t||null===t||null===i)return t===i;if("object"==typeof i&&Object.keys(t).length===Object.keys(i).length){for(var e in t)if(!T(t[e],i[e]))return;return 1}}D.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class h{static testProp(t){if(h.docStyle)for(let e=0;e<t.length;e++)if(t[e]in h.docStyle)return t[e];return t[0]}static create(e,t,i){e=window.document.createElement(e);return void 0!==t&&(e.className=t),i&&i.appendChild(e),e}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){h.docStyle&&h.selectProp&&(h.userSelect=h.docStyle[h.selectProp],h.docStyle[h.selectProp]="none")}static enableDrag(){h.docStyle&&h.selectProp&&(h.docStyle[h.selectProp]=h.userSelect)}static setTransform(e,t){e.style[h.transformProp]=t}static addEventListener(e,t,i,n={}){e.addEventListener(t,i,"passive"in n?n:n.capture)}static removeEventListener(e,t,i,n={}){e.removeEventListener(t,i,"passive"in n?n:n.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",h.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",h.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",h.suppressClickInternal,!0)},0)}static mousePos(e,t){var i=e.getBoundingClientRect();return new W.pointGeometry(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)}static touchPos(t,i){var n=t.getBoundingClientRect(),r=[];for(let e=0;e<i.length;e++)r.push(new W.pointGeometry(i[e].clientX-n.left-t.clientLeft,i[e].clientY-n.top-t.clientTop));return r}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}h.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,h.selectProp=h.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),h.transformProp=h.testProp(["transform","WebkitTransform"]);class z{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeSpriteURL(e,t,i){e=function(e){var t=e.match(R);if(t)return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]};throw new Error(`Unable to parse URL "${e}"`)}(e);return e.path+=""+t+i,i=(t=e).params.length?"?"+t.params.join("&"):"",t.protocol+"://"+t.authority+t.path+i}setTransformRequest(e){this._transformRequestFn=e}}let R=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class O{constructor(e,t,i,n){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,n)}update(i,e,n){let{width:r,height:o}=i,t=!(this.size&&this.size[0]===r&&this.size[1]===o||n),a=this["context"],s=a["gl"];if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),t)this.size=[r,o],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||W.isImageBitmap(i)?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,i):s.texImage2D(s.TEXTURE_2D,0,this.format,r,o,0,this.format,s.UNSIGNED_BYTE,i.data);else{let{x:e,y:t}=n||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||W.isImageBitmap(i)?s.texSubImage2D(s.TEXTURE_2D,0,e,t,s.RGBA,s.UNSIGNED_BYTE,i):s.texSubImage2D(s.TEXTURE_2D,0,e,t,r,o,s.RGBA,s.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t,i){var n=this["context"],n=n["gl"];n.bindTexture(n.TEXTURE_2D,this.texture),i!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=n.LINEAR),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){var e=this.context["gl"];e.deleteTexture(this.texture),this.texture=null}}class F extends W.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new W.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e)){for(let{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}getImage(e){return this.images[e]}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t)}_validate(e,t){let i=!0;return this._validateStretch(t.stretchX,t.data&&t.data.width)||(this.fire(new W.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),i=!1),this._validateStretch(t.stretchY,t.data&&t.data.height)||(this.fire(new W.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),i=!1),this._validateContent(t.content,t)||(this.fire(new W.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),i=!1),i}_validateStretch(t,i){if(t){let e=0;for(var n of t){if(n[0]<e||n[1]<n[0]||i<n[1])return!1;e=n[1]}}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){var i=this.images[e];if(i.data.width!==t.data.width||i.data.height!==t.data.height)throw new Error(`size mismatch between old image (${i.data.width}x${i.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=i.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let i=!0;if(!this.isLoaded())for(let e of t)this.images[e]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,t){var i={};for(let t of e){this.images[t]||this.fire(new W.Event("styleimagemissing",{id:t}));let e=this.images[t];e?i[t]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:W.warnOnce(`Image "${t}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}t(null,i)}getPixelSize(){var{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(i){let e=this.patterns[i],n=this.getImage(i);if(!n)return null;if(e&&e.position.version===n.version)return e.position;if(e)e.position.version=n.version;else{let e={w:n.data.width+2,h:n.data.height+2,x:0,y:0},t=new W.ImagePosition(e,n);this.patterns[i]={bin:e,position:t}}return this._updatePatternAtlas(),this.patterns[i].position}bind(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new O(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}_updatePatternAtlas(){let t=[];for(let e in this.patterns)t.push(this.patterns[e].bin);let{w:e,h:i}=W.potpack(t),s=this.atlasImage;s.resize({width:e||1,height:i||1});for(let a in this.patterns){let e=this.patterns[a]["bin"],t=e.x+1,i=e.y+1,n=this.images[a].data,r=n.width,o=n.height;W.RGBAImage.copy(n,s,{x:0,y:0},{x:t,y:i},{width:r,height:o}),W.RGBAImage.copy(n,s,{x:0,y:o-1},{x:t,y:i-1},{width:r,height:1}),W.RGBAImage.copy(n,s,{x:0,y:0},{x:t,y:i+o},{width:r,height:1}),W.RGBAImage.copy(n,s,{x:r-1,y:0},{x:t-1,y:i},{width:1,height:o}),W.RGBAImage.copy(n,s,{x:0,y:0},{x:t+r,y:i},{width:1,height:o})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(var t of e)if(!this.callbackDispatchedThisFrame[t]){this.callbackDispatchedThisFrame[t]=!0;let e=this.images[t];e||W.warnOnce(`Image with ID: "${t}" was not found`),i=e,n=void 0,(n=i.userImage)&&n.render&&n.render()&&(i.data.replace(new Uint8Array(n.data.buffer)),1)&&this.updateImage(t,e)}var i,n}}let y=1e20;function N(t,i,n,r,o,a,s,l,c){for(let e=i;e<i+r;e++)j(t,n*a+e,a,o,s,l,c);for(let e=n;e<n+o;e++)j(t,e*a+i,1,r,s,l,c)}function j(o,a,s,e,l,c,u){u[c[0]=0]=-y,u[1]=y,l[0]=o[a];for(let i=1,n=0,r=0;i<e;i++){l[i]=o[a+i*s];let t=i*i;do{let e=c[n];r=(l[i]-l[e]+t-e*e)/(i-e)/2}while(r<=u[n]&&-1<--n);c[++n]=i,u[n]=r,u[n+1]=y}for(let i=0,n=0;i<e;i++){for(;u[n+1]<i;)n++;let e=c[n],t=i-e;o[a+i*s]=l[e]+t*t}}class l{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(i,t){var n=[];for(let t in i)for(let e of i[t])n.push({stack:t,id:e});W.asyncAll(n,({stack:i,id:o},a)=>{let s=this.entries[i];var e=(s=s||(this.entries[i]={glyphs:{},requests:{},ranges:{}})).glyphs[o];if(void 0!==e)a(null,{stack:i,id:o,glyph:e});else if(e=this._tinySDF(s,i,o))s.glyphs[o]=e,a(null,{stack:i,id:o,glyph:e});else{let r=Math.floor(o/256);if(65535<256*r)a(new Error("glyphs > 65535 not supported"));else if(s.ranges[r])a(null,{stack:i,id:o,glyph:e});else{let n=s.requests[r];n||(n=s.requests[r]=[],l.loadGlyphRange(i,r,this.url,this.requestManager,(e,t)=>{if(t){for(let e in t)this._doesCharSupportLocalGlyph(+e)||(s.glyphs[+e]=t[+e]);s.ranges[r]=!0}for(var i of n)i(e,t);delete s.requests[r]})),n.push((e,t)=>{e?a(e):t&&a(null,{stack:i,id:o,glyph:t[o]||null})})}}},(e,r)=>{if(e)t(e);else if(r){let n={};for(let{stack:e,id:t,glyph:i}of r)(n[e]||(n[e]={}))[t]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics};t(null,n)}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(W.unicodeBlockLookup["CJK Unified Ideographs"](e)||W.unicodeBlockLookup["Hangul Syllables"](e)||W.unicodeBlockLookup.Hiragana(e)||W.unicodeBlockLookup.Katakana(e))}_tinySDF(i,n,e){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(e)){let t=i.tinySDF;if(!t){let e="400";/bold/i.test(n)?e="900":/medium/i.test(n)?e="500":/light/i.test(n)&&(e="200"),t=i.tinySDF=new l.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:r,fontWeight:e})}n=t.draw(String.fromCharCode(e));return{id:e,bitmap:new W.AlphaImage({width:n.width||30,height:n.height||30},n.data),metrics:{width:n.glyphWidth||24,height:n.glyphHeight||24,left:n.glyphLeft||0,top:n.glyphTop-27||-8,advance:n.glyphAdvance||24}}}}}l.loadGlyphRange=function(e,t,i,n,r){var t=256*t,o=255+t,n=n.transformRequest(i.replace("{fontstack}",e).replace("{range}",t+"-"+o),W.ResourceType.Glyphs);W.getArrayBuffer(n,(e,t)=>{if(e)r(e);else if(t){let e={};for(var i of W.parseGlyphPbf(t))e[i.id]=i;r(null,e)}})},l.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:i=8,cutoff:n=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=n,this.radius=i;n=this.size=e+4*t,i=this._createCanvas(n),t=this.ctx=i.getContext("2d",{willReadFrequently:!0});t.font=a+` ${o} ${e}px `+r,t.textBaseline="alphabetic",t.textAlign="left",t.fillStyle="black",this.gridOuter=new Float64Array(n*n),this.gridInner=new Float64Array(n*n),this.f=new Float64Array(n),this.z=new Float64Array(n+1),this.v=new Uint16Array(n)}_createCanvas(e){var t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){let{width:t,actualBoundingBoxAscent:i,actualBoundingBoxDescent:n,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(i),s=Math.min(this.size-this.buffer,Math.ceil(o-r)),l=Math.min(this.size-this.buffer,a+Math.ceil(n)),c=s+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),p={data:h,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0!==s&&0!==l){var{ctx:f,buffer:m,gridInner:g,gridOuter:v}=this,_=(f.clearRect(m,m,s,l),f.fillText(e,m,m+a),f.getImageData(m,m,s,l));v.fill(y,0,d),g.fill(0,0,d);for(let n=0;n<l;n++)for(let e=0;e<s;e++){let i=_.data[4*(n*s+e)+3]/255;if(0!=i){let t=(n+m)*c+e+m;if(1==i)v[t]=0,g[t]=y;else{let e=.5-i;v[t]=0<e?e*e:0,g[t]=e<0?e*e:0}}}N(v,0,0,c,u,c,this.f,this.v,this.z),N(g,m,m,s,l,c,this.f,this.v,this.z);for(let t=0;t<d;t++){let e=Math.sqrt(v[t])-Math.sqrt(g[t]);h[t]=Math.round(255-255*(e/this.radius+this.cutoff))}}return p}};let V=new W.Properties({anchor:new W.DataConstantProperty(W.spec.light.anchor),position:new class{constructor(){this.specification=W.spec.light.position}possiblyEvaluate(e,t){return W.sphericalToCartesian(e.expression.evaluate(t))}interpolate(e,t,i){return{x:W.number(e.x,t.x,i),y:W.number(e.y,t.y,i),z:W.number(e.z,t.z,i)}}},color:new W.DataConstantProperty(W.spec.light.color),intensity:new W.DataConstantProperty(W.spec.light.intensity)}),U="-transition";class $ extends W.Evented{constructor(e){super(),this._transitionable=new W.Transitionable(V),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,e={}){if(!this._validate(W.validateLight,i,e))for(let t in i){let e=i[t];t.endsWith(U)?this._transitionable.setTransition(t.slice(0,-U.length),e):this._transitionable.setValue(t,e)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,t,i){return(!i||!1!==i.validate)&&W.emitValidationErrors(this,e.call(W.validateStyle,W.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:W.spec})))}}class q{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){var i=e.join(",")+String(t);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(e,t)),this.dashEntry[i]}getDashRanges(t,e,i){var n=[];let r=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0,s=(n.push({left:r,right:o,isDash:a,zeroLength:0===t[0]}),t[0]);for(let e=1;e<t.length;e++){a=!a;var l=t[e];r=s*i,o=(s+=l)*i,n.push({left:r,right:o,isDash:a,zeroLength:0===l})}return n}addRoundDash(o,e,a){var s=e/2;for(let r=-a;r<=a;r++){var l=this.width*(this.nextRow+a+r);let i=0,n=o[i];for(let e=0;e<this.width;e++){1<e/n.right&&(n=o[++i]);var c=Math.abs(e-n.left),u=Math.abs(e-n.right),c=Math.min(c,u);let t;u=r/a*(1+s);if(n.isDash){let e=s-Math.abs(u);t=Math.sqrt(c*c+e*e)}else t=s-Math.sqrt(c*c+u*u);this.data[l+e]=Math.max(0,Math.min(255,t+128))}}}addRegularDash(r){for(let i=r.length-1;0<=i;--i){let e=r[i],t=r[i+1];e.zeroLength?r.splice(i,1):t&&t.isDash===e.isDash&&(t.left=e.left,r.splice(i,1))}let e=r[0],t=r[r.length-1],o=(e.isDash===t.isDash&&(e.left=t.left-this.width,t.right=e.right+this.width),this.width*this.nextRow),a=0,s=r[a];for(let n=0;n<this.width;n++){1<n/s.right&&(s=r[++a]);let e=Math.abs(n-s.left),t=Math.abs(n-s.right),i=Math.min(e,t);this.data[o+n]=Math.max(0,Math.min(255,(s.isDash?i:-i)+128))}}addDash(i,n){let r=n?7:0,e=2*r+1;if(this.nextRow+e>this.height)return W.warnOnce("LineAtlas out of space"),null;let o=0;for(let e=0;e<i.length;e++)o+=i[e];if(0!==o){let e=this.width/o,t=this.getDashRanges(i,this.width,e);n?this.addRoundDash(t,e,r):this.addRegularDash(t)}n={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=e,this.dirty=!0,n}bind(e){e=e.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}class H{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=W.uniqueId();var n=this.workerPool.acquire(this.id);for(let t=0;t<n.length;t++){let e=new H.Actor(n[t],i,this.id);e.name="Worker "+t,this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,n,e){W.asyncAll(this.actors,(e,t)=>{e.send(i,n,t)},e=e||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Z(i,e,n){function t(e,t){if(e)return n(e);if(t){let e=W.pick(W.extend(t,i),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);t.vector_layers&&(e.vectorLayers=t.vector_layers,e.vectorLayerIds=e.vectorLayers.map(e=>e.id)),n(null,e)}}return i.url?W.getJSON(e.transformRequest(i.url,W.ResourceType.Source),t):W.exported.frame(()=>t(null,i))}H.Actor=W.Actor;class G{constructor(e,t,i){this.bounds=W.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=i||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){var t=Math.pow(2,e.z),i=Math.floor(W.mercatorXfromLng(this.bounds.getWest())*t),n=Math.floor(W.mercatorYfromLat(this.bounds.getNorth())*t),r=Math.ceil(W.mercatorXfromLng(this.bounds.getEast())*t),t=Math.ceil(W.mercatorYfromLat(this.bounds.getSouth())*t);return e.x>=i&&e.x<r&&e.y>=n&&e.y<t}}class K extends W.Evented{constructor(e,t,i,n){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,W.extend(this,W.pick(t,["url","scheme","tileSize","promoteId"])),this._options=W.extend({type:"vector"},t),this._collectResourceTiming=t.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}load(){this._loaded=!1,this.fire(new W.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Z(this._options,this.map._requestManager,(e,t)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e?this.fire(new W.ErrorEvent(e)):t&&(W.extend(this,t),t.bounds&&(this.tileBounds=new G(t.bounds,this.minzoom,this.maxzoom)),this.fire(new W.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new W.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return W.extend({},this._options)}loadTile(i,n){var e=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),e={request:this.map._requestManager.transformRequest(e,W.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function t(e,t){return delete i.request,i.aborted?n(null):e&&404!==e.status?n(e):(t&&t.resourceTiming&&(i.resourceTiming=t.resourceTiming),this.map._refreshExpiredTiles&&t&&i.setExpiryData(t),i.loadVectorData(t,this.map.painter),W.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}e.request.collectResourceTiming=this._collectResourceTiming,i.actor&&"expired"!==i.state?"loading"===i.state?i.reloadCallback=n:i.request=i.actor.send("reloadTile",e,t.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",e,t.bind(this)))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class J extends W.Evented{constructor(e,t,i,n){super(),this.id=e,this.dispatcher=i,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=W.extend({type:"raster"},t),W.extend(this,W.pick(t,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new W.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Z(this._options,this.map._requestManager,(e,t)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new W.ErrorEvent(e)):t&&(W.extend(this,t),t.bounds&&(this.tileBounds=new G(t.bounds,this.minzoom,this.maxzoom)),this.fire(new W.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new W.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return W.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(r,o){var e=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=W.getImage(this.map._requestManager.transformRequest(e,W.ResourceType.Tile),(e,i,n)=>{if(delete r.request,r.aborted)r.state="unloaded",o(null);else if(e)r.state="errored",o(e);else if(i){this.map._refreshExpiredTiles&&r.setExpiryData(n);let e=this.map.painter.context,t=e.gl;r.texture=this.map.painter.getTileTexture(i.width),r.texture?r.texture.update(i,{useMipmap:!0}):(r.texture=new O(e,i,t.RGBA,{useMipmap:!0}),r.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE,t.LINEAR_MIPMAP_NEAREST),e.extTextureFilterAnisotropic&&t.texParameterf(t.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax)),r.state="loaded",W.cacheEntryPossiblyAdded(this.dispatcher),o(null)}})}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}let Q;class ee extends J{constructor(e,t,i,n){super(e,t,i,n),this.type="raster-dem",this.maxzoom=22,this._options=W.extend({type:"raster-dem"},t),this.encoding=t.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(n,r){var e=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function o(e,t){e&&(n.state="errored",r(e)),t&&(n.dem=t,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded",r(null))}n.request=W.getImage(this.map._requestManager.transformRequest(e,W.ResourceType.Tile),function(e,i){if(delete n.request,n.aborted)n.state="unloaded",r(null);else if(e)n.state="errored",r(e);else if(i){this.map._refreshExpiredTiles&&n.setExpiryData(i),delete i.cacheControl,delete i.expires;let e=W.isImageBitmap(i)&&(Q=null==Q?"undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap:Q)?i:W.exported.getImageData(i,1),t={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:e,encoding:this.encoding};n.actor&&"expired"!==n.state||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",t,o.bind(this)))}}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)}_getNeighboringTiles(e){var t=e.canonical,i=Math.pow(2,t.z),n=(t.x-1+i)%i,r=0===t.x?e.wrap-1:e.wrap,o=(t.x+1+i)%i,a=t.x+1===i?e.wrap+1:e.wrap,s={};return s[new W.OverscaledTileID(e.overscaledZ,r,t.z,n,t.y).key]={backfilled:!1},s[new W.OverscaledTileID(e.overscaledZ,a,t.z,o,t.y).key]={backfilled:!1},0<t.y&&(s[new W.OverscaledTileID(e.overscaledZ,r,t.z,n,t.y-1).key]={backfilled:!1},s[new W.OverscaledTileID(e.overscaledZ,e.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},s[new W.OverscaledTileID(e.overscaledZ,a,t.z,o,t.y-1).key]={backfilled:!1}),t.y+1<i&&(s[new W.OverscaledTileID(e.overscaledZ,r,t.z,n,t.y+1).key]={backfilled:!1},s[new W.OverscaledTileID(e.overscaledZ,e.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},s[new W.OverscaledTileID(e.overscaledZ,a,t.z,o,t.y+1).key]={backfilled:!1}),s}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})}}class te extends W.Evented{constructor(e,t,i,n){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=i.getActor(),this.setEventedParent(n),this._data=t.data,this._options=W.extend({},t),this._collectResourceTiming=t.collectResourceTiming,void 0!==t.maxzoom&&(this.maxzoom=t.maxzoom),t.type&&(this.type=t.type),t.attribution&&(this.attribution=t.attribution),this.promoteId=t.promoteId;e=W.EXTENT/this.tileSize;this.workerOptions=W.extend({source:this.id,cluster:t.cluster||!1,geojsonVtOptions:{buffer:(void 0!==t.buffer?t.buffer:128)*e,tolerance:(void 0!==t.tolerance?t.tolerance:.375)*e,extent:W.EXTENT,maxZoom:this.maxzoom,lineMetrics:t.lineMetrics||!1,generateId:t.generateId||!1},superclusterOptions:{maxZoom:void 0!==t.clusterMaxZoom?t.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,t.clusterMinPoints||2),extent:W.EXTENT,radius:(t.clusterRadius||50)*e,log:!1,generateId:t.generateId||!1},clusterProperties:t.clusterProperties,filter:t.filter},t.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData("content"),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,i,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:i},n),this}_updateWorkerData(n){var e=W.extend({},this.workerOptions),t=this._data;"string"==typeof t?(e.request=this.map._requestManager.transformRequest(W.exported.resolveURL(t),W.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(t),this._pendingLoads++,this.fire(new W.Event("dataloading",{dataType:"source"})),this.actor.send(this.type+".loadData",e,(t,i)=>{if(this._pendingLoads--,this._removed||i&&i.abandoned)this.fire(new W.Event("dataabort",{dataType:"source",sourceDataType:n}));else{let e=null;i&&i.resourceTiming&&i.resourceTiming[this.id]&&(e=i.resourceTiming[this.id].slice(0)),t?this.fire(new W.ErrorEvent(t)):(i={dataType:"source",sourceDataType:n},this._collectResourceTiming&&e&&0<e.length&&W.extend(i,{resourceTiming:e}),this.fire(new W.Event("data",i)))}})}loaded(){return 0===this._pendingLoads}loadTile(i,n){let r=i.actor?"reloadTile":"loadTile";i.actor=this.actor;var e={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(r,e,(e,t)=>(delete i.request,i.unloadVectorData(),i.aborted?n(null):e?n(e):(i.loadVectorData(t,this.map.painter,"reloadTile"==r),n(null))))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return W.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var n=W.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class b extends W.Evented{constructor(e,t,i,n){super(),this.id=e,this.dispatcher=i,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=t}load(i,n){this._loaded=!1,this.fire(new W.Event("dataloading",{dataType:"source"})),this.url=this.options.url,W.getImage(this.map._requestManager.transformRequest(this.url,W.ResourceType.Image),(e,t)=>{this._loaded=!0,e?this.fire(new W.ErrorEvent(e)):t&&(this.image=t,i&&(this.coordinates=i),n&&n(),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return this.image&&e.url&&(this.options.url=e.url,this.load(e.coordinates,()=>{this.texture=null})),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new W.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}setCoordinates(e){var a=(this.coordinates=e).map(W.MercatorCoordinate.fromLngLat),e=(this.tileID=function(){let t=1/0,i=1/0,n=-1/0,r=-1/0;for(let e of a)t=Math.min(t,e.x),i=Math.min(i,e.y),n=Math.max(n,e.x),r=Math.max(r,e.y);var e=Math.max(n-t,r-i),e=Math.max(0,Math.floor(-Math.log(e)/Math.LN2)),o=Math.pow(2,e);return new W.CanonicalTileID(e,Math.floor((t+n)/2*o),Math.floor((i+r)/2*o))}(),this.minzoom=this.maxzoom=this.tileID.z,a.map(e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new W.RasterBoundsArray,this._boundsArray.emplaceBack(e[0].x,e[0].y,0,0),this._boundsArray.emplaceBack(e[1].x,e[1].y,W.EXTENT,0),this._boundsArray.emplaceBack(e[3].x,e[3].y,0,W.EXTENT),this._boundsArray.emplaceBack(e[2].x,e[2].y,W.EXTENT,W.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new W.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0!==Object.keys(this.tiles).length&&this.image){let e=this.map.painter.context,t=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,n.members)),this.boundsSegments||(this.boundsSegments=W.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new O(e,this.image,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE));for(let t in this.tiles){let e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e).buckets={}:e.state="errored",t(null)}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ie extends b{constructor(e,t,i,n){super(e,t,i,n),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;var e,t=this.options;this.urls=[];for(e of t.urls)this.urls.push(this.map._requestManager.transformRequest(e,W.ResourceType.Source).url);W.getVideo(this.urls,(e,t)=>{this._loaded=!0,e?this.fire(new W.ErrorEvent(e)):t&&(this.video=t,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){var t;this.video&&(e<(t=this.video.seekable).start(0)||e>t.end(0)?this.fire(new W.ErrorEvent(new W.ValidationError("sources."+this.id,null,`Playback for this video can be set only between the ${t.start(0)} and ${t.end(0)}-second mark.`))):this.video.currentTime=e)}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){let e=this.map.painter.context,t=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,n.members)),this.boundsSegments||(this.boundsSegments=W.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new O(e,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE));for(let t in this.tiles){let e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ne extends b{constructor(e,t,i,n){super(e,t,i,n),t.coordinates?Array.isArray(t.coordinates)&&4===t.coordinates.length&&!t.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new W.ErrorEvent(new W.ValidationError("sources."+e,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new W.ErrorEvent(new W.ValidationError("sources."+e,null,'missing required property "coordinates"'))),t.animate&&"boolean"!=typeof t.animate&&this.fire(new W.ErrorEvent(new W.ValidationError("sources."+e,null,'optional "animate" property must be a boolean value'))),t.canvas?"string"==typeof t.canvas||t.canvas instanceof HTMLCanvasElement||this.fire(new W.ErrorEvent(new W.ValidationError("sources."+e,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new W.ErrorEvent(new W.ValidationError("sources."+e,null,'missing required property "canvas"'))),this.options=t,this.animate=void 0===t.animate||t.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new W.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,n.members)),this.boundsSegments||(this.boundsSegments=W.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new O(t,this.canvas,i.RGBA,{premultiply:!0});for(let t in this.tiles){let e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(var e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}let re={vector:K,raster:J,"raster-dem":ee,geojson:te,video:ie,image:b,canvas:ne};function oe(i,t,n,e,r,o){var a,s,l,c=function(e,t,i){if(e)for(var n of e){let e=t[n];if(e&&e.source===i&&"fill-extrusion"===e.type)return!0}else for(let e in t){var r=t[e];if(r.source===i&&"fill-extrusion"===r.type)return!0}return!1}(r&&r.layers,t,i.id),u=o.maxPitchScaleFactor(),c=i.tilesIn(e,u,c),d=(c.sort(ae),[]);for(let e of c)d.push({wrappedTileID:e.tileID.wrapped().key,queryResults:e.tile.queryRenderedFeatures(t,n,i._state,e.queryGeometry,e.cameraQueryGeometry,e.scale,r,o,u,(a=i.transform,s=e.tileID,l=void 0,l=W.create(),W.translate(l,l,[1,1,0]),W.scale(l,l,[.5*a.width,.5*a.height,1]),W.multiply(l,l,a.calculatePosMatrix(s.toUnwrapped()))))});var h=function(e){let n={},r={};for(var o of e){let t=o.queryResults,e=o.wrappedTileID,i=r[e]=r[e]||{};for(let e in t){var a=t[e],s=i[e]=i[e]||{},l=n[e]=n[e]||[];for(let e of a)s[e.featureIndex]||(s[e.featureIndex]=!0,l.push(e))}}return n}(d);for(let e in h)h[e].forEach(e=>{var e=e.feature,t=i.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=t});return h}function ae(e,t){e=e.tileID,t=t.tileID;return e.overscaledZ-t.overscaledZ||e.canonical.y-t.canonical.y||e.wrap-t.wrap||e.canonical.x-t.canonical.x}class se{constructor(e,t){this.tileID=e,this.uid=W.uniqueId(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){e+=this.timeAdded;e<W.exported.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.textures.forEach(e=>t.saveTileTexture(e)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(e,i,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(t)for(var r of e){let i=r.layerIds.map(e=>t.getLayer(e)).filter(Boolean);if(0!==i.length){r.layers=i,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map(t=>i.filter(e=>e.id===t)[0]));for(let e of i)n[e.id]=r}}return n}(e.buckets,i.style),this.hasSymbolBuckets=!1;for(let t in this.buckets){let e=this.buckets[t];if(e instanceof W.SymbolBucket){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let t in this.buckets){let e=this.buckets[t];if(e instanceof W.SymbolBucket&&e.hasRTLText){this.hasRTLText=!0,W.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(let t in this.buckets){let e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(t).queryRadius(e))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new W.CollisionBoxArray}unloadVectorData(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(t){for(let e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}let e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new O(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new O(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,i,n,r,o,a,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*l},e,t,i):{}}querySourceFeatures(r,t){var o=this.latestFeatureIndex;if(o&&o.rawTileData){let e=o.loadVTLayers(),i=t?t.sourceLayer:"",n=e._geojsonTileLayer||e[i];if(n){var a=W.createFilter(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let e=0;e<n.length;e++){let t=n.feature(e);if(a.needGeometry){let e=W.toEvaluationFeature(t,!0);if(!a.filter(new W.EvaluationParameters(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new W.EvaluationParameters(this.tileID.overscaledZ),t))continue;var d=o.getId(t,i),d=new W.GeoJSONFeature(t,s,l,c,d);d.tile=u,r.push(d)}}}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){let n=this.expirationTime;if(i.cacheControl){let e=W.parseCacheControl(i.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){let e=Date.now(),t=!1;this.expirationTime>e?t=!1:n&&!(this.expirationTime<n)&&(i=this.expirationTime-n)?this.expirationTime=e+Math.max(i,3e4):t=!0,t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var i,n,r,o,a=this.latestFeatureIndex.loadVTLayers();for(i in this.buckets)t.style.hasLayer(i)&&(r=a[o=(n=this.buckets[i]).layers[0].sourceLayer||"_geojsonTileLayer"],o=e[o],r)&&o&&0!==Object.keys(o).length&&(n.update(o,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o=t&&t.style&&t.style.getLayer(i))&&(this.queryPadding=Math.max(this.queryPadding,o.queryRadius(n)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<W.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=W.exported.now()+e}setDependencies(e,t){var i={};for(let e of t)i[e]=!0;this.dependencies[e]=i}hasDependency(e,t){for(var i of e){let e=this.dependencies[i];if(e)for(var n of t)if(e[n])return!0}return!1}}class le{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(var e in this.data)for(var t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,i){var n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);let r={value:t,timeout:void 0};if(void 0!==i&&(r.timeout=setTimeout(()=>{this.remove(e,r)},i)),this.data[n].push(r),this.order.push(n),this.order.length>this.max){let e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){e=this.data[e];return e?e[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){var i;return this.has(e)&&(e=e.wrapped().key,t=void 0===t?0:this.data[e].indexOf(t),i=this.data[e][t],this.data[e].splice(t,1),i.timeout&&clearTimeout(i.timeout),0===this.data[e].length&&delete this.data[e],this.onRemove(i.value),this.order.splice(this.order.indexOf(e),1)),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){let e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){var t,i=[];for(t in this.data)for(var n of this.data[t])e(n.value)||i.push(n);for(let e of i)this.remove(e.value.tileID,e)}}class ce{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,i){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},W.extend(this.stateChanges[t][n],i),null===this.deletedStates[t]){this.deletedStates[t]={};for(let e in this.state[t])e!==n&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][n]){this.deletedStates[t][n]={};for(let e in this.state[t][n])i[e]||(this.deletedStates[t][n][e]=null)}else for(let e in i)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][e]&&delete this.deletedStates[t][n][e]}removeFeatureState(e,t,i){if(null!==this.deletedStates[e]){var n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(i in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][i]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}}getState(e,i){var t=String(i),n=W.extend({},(this.state[e]||{})[t],(this.stateChanges[e]||{})[t]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){let t=this.deletedStates[e][i];if(null===t)return{};for(let e in t)delete n[e]}return n}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(t,i){let r={};for(let i in this.stateChanges){this.state[i]=this.state[i]||{};let t={};for(let e in this.stateChanges[i])this.state[i][e]||(this.state[i][e]={}),W.extend(this.state[i][e],this.stateChanges[i][e]),t[e]=this.state[i][e];r[i]=t}for(let n in this.deletedStates){this.state[n]=this.state[n]||{};let i={};if(null===this.deletedStates[n])for(let e in this.state[n])i[e]={},this.state[n][e]={};else for(let t in this.deletedStates[n]){if(null===this.deletedStates[n][t])this.state[n][t]={};else for(let e of Object.keys(this.deletedStates[n][t]))delete this.state[n][t][e];i[t]=this.state[n][t]}r[n]=r[n]||{},W.extend(r[n],i)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(let e in t)t[e].setFeatureState(r,i)}}class r extends W.Evented{constructor(e,t,i){super(),this.id=e,this.dispatcher=i,this.on("data",e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform)&&this.update(this.transform,this.terrain)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(e,t,i,n){t=new re[t.type](e,t,i,n);if(t.id!==e)throw new Error(`Expected Source id to be ${e} instead of `+t.id);return W.bindAll(["load","abort","unload","serialize","prepare"],t),t}(e,t,i,this),this._tiles={},this._cache=new le(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ce}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(!this._sourceErrored){if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){e=this._tiles[e];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){var e;this._paused&&(e=this._shouldReloadOnResume,this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform)&&this.update(this.transform,this.terrain)}_loadTile(e,t){return this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){this._source.abortTile&&this._source.abortTile(e,()=>{}),this._source.fire(new W.Event("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){t=this._tiles[t];t.upload(e),t.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(ue).map(e=>e.key)}getRenderableIds(t){var i=[];for(let e in this._tiles)this._isIdRenderable(e,t)&&i.push(this._tiles[e]);return t?i.sort((e,t)=>{var e=e.tileID,t=t.tileID,i=new W.pointGeometry(e.canonical.x,e.canonical.y)._rotate(this.transform.angle),n=new W.pointGeometry(t.canonical.x,t.canonical.y)._rotate(this.transform.angle);return e.overscaledZ-t.overscaledZ||n.y-i.y||n.x-i.x}).map(e=>e.tileID.key):i.map(e=>e.tileID).sort(ue).map(e=>e.key)}hasRenderableParent(e){e=this.findLoadedParent(e,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}_reloadTile(e,t){var i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))}_tileLoaded(e,t,i,n){n?(e.state="errored",404!==n.status?this._source.fire(new W.ErrorEvent(n,{tile:e})):this.update(this.transform,this.terrain)):(e.timeAdded=W.exported.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new W.Event("data",{dataType:"source",tile:e,coord:e.tileID})))}_backfillDEM(t){let i=this.getRenderableIds();for(let e=0;e<i.length;e++){var n=i[e];if(t.neighboringTiles&&t.neighboringTiles[n]){let e=this.getTileByID(n);r(t,e),r(e,t)}}function r(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let i=t.tileID.canonical.x-e.tileID.canonical.x;var n=t.tileID.canonical.y-e.tileID.canonical.y,r=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===i&&0==n||1<Math.abs(n)||(1<Math.abs(i)&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,n),e.neighboringTiles)&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(n,r,e,o){for(var t in this._tiles){let i=this._tiles[t];if(!(o[t]||!i.hasData()||i.tileID.overscaledZ<=r||i.tileID.overscaledZ>e)){let t=i.tileID;for(;i&&i.tileID.overscaledZ>r+1;){let e=i.tileID.scaledTo(i.tileID.overscaledZ-1);(i=this._tiles[e.key])&&i.hasData()&&(t=e)}let e=t;for(;e.overscaledZ>r;)if(n[(e=e.scaledTo(e.overscaledZ-1)).key]){o[t.key]=t;break}}}}findLoadedParent(n,e){var t;if(n.key in this._loadedParentTiles)return(t=this._loadedParentTiles[n.key])&&t.tileID.overscaledZ>=e?t:null;for(let i=n.overscaledZ-1;i>=e;i--){let e=n.scaledTo(i),t=this._getLoadedTile(e);if(t)return t}}_getLoadedTile(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){var t=Math.ceil(e.width/this._source.tileSize)+1,e=Math.ceil(e.height/this._source.tileSize)+1,t=Math.floor(t*e*5),e="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,t):t;this._cache.setMaxSize(e)}handleWrapJump(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){let e={};for(var i in this._tiles){i=this._tiles[i];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),e[i.tileID.key]=i}this._tiles=e;for(let e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(let e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}}update(n,s){if(this.transform=n,this.terrain=s,this._sourceLoaded&&!this._paused){let t,i=(this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?t=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(e=>new W.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)):(t=n.coveringTiles({tileSize:(this.usedForTerrain?this:this._source).tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s}),this._source.hasTile&&(t=t.filter(e=>this._source.hasTile(e)))):t=[],n.coveringZoomLevel(this._source)),o=Math.max(i-r.maxOverzooming,this._source.minzoom),a=Math.max(i+r.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let n={};for(let i of t)if(i.canonical.z>this._source.minzoom){let e=i.scaledTo(i.canonical.z-1),t=(n[e.key]=e,i.scaledTo(Math.max(this._source.minzoom,Math.min(i.canonical.z,5))));n[t.key]=t}t=t.concat(Object.values(n))}var l=this._updateRetainedTiles(t,i);if(de(this._source.type)){let n={},r={},e=Object.keys(l);for(let i of e){let t=l[i],e=this._tiles[i];if(e&&!(e.fadeEndTime&&e.fadeEndTime<=W.exported.now())){let e=this.findLoadedParent(t,o);e&&(this._addTile(e.tileID),n[e.tileID.key]=e.tileID),r[i]=t}}this._retainLoadedChildren(r,i,a,l);for(let e in n)l[e]||(this._coveredTiles[e]=!0,l[e]=n[e]);if(s){let i={},n={};for(let e of t)this._tiles[e.key].hasData()?i[e.key]=e:n[e.key]=e;for(let t in n){let e=n[t].children(this._source.maxzoom);this._tiles[e[0].key]&&this._tiles[e[1].key]&&this._tiles[e[2].key]&&this._tiles[e[3].key]&&(i[e[0].key]=l[e[0].key]=e[0],i[e[1].key]=l[e[1].key]=e[1],i[e[2].key]=l[e[2].key]=e[2],i[e[3].key]=l[e[3].key]=e[3],delete n[t])}for(let e in n){let t=this.findLoadedParent(n[e],this._source.minzoom);if(t){i[t.tileID.key]=l[t.tileID.key]=t.tileID;for(let e in i)i[e].isChildOf(t.tileID)&&delete i[e]}}for(let e in this._tiles)i[e]||(this._coveredTiles[e]=!0)}}for(let e in l)this._tiles[e].clearFadeHold();let e=W.keysDifference(this._tiles,l);for(let t of e){let e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache()}}releaseSymbolFadeTiles(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,o){let a={},s={},l=Math.max(o-r.maxOverzooming,this._source.minzoom),t=Math.max(o+r.maxUnderzooming,this._source.minzoom),i={};for(let t of e){let e=this._addTile(t);a[t.key]=t,e.hasData()||o<this._source.maxzoom&&(i[t.key]=t)}this._retainLoadedChildren(i,o,t,a);for(let r of e){let n=this._tiles[r.key];if(!n.hasData()){if(o+1>this._source.maxzoom){let e=r.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){a[e.key]=e;continue}}else{let e=r.children(this._source.maxzoom);if(a[e[0].key]&&a[e[1].key]&&a[e[2].key]&&a[e[3].key])continue}let i=n.wasRequested();for(let t=r.overscaledZ-1;t>=l;--t){let e=r.scaledTo(t);if(s[e.key])break;if(s[e.key]=!0,(n=!(n=this.getTile(e))&&i?this._addTile(e):n)&&(a[e.key]=e,i=n.wasRequested(),n.hasData()))break}}}return a}_updateLoadedParentTileCache(){for(var i in this._loadedParentTiles={},this._tiles){var n,r=[];let e,t=this._tiles[i].tileID;for(;0<t.overscaledZ;){if(t.key in this._loadedParentTiles){e=this._loadedParentTiles[t.key];break}r.push(t.key);var o=t.scaledTo(t.overscaledZ-1);if(e=this._getLoadedTile(o))break;t=o}for(n of r)this._loadedParentTiles[n]=e}}_addTile(e){let t=this._tiles[e.key];var i;return t||((t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key])&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)),(i=t)||(t=new se(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t.uses++,this._tiles[e.key]=t,i)||this._source.fire(new W.Event("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);t=t.getExpiryTimeout();t&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},t))}_removeTile(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),0<t.uses||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(i,d,n){let h=[],p=this.transform;if(p){let e=n?p.getCameraQueryGeometry(i):i,o=i.map(e=>p.pointCoordinate(e,this.terrain)),a=e.map(e=>p.pointCoordinate(e,this.terrain)),t=this.getIds(),s=1/0,l=1/0,c=-1/0,u=-1/0;for(let e of a)s=Math.min(s,e.x),l=Math.min(l,e.y),c=Math.max(c,e.x),u=Math.max(u,e.y);for(let e=0;e<t.length;e++){let r=this._tiles[t[e]];if(!r.holdingForFade()){let i=r.tileID,n=Math.pow(2,p.zoom-r.tileID.overscaledZ),e=d*r.queryPadding*W.EXTENT/r.tileSize/n,t=[i.getTilePoint(new W.MercatorCoordinate(s,l)),i.getTilePoint(new W.MercatorCoordinate(c,u))];if(t[0].x-e<W.EXTENT&&t[0].y-e<W.EXTENT&&0<=t[1].x+e&&0<=t[1].y+e){let e=o.map(e=>i.getTilePoint(e)),t=a.map(e=>i.getTilePoint(e));h.push({tile:r,tileID:i,queryGeometry:e,cameraQueryGeometry:t,scale:n})}}}}return h}getVisibleCoordinates(e){var t=this.getRenderableIds(e).map(e=>this._tiles[e].tileID);for(let e of t)e.posMatrix=this.transform.calculatePosMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(de(this._source.type))for(var e in this._tiles){e=this._tiles[e];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=W.exported.now())return!0}return!1}setFeatureState(e,t,i){this._state.updateState(e=e||"_geojsonTileLayer",t,i)}removeFeatureState(e,t,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,i)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,i){e=this._tiles[e];e&&e.setDependencies(t,i)}reloadTilesForDependencies(t,i){for(var e in this._tiles)this._tiles[e].hasDependency(t,i)&&this._reloadTile(e,"reloading");this._cache.filter(e=>!e.hasDependency(t,i))}}function ue(e,t){var i=Math.abs(2*e.wrap)-(e.wrap<0),n=Math.abs(2*t.wrap)-(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-i||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function de(e){return"raster"===e||"image"===e||"video"===e}r.maxOverzooming=10,r.maxUnderzooming=3;let he="mapboxgl_preloaded_worker_pool";class t{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<t.workerCount;)this.workers.push(new Worker(Gn.workerUrl));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[he]}numActive(){return Object.keys(this.active).length}}var pe=Math.floor(W.exported.hardwareConcurrency/2);let i;function fe(){return i=i||new t}function me(t){t=t.slice();var i=Object.create(null);for(let e=0;e<t.length;e++)i[t[e].id]=t[e];for(let e=0;e<t.length;e++)"ref"in t[e]&&(t[e]=function(t,i){let n={};for(let e in t)"ref"!==e&&(n[e]=t[e]);return W.refProperties.forEach(e=>{e in i&&(n[e]=i[e])}),n}(t[e],i[t[e].ref]));return t}t.workerCount=Math.max(Math.min(pe,6),1);let S={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ge(e,t,i){i.push({command:S.addSource,args:[e,t[e]]})}function ve(e,t,i){t.push({command:S.removeSource,args:[e]}),i[e]=!0}function k(e,t,i,n,r,o){let a;for(a in t=t||{},e=e||{})!Object.prototype.hasOwnProperty.call(e,a)||T(e[a],t[a])||i.push({command:o,args:[n,a,t[a],r]});for(a in t)!Object.prototype.hasOwnProperty.call(t,a)||Object.prototype.hasOwnProperty.call(e,a)||T(e[a],t[a])||i.push({command:o,args:[n,a,t[a],r]})}function _e(e){return e.id}function ye(e,t){return e[t.id]=t,e}class be{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=W.clamp(e,0,1);let t=1,i=this._distances[t];for(var n=e*this.paddedLength+this.padding;i<n&&t<this._distances.length;)i=this._distances[++t];var e=t-1,r=this._distances[e],o=i-r,r=0<o?(n-r)/o:0;return this.points[e].mult(1-r).add(this.points[t].mult(r))}}function m(e,t){let i="always"===e||"never"!==e&&"never"!==t?!0:!1;return i}class xe{constructor(e,t,i){var n=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(let e=0;e<this.xCellCount*this.yCellCount;e++)n.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,i,n,r){this._forEachCell(t,i,n,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)}insertCircle(e,t,i,n){this._forEachCell(t-n,i-n,t+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(n)}_insertBoxCell(e,t,i,n,r,o){this.boxCells[r].push(o)}_insertCircleCell(e,t,i,n,r,o){this.circleCells[r].push(o)}_query(e,t,i,n,r,o,a){if(i<0||e>this.width||n<0||t>this.height)return[];var s=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=n){if(r)return[{key:null,x1:e,y1:t,x2:i,y2:n}];for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let n=0;n<this.circleKeys.length;n++){let e=this.circles[3*n],t=this.circles[3*n+1],i=this.circles[3*n+2];s.push({key:this.circleKeys[n],x1:e-i,y1:t-i,x2:e+i,y2:t+i})}}else this._forEachCell(e,t,i,n,this._queryCell,s,{hitTest:r,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(e,t,i,n){return this._query(e,t,i,n,!1,null)}hitTest(e,t,i,n,r,o){return 0<this._query(e,t,i,n,!0,r,o).length}hitTestCircle(e,t,i,n,r){var o=e-i,a=e+i,s=t-i,l=t+i;return!(a<0||o>this.width||l<0||s>this.height)&&(this._forEachCell(o,s,a,l,this._queryCellCircle,o=[],{hitTest:!0,overlapMode:n,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},r),0<o.length)}_queryCell(a,s,l,c,e,u,t,d){let{seenUids:h,hitTest:p,overlapMode:f}=t,r=this.boxCells[e];if(null!==r){let n=this.bboxes;for(let i of r)if(!h.box[i]){h.box[i]=!0;let e=4*i,t=this.boxKeys[i];if(a<=n[2+e]&&s<=n[3+e]&&l>=n[0+e]&&c>=n[1+e]&&(!d||d(t))&&(!p||!m(f,t.overlapMode))&&(u.push({key:t,x1:n[e],y1:n[1+e],x2:n[2+e],y2:n[3+e]}),p))return!0}}let i=this.circleCells[e];if(null!==i){let o=this.circles;for(let e of i)if(!h.circle[e]){h.circle[e]=!0;let n=3*e,r=this.circleKeys[e];if(this._circleAndRectCollide(o[n],o[1+n],o[2+n],a,s,l,c)&&(!d||d(r))&&(!p||!m(f,r.overlapMode))){let e=o[n],t=o[1+n],i=o[2+n];if(u.push({key:r,x1:e-i,y1:t-i,x2:e+i,y2:t+i}),p)return!0}}}return!1}_queryCellCircle(e,t,i,n,r,o,a,s){var{circle:l,seenUids:c,overlapMode:u}=a,a=this.boxCells[r];if(null!==a){let n=this.bboxes;for(let i of a)if(!c.box[i]){c.box[i]=!0;let e=4*i,t=this.boxKeys[i];if(this._circleAndRectCollide(l.x,l.y,l.radius,n[0+e],n[1+e],n[2+e],n[3+e])&&(!s||s(t))&&!m(u,t.overlapMode))return o.push(!0),!0}}a=this.circleCells[r];if(null!==a){let n=this.circles;for(let i of a)if(!c.circle[i]){c.circle[i]=!0;let e=3*i,t=this.circleKeys[i];if(this._circlesCollide(n[e],n[1+e],n[2+e],l.x,l.y,l.radius)&&(!s||s(t))&&!m(u,t.overlapMode))return o.push(!0),!0}}}_forEachCell(i,n,r,o,a,s,l,c){var e=this._convertToXCellCoord(i),u=this._convertToYCellCoord(n),d=this._convertToXCellCoord(r),h=this._convertToYCellCoord(o);for(let t=e;t<=d;t++)for(let e=u;e<=h;e++)if(a.call(this,i,n,r,o,this.xCellCount*e+t,s,l,c))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,i,n,r,o){n-=e,e=r-t,r=i+o;return n*n+e*e<r*r}_circleAndRectCollide(e,t,i,n,r,o,a){o=(o-n)/2,e=Math.abs(e-(n+o));return!(o+i<e||(n=(a-r)/2)+i<(a=Math.abs(t-(r+n)))||!(e<=o||a<=n||(t=e-o)*t+(r=a-n)*r<=i*i))}}function we(e,t,i,n,r){var o=W.create();return t?(W.scale(o,o,[1/r,1/r,1]),i||W.rotateZ(o,o,n.angle)):W.multiply(o,n.labelPlaneMatrix,e),o}function Ce(t,e,i,n,r){if(e){let e=W.clone(t);return W.scale(e,e,[r,r,1]),i||W.rotateZ(e,e,-n.angle),e}return n.glCoordMatrix}function E(e,t,i){let n;i?(n=[e.x,e.y,i(e.x,e.y),1],W.transformMat4(n,n,t)):Ie(n=[e.x,e.y,0,1],n,t);i=n[3];return{point:new W.pointGeometry(n[0]/i,n[1]/i),signedDistanceFromCamera:i}}function Te(e,t){return.5+e/t*.5}function Se(t,i,n,e,r,o,a,s,l,c){var u=e?t.textSizeData:t.iconSizeData,d=W.evaluateSizeForZoom(u,n.transform.zoom),h=[256/n.width*2+1,256/n.height*2+1],p=(e?t.text:t.icon).dynamicLayoutVertexArray,f=(p.clear(),t.lineVertexArray),m=(e?t.text:t.icon).placedSymbolArray,g=n.transform.width/n.transform.height;let v=!1;for(let e=0;e<m.length;e++){var _,y,b,x,w,C=m.get(e);if(C.hidden||C.writingMode===W.WritingMode.vertical&&!v)A(C.numGlyphs,p);else{let e;v=!1,c?(e=[C.anchorX,C.anchorY,c(C.anchorX,C.anchorY),1],W.transformMat4(e,e,i)):Ie(e=[C.anchorX,C.anchorY,0,1],e,i),y=e,_=h,b=void 0,b=y[0]/y[3],y=y[1]/y[3],(!(b>=-_[0]&&b<=_[0]&&y>=-_[1]&&y<=_[1])||(b=Te(n.transform.cameraToCenterDistance,e[3]),y=W.evaluateSizeForFeature(u,d,C),_=a?y/b:y*b,b=E(y=new W.pointGeometry(C.anchorX,C.anchorY),r,c).point,w=Ae(C,_,!(x={}),s,i,r,o,t.glyphOffsetArray,f,p,b,y,x,g,l,c),v=w.useVertical,w.notEnoughRoom)||v||w.needsFlipping&&Ae(C,_,!0,s,i,r,o,t.glyphOffsetArray,f,p,b,y,x,g,l,c).notEnoughRoom)&&A(C.numGlyphs,p)}}(e?t.text:t.icon).dynamicLayoutVertexBuffer.updateData(p)}function ke(e,t,i,n,r,o,a,s,l,c,u,d,h){var p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),t=t.getoffsetX(p-1),p=C(e*g,i,n,r,o,a,s.segment,f,m,l,c,u,d,h);return p&&(g=C(e*t,i,n,r,o,a,s.segment,f,m,l,c,u,d,h))?{first:p,last:g}:null}function Ee(e,t,i,n){return e===W.WritingMode.horizontal&&Math.abs(i.y-t.y)>Math.abs(i.x-t.x)*n?{useVertical:!0}:(e===W.WritingMode.vertical?t.y<i.y:t.x>i.x)?{needsFlipping:!0}:null}function Ae(a,e,r,o,s,l,c,u,d,t,h,p,f,m,g,v){var _=e/24,y=a.lineOffsetX*_,b=a.lineOffsetY*_;let x;if(1<a.numGlyphs){let t=a.glyphStartIndex+a.numGlyphs,i=a.lineStartIndex,n=a.lineStartIndex+a.lineLength,e=ke(_,u,y,b,r,h,p,a,d,l,f,g,v);if(!e)return{notEnoughRoom:!0};var w=E(e.first.point,c,v).point,c=E(e.last.point,c,v).point;if(o&&!r){let e=Ee(a.writingMode,w,c,m);if(e)return e}x=[e.first];for(let e=a.glyphStartIndex+1;e<t-1;e++)x.push(C(_*u.getoffsetX(e),y,b,r,h,p,a.segment,i,n,d,l,f,g,v));x.push(e.last)}else{if(o&&!r){let e=E(p,s,v).point,t=a.lineStartIndex+a.segment+1,i=new W.pointGeometry(d.getx(t),d.gety(t)),n=E(i,s,v),r=0<n.signedDistanceFromCamera?n.point:Pe(p,i,e,1,s,v),o=Ee(a.writingMode,e,r,m);if(o)return o}let e=C(_*u.getoffsetX(a.glyphStartIndex),y,b,r,h,p,a.segment,a.lineStartIndex,a.lineStartIndex+a.lineLength,d,l,f,g,v);if(!e)return{notEnoughRoom:!0};x=[e]}for(let e of x)W.addDynamicAttributes(t,e.point,e.angle);return{}}function Pe(e,t,i,n,r,o){e=E(e.add(e.sub(t)._unit()),r,o).point,t=i.sub(e);return i.add(t._mult(n/t.mag()))}function C(e,t,i,n,r,o,a,s,l,c,u,d,h,p){e=n?e-t:e+t;let f=0<e?1:-1,m=0,g=(n&&(f*=-1,m=Math.PI),f<0&&(m+=Math.PI),0<f?s+a:s+a+1),v=r,_=r,y=0,b=0;for(var x=Math.abs(e),w=[];y+b<=x;){if((g+=f)<s||g>=l)return null;if(_=v,w.push(v),void 0===(v=d[g])){let t=new W.pointGeometry(c.getx(g),c.gety(g)),e=E(t,u,p);if(0<e.signedDistanceFromCamera)v=d[g]=e.point;else{let e=g-f;v=Pe(0===y?o:new W.pointGeometry(c.getx(e),c.gety(e)),t,_,x-y+1,u,p)}}y+=b,b=_.dist(v)}t=(x-y)/b,n=v.sub(_),a=n.mult(t)._add(_),a._add(n._unit()._perp()._mult(i*f)),r=m+Math.atan2(v.y-_.y,v.x-_.x);return w.push(a),{point:a,angle:h?r:0,path:w}}let Me=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function A(t,i){for(let e=0;e<t;e++){let e=i.length;i.resize(e+4),i.float32.set(Me,3*e)}}function Ie(e,t,i){var n=t[0],t=t[1];e[0]=i[0]*n+i[4]*t+i[12],e[1]=i[1]*n+i[5]*t+i[13],e[3]=i[3]*n+i[7]*t+i[15]}class De{constructor(e,t=new xe(e.width+200,e.height+200,25),i=new xe(e.width+200,e.height+200,25)){this.transform=e,this.grid=t,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,i,n,r,o){var n=this.projectAndGetPerspectiveRatio(n,e.anchorPointX,e.anchorPointY,o),o=i*n.perspectiveRatio,i=e.x1*o+n.point.x,a=e.y1*o+n.point.y,s=e.x2*o+n.point.x,e=e.y2*o+n.point.y;return!this.isInsideGrid(i,a,s,e)||"always"!==t&&this.grid.hitTest(i,a,s,e,t,r)||n.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[i,a,s,e],offscreen:this.isOffscreen(i,a,s,e)}}placeCollisionCircles(d,e,t,i,n,r,o,s,h,a,p,l,f,m){let g=[],c=new W.pointGeometry(e.anchorX,e.anchorY),u=E(c,r,m),v=Te(this.transform.cameraToCenterDistance,u.signedDistanceFromCamera),_=(a?n/v:n*v)/W.ONE_EM,y=E(c,o,m).point,b=ke(_,i,e.lineOffsetX*_,e.lineOffsetY*_,!1,y,c,e,t,o,{},!1,m),x=!1,w=!1,C=!0;if(b){let c=.5*l*v+f,e=new W.pointGeometry(-100,-100),n=new W.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),u=new be,t=b.first,i=b.last,r=[];for(let e=t.path.length-1;1<=e;e--)r.push(t.path[e]);for(let e=1;e<i.path.length;e++)r.push(i.path[e]);let o=2.5*c;if(s){let e=r.map(e=>E(e,s,m));r=e.some(e=>e.signedDistanceFromCamera<=0)?[]:e.map(e=>e.point)}let a=[];if(0<r.length){let t=r[0].clone(),i=r[0].clone();for(let e=1;e<r.length;e++)t.x=Math.min(t.x,r[e].x),t.y=Math.min(t.y,r[e].y),i.x=Math.max(i.x,r[e].x),i.y=Math.max(i.y,r[e].y);a=t.x>=e.x&&i.x<=n.x&&t.y>=e.y&&i.y<=n.y?[r]:i.x<e.x||t.x>n.x||i.y<e.y||t.y>n.y?[]:W.clipLine([r],e.x,e.y,n.x,n.y)}for(let e of a){u.reset(e,.25*c);var T=u.length<=.5*c?1:Math.ceil(u.paddedLength/o)+1;for(let l=0;l<T;l++){let e=l/Math.max(T-1,1),t=u.lerp(e),i=t.x+100,n=t.y+100,r=(g.push(i,n,c,0),i-c),o=n-c,a=i+c,s=n+c;if(C=C&&this.isOffscreen(r,o,a,s),w=w||this.isInsideGrid(r,o,a,s),"always"!==d&&this.grid.hitTestCircle(i,n,c,d,p)&&(x=!0,!h))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!h&&x||!w||v<this.perspectiveRatioCutoff?[]:g,offscreen:C,collisionDetected:x}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n=[];let i=1/0,r=1/0,o=-1/0,a=-1/0;for(let t of e){let e=new W.pointGeometry(t.x+100,t.y+100);i=Math.min(i,e.x),r=Math.min(r,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}let t=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a)),s={},l={};for(let i of t){let t=i.key;if(void 0===s[t.bucketInstanceId]&&(s[t.bucketInstanceId]={}),!s[t.bucketInstanceId][t.featureIndex]){let e=[new W.pointGeometry(i.x1,i.y1),new W.pointGeometry(i.x2,i.y1),new W.pointGeometry(i.x2,i.y2),new W.pointGeometry(i.x1,i.y2)];W.polygonIntersectsPolygon(n,e)&&(s[t.bucketInstanceId][t.featureIndex]=!0,void 0===l[t.bucketInstanceId]&&(l[t.bucketInstanceId]=[]),l[t.bucketInstanceId].push(t.featureIndex))}}return l}insertCollisionBox(e,t,i,n,r,o){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(t,e,i,n,r,o){var a=i?this.ignoredGrid:this.grid,s={bucketInstanceId:n,featureIndex:r,collisionGroupID:o,overlapMode:e};for(let e=0;e<t.length;e+=4)a.insertCircle(s,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,t,i,n){let r;return n?(r=[t,i,n(t,i),1],W.transformMat4(r,r,e)):Ie(r=[t,i,0,1],r,e),{point:new W.pointGeometry((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}}isOffscreen(e,t,i,n){return i<100||e>=this.screenRightBoundary||n<100||t>this.screenBottomBoundary}isInsideGrid(e,t,i,n){return 0<=i&&e<this.gridRightBoundary&&0<=n&&t<this.gridBottomBoundary}getViewportMatrix(){var e=W.identity([]);return W.translate(e,e,[-100,-100,0]),e}}function X(e,t,i){return t*(W.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}class Le{constructor(e,t,i,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):n&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class s{constructor(e,t,i,n,r){this.text=new Le(e?e.text:null,t,i,r),this.icon=new Le(e?e.icon:null,t,n,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ze{constructor(e,t,i){this.text=e,this.icon=t,this.skipFade=i}}class Re{constructor(){this.invProjMatrix=W.create(),this.viewportMatrix=W.create(),this.circles=[]}}class Oe{constructor(e,t,i,n,r){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=n,this.tileID=r}}class Be{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){let t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Fe(e,t,i,n,r){var{horizontalAlign:o,verticalAlign:a}=W.getAnchorAlignment(e),o=-(o-.5)*t,t=-(a-.5)*i,a=W.evaluateVariableOffset(e,n);return new W.pointGeometry(o+a[0]*r,t+a[1]*r)}function Ne(e,t,i,n,r,o){var{x1:e,x2:a,y1:s,y2:l,anchorPointX:c,anchorPointY:u}=e,t=new W.pointGeometry(t,i);return n&&t._rotate(r?o:-o),{x1:e+t.x,y1:s+t.y,x2:a+t.x,y2:l+t.y,anchorPointX:c,anchorPointY:u}}class je{constructor(e,t,i,n,r){this.transform=e.clone(),this.terrain=t,this.collisionIndex=new De(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new Be(n),this.collisionCircleArrays={},(this.prevPlacement=r)&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,e,i,n){var o=i.getBucket(e),a=i.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var e=i.collisionBoxArray,s=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),c=i.tileSize/W.EXTENT,u=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),d="map"===s.get("text-pitch-alignment"),h="map"===s.get("text-rotation-alignment"),p=X(i,1,this.transform.zoom),f=we(u,d,h,this.transform,p);let t=null;if(d){let e=Ce(u,d,h,this.transform,p);t=W.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new Oe(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);var m={bucket:o,layout:s,posMatrix:u,textLabelPlaneMatrix:f,labelToScreenMatrix:t,scale:l,textPixelRatio:c,holdingForFade:i.holdingForFade(),collisionBoxArray:e,partiallyEvaluatedTextSize:W.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(n)for(let n of o.sortKeyRanges){let{sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:i}=n;r.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:i,parameters:m})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:m})}}attemptAnchorPlacement(t,i,n,r,o,e,a,s,l,c,u,d,h,p,f,m){var g=[d.textOffset0,d.textOffset1],v=Fe(t,n,r,g,o),i=this.collisionIndex.placeCollisionBox(Ne(i,v.x,v.y,e,a,this.transform.angle),u,s,l,c.predicate,m);if((!f||0!==this.collisionIndex.placeCollisionBox(Ne(f,v.x,v.y,e,a,this.transform.angle),u,s,l,c.predicate,m).box.length)&&0<i.box.length){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID].text&&(e=this.prevPlacement.variableOffsets[d.crossTileID].anchor),0===d.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[d.crossTileID]={textOffset:g,width:n,height:r,anchor:t,textBoxScale:o,prevAnchor:e},this.markUsedJustification(h,t,d,p),h.allowVerticalPlacement&&(this.markUsedOrientation(h,p,d),this.placedOrientations[d.crossTileID]=p),{shift:v,placedGlyphBoxes:i}}}placeLayerBucketPart(t,y,b){let{bucket:x,layout:w,posMatrix:C,textLabelPlaneMatrix:T,labelToScreenMatrix:S,textPixelRatio:k,holdingForFade:e,collisionBoxArray:i,partiallyEvaluatedTextSize:E,collisionGroup:A}=t.parameters,P=w.get("text-optional"),M=w.get("icon-optional"),I=W.getOverlapMode(w,"text-overlap","text-allow-overlap"),D="always"===I,L=W.getOverlapMode(w,"icon-overlap","icon-allow-overlap"),n="always"===L,z="map"===w.get("text-rotation-alignment"),R="map"===w.get("text-pitch-alignment"),O="none"!==w.get("icon-text-fit"),r="viewport-y"===w.get("symbol-z-order"),B=D&&(n||!x.hasIconData()||M),F=n&&(D||!x.hasTextData()||P);!x.collisionArrays&&i&&x.deserializeCollisionBoxes(i);var o=(m,g)=>{if(!y[m.crossTileID])if(e)this.placements[m.crossTileID]=new ze(!1,!1,!1);else{let d=!1,t=!1,r=!0,h=null,o={box:null,offscreen:null},a={box:null,offscreen:null},e,n=null,i=null,s=0,l=0,c=0,u=(g.textFeatureIndex?s=g.textFeatureIndex:m.useRuntimeCollisionCircles&&(s=m.featureIndex),g.verticalTextFeatureIndex&&(l=g.verticalTextFeatureIndex),this.retainedQueryData[x.bucketInstanceId].tileID),p=this.terrain?(e,t)=>this.terrain.getElevation(u,e,t):null;for(let t of["textBox","verticalTextBox","iconBox","verticalIconBox"]){let e=g[t];e&&(e.elevation=p?p(e.anchorPointX,e.anchorPointY):0)}let f=g.textBox;if(f){let e=e=>{let t=W.WritingMode.horizontal;if(x.allowVerticalPlacement&&!e&&this.prevPlacement){let e=this.prevPlacement.placedOrientations[m.crossTileID];e&&(this.placedOrientations[m.crossTileID]=e,t=e,this.markUsedOrientation(x,t,m))}return t},n=(t,i)=>{if(x.allowVerticalPlacement&&0<m.numVerticalGlyphVertices&&g.verticalTextBox){for(let e of x.writingModes)if(e===W.WritingMode.vertical?(o=i(),a=o):o=t(),o&&o.box&&o.box.length)break}else o=t()};if(w.get("text-variable-anchor")){let u=w.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[m.crossTileID]){let t=this.prevPlacement.variableOffsets[m.crossTileID];0<u.indexOf(t.anchor)&&(u=u.filter(e=>e!==t.anchor)).unshift(t.anchor)}let t=(i,e,n)=>{var r=i.x2-i.x1,o=i.y2-i.y1,a=m.textBoxScale,s=O&&"never"===L?e:null;let l={box:[],offscreen:!1},c="never"!==I?2*u.length:u.length;for(let t=0;t<c;++t){let e=this.attemptAnchorPlacement(u[t%u.length],i,r,o,a,z,R,k,C,A,t>=u.length?I:"never",m,x,n,s,p);if(e&&(l=e.placedGlyphBoxes)&&l.box&&l.box.length){d=!0,h=e.shift;break}}return l},i=(n(()=>t(f,g.iconBox,W.WritingMode.horizontal),()=>{var e=g.verticalTextBox;return x.allowVerticalPlacement&&!(o&&o.box&&o.box.length)&&0<m.numVerticalGlyphVertices&&e?t(e,g.verticalIconBox,W.WritingMode.vertical):{box:null,offscreen:null}}),o&&(d=o.box,r=o.offscreen),e(o&&o.box));if(!d&&this.prevPlacement){let e=this.prevPlacement.variableOffsets[m.crossTileID];e&&(this.variableOffsets[m.crossTileID]=e,this.markUsedJustification(x,e.anchor,m,i))}}else{let t=(e,t)=>{e=this.collisionIndex.placeCollisionBox(e,I,k,C,A.predicate,p);return e&&e.box&&e.box.length&&(this.markUsedOrientation(x,t,m),this.placedOrientations[m.crossTileID]=t),e};n(()=>t(f,W.WritingMode.horizontal),()=>{var e=g.verticalTextBox;return x.allowVerticalPlacement&&0<m.numVerticalGlyphVertices&&e?t(e,W.WritingMode.vertical):{box:null,offscreen:null}}),e(o&&o.box&&o.box.length)}}if(e=o,d=e&&e.box&&0<e.box.length,r=e&&e.offscreen,m.useRuntimeCollisionCircles){let e=x.text.placedSymbolArray.get(m.centerJustifiedTextSymbolIndex),t=W.evaluateSizeForFeature(x.textSizeData,E,e),i=w.get("text-padding");(n=this.collisionIndex.placeCollisionCircles(I,e,x.lineVertexArray,x.glyphOffsetArray,t,C,T,S,b,R,A.predicate,m.collisionCircleDiameter,i,p)).circles.length&&n.collisionDetected&&!b&&W.warnOnce("Collisions detected, but collision boxes are not shown"),d=D||0<n.circles.length&&!n.collisionDetected,r=r&&n.offscreen}if(g.iconFeatureIndex&&(c=g.iconFeatureIndex),g.iconBox){let e=e=>{e=O&&h?Ne(e,h.x,h.y,z,R,this.transform.angle):e;return this.collisionIndex.placeCollisionBox(e,L,k,C,A.predicate,p)};t=0<(i=a&&a.box&&a.box.length&&g.verticalIconBox?e(g.verticalIconBox):e(g.iconBox)).box.length,r=r&&i.offscreen}var v=P||0===m.numHorizontalGlyphVertices&&0===m.numVerticalGlyphVertices,_=M||0===m.numIconVertices;if(v||_?_?v||(t=t&&d):d=t&&d:t=d=t&&d,d&&e&&e.box&&this.collisionIndex.insertCollisionBox(e.box,I,w.get("text-ignore-placement"),x.bucketInstanceId,a&&a.box&&l?l:s,A.ID),t&&i&&this.collisionIndex.insertCollisionBox(i.box,L,w.get("icon-ignore-placement"),x.bucketInstanceId,c,A.ID),n&&(d&&this.collisionIndex.insertCollisionCircles(n.circles,I,w.get("text-ignore-placement"),x.bucketInstanceId,s,A.ID),b)){let e=x.bucketInstanceId,t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Re);for(let e=0;e<n.circles.length;e+=4)t.circles.push(n.circles[e+0]),t.circles.push(n.circles[e+1]),t.circles.push(n.circles[e+2]),t.circles.push(n.collisionDetected?1:0)}if(0===m.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===x.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[m.crossTileID]=new ze(d||B,t||F,r||x.justReloaded),y[m.crossTileID]=!0}};if(r){if(0!==t.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");let i=x.getSortedSymbolIndexes(this.transform.angle);for(let t=i.length-1;0<=t;--t){let e=i[t];o(x.symbolInstances.get(e),x.collisionArrays[e])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)o(x.symbolInstances.get(e),x.collisionArrays[e]);if(b&&x.bucketInstanceId in this.collisionCircleArrays){let e=this.collisionCircleArrays[x.bucketInstanceId];W.invert(e.invProjMatrix,C),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}x.justReloaded=!1}markUsedJustification(t,e,i,n){var r=n===W.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[W.getAnchorJustification(e)];for(let e of[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex])0<=e&&(t.text.placedSymbolArray.get(e).crossTileID=0<=r&&e!==r?0:i.crossTileID)}markUsedOrientation(t,e,i){var n=e===W.WritingMode.horizontal||e===W.WritingMode.horizontalOnly?e:0,e=e===W.WritingMode.vertical?e:0;for(let e of[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex])t.text.placedSymbolArray.get(e).placedOrientation=n;i.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=e)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;let t=this.prevPlacement,n=!1,r=(this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0,t?t.symbolFadeChange(e):1),o=t?t.opacities:{},i=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(let i in this.placements){let e=this.placements[i],t=o[i];n=t?(this.opacities[i]=new s(t,r,e.text,e.icon),n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[i]=new s(null,r,e.text,e.icon,e.skipFade),n||e.text||e.icon)}for(let i in o){let t=o[i];if(!this.opacities[i]){let e=new s(t,r,!1,!1);e.isHidden()||(this.opacities[i]=e,n=n||t.text.placed||t.icon.placed)}}for(let e in i)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=i[e]);for(let e in a)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=a[e]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(t,e){var i,n={};for(i of e){let e=i.getBucket(t);e&&i.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,i.collisionBoxArray)}}updateBucketOpacities(h,i,e){h.hasTextData()&&h.text.opacityVertexArray.clear(),h.hasIconData()&&h.icon.opacityVertexArray.clear(),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexArray.clear(),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexArray.clear();let t=h.layers[0].layout,n=new s(null,0,!1,!1,!0),r=t.get("text-allow-overlap"),o=t.get("icon-allow-overlap"),p=t.get("text-variable-anchor"),f="map"===t.get("text-rotation-alignment"),m="map"===t.get("text-pitch-alignment"),g="none"!==t.get("icon-text-fit"),v=new s(null,0,r&&(o||!h.hasIconData()||t.get("icon-optional")),o&&(r||!h.hasTextData()||t.get("text-optional")),!0);!h.collisionArrays&&e&&(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData())&&h.deserializeCollisionBoxes(e);var _=(t,i,n)=>{for(let e=0;e<i/4;e++)t.opacityVertexArray.emplaceBack(n)};for(let t=0;t<h.symbolInstances.length;t++){let r=h.symbolInstances.get(t),{numHorizontalGlyphVertices:o,numVerticalGlyphVertices:a,crossTileID:s}=r,l=this.opacities[s],e=(i[s]?l=n:l||(l=v,this.opacities[s]=l),i[s]=!0,0<r.numIconVertices),c=this.placedOrientations[r.crossTileID],u=c===W.WritingMode.vertical,d=c===W.WritingMode.horizontal||c===W.WritingMode.horizontalOnly;if(0<o||0<a){let e=We(l.text),t=(_(h.text,o,u?w:e),_(h.text,a,d?w:e),l.text.isHidden()),i=([r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach(e=>{0<=e&&(h.text.placedSymbolArray.get(e).hidden=t||u?1:0)}),0<=r.verticalPlacedTextSymbolIndex&&(h.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=t||d?1:0),this.variableOffsets[r.crossTileID]),n=(i&&this.markUsedJustification(h,i.anchor,r,c),this.placedOrientations[r.crossTileID]);n&&(this.markUsedJustification(h,"left",r,n),this.markUsedOrientation(h,n,r))}if(e){let e=We(l.icon),t=!(g&&r.verticalPlacedIconSymbolIndex&&u);0<=r.placedIconSymbolIndex&&(_(h.icon,r.numIconVertices,t?e:w),h.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=l.icon.isHidden()),0<=r.verticalPlacedIconSymbolIndex&&(_(h.icon,r.numVerticalIconVertices,t?w:e),h.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}if(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData()){let n=h.collisionArrays[t];if(n){let i=new W.pointGeometry(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(p){let e=this.variableOffsets[s];e?(i=Fe(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),f&&i._rotate(m?this.transform.angle:-this.transform.angle)):t=!1}n.textBox&&x(h.textCollisionBox.collisionVertexArray,l.text.placed,!t||u,i.x,i.y),n.verticalTextBox&&x(h.textCollisionBox.collisionVertexArray,l.text.placed,!t||d,i.x,i.y)}let e=Boolean(!d&&n.verticalIconBox);n.iconBox&&x(h.iconCollisionBox.collisionVertexArray,l.icon.placed,e,g?i.x:0,g?i.y:0),n.verticalIconBox&&x(h.iconCollisionBox.collisionVertexArray,l.icon.placed,!e,g?i.x:0,g?i.y:0)}}}if(h.sortFeatures(this.transform.angle),this.retainedQueryData[h.bucketInstanceId]&&(this.retainedQueryData[h.bucketInstanceId].featureSortOrder=h.featureSortOrder),h.hasTextData()&&h.text.opacityVertexBuffer&&h.text.opacityVertexBuffer.updateData(h.text.opacityVertexArray),h.hasIconData()&&h.icon.opacityVertexBuffer&&h.icon.opacityVertexBuffer.updateData(h.icon.opacityVertexArray),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexBuffer&&h.iconCollisionBox.collisionVertexBuffer.updateData(h.iconCollisionBox.collisionVertexArray),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexBuffer&&h.textCollisionBox.collisionVertexBuffer.updateData(h.textCollisionBox.collisionVertexArray),h.text.opacityVertexArray.length!==h.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${h.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${h.text.layoutVertexArray.length}) / 4`);if(h.icon.opacityVertexArray.length!==h.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${h.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${h.icon.layoutVertexArray.length}) / 4`);if(h.bucketInstanceId in this.collisionCircleArrays){let e=this.collisionCircleArrays[h.bucketInstanceId];h.placementInvProjMatrix=e.invProjMatrix,h.placementViewportMatrix=e.viewportMatrix,h.collisionCircleArray=e.circles,delete this.collisionCircleArrays[h.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){var i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}setStale(){this.stale=!0}}function x(e,t,i,n,r){e.emplaceBack(t?1:0,i?1:0,n||0,r||0),e.emplaceBack(t?1:0,i?1:0,n||0,r||0),e.emplaceBack(t?1:0,i?1:0,n||0,r||0),e.emplaceBack(t?1:0,i?1:0,n||0,r||0)}let Ve=Math.pow(2,25),Ue=Math.pow(2,24),$e=Math.pow(2,17),qe=Math.pow(2,16),He=Math.pow(2,9),Ze=Math.pow(2,8),Ge=Math.pow(2,1);function We(e){var t;return 0!==e.opacity||e.placed?1===e.opacity&&e.placed?4294967295:(t=e.placed?1:0,(e=Math.floor(127*e.opacity))*Ve+t*Ue+e*$e+t*qe+e*He+t*Ze+e*Ge+t):0}let w=0;class Xe{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,i,n,r){for(var o=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(o,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((e,t)=>e.sortKey-t.sortKey));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,r())return!0;return!1}}class Ye{constructor(e,t,i,n,r,o,a,s){this.placement=new je(e,t,o,a,s),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(i,n,r){let t=W.exported.now(),o=()=>{var e=W.exported.now()-t;return!this._forceFullPlacement&&2<e};for(;0<=this._currentPlacementIndex;){let e=n[i[this._currentPlacementIndex]],t=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=t)&&(!e.maxzoom||e.maxzoom>t)){if(this._inProgressLayer||(this._inProgressLayer=new Xe(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}let Ke=512/W.EXTENT/2;class Je{constructor(t,i,e){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=e;for(let e=0;e<i.length;e++){var n=i.get(e),r=n.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}}getScaledCoordinates(e,t){var i=Ke/Math.pow(2,t.canonical.z-this.tileID.canonical.z);return{x:Math.floor((t.canonical.x*W.EXTENT+e.anchorX)*i),y:Math.floor((t.canonical.y*W.EXTENT+e.anchorY)*i)}}findMatches(t,i,n){var r=this.tileID.canonical.z<i.canonical.z?1:Math.pow(2,this.tileID.canonical.z-i.canonical.z);for(let e=0;e<t.length;e++){var o=t.get(e);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a){var s=this.getScaledCoordinates(o,i);for(let e of a)if(Math.abs(e.coord.x-s.x)<=r&&Math.abs(e.coord.y-s.y)<=r&&!n[e.crossTileID]){n[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}}}class Qe{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class et{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(let e in this.indexes){var i=this.indexes[e],n={};for(let e in i){var r=i[e];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),n[r.tileID.key]=r}this.indexes[e]=n}this.lng=e}addBucket(t,i,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===i.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let e=0;e<i.symbolInstances.length;e++)i.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(let e in this.indexes){var o=this.indexes[e];if(Number(e)>t.overscaledZ)for(let e in o){var a=o[e];a.tileID.isChildOf(t)&&a.findMatches(i.symbolInstances,t,r)}else{var s=o[t.scaledTo(Number(e)).key];s&&s.findMatches(i.symbolInstances,t,r)}}for(let e=0;e<i.symbolInstances.length;e++){var l=i.symbolInstances.get(e);l.crossTileID||(l.crossTileID=n.generate(),r[l.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Je(t,i.symbolInstances,i.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(var i in t.indexedSymbolInstances)for(var n of t.indexedSymbolInstances[i])delete this.usedCrossTileIDs[e][n.crossTileID]}removeStaleBuckets(e){let t=!1;for(var i in this.indexes){var n,r=this.indexes[i];for(n in r)e[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],t=!0)}return t}}class tt{constructor(){this.layerIndexes={},this.crossTileIDs=new Qe,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,e,t){let n=this.layerIndexes[i.id],r=!1;var o={};(n=void 0===n?this.layerIndexes[i.id]=new et:n).handleWrapJump(t);for(let t of e){let e=t.getBucket(i);e&&i.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(t.tileID,e,this.crossTileIDs)&&(r=!0),o[e.bucketInstanceId]=!0)}return r=n.removeStaleBuckets(o)?!0:r}pruneUnusedLayers(e){let t={};e.forEach(e=>{t[e]=!0});for(let e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}var c=W.createLayout([{name:"a_pos",type:"Int16",components:2}]);class it extends W.Evented{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=e._cache.max,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){for(var e in this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null,this._tiles){e=this._tiles[e];e.textures.forEach(e=>e.destroy()),e.textures=[]}}update(e,t){this.sourceCache.update(e,t),this._renderableTilesKeys=[];for(var i of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:t}))this._renderableTilesKeys.push(i.key),this._tiles[i.key]||(i.posMatrix=new Float64Array(16),W.ortho(i.posMatrix,0,W.EXTENT,0,W.EXTENT,0,1),this._tiles[i.key]=new se(i,this.tileSize))}removeOutdated(e){var t,i={};this.renderHistory=this.renderHistory.filter((e,t)=>this.renderHistory.indexOf(e)===t).slice(0,this.renderHistorySize);for(let e of this._renderableTilesKeys)i[e]=!0;for(let e of this.renderHistory)i[e]=!0;for(t in this._tiles)i[t]||(this._tiles[t].clearTextures(e),delete this._tiles[t])}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){var t,i={};for(t of this._renderableTilesKeys){var n,r,o,a,s,l=this._tiles[t].tileID;l.canonical.equals(e.canonical)?((n=e.clone()).posMatrix=new Float64Array(16),W.ortho(n.posMatrix,0,W.EXTENT,0,W.EXTENT,0,1),i[t]=n):l.canonical.isChildOf(e.canonical)?((n=e.clone()).posMatrix=new Float64Array(16),a=l.canonical.z-e.canonical.z,r=l.canonical.x-(l.canonical.x>>a<<a),o=l.canonical.y-(l.canonical.y>>a<<a),a=W.EXTENT>>a,W.ortho(n.posMatrix,0,a,0,a,0,1),W.translate(n.posMatrix,n.posMatrix,[-r*a,-o*a,0]),i[t]=n):e.canonical.isChildOf(l.canonical)&&((r=e.clone()).posMatrix=new Float64Array(16),o=e.canonical.z-l.canonical.z,a=e.canonical.x-(e.canonical.x>>o<<o),l=e.canonical.y-(e.canonical.y>>o<<o),s=W.EXTENT>>o,W.ortho(r.posMatrix,0,W.EXTENT,0,W.EXTENT,0,1),W.translate(r.posMatrix,r.posMatrix,[a*s,l*s,0]),W.scale(r.posMatrix,r.posMatrix,[1/2**o,1/2**o,0]),i[t]=r)}return i}getSourceTile(e,t){var i=this.sourceCache._source;let n=e.overscaledZ-this.deltaZoom;if((n=n>i.maxzoom?i.maxzoom:n)<i.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(n).key);let r=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!r||!r.dem)&&t)for(;n>=i.minzoom&&(!r||!r.dem);)r=this.sourceCache.getTileByID(e.scaledTo(n--).key);return r}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(e=>e.timeLoaded>=t)}}class nt{constructor(e,t,i){this.style=e,this.sourceCache=new it(t),this.options=i,this.exaggeration="number"==typeof i.exaggeration?i.exaggeration:1,this.elevationOffset="number"==typeof i.elevationOffset?i.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(e,s,l,c=W.EXTENT){if(!(0<=s&&s<c&&0<=l&&l<c))return this.elevationOffset;let u=0;var d=this.getTerrainData(e);if(d.tile&&d.tile.dem){let e=W.transformMat4$1([],[s/c*W.EXTENT,l/c*W.EXTENT],d.u_terrain_matrix),t=[e[0]*d.tile.dem.dim,e[1]*d.tile.dem.dim],i=[Math.floor(t[0]),Math.floor(t[1])],n=d.tile.dem.get(i[0],i[1]),r=d.tile.dem.get(i[0],i[1]+1),o=d.tile.dem.get(i[0]+1,i[1]),a=d.tile.dem.get(i[0]+1,i[1]+1);u=W.number(W.number(n,r,t[0]-i[0]),W.number(o,a,t[0]-i[0]),t[1]-i[1])}return u}rememberForRerender(e,t){for(var i in this.sourceCache._tiles){i=this.sourceCache._tiles[i];(i.tileID.equals(t)||i.tileID.isChildOf(t))&&(e===this.sourceCache.sourceCache.id&&(i.timeLoaded=Date.now()),this._rerender[e]=this._rerender[e]||{},this._rerender[e][i.tileID.key]=!0)}}needsRerender(e,t){return this._rerender[e]&&this._rerender[e][t.key]}clearRerenderCache(){this._rerender={}}getElevation(e,t,i,n=W.EXTENT){return(this.getDEMElevation(e,t,i,n)+this.elevationOffset)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){let e=this.style.map.painter.context,t=new W.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new O(e,t,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new O(e,new W.RGBAImage({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=W.identity([])}let n=this.sourceCache.getSourceTile(i,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){let e=this.style.map.painter.context;n.demTexture=this.style.map.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new O(e,n.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),n.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}let e=n&&n+n.tileID.key+i.key;if(e&&!this._demMatrixCache[e]){let e=this.sourceCache.sourceCache._source.maxzoom,t=i.canonical.z-n.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=e?t=i.canonical.z-e:W.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));var r=i.canonical.x-(i.canonical.x>>t<<t),o=i.canonical.y-(i.canonical.y>>t<<t),a=W.fromScaling(new Float64Array(16),[1/(W.EXTENT<<t),1/(W.EXTENT<<t),0]);W.translate(a,a,[r*W.EXTENT,o*W.EXTENT,0]),this._demMatrixCache[i.key]={matrix:a,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:e?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getRTTFramebuffer(){var e,t=this.style.map.painter;return this._rttFramebuffer||(e=this.sourceCache.tileSize*this.qualityFactor,this._rttFramebuffer=t.context.createFramebuffer(e,e,!0),this._rttFramebuffer.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,e,e))),this._rttFramebuffer}getFramebuffer(e){var t=this.style.map.painter,i=t.width/devicePixelRatio,n=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===i&&this._fbo.height===n||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new O(t.context,{width:i,height:n,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new O(t.context,{width:i,height:n,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(i,n,!0),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,i,n))),this._fbo.colorAttachment.set(("coords"===e?this._fboCoordsTexture:this._fboDepthTexture).texture),this._fbo}getCoordsTexture(){var e=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;var n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,i=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,i+=4)n[i+0]=255&e,n[i+1]=255&t,n[i+2]=e>>8<<4|t>>8,n[i+3]=0;var t=new W.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),t=new O(e,t,e.gl.RGBA,{premultiply:!1});return t.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=t}pointCoordinate(e){var t=new Uint8Array(4),i=this.style.map.painter,n=i.context,r=n.gl,i=(n.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),r.readPixels(e.x,i.height/devicePixelRatio-e.y-1,1,1,r.RGBA,r.UNSIGNED_BYTE,t),n.bindFramebuffer.set(null),t[0]+(t[2]>>4<<8)),e=t[1]+((15&t[2])<<8),r=this.coordsIndex[255-t[3]],n=r&&this.sourceCache.getTileByID(r);return n?(t=this._coordsTextureSize,r=(1<<n.tileID.canonical.z)*t,new W.MercatorCoordinate((n.tileID.canonical.x*t+i)/r,(n.tileID.canonical.y*t+e)/r,this.getElevation(n.tileID,i,e,t))):null}getTerrainMesh(){if(!this._mesh){var e=this.style.map.painter.context,i=new W.PosArray,n=new W.TriangleIndexArray,r=this.meshSize,o=W.EXTENT/r,a=r*r;for(let t=0;t<=r;t++)for(let e=0;e<=r;e++)i.emplaceBack(e*o,t*o);for(let t=0;t<a;t+=r+1)for(let e=0;e<r;e++)n.emplaceBack(e+t,r+e+t+1,r+e+t+2),n.emplaceBack(e+t,r+e+t+2,e+t+1);this._mesh={indexBuffer:e.createIndexBuffer(n),vertexBuffer:e.createVertexBuffer(i,c.members),segments:W.SegmentVector.simpleSegment(0,0,i.length,n.length)}}return this._mesh}getMinMaxElevation(e){var e=this.getTerrainData(e).tile,t={minElevation:null,maxElevation:null};return e&&e.dem&&(t.minElevation=(e.dem.min+this.elevationOffset)*this.exaggeration,t.maxElevation=(e.dem.max+this.elevationOffset)*this.exaggeration),t}}let o=(e,t)=>W.emitValidationErrors(e,t&&t.filter(e=>"source.canvas"!==e.identifier)),rt=W.pick(S,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ot=W.pick(S,["setCenter","setZoom","setBearing","setPitch"]),at=function(){var e,t={},i=W.spec.$version;for(e in W.spec.$root){var n,r=W.spec.$root[e];r.required&&(n=null)!=(n="version"===e?i:"array"===r.type?[]:{})&&(t[e]=n)}return t}();class a extends W.Evented{constructor(e,t={}){super(),this.map=e,this.dispatcher=new H(fe(),this),this.imageManager=new F,this.imageManager.setEventedParent(this),this.glyphManager=new l(e._requestManager,t.localIdeographFontFamily),this.lineAtlas=new q(256,512),this.crossTileSymbolIndex=new tt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new W.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",W.getReferrer());let i=this;this._rtlTextPluginCallback=a.registerForPluginStateChange(e=>{i.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(e,t)=>{if(W.triggerPluginCompletionEvent(e),t&&t.every(e=>e))for(let e in i.sourceCaches)i.sourceCaches[e].reload()})}),this.on("data",t=>{if("source"===t.dataType&&"metadata"===t.sourceDataType){let e=this.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(let t in this._layers){let e=this._layers[t];e.source===i.id&&this._validateLayer(e)}}}})}loadURL(e,t={}){this.fire(new W.Event("dataloading",{dataType:"style"}));let i="boolean"!=typeof t.validate||t.validate,n=this.map._requestManager.transformRequest(e,W.ResourceType.Style);this._request=W.getJSON(n,(e,t)=>{this._request=null,e?this.fire(new W.ErrorEvent(e)):t&&this._load(t,i)})}loadJSON(e,t={}){this.fire(new W.Event("dataloading",{dataType:"style"})),this._request=W.exported.frame(()=>{this._request=null,this._load(e,!1!==t.validate)})}loadEmpty(){this.fire(new W.Event("dataloading",{dataType:"style"})),this._load(at,!1)}_load(t,e){if(!e||!o(this,W.validateStyle(t))){this._loaded=!0;for(let e in(this.stylesheet=t).sources)this.addSource(e,t.sources[e],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var i,e=me(this.stylesheet.layers);this._order=e.map(e=>e.id),this._layers={},this._serializedLayers={};for(i of e)i=W.createStyleLayer(i),i.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=i,this._serializedLayers[i.id]=i.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new $(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new W.Event("data",{dataType:"style"})),this.fire(new W.Event("style.load"))}}_loadSprite(e){this._spriteRequest=function(e,t,i,n){let p,r,o;i=1<i?"@2x":"";let a=W.getJSON(t.transformRequest(t.normalizeSpriteURL(e,i,".json"),W.ResourceType.SpriteJSON),(e,t)=>{a=null,o||(o=e,p=t,l())}),s=W.getImage(t.transformRequest(t.normalizeSpriteURL(e,i,".png"),W.ResourceType.SpriteImage),(e,t)=>{s=null,o||(o=e,r=t,l())});function l(){if(o)n(o);else if(p&&r){var u,d=W.exported.getImageData(r),h={};for(u in p){let{width:e,height:t,x:i,y:n,sdf:r,pixelRatio:o,stretchX:a,stretchY:s,content:l}=p[u],c=new W.RGBAImage({width:e,height:t});W.RGBAImage.copy(d,c,{x:i,y:n},{x:0,y:0},{width:e,height:t}),h[u]={data:c,pixelRatio:o,sdf:r,stretchX:a,stretchY:s,content:l}}n(null,h)}}return{cancel(){a&&(a.cancel(),a=null),s&&(s.cancel(),s=null)}}}(e,this.map._requestManager,this.map.getPixelRatio(),(e,t)=>{if(this._spriteRequest=null,e)this.fire(new W.ErrorEvent(e));else if(t)for(let e in t)this.imageManager.addImage(e,t[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new W.Event("data",{dataType:"style"}))})}_validateLayer(e){var t,i=this.sourceCaches[e.source];i&&(t=e.sourceLayer)&&("geojson"===(i=i.getSource()).type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(t))&&this.fire(new W.ErrorEvent(new Error(`Source layer "${t}" does not exist on source "${i.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){var t,i=[];for(t of e){let e=this._layers[t];"custom"!==e.type&&i.push(e.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(this._loaded){let e=this._changed;if(this._changed){let e=Object.keys(this._updatedLayers),t=Object.keys(this._removedLayers);(e.length||t.length)&&this._updateWorkerLayers(e,t);for(let t in this._updatedSources){let e=this._updatedSources[t];if("reload"===e)this._reloadSource(t);else{if("clear"!==e)throw new Error("Invalid action "+e);this._clearSource(t)}}this._updateTilesForChangedImages();for(let e in this._updatedPaintProps)this._layers[e].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}var n={};for(let t in this.sourceCaches){let e=this.sourceCaches[t];n[t]=e.used,e.used=!1}for(let t of this._order){let e=this._layers[t];e.recalculate(i,this._availableImages),!e.isHidden(i.zoom)&&e.source&&(this.sourceCaches[e.source].used=!0)}for(let t in n){let e=this.sourceCaches[t];n[t]!==e.used&&e.fire(new W.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:t}))}this.light.recalculate(i),this.z=i.zoom,e&&this.fire(new W.Event("data",{dataType:"style"}))}}_updateTilesForChangedImages(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(t){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),t){let e=this.sourceCaches[t.source];if(!e)throw new Error("cannot load terrain, because there exists no source with ID: "+t.source);this.terrain=new nt(this,e,t),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=e=>{e.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=e=>{e.tile&&(e.sourceId===t.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(e.sourceId,e.tile.tileID)):"geojson"===e.source.type&&this.terrain.rememberForRerender(e.sourceId,e.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new W.Event("terrain",{terrain:t}))}setState(e){if(this._checkLoaded(),o(this,W.validateStyle(e)))return!1;(e=W.clone$1(e)).layers=me(e.layers);var t=function(n,l){if(!n)return[{command:S.setStyle,args:[l]}];let c=[];try{if(!T(n.version,l.version))return[{command:S.setStyle,args:[l]}];T(n.center,l.center)||c.push({command:S.setCenter,args:[l.center]}),T(n.zoom,l.zoom)||c.push({command:S.setZoom,args:[l.zoom]}),T(n.bearing,l.bearing)||c.push({command:S.setBearing,args:[l.bearing]}),T(n.pitch,l.pitch)||c.push({command:S.setPitch,args:[l.pitch]}),T(n.sprite,l.sprite)||c.push({command:S.setSprite,args:[l.sprite]}),T(n.glyphs,l.glyphs)||c.push({command:S.setGlyphs,args:[l.glyphs]}),T(n.transition,l.transition)||c.push({command:S.setTransition,args:[l.transition]}),T(n.light,l.light)||c.push({command:S.setLight,args:[l.light]});let t={},i=[];{var r=n.sources;var o=l.sources;var a=i;var u=t;let e;for(e in o=o||{},r=r||{})!Object.prototype.hasOwnProperty.call(r,e)||Object.prototype.hasOwnProperty.call(o,e)||ve(e,a,u);for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(Object.prototype.hasOwnProperty.call(r,e)?T(r[e],o[e])||("geojson"===r[e].type&&"geojson"===o[e].type&&function(e,t,i){let n;for(n in e[i])if(Object.prototype.hasOwnProperty.call(e[i],n)&&"data"!==n&&!T(e[i][n],t[i][n]))return;for(n in t[i])if(Object.prototype.hasOwnProperty.call(t[i],n)&&"data"!==n&&!T(e[i][n],t[i][n]))return;return 1}(r,o,e)?a.push({command:S.setGeoJSONSourceData,args:[e,o[e].data]}):(d=e,h=o,p=a,f=u,ve(d,p,f),ge(d,h,p))):ge(e,o,a));var d,h,p,f}let s=[];n.layers&&n.layers.forEach(e=>{t[e.source]?c.push({command:S.removeLayer,args:[e.id]}):s.push(e)}),c=c.concat(i);{var m=s;var g=l.layers;var v=c;g=g||[];var _=(m=m||[]).map(_e),y=g.map(_e),b=m.reduce(ye,{}),x=g.reduce(ye,{}),w=_.slice(),C=Object.create(null);let e,t,i,n,r,o,a;for(e=0,t=0;e<_.length;e++)i=_[e],Object.prototype.hasOwnProperty.call(x,i)?t++:(v.push({command:S.removeLayer,args:[i]}),w.splice(w.indexOf(i,t),1));for(e=0,t=0;e<y.length;e++)i=y[y.length-1-e],w[w.length-1-e]!==i&&(Object.prototype.hasOwnProperty.call(b,i)?(v.push({command:S.removeLayer,args:[i]}),w.splice(w.lastIndexOf(i,w.length-t),1)):t++,o=w[w.length-e],v.push({command:S.addLayer,args:[x[i],o]}),w.splice(w.length-e,0,i),C[i]=!0);for(e=0;e<y.length;e++)if(n=b[i=y[e]],r=x[i],!C[i]&&!T(n,r))if(T(n.source,r.source)&&T(n["source-layer"],r["source-layer"])&&T(n.type,r.type)){for(a in k(n.layout,r.layout,v,i,null,S.setLayoutProperty),k(n.paint,r.paint,v,i,null,S.setPaintProperty),T(n.filter,r.filter)||v.push({command:S.setFilter,args:[i,r.filter]}),T(n.minzoom,r.minzoom)&&T(n.maxzoom,r.maxzoom)||v.push({command:S.setLayerZoomRange,args:[i,r.minzoom,r.maxzoom]}),n)Object.prototype.hasOwnProperty.call(n,a)&&"layout"!==a&&"paint"!==a&&"filter"!==a&&"metadata"!==a&&"minzoom"!==a&&"maxzoom"!==a&&(0===a.indexOf("paint.")?k(n[a],r[a],v,i,a.slice(6),S.setPaintProperty):T(n[a],r[a])||v.push({command:S.setLayerProperty,args:[i,a,r[a]]}));for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&!Object.prototype.hasOwnProperty.call(n,a)&&"layout"!==a&&"paint"!==a&&"filter"!==a&&"metadata"!==a&&"minzoom"!==a&&"maxzoom"!==a&&(0===a.indexOf("paint.")?k(n[a],r[a],v,i,a.slice(6),S.setPaintProperty):T(n[a],r[a])||v.push({command:S.setLayerProperty,args:[i,a,r[a]]}))}else v.push({command:S.removeLayer,args:[i]}),o=w[w.lastIndexOf(i)+1],v.push({command:S.addLayer,args:[r,o]})}}catch(n){console.warn("Unable to compute style diff:",n),c=[{command:S.setStyle,args:[l]}]}return c}(this.serialize(),e).filter(e=>!(e.command in ot));if(0===t.length)return!1;var i=t.filter(e=>!(e.command in rt));if(0<i.length)throw new Error(`Unimplemented: ${i.map(e=>e.command).join(", ")}.`);return t.forEach(e=>{"setTransition"!==e.command&&this[e.command].apply(this,e.args)}),this.stylesheet=e,!0}addImage(e,t){if(this.getImage(e))return this.fire(new W.ErrorEvent(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,t),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new W.ErrorEvent(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new W.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,i,e={}){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error(`Source "${t}" already exists.`);if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(!(0<=["vector","raster","geojson","video","image"].indexOf(i.type)&&this._validate(W.validateStyle.source,"sources."+t,i,null,e))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);let e=this.sourceCaches[t]=new r(t,i,this.dispatcher);e.style=this,e.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:e.serialize(),sourceId:t})),e.onAdd(this.map),this._changed=!0}}removeSource(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(let e in this._layers)if(this._layers[e].source===t)return this.fire(new W.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${e}" is using it.`)));let e=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],e.fire(new W.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),e.setEventedParent(null),e.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID="+e);e=this.sourceCaches[e].getSource();if("geojson"!==e.type)throw new Error(`geojsonSource.type is ${e.type}, which is !== 'geojson`);e.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,i,n={}){this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new W.ErrorEvent(new Error(`Layer "${r}" already exists on this map.`)));else{let t;if("custom"===e.type){if(o(this,W.validateCustomStyleLayer(e)))return;t=W.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=W.clone$1(e),e=W.extend(e,{source:r})),this._validate(W.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},n))return;t=W.createStyleLayer(e),this._validateLayer(t),t.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[t.id]=t.serialize()}n=i?this._order.indexOf(i):this._order.length;if(i&&-1===n)this.fire(new W.ErrorEvent(new Error(`Cannot add layer "${r}" before non-existing layer "${i}".`)));else{if(this._order.splice(n,0,r),this._layerOrderChanged=!0,this._layers[r]=t,this._removedLayers[r]&&t.source&&"custom"!==t.type){let e=this._removedLayers[r];delete this._removedLayers[r],e.type!==t.type?this._updatedSources[t.source]="clear":(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause())}this._updateLayer(t),t.onAdd&&t.onAdd(this.map)}}}moveLayer(e,t){var i;this._checkLoaded(),this._changed=!0,this._layers[e]?e!==t&&(i=this._order.indexOf(e),this._order.splice(i,1),i=t?this._order.indexOf(t):this._order.length,t&&-1===i?this.fire(new W.ErrorEvent(new Error(`Cannot move layer "${e}" before non-existing layer "${t}".`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)):this.fire(new W.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)))}removeLayer(e){this._checkLoaded();var t,i=this._layers[e];i?(i.setEventedParent(null),t=this._order.indexOf(e),this._order.splice(t,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)):this.fire(new W.ErrorEvent(new Error(`Cannot remove non-existing layer "${e}".`)))}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,t,i){this._checkLoaded();var n=this.getLayer(e);n?n.minzoom===t&&n.maxzoom===i||(null!=t&&(n.minzoom=t),null!=i&&(n.maxzoom=i),this._updateLayer(n)):this.fire(new W.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,t,i={}){this._checkLoaded();var n=this.getLayer(e);if(n){if(!T(n.filter,t))return null==t?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(W.validateStyle.filter,`layers.${n.id}.filter`,t,null,i)||(n.filter=W.clone$1(t),this._updateLayer(n)))}else this.fire(new W.ErrorEvent(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return W.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,t,i,n={}){this._checkLoaded();var r=this.getLayer(e);r?T(r.getLayoutProperty(t),i)||(r.setLayoutProperty(t,i,n),this._updateLayer(r)):this.fire(new W.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,t){var i=this.getLayer(e);if(i)return i.getLayoutProperty(t);this.fire(new W.ErrorEvent(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,t,i,n={}){this._checkLoaded();var r=this.getLayer(e);r?T(r.getPaintProperty(t),i)||(r.setPaintProperty(t,i,n)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new W.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,t){this._checkLoaded();var i=e.source,n=e.sourceLayer,r=this.sourceCaches[i];void 0===r?this.fire(new W.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`))):"geojson"===(i=r.getSource().type)&&n?this.fire(new W.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==i||n?(void 0===e.id&&this.fire(new W.ErrorEvent(new Error("The feature id parameter must be provided."))),r.setFeatureState(n,e.id,t)):this.fire(new W.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,t){this._checkLoaded();var i,n=e.source,r=this.sourceCaches[n];void 0===r?this.fire(new W.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`))):(i="vector"===(n=r.getSource().type)?e.sourceLayer:void 0,"vector"!==n||i?t&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new W.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(i,e.id,t):this.fire(new W.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))))}getFeatureState(e){this._checkLoaded();var t=e.source,i=e.sourceLayer,n=this.sourceCaches[t];if(void 0!==n)return"vector"!==n.getSource().type||i?(void 0===e.id&&this.fire(new W.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(i,e.id)):void this.fire(new W.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new W.ErrorEvent(new Error(`The source '${t}' does not exist in the map's style.`)))}getTransition(){return W.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return W.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:W.mapObject(this.sourceCaches,e=>e.serialize()),layers:this._serializeLayers(this._order)},e=>void 0!==e)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){let n=e=>"fill-extrusion"===this._layers[e].type,r={},o=[];for(let e=this._order.length-1;0<=e;e--){var i=this._order[e];if(n(i)){r[i]=e;for(let e of t){let t=e[i];if(t)for(let e of t)o.push(e)}}}o.sort((e,t)=>t.intersectionZ-e.intersectionZ);var a=[];for(let i=this._order.length-1;0<=i;i--){var s=this._order[i];if(n(s))for(let t=o.length-1;0<=t;t--){let e=o[t].feature;if(r[e.layer.id]<i)break;a.push(e),o.pop()}else for(let e of t){let t=e[s];if(t)for(let e of t)a.push(e.feature)}}return a}queryRenderedFeatures(t,i,n){i&&i.filter&&this._validate(W.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new W.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(let t of i.layers){let e=this._layers[t];if(!e)return this.fire(new W.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];r[e.source]=!0}}var o=[];i.availableImages=this._availableImages;for(let e in this.sourceCaches)i.layers&&!r[e]||o.push(oe(this.sourceCaches[e],this._layers,this._serializedLayers,t,i,n));return this.placement&&o.push(function(o,e,n,t,i,r,a){var s={},l=r.queryRenderedSymbols(t),c=[];for(let e of Object.keys(l).map(Number))c.push(a[e]);c.sort(ae);for(let r of c){let n=r.featureIndex.lookupSymbolFeatures(l[r.bucketInstanceId],e,r.bucketIndex,r.sourceLayerIndex,i.filter,i.layers,i.availableImages,o);for(let e in n){let t=s[e]=s[e]||[],i=n[e];i.sort((t,i)=>{var n=r.featureSortOrder;if(n){let e=n.indexOf(t.featureIndex);return n.indexOf(i.featureIndex)-e}return i.featureIndex-t.featureIndex});for(let e of i)t.push(e)}}for(let i in s)s[i].forEach(e=>{var e=e.feature,t=n[o[i].source].getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=t});return s}(this._layers,this._serializedLayers,this.sourceCaches,t,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,t){t&&t.filter&&this._validate(W.validateStyle.filter,"querySourceFeatures.filter",t.filter,null,t);e=this.sourceCaches[e];if(e){var i=e,n=t,r=i.getRenderableIds().map(e=>i.getTileByID(e)),o=[],a={};for(let e=0;e<r.length;e++){var s=r[e],l=s.tileID.canonical.key;a[l]||(a[l]=!0,s.querySourceFeatures(o,n))}return o}return[]}addSourceType(e,t,i){return a.getSourceType(e)?i(new Error(`A source type called "${e}" already exists.`)):(a.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(t,e={}){this._checkLoaded();var i,n=this.light.getLight();let r=!1;for(let e in t)if(!T(t[e],n[e])){r=!0;break}r&&(i={now:W.exported.now(),transition:W.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(t,e),this.light.updateTransitions(i))}_validate(e,t,i,n,r={}){return(!r||!1!==r.validate)&&o(this,e.call(W.validateStyle,W.extend({key:t,style:this.serialize(),value:i,styleSpec:W.spec},n)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),W.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(let e in this._layers)this._layers[e].setEventedParent(null);for(let e in this.sourceCaches){var t=this.sourceCaches[e];t.setEventedParent(null),t.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e,this.terrain)}_generateCollisionBoxes(){for(var e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(t,e,i,n,r=!1){let o=!1,a=!1;var s={};for(let e of this._order){let i=this._layers[e];if("symbol"===i.type){if(!s[i.source]){let t=this.sourceCaches[i.source];s[i.source]=t.getRenderableIds(!0).map(e=>t.getTileByID(e)).sort((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1))}let e=this.crossTileSymbolIndex.addLayer(i,s[i.source],t.center.lng);o=o||e}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((r=r||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(W.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ye(t,this.terrain,this._order,r,e,i,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(W.exported.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(let t of this._order){let e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,s[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(W.exported.now())}_releaseSymbolFadeTiles(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();i=this.sourceCaches[t.source];i&&i.setDependencies(t.tileID.key,t.type,t.icons)}getGlyphs(e,t,i){this.glyphManager.getGlyphs(t.stacks,i)}getResource(e,t,i){return W.makeRequest(t,i)}}a.getSourceType=function(e){return re[e]},a.setSourceType=function(e,t){re[e]=t},a.registerForPluginStateChange=W.registerForPluginStateChange;let st="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}",f={prelude:e("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:e("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:e("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:e("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:e("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:e("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:e("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:e("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:e("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:e("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:e("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:e("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:e("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:e("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:e("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:e("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:e("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:e("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:e("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:e("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:e("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:e("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:e("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:e("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:e("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:e("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:e("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",st),terrainDepth:e("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",st),terrainCoords:e("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",st)};function e(e,t){let i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=t.match(/attribute ([\w]+) ([\w]+)/g),r=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(r):r,s={};return{fragmentSource:e=e.replace(i,(e,t,i,n,r)=>(s[r]=!0,"define"===t?`
#ifndef HAS_UNIFORM_u_${r}
varying ${i} ${n} ${r};
#else
uniform ${i} ${n} u_${r};
#endif
`:`
#ifdef HAS_UNIFORM_u_${r}
    ${i} ${n} ${r} = u_${r};
#endif
`)),vertexSource:t=t.replace(i,(e,t,i,n,r)=>{var o="float"===n?"vec2":"vec4",a=r.match(/color/)?"color":o;return s[r]?"define"===t?`
#ifndef HAS_UNIFORM_u_${r}
uniform lowp float u_${r}_t;
attribute ${i} ${o} a_${r};
varying ${i} ${n} ${r};
#else
uniform ${i} ${n} u_${r};
#endif
`:"vec4"==a?`
#ifndef HAS_UNIFORM_u_${r}
    ${r} = a_${r};
#else
    ${i} ${n} ${r} = u_${r};
#endif
`:`
#ifndef HAS_UNIFORM_u_${r}
    ${r} = unpack_mix_${a}(a_${r}, u_${r}_t);
#else
    ${i} ${n} ${r} = u_${r};
#endif
`:"define"===t?`
#ifndef HAS_UNIFORM_u_${r}
uniform lowp float u_${r}_t;
attribute ${i} ${o} a_${r};
#else
uniform ${i} ${n} u_${r};
#endif
`:"vec4"==a?`
#ifndef HAS_UNIFORM_u_${r}
    ${i} ${n} ${r} = a_${r};
#else
    ${i} ${n} ${r} = u_${r};
#endif
`:`
#ifndef HAS_UNIFORM_u_${r}
    ${i} ${n} ${r} = unpack_mix_${a}(a_${r}, u_${r}_t);
#else
    ${i} ${n} ${r} = u_${r};
#endif
`}),staticAttributes:n,staticUniforms:a}}class lt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,i,n,r,o,a,s,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==n.length;for(let e=0;!c&&e<n.length;e++)this.boundPaintVertexBuffers[e]!==n[e]&&(c=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===i&&!c&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s&&this.boundDynamicVertexBuffer3===l?(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind(),l&&l.bind()):this.freshBind(t,i,n,r,o,a,s,l)}freshBind(t,e,i,n,r,o,a,s){let l;var c=t.numAttributes,u=this.context,d=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s;else{l=u.currentNumAttributes||0;for(let e=c;e<l;e++)d.disableVertexAttribArray(e)}e.enableAttributes(d,t);for(let e of i)e.enableAttributes(d,t);o&&o.enableAttributes(d,t),a&&a.enableAttributes(d,t),s&&s.enableAttributes(d,t),e.bind(),e.setVertexAttribPointers(d,t,r);for(let e of i)e.bind(),e.setVertexAttribPointers(d,t,r);o&&(o.bind(),o.setVertexAttribPointers(d,t,r)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(d,t,r)),s&&(s.bind(),s.setVertexAttribPointers(d,t,r)),u.currentNumAttributes=c}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ct(t){var i,n=[];for(let e=0;e<t.length;e++)null!==t[e]&&(i=t[e].split(" "),n.push(i.pop()));return n}class ut{constructor(e,t,i,n,r,o,a){var s=e.gl,l=(this.program=s.createProgram(),ct(i.staticAttributes)),c=n?n.getBinderAttributes():[],u=l.concat(c),l=f.prelude.staticUniforms?ct(f.prelude.staticUniforms):[],c=i.staticUniforms?ct(i.staticUniforms):[],d=n?n.getBinderUniforms():[],h=[];for(let e of l.concat(c).concat(d))h.indexOf(e)<0&&h.push(e);l=n?n.defines():[],o&&l.push("#define OVERDRAW_INSPECTOR;"),a&&l.push("#define TERRAIN3D;"),c=l.concat(f.prelude.fragmentSource,i.fragmentSource).join("\n"),d=l.concat(f.prelude.vertexSource,i.vertexSource).join("\n"),o=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(o,c),s.compileShader(o),s.attachShader(this.program,o);a=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(a,d),s.compileShader(a),s.attachShader(this.program,a),this.attributes={};var p={};this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(a),s.deleteShader(o);for(let e=0;e<h.length;e++){let t=h[e];if(t&&!p[t]){let e=s.getUniformLocation(this.program,t);e&&(p[t]=e)}}this.fixedUniforms=r(e,p),this.terrainUniforms=(l=e,i=p,{u_depth:new W.Uniform1i(l,i.u_depth),u_terrain:new W.Uniform1i(l,i.u_terrain),u_terrain_dim:new W.Uniform1f(l,i.u_terrain_dim),u_terrain_matrix:new W.UniformMatrix4f(l,i.u_terrain_matrix),u_terrain_unpack:new W.Uniform4f(l,i.u_terrain_unpack),u_terrain_offset:new W.Uniform1f(l,i.u_terrain_offset),u_terrain_exaggeration:new W.Uniform1f(l,i.u_terrain_exaggeration)}),this.binderUniforms=n?n.getUniforms(e,p):[]}}}draw(n,r,e,t,o,a,s,l,c,u,d,h,p,f,m,g,v,_){var y=n.gl;if(!this.failedToCreate){if(n.program.set(this.program),n.setDepthMode(e),n.setStencilMode(t),n.setColorMode(o),n.setCullFace(a),l){n.activeTexture.set(y.TEXTURE2),y.bindTexture(y.TEXTURE_2D,l.depthTexture),n.activeTexture.set(y.TEXTURE3),y.bindTexture(y.TEXTURE_2D,l.texture);for(let e in this.terrainUniforms)this.terrainUniforms[e].set(l[e])}for(let e in this.fixedUniforms)this.fixedUniforms[e].set(s[e]);m&&m.setUniforms(n,this.binderUniforms,p,{zoom:f});let i=0;switch(r){case y.LINES:i=2;break;case y.TRIANGLES:i=3;break;case y.LINE_STRIP:i=1}for(let t of h.get()){let e=t.vaos||(t.vaos={});(e[c]||(e[c]=new lt)).bind(n,this,u,m?m.getPaintVertexBuffers():[],d,t.vertexOffset,g,v,_),y.drawElements(r,t.primitiveLength*i,y.UNSIGNED_SHORT,t.primitiveOffset*i*2)}}}}function dt(e,t,i){var n=1/X(i,1,t.transform.tileZoom),r=Math.pow(2,i.tileID.overscaledZ),t=i.tileSize*Math.pow(2,t.transform.tileZoom)/r,r=t*(i.tileID.canonical.x+i.tileID.wrap*r),t=t*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[r>>16,t>>16],u_pixel_coord_lower:[65535&r,65535&t]}}let ht=(e,t,i,n)=>{var r=t.style.light,o=r.properties.get("position"),o=[o.x,o.y,o.z],a=W.create$1(),t=("viewport"===r.properties.get("anchor")&&W.fromRotation(a,-t.transform.angle),W.transformMat3(o,o,a),r.properties.get("color"));return{u_matrix:e,u_lightpos:o,u_lightintensity:r.properties.get("intensity"),u_lightcolor:[t.r,t.g,t.b],u_vertical_gradient:+i,u_opacity:n}},pt=e=>({u_matrix:e}),ft=(e,t,i,n)=>W.extend(pt(e),dt(i,t,n)),mt=(e,t,i=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:i}),gt=e=>({u_matrix:e});let vt=(e,t,i,n)=>{var r=e.transform;return{u_matrix:yt(e,t,i,n),u_ratio:1/X(t,1,r.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}};function _t(e,t){return 1/X(e,1,t.tileZoom)}function yt(e,t,i,n){return e.translatePosMatrix((n||t.tileID).posMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}let bt=(e,t,i,n,r)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:0<(e=r.paint.get("raster-saturation"))?1-1/(1.001-e):-e,u_contrast_factor:0<(t=r.paint.get("raster-contrast"))?1/(1-t):1+t,u_spin_weights:(i=r.paint.get("raster-hue-rotate"),i*=Math.PI/180,n=Math.sin(i),[(2*(i=Math.cos(i))+1)/3,(-Math.sqrt(3)*n-i+1)/3,(Math.sqrt(3)*n-i+1)/3])}};let xt=(e,t,i,n,r,o,a,s,l,c)=>{var u=r.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:c,u_texture:0}},wt=(e,t,i,n,r,o,a,s,l,c,u)=>{var d=r.transform;return W.extend(xt(e,t,i,n,r,o,a,s,l,c),{u_gamma_scale:n?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:r.pixelRatio,u_is_halo:+u})},Ct={fillExtrusion:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_lightpos:new W.Uniform3f(e,t.u_lightpos),u_lightintensity:new W.Uniform1f(e,t.u_lightintensity),u_lightcolor:new W.Uniform3f(e,t.u_lightcolor),u_vertical_gradient:new W.Uniform1f(e,t.u_vertical_gradient),u_opacity:new W.Uniform1f(e,t.u_opacity)}),fillExtrusionPattern:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_lightpos:new W.Uniform3f(e,t.u_lightpos),u_lightintensity:new W.Uniform1f(e,t.u_lightintensity),u_lightcolor:new W.Uniform3f(e,t.u_lightcolor),u_vertical_gradient:new W.Uniform1f(e,t.u_vertical_gradient),u_height_factor:new W.Uniform1f(e,t.u_height_factor),u_image:new W.Uniform1i(e,t.u_image),u_texsize:new W.Uniform2f(e,t.u_texsize),u_pixel_coord_upper:new W.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new W.Uniform2f(e,t.u_pixel_coord_lower),u_scale:new W.Uniform3f(e,t.u_scale),u_fade:new W.Uniform1f(e,t.u_fade),u_opacity:new W.Uniform1f(e,t.u_opacity)}),fill:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix)}),fillPattern:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_image:new W.Uniform1i(e,t.u_image),u_texsize:new W.Uniform2f(e,t.u_texsize),u_pixel_coord_upper:new W.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new W.Uniform2f(e,t.u_pixel_coord_lower),u_scale:new W.Uniform3f(e,t.u_scale),u_fade:new W.Uniform1f(e,t.u_fade)}),fillOutline:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_world:new W.Uniform2f(e,t.u_world)}),fillOutlinePattern:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_world:new W.Uniform2f(e,t.u_world),u_image:new W.Uniform1i(e,t.u_image),u_texsize:new W.Uniform2f(e,t.u_texsize),u_pixel_coord_upper:new W.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new W.Uniform2f(e,t.u_pixel_coord_lower),u_scale:new W.Uniform3f(e,t.u_scale),u_fade:new W.Uniform1f(e,t.u_fade)}),circle:(e,t)=>({u_camera_to_center_distance:new W.Uniform1f(e,t.u_camera_to_center_distance),u_scale_with_map:new W.Uniform1i(e,t.u_scale_with_map),u_pitch_with_map:new W.Uniform1i(e,t.u_pitch_with_map),u_extrude_scale:new W.Uniform2f(e,t.u_extrude_scale),u_device_pixel_ratio:new W.Uniform1f(e,t.u_device_pixel_ratio),u_matrix:new W.UniformMatrix4f(e,t.u_matrix)}),collisionBox:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_camera_to_center_distance:new W.Uniform1f(e,t.u_camera_to_center_distance),u_pixels_to_tile_units:new W.Uniform1f(e,t.u_pixels_to_tile_units),u_extrude_scale:new W.Uniform2f(e,t.u_extrude_scale),u_overscale_factor:new W.Uniform1f(e,t.u_overscale_factor)}),collisionCircle:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_inv_matrix:new W.UniformMatrix4f(e,t.u_inv_matrix),u_camera_to_center_distance:new W.Uniform1f(e,t.u_camera_to_center_distance),u_viewport_size:new W.Uniform2f(e,t.u_viewport_size)}),debug:(e,t)=>({u_color:new W.UniformColor(e,t.u_color),u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_overlay:new W.Uniform1i(e,t.u_overlay),u_overlay_scale:new W.Uniform1f(e,t.u_overlay_scale)}),clippingMask:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix)}),heatmap:(e,t)=>({u_extrude_scale:new W.Uniform1f(e,t.u_extrude_scale),u_intensity:new W.Uniform1f(e,t.u_intensity),u_matrix:new W.UniformMatrix4f(e,t.u_matrix)}),heatmapTexture:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_world:new W.Uniform2f(e,t.u_world),u_image:new W.Uniform1i(e,t.u_image),u_color_ramp:new W.Uniform1i(e,t.u_color_ramp),u_opacity:new W.Uniform1f(e,t.u_opacity)}),hillshade:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_image:new W.Uniform1i(e,t.u_image),u_latrange:new W.Uniform2f(e,t.u_latrange),u_light:new W.Uniform2f(e,t.u_light),u_shadow:new W.UniformColor(e,t.u_shadow),u_highlight:new W.UniformColor(e,t.u_highlight),u_accent:new W.UniformColor(e,t.u_accent)}),hillshadePrepare:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_image:new W.Uniform1i(e,t.u_image),u_dimension:new W.Uniform2f(e,t.u_dimension),u_zoom:new W.Uniform1f(e,t.u_zoom),u_unpack:new W.Uniform4f(e,t.u_unpack)}),line:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_ratio:new W.Uniform1f(e,t.u_ratio),u_device_pixel_ratio:new W.Uniform1f(e,t.u_device_pixel_ratio),u_units_to_pixels:new W.Uniform2f(e,t.u_units_to_pixels)}),lineGradient:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_ratio:new W.Uniform1f(e,t.u_ratio),u_device_pixel_ratio:new W.Uniform1f(e,t.u_device_pixel_ratio),u_units_to_pixels:new W.Uniform2f(e,t.u_units_to_pixels),u_image:new W.Uniform1i(e,t.u_image),u_image_height:new W.Uniform1f(e,t.u_image_height)}),linePattern:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_texsize:new W.Uniform2f(e,t.u_texsize),u_ratio:new W.Uniform1f(e,t.u_ratio),u_device_pixel_ratio:new W.Uniform1f(e,t.u_device_pixel_ratio),u_image:new W.Uniform1i(e,t.u_image),u_units_to_pixels:new W.Uniform2f(e,t.u_units_to_pixels),u_scale:new W.Uniform3f(e,t.u_scale),u_fade:new W.Uniform1f(e,t.u_fade)}),lineSDF:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_ratio:new W.Uniform1f(e,t.u_ratio),u_device_pixel_ratio:new W.Uniform1f(e,t.u_device_pixel_ratio),u_units_to_pixels:new W.Uniform2f(e,t.u_units_to_pixels),u_patternscale_a:new W.Uniform2f(e,t.u_patternscale_a),u_patternscale_b:new W.Uniform2f(e,t.u_patternscale_b),u_sdfgamma:new W.Uniform1f(e,t.u_sdfgamma),u_image:new W.Uniform1i(e,t.u_image),u_tex_y_a:new W.Uniform1f(e,t.u_tex_y_a),u_tex_y_b:new W.Uniform1f(e,t.u_tex_y_b),u_mix:new W.Uniform1f(e,t.u_mix)}),raster:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_tl_parent:new W.Uniform2f(e,t.u_tl_parent),u_scale_parent:new W.Uniform1f(e,t.u_scale_parent),u_buffer_scale:new W.Uniform1f(e,t.u_buffer_scale),u_fade_t:new W.Uniform1f(e,t.u_fade_t),u_opacity:new W.Uniform1f(e,t.u_opacity),u_image0:new W.Uniform1i(e,t.u_image0),u_image1:new W.Uniform1i(e,t.u_image1),u_brightness_low:new W.Uniform1f(e,t.u_brightness_low),u_brightness_high:new W.Uniform1f(e,t.u_brightness_high),u_saturation_factor:new W.Uniform1f(e,t.u_saturation_factor),u_contrast_factor:new W.Uniform1f(e,t.u_contrast_factor),u_spin_weights:new W.Uniform3f(e,t.u_spin_weights)}),symbolIcon:(e,t)=>({u_is_size_zoom_constant:new W.Uniform1i(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new W.Uniform1i(e,t.u_is_size_feature_constant),u_size_t:new W.Uniform1f(e,t.u_size_t),u_size:new W.Uniform1f(e,t.u_size),u_camera_to_center_distance:new W.Uniform1f(e,t.u_camera_to_center_distance),u_pitch:new W.Uniform1f(e,t.u_pitch),u_rotate_symbol:new W.Uniform1i(e,t.u_rotate_symbol),u_aspect_ratio:new W.Uniform1f(e,t.u_aspect_ratio),u_fade_change:new W.Uniform1f(e,t.u_fade_change),u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_label_plane_matrix:new W.UniformMatrix4f(e,t.u_label_plane_matrix),u_coord_matrix:new W.UniformMatrix4f(e,t.u_coord_matrix),u_is_text:new W.Uniform1i(e,t.u_is_text),u_pitch_with_map:new W.Uniform1i(e,t.u_pitch_with_map),u_texsize:new W.Uniform2f(e,t.u_texsize),u_texture:new W.Uniform1i(e,t.u_texture)}),symbolSDF:(e,t)=>({u_is_size_zoom_constant:new W.Uniform1i(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new W.Uniform1i(e,t.u_is_size_feature_constant),u_size_t:new W.Uniform1f(e,t.u_size_t),u_size:new W.Uniform1f(e,t.u_size),u_camera_to_center_distance:new W.Uniform1f(e,t.u_camera_to_center_distance),u_pitch:new W.Uniform1f(e,t.u_pitch),u_rotate_symbol:new W.Uniform1i(e,t.u_rotate_symbol),u_aspect_ratio:new W.Uniform1f(e,t.u_aspect_ratio),u_fade_change:new W.Uniform1f(e,t.u_fade_change),u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_label_plane_matrix:new W.UniformMatrix4f(e,t.u_label_plane_matrix),u_coord_matrix:new W.UniformMatrix4f(e,t.u_coord_matrix),u_is_text:new W.Uniform1i(e,t.u_is_text),u_pitch_with_map:new W.Uniform1i(e,t.u_pitch_with_map),u_texsize:new W.Uniform2f(e,t.u_texsize),u_texture:new W.Uniform1i(e,t.u_texture),u_gamma_scale:new W.Uniform1f(e,t.u_gamma_scale),u_device_pixel_ratio:new W.Uniform1f(e,t.u_device_pixel_ratio),u_is_halo:new W.Uniform1i(e,t.u_is_halo)}),symbolTextAndIcon:(e,t)=>({u_is_size_zoom_constant:new W.Uniform1i(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new W.Uniform1i(e,t.u_is_size_feature_constant),u_size_t:new W.Uniform1f(e,t.u_size_t),u_size:new W.Uniform1f(e,t.u_size),u_camera_to_center_distance:new W.Uniform1f(e,t.u_camera_to_center_distance),u_pitch:new W.Uniform1f(e,t.u_pitch),u_rotate_symbol:new W.Uniform1i(e,t.u_rotate_symbol),u_aspect_ratio:new W.Uniform1f(e,t.u_aspect_ratio),u_fade_change:new W.Uniform1f(e,t.u_fade_change),u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_label_plane_matrix:new W.UniformMatrix4f(e,t.u_label_plane_matrix),u_coord_matrix:new W.UniformMatrix4f(e,t.u_coord_matrix),u_is_text:new W.Uniform1i(e,t.u_is_text),u_pitch_with_map:new W.Uniform1i(e,t.u_pitch_with_map),u_texsize:new W.Uniform2f(e,t.u_texsize),u_texsize_icon:new W.Uniform2f(e,t.u_texsize_icon),u_texture:new W.Uniform1i(e,t.u_texture),u_texture_icon:new W.Uniform1i(e,t.u_texture_icon),u_gamma_scale:new W.Uniform1f(e,t.u_gamma_scale),u_device_pixel_ratio:new W.Uniform1f(e,t.u_device_pixel_ratio),u_is_halo:new W.Uniform1i(e,t.u_is_halo)}),background:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_opacity:new W.Uniform1f(e,t.u_opacity),u_color:new W.UniformColor(e,t.u_color)}),backgroundPattern:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_opacity:new W.Uniform1f(e,t.u_opacity),u_image:new W.Uniform1i(e,t.u_image),u_pattern_tl_a:new W.Uniform2f(e,t.u_pattern_tl_a),u_pattern_br_a:new W.Uniform2f(e,t.u_pattern_br_a),u_pattern_tl_b:new W.Uniform2f(e,t.u_pattern_tl_b),u_pattern_br_b:new W.Uniform2f(e,t.u_pattern_br_b),u_texsize:new W.Uniform2f(e,t.u_texsize),u_mix:new W.Uniform1f(e,t.u_mix),u_pattern_size_a:new W.Uniform2f(e,t.u_pattern_size_a),u_pattern_size_b:new W.Uniform2f(e,t.u_pattern_size_b),u_scale_a:new W.Uniform1f(e,t.u_scale_a),u_scale_b:new W.Uniform1f(e,t.u_scale_b),u_pixel_coord_upper:new W.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new W.Uniform2f(e,t.u_pixel_coord_lower),u_tile_units_to_pixels:new W.Uniform1f(e,t.u_tile_units_to_pixels)}),terrain:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_texture:new W.Uniform1i(e,t.u_texture)}),terrainDepth:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix)}),terrainCoords:(e,t)=>({u_matrix:new W.UniformMatrix4f(e,t.u_matrix),u_texture:new W.Uniform1i(e,t.u_texture),u_terrain_coords_id:new W.Uniform1f(e,t.u_terrain_coords_id)})};class Tt{constructor(e,t,i){var n=(this.context=e).gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){var t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let St={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class kt{constructor(e,t,i,n){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=n;i=(this.context=e).gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of `+this.length);var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(t,i){for(let e=0;e<this.attributes.length;e++){var n=i.attributes[this.attributes[e].name];void 0!==n&&t.enableVertexAttribArray(n)}}setVertexAttribPointers(t,i,n){for(let e=0;e<this.attributes.length;e++){var r=this.attributes[e],o=i.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[St[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class u{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Et extends u{getDefault(){return W.Color.transparent}set(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a&&!this.dirty||(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class At extends u{getDefault(){return 1}set(e){e===this.current&&!this.dirty||(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Pt extends u{getDefault(){return 0}set(e){e===this.current&&!this.dirty||(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Mt extends u{getDefault(){return[!0,!0,!0,!0]}set(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&!this.dirty||(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class It extends u{getDefault(){return!0}set(e){e===this.current&&!this.dirty||(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Dt extends u{getDefault(){return 255}set(e){e===this.current&&!this.dirty||(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Lt extends u{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){var t=this.current;e.func===t.func&&e.ref===t.ref&&e.mask===t.mask&&!this.dirty||(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class zt extends u{getDefault(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&!this.dirty||(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Rt extends u{getDefault(){return!1}set(e){var t;e===this.current&&!this.dirty||(t=this.gl,e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1)}}class Ot extends u{getDefault(){return[0,1]}set(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&!this.dirty||(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Bt extends u{getDefault(){return!1}set(e){var t;e===this.current&&!this.dirty||(t=this.gl,e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1)}}class Ft extends u{getDefault(){return this.gl.LESS}set(e){e===this.current&&!this.dirty||(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Nt extends u{getDefault(){return!1}set(e){var t;e===this.current&&!this.dirty||(t=this.gl,e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1)}}class jt extends u{getDefault(){var e=this.gl;return[e.ONE,e.ZERO]}set(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&!this.dirty||(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Vt extends u{getDefault(){return W.Color.transparent}set(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a&&!this.dirty||(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Ut extends u{getDefault(){return this.gl.FUNC_ADD}set(e){e===this.current&&!this.dirty||(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class $t extends u{getDefault(){return!1}set(e){var t;e===this.current&&!this.dirty||(t=this.gl,e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1)}}class qt extends u{getDefault(){return this.gl.BACK}set(e){e===this.current&&!this.dirty||(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class Ht extends u{getDefault(){return this.gl.CCW}set(e){e===this.current&&!this.dirty||(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Zt extends u{getDefault(){return null}set(e){e===this.current&&!this.dirty||(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Gt extends u{getDefault(){return this.gl.TEXTURE0}set(e){e===this.current&&!this.dirty||(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Wt extends u{getDefault(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&!this.dirty||(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Xt extends u{getDefault(){return null}set(e){var t;e===this.current&&!this.dirty||((t=this.gl).bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1)}}class Yt extends u{getDefault(){return null}set(e){var t;e===this.current&&!this.dirty||((t=this.gl).bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1)}}class Kt extends u{getDefault(){return null}set(e){var t;e===this.current&&!this.dirty||((t=this.gl).bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1)}}class Jt extends u{getDefault(){return null}set(e){var t;e===this.current&&!this.dirty||((t=this.gl).bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1)}}class Qt extends u{getDefault(){return null}set(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ei extends u{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ti extends u{getDefault(){return 4}set(e){var t;e===this.current&&!this.dirty||((t=this.gl).pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1)}}class ii extends u{getDefault(){return!1}set(e){var t;e===this.current&&!this.dirty||((t=this.gl).pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1)}}class ni extends u{getDefault(){return!1}set(e){var t;e===this.current&&!this.dirty||((t=this.gl).pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1)}}class ri extends u{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class oi extends ri{setDirty(){this.dirty=!0}set(e){var t;e===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(t=this.gl).framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1)}}class ai extends ri{set(e){var t;e===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(t=this.gl).framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1)}}class si{constructor(e,t,i,n){this.context=e,this.width=t,this.height=i;t=e.gl,i=this.framebuffer=t.createFramebuffer();if(this.colorAttachment=new oi(e,i),n&&(this.depthAttachment=new ai(e,i)),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){let e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class P{constructor(e,t,i){this.blendFunction=e,this.blendColor=t,this.mask=i}}P.Replace=[1,0],P.disabled=new P(P.Replace,W.Color.transparent,[!1,!1,!1,!1]),P.unblended=new P(P.Replace,W.Color.transparent,[!0,!0,!0,!0]),P.alphaBlended=new P([1,771],W.Color.transparent,[!0,!0,!0,!0]);class li{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Et(this),this.clearDepth=new At(this),this.clearStencil=new Pt(this),this.colorMask=new Mt(this),this.depthMask=new It(this),this.stencilMask=new Dt(this),this.stencilFunc=new Lt(this),this.stencilOp=new zt(this),this.stencilTest=new Rt(this),this.depthRange=new Ot(this),this.depthTest=new Bt(this),this.depthFunc=new Ft(this),this.blend=new Nt(this),this.blendFunc=new jt(this),this.blendColor=new Vt(this),this.blendEquation=new Ut(this),this.cullFace=new $t(this),this.cullFaceSide=new qt(this),this.frontFace=new Ht(this),this.program=new Zt(this),this.activeTexture=new Gt(this),this.viewport=new Wt(this),this.bindFramebuffer=new Xt(this),this.bindRenderbuffer=new Yt(this),this.bindTexture=new Kt(this),this.bindVertexBuffer=new Jt(this),this.bindElementBuffer=new Qt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ei(this),this.pixelStoreUnpack=new ti(this),this.pixelStoreUnpackPremultiplyAlpha=new ii(this),this.pixelStoreUnpackFlipY=new ni(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Tt(this,e,t)}createVertexBuffer(e,t,i){return new kt(this,e,t,i)}createRenderbuffer(e,t,i){var n=this.gl,r=n.createRenderbuffer();return this.bindRenderbuffer.set(r),n.renderbufferStorage(n.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),r}createFramebuffer(e,t,i){return new si(this,e,t,i)}clear({color:e,depth:t}){var i=this.gl;let n=0;e&&(n|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(n|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),i.clear(n)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){T(e.blendFunction,P.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Y{constructor(e,t,i){this.func=e,this.mask=t,this.range=i}}Y.ReadOnly=!1,Y.ReadWrite=!0,Y.disabled=new Y(519,Y.ReadOnly,[0,1]);class M{constructor(e,t,i,n,r,o){this.test=e,this.ref=t,this.mask=i,this.fail=n,this.depthFail=r,this.pass=o}}M.disabled=new M({func:519,mask:0},0,0,7680,7680,7680);class B{constructor(e,t,i){this.enable=e,this.mode=t,this.frontFace=i}}let I;function ci(a,i,c,n,s,l,u){var d,h,p,f,m,o,g=a.context,v=g.gl,_=a.useProgram("collisionBox"),y=[];let b=0,x=0;for(let e=0;e<n.length;e++){let r=n[e],t=i.getTile(r),o=t.getBucket(c);if(o){let i=r.posMatrix,e=(0===s[0]&&0===s[1]||(i=a.translatePosMatrix(r.posMatrix,t,s,l)),u?o.textCollisionBox:o.iconCollisionBox),n=o.collisionCircleArray;if(0<n.length){let e=W.create(),t=i;W.mul(e,o.placementInvProjMatrix,a.transform.glCoordMatrix),W.mul(e,e,o.placementViewportMatrix),y.push({circleArray:n,circleOffset:x,transform:t,invTransform:e,coord:r}),b+=n.length/4,x=b}e&&_.draw(g,v.LINES,Y.disabled,M.disabled,a.colorModeForRenderPass(),B.disabled,(d=i,h=a.transform,p=t,m=f=void 0,f=X(p,1,h.zoom),m=Math.pow(2,h.zoom-p.tileID.overscaledZ),p=p.tileID.overscaleFactor(),{u_matrix:d,u_camera_to_center_distance:h.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[h.pixelsToGLUnits[0]/(f*m),h.pixelsToGLUnits[1]/(f*m)],u_overscale_factor:p}),a.style.terrain&&a.style.terrain.getTerrainData(r),c.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,null,a.transform.zoom,null,null,e.collisionVertexBuffer)}}if(u&&y.length){let i=a.useProgram("collisionCircle"),s=new W.CollisionCircleLayoutArray,l=(s.resize(4*b),s._trim(),0);for(let a of y)for(let o=0;o<a.circleArray.length/4;o++){let e=4*o,t=a.circleArray[0+e],i=a.circleArray[1+e],n=a.circleArray[2+e],r=a.circleArray[3+e];s.emplace(l++,t,i,n,r,0),s.emplace(l++,t,i,n,r,1),s.emplace(l++,t,i,n,r,2),s.emplace(l++,t,i,n,r,3)}(!I||I.length<2*b)&&(I=function(e){var i=2*e,n=new W.QuadTriangleArray;n.resize(i),n._trim();for(let t=0;t<i;t++){let e=6*t;n.uint16[0+e]=4*t+0,n.uint16[1+e]=4*t+1,n.uint16[2+e]=4*t+2,n.uint16[3+e]=4*t+2,n.uint16[4+e]=4*t+3,n.uint16[5+e]=4*t+0}return n}(b));let n=g.createIndexBuffer(I,!0),r=g.createVertexBuffer(s,W.collisionCircleLayout.members,!0);for(let t of y){let e={u_matrix:t.transform,u_inv_matrix:t.invTransform,u_camera_to_center_distance:(o=a.transform).cameraToCenterDistance,u_viewport_size:[o.width,o.height]};i.draw(g,v.TRIANGLES,Y.disabled,M.disabled,a.colorModeForRenderPass(),B.disabled,e,a.style.terrain&&a.style.terrain.getTerrainData(t.coord),c.id,r,n,W.SegmentVector.simpleSegment(0,2*t.circleOffset,t.circleArray.length,t.circleArray.length/2),null,a.transform.zoom,null,null,null)}r.destroy(),n.destroy()}}B.disabled=new B(!1,1029,2305),B.backCCW=new B(!0,1029,2305);let ui=W.identity(new Float32Array(16));function di(r,o,a,t,s,l,c,u,d,h,p){let i=r.text.placedSymbolArray,f=r.text.dynamicLayoutVertexArray,n=r.icon.dynamicLayoutVertexArray,m={};f.clear();for(let e=0;e<i.length;e++){var g=i.get(e),v=r.allowVerticalPlacement&&!g.placedOrientation,v=g.hidden||!g.crossTileID||v?null:t[g.crossTileID];if(v){let e=new W.pointGeometry(g.anchorX,g.anchorY),t=E(e,a?c:l,p),i=Te(s.cameraToCenterDistance,t.signedDistanceFromCamera),n=W.evaluateSizeForFeature(r.textSizeData,d,g)*i/W.ONE_EM;a&&(n*=r.tilePixelRatio/u);var{width:v,height:_,anchor:y,textOffset:b,textBoxScale:x}=v,y=function(e,t,i,n,r,o){var{horizontalAlign:a,verticalAlign:s}=W.getAnchorAlignment(e),a=-(a-.5)*t,t=-(s-.5)*i,s=W.evaluateVariableOffset(e,n);return new W.pointGeometry((a/r+s[0])*o,(t/r+s[1])*o)}(y,v,_,b,x,n),w=a?E(e.add(y),l,p).point:t.point.add(o?y.rotate(-s.angle):y),C=r.allowVerticalPlacement&&g.placedOrientation===W.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<g.numGlyphs;e++)W.addDynamicAttributes(f,w,C);h&&0<=g.associatedIconIndex&&(m[g.associatedIconIndex]={shiftedAnchor:w,angle:C})}else A(g.numGlyphs,f)}if(h){n.clear();let t=r.icon.placedSymbolArray;for(let e=0;e<t.length;e++){let i=t.get(e);if(i.hidden)A(i.numGlyphs,n);else{let t=m[e];if(t)for(let e=0;e<i.numGlyphs;e++)W.addDynamicAttributes(n,t.shiftedAnchor,t.angle);else A(i.numGlyphs,n)}}r.icon.dynamicLayoutVertexBuffer.updateData(n)}r.text.dynamicLayoutVertexBuffer.updateData(f)}function hi(v,e,_,t,y,b,x,i,s,Z,n,r){let o=v.context,w=o.gl,C=v.transform,T="map"===i,S="map"===s,k="viewport"!==i&&"point"!==_.layout.get("symbol-placement"),E=T&&!S&&!k,G=!_.layout.get("symbol-sort-key").isConstant(),A=!1,a=v.depthModeForSublayer(0,Y.ReadOnly),P=_.layout.get("text-variable-anchor"),M=[];for(let g of t){let f=e.getTile(g),m=f.getBucket(_);if(m){let p=y?m.text:m.icon;if(p&&p.segments.get().length){let e=p.programConfigurations.get(_.id),t=y||m.sdfIcons,i=y?m.textSizeData:m.iconSizeData,n=S||0!==C.pitch,r=v.useProgram((D=t,I=y,m.iconsInText&&I?"symbolTextAndIcon":D?"symbolSDF":"symbolIcon"),e),o=W.evaluateSizeForZoom(i,C.zoom),a=v.style.terrain&&v.style.terrain.getTerrainData(g),s,l,c,u,d=[0,0],h=null;if(y){if(l=f.glyphAtlasTexture,c=w.LINEAR,s=f.glyphAtlasTexture.size,m.iconsInText){d=f.imageAtlasTexture.size,h=f.imageAtlasTexture;let e="composite"===i.kind||"camera"===i.kind;u=n||v.options.rotating||v.options.zooming||e?w.LINEAR:w.NEAREST}}else{let e=1!==_.layout.get("icon-size").constantOr(0)||m.iconsNeedLinear;l=f.imageAtlasTexture,c=t||v.options.rotating||v.options.zooming||e||n?w.LINEAR:w.NEAREST,s=f.imageAtlasTexture.size}var I=X(f,1,v.transform.zoom),D=we(g.posMatrix,S,T,v.transform,I),I=Ce(g.posMatrix,S,T,v.transform,I),L=P&&m.hasTextData(),L="none"!==_.layout.get("icon-text-fit")&&L&&m.hasIconData();if(k){let e=v.style.terrain?(e,t)=>v.style.terrain.getElevation(g,e,t):null,t="map"===_.layout.get("text-rotation-alignment");Se(m,g.posMatrix,v,y,D,I,S,Z,t,e)}var z=v.translatePosMatrix(g.posMatrix,f,b,x),L=k||y&&P||L?ui:D,D=v.translatePosMatrix(I,f,b,x,!0),I=t&&0!==_.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1),R=t?m.iconsInText?(R=i.kind,B=o,F=E,N=S,j=v,V=z,U=L,$=D,q=s,H=d,W.extend(wt(R,B,F,N,j,V,U,$,!0,q,!0),{u_texsize_icon:H,u_texture_icon:1})):wt(i.kind,o,E,S,v,z,L,D,y,s,!0):xt(i.kind,o,E,S,v,z,L,D,y,s),O={program:r,buffers:p,uniformValues:R,atlasTexture:l,atlasTextureIcon:h,atlasInterpolation:c,atlasInterpolationIcon:u,isSDF:t,hasHalo:I};if(G&&m.canOverlap){A=!0;let t=p.segments.get();for(let e of t)M.push({segments:new W.SegmentVector([e]),sortKey:e.sortKey,state:O,terrainData:a})}else M.push({segments:p.segments,sortKey:0,state:O,terrainData:a})}}}var R,B,F,N,j,V,U,$,q,H,D,I;A&&M.sort((e,t)=>e.sortKey-t.sortKey);for(let i of M){let t=i.state;if(o.activeTexture.set(w.TEXTURE0),t.atlasTexture.bind(t.atlasInterpolation,w.CLAMP_TO_EDGE),t.atlasTextureIcon&&(o.activeTexture.set(w.TEXTURE1),t.atlasTextureIcon)&&t.atlasTextureIcon.bind(t.atlasInterpolationIcon,w.CLAMP_TO_EDGE),t.isSDF){let e=t.uniformValues;t.hasHalo&&(e.u_is_halo=1,pi(t.buffers,i.segments,_,v,t.program,a,n,r,e,i.terrainData)),e.u_is_halo=0}pi(t.buffers,i.segments,_,v,t.program,a,n,r,t.uniformValues,i.terrainData)}}function pi(e,t,i,n,r,o,a,s,l,c){var u=n.context;r.draw(u,u.gl.TRIANGLES,o,a,s,B.disabled,l,c,i.id,e.layoutVertexBuffer,e.indexBuffer,t,i.paint,n.transform.zoom,e.programConfigurations.get(i.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function fi(t,e,i,n,r,o,a){var s,l,c,u,d,h,p=t.context.gl,f=i.paint.get("fill-pattern"),m=f&&f.constantOr(1),g=i.getCrossfadeParameters();let v,_,y,b,x;v=a?(_=m&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",p.LINES):(_=m?"fillPattern":"fill",p.TRIANGLES);for(s of n){let n=e.getTile(s);if(!m||n.patternsLoaded()){var w=n.getBucket(i);if(w){var C=w.programConfigurations.get(i.id),T=t.useProgram(_,C),S=t.style.terrain&&t.style.terrain.getTerrainData(s),k=(m&&(t.context.activeTexture.set(p.TEXTURE0),n.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),C.updatePaintBuffers(g)),f.constantOr(null));if(k&&n.imageAtlas){let e=n.imageAtlas,t=e.patternPositions[k.to.toString()],i=e.patternPositions[k.from.toString()];t&&i&&C.setConstantPatternPositions(t,i)}k=S?s:null,k=t.translatePosMatrix((k||s).posMatrix,n,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){b=w.indexBuffer2,x=w.segments2;let e=[p.drawingBufferWidth,p.drawingBufferHeight];y="fillOutlinePattern"===_&&m?(l=k,c=t,u=g,d=n,h=e,W.extend(ft(l,c,u,d),{u_world:h})):{u_matrix:k,u_world:e}}else b=w.indexBuffer,x=w.segments,y=m?ft(k,t,g,n):pt(k);T.draw(t.context,v,r,t.stencilModeForClipping(s),o,B.disabled,y,S,i.id,w.layoutVertexBuffer,b,x,i.paint,t.transform.zoom,C)}}}}function mi(t,i,r,e,o,a,s){var l,c,u,d,h,p,f,m=t.context,g=m.gl,v=r.paint.get("fill-extrusion-pattern"),_=v.constantOr(1),y=r.getCrossfadeParameters(),b=r.paint.get("fill-extrusion-opacity");for(l of e){let n=i.getTile(l),e=n.getBucket(r);if(e){var x=t.style.terrain&&t.style.terrain.getTerrainData(l),w=e.programConfigurations.get(r.id),C=t.useProgram(_?"fillExtrusionPattern":"fillExtrusion",w),T=(_&&(t.context.activeTexture.set(g.TEXTURE0),n.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),w.updatePaintBuffers(y)),v.constantOr(null));if(T&&n.imageAtlas){let e=n.imageAtlas,t=e.patternPositions[T.to.toString()],i=e.patternPositions[T.from.toString()];t&&i&&w.setConstantPatternPositions(t,i)}var T=t.translatePosMatrix(l.posMatrix,n,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),S=r.paint.get("fill-extrusion-vertical-gradient"),k=_?(k=T,c=t,u=S,d=b,h=l,p=y,f=n,W.extend(ht(k,c,u,d),dt(p,c,f),{u_height_factor:-Math.pow(2,h.overscaledZ)/f.tileSize/8})):ht(T,t,S,b);C.draw(m,m.gl.TRIANGLES,o,a,s,B.backCCW,k,x,r.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,r.paint,t.transform.zoom,w,t.style.terrain&&e.centroidVertexBuffer)}}}function gi(e,t,i,n,r,o,a){var s,l,c=e.context,u=c.gl,d=i.fbo;d&&(s=e.useProgram("hillshade"),l=e.style.terrain&&e.style.terrain.getTerrainData(t),c.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,d.colorAttachment.get()),s.draw(c,u.TRIANGLES,r,o,a,B.disabled,((e,t,i,n)=>{var r=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color");let s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l=!e.options.moving;return{u_matrix:n?n.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:(n=t.tileID,e=Math.pow(2,n.canonical.z),n=n.canonical.y,[new W.MercatorCoordinate(0,n/e).toLngLat().lat,new W.MercatorCoordinate(0,(n+1)/e).toLngLat().lat]),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:o,u_accent:a}})(e,i,n,l?t:null),l,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments))}let vi=new W.Color(1,0,0,1),_i=new W.Color(0,1,0,1),yi=new W.Color(0,0,1,1),bi=new W.Color(1,0,1,1),xi=new W.Color(0,1,1,1);function wi(e,t,i,n){g(e,0,t+i/2,e.transform.width,i,n)}function Ci(e,t,i,n){g(e,t-i/2,0,i,e.transform.height,n)}function g(e,t,i,n,r,o){var a=e.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*e.pixelRatio,i*e.pixelRatio,n*e.pixelRatio,r*e.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function Ti(e,t,i){var n=e.context,r=n.gl,o=e.colorModeForRenderPass(),a=new Y(r.LEQUAL,Y.ReadWrite,e.depthRangeFor3D),s=e.useProgram("terrain"),l=t.getTerrainMesh(),c=t.getTerrainData(i.tileID),t=(n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height]),n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.getRTTFramebuffer().colorAttachment.get()),e.transform.calculatePosMatrix(i.tileID.toUnwrapped()));s.draw(n,r.TRIANGLES,a,M.disabled,o,B.backCCW,{u_matrix:t,u_texture:0},c,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}function Si(e,t,i,n){var r=e.context,o=i.tileSize*t.qualityFactor,e=(i.textures[n]||(i.textures[n]=e.getTileTexture(o)||new O(r,{width:o,height:o,data:null},r.gl.RGBA),i.textures[n].bind(r.gl.LINEAR,r.gl.CLAMP_TO_EDGE),0===n&&t.sourceCache.renderHistory.unshift(i.tileID.key)),t.getRTTFramebuffer());e.colorAttachment.set(i.textures[n].texture),r.bindFramebuffer.set(e.framebuffer),r.viewport.set([0,0,o,o])}class ki{constructor(e){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=e,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=e.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){let t=this.painter.style,n=t.terrain;for(var i in t.sourceCaches){this._coordsDescendingInv[i]={};var r=t.sourceCaches[i].getVisibleCoordinates();for(let e of r){var o=n.sourceCache.getTerrainCoords(e);for(let e in o)this._coordsDescendingInv[i][e]||(this._coordsDescendingInv[i][e]=[]),this._coordsDescendingInv[i][e].push(o[e])}}for(let e of t._order){var a=t._layers[e],s=a.source;if(this._renderToTexture[a.type]&&!this._coordsDescendingInvStr[s]){this._coordsDescendingInvStr[s]={};for(let e in this._coordsDescendingInv[s])this._coordsDescendingInvStr[s][e]=this._coordsDescendingInv[s][e].map(e=>e.key).sort().join()}}return this._renderableTiles.forEach(e=>{for(var t in this._coordsDescendingInvStr){var i=this._coordsDescendingInvStr[t][e.tileID.key];i&&i!==e.textureCoords[t]&&e.clearTextures(this.painter),n.needsRerender(t,e.tileID)&&e.clearTextures(this.painter)}this._rerender[e.tileID.key]=!e.textures.length}),n.clearRerenderCache(),n.sourceCache.removeOutdated(this.painter),this}renderLayer(i){let t=i.type,o=this.painter,n=o.style._order,a=o.currentLayer,e=a+1===n.length;if(this._renderToTexture[t]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=t,this._stacks[this._stacks.length-1].push(n[a]),!e))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===t||this._renderToTexture[t]&&e){this._prevType=t;let e=this._stacks.length-1,r=this._stacks[e]||[];for(let n of this._renderableTiles){if(Si(o,o.style.terrain,n,e),this._rerender[n.tileID.key]){o.context.clear({color:W.Color.transparent});for(let i=0;i<r.length;i++){let e=o.style._layers[r[i]],t=e.source?this._coordsDescendingInv[e.source][n.tileID.key]:[n.tileID];o._renderTileClippingMasks(e,t),o.renderLayer(o,o.style.sourceCaches[e.source],e,t),e.source&&(n.textureCoords[e.source]=this._coordsDescendingInvStr[e.source][n.tileID.key])}}Ti(o,o.style.terrain,n)}if("hillshade"!==t)return this._renderToTexture[t];this._stacks.push([n[a]]);for(let t of this._renderableTiles){let e=this._coordsDescendingInv[i.source][t.tileID.key];Si(o,o.style.terrain,t,this._stacks.length-1),o.context.clear({color:W.Color.transparent}),o._renderTileClippingMasks(i,e),o.renderLayer(o,o.style.sourceCaches[i.source],i,e),Ti(o,o.style.terrain,t)}return!0}return!1}}let Ei={symbol:function(e,t,i,n,r){if("translucent"===e.renderPass){var o=M.disabled,a=e.colorModeForRenderPass();if(i.layout.get("text-variable-anchor")){var s=n;var l=e;var c=i;var u=t;var d=i.layout.get("text-rotation-alignment");var h=i.layout.get("text-pitch-alignment");var p=r;var f=l.transform,m="map"===d,g="map"===h;for(let n of s){let t=u.getTile(n),i=t.getBucket(c);if(i&&i.text&&i.text.segments.get().length){var v=W.evaluateSizeForZoom(i.textSizeData,f.zoom),_=X(t,1,l.transform.zoom),_=we(n.posMatrix,g,m,l.transform,_),y="none"!==c.layout.get("icon-text-fit")&&i.hasIconData();if(v){let e=Math.pow(2,f.zoom-t.tileID.overscaledZ);di(i,m,g,p,f,_,n.posMatrix,e,v,y,l.style.terrain?(e,t)=>l.style.terrain.getElevation(n,e,t):null)}}}}0!==i.paint.get("icon-opacity").constantOr(1)&&hi(e,t,i,n,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,a),0!==i.paint.get("text-opacity").constantOr(1)&&hi(e,t,i,n,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,a),t.map.showCollisionBoxes&&(ci(e,t,i,n,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),ci(e,t,i,n,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(f,n,m,r){if("translucent"===f.renderPass){let e=m.paint.get("circle-opacity"),t=m.paint.get("circle-stroke-width"),i=m.paint.get("circle-stroke-opacity"),p=!m.layout.get("circle-sort-key").isConstant();if(0!==e.constantOr(1)||0!==t.constantOr(1)&&0!==i.constantOr(1)){let s=f.context,l=s.gl,c=f.depthModeForSublayer(0,Y.ReadOnly),u=M.disabled,d=f.colorModeForRenderPass(),h=[];for(let e=0;e<r.length;e++){let a=r[e],s=n.getTile(a),l=s.getBucket(m);if(l){let e=l.programConfigurations.get(m.id),t=f.useProgram("circle",e),i=l.layoutVertexBuffer,n=l.indexBuffer,r=f.style.terrain&&f.style.terrain.getTerrainData(a),o={programConfiguration:e,program:t,layoutVertexBuffer:i,indexBuffer:n,uniformValues:((e,t,i,n)=>{var r=e.transform;let o,a;if("map"===n.paint.get("circle-pitch-alignment")){let e=X(i,1,r.zoom);o=!0,a=[e,e]}else o=!1,a=r.pixelsToGLUnits;return{u_camera_to_center_distance:r.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,i,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:a}})(f,a,s,m),terrainData:r};if(p){let t=l.segments.get();for(let e of t)h.push({segments:new W.SegmentVector([e]),sortKey:e.sortKey,state:o})}else h.push({segments:l.segments,sortKey:0,state:o})}}p&&h.sort((e,t)=>e.sortKey-t.sortKey);for(let a of h){let{programConfiguration:e,program:t,layoutVertexBuffer:i,indexBuffer:n,uniformValues:r,terrainData:o}=a.state;t.draw(s,l.TRIANGLES,c,u,d,B.disabled,r,o,m.id,i,n,a.segments,m.paint,f.transform.zoom,e)}}}},heatmap:function(o,a,s,l){if(0!==s.paint.get("heatmap-opacity"))if("offscreen"===o.renderPass){let t=o.context,i=t.gl,n=M.disabled,r=new P([i.ONE,i.ONE],W.Color.transparent,[!0,!0,!0,!0]);{var c=t;var u=o;var d=s;var h=c.gl;c.activeTexture.set(h.TEXTURE1),c.viewport.set([0,0,u.width/4,u.height/4]);let e=d.heatmapFbo;e?(h.bindTexture(h.TEXTURE_2D,e.colorAttachment.get()),c.bindFramebuffer.set(e.framebuffer)):(g=h.createTexture(),h.bindTexture(h.TEXTURE_2D,g),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),e=d.heatmapFbo=c.createFramebuffer(u.width/4,u.height/4,!1),h=c,d=g,c=e,(g=h.gl).texImage2D(g.TEXTURE_2D,0,g.RGBA,u.width/4,u.height/4,0,g.RGBA,h.extRenderToTextureHalfFloat?h.extTextureHalfFloat.HALF_FLOAT_OES:g.UNSIGNED_BYTE,null),c.colorAttachment.set(d))}t.clear({color:W.Color.transparent});for(let e=0;e<l.length;e++){var p,f,m=l[e];a.hasRenderableParent(m)||(p=(_=a.getTile(m)).getBucket(s))&&(f=p.programConfigurations.get(s.id),v=o.useProgram("heatmap",f),y=o.transform["zoom"],v.draw(t,i.TRIANGLES,Y.disabled,n,r,B.disabled,(v=m.posMatrix,m=_,_=y,y=s.paint.get("heatmap-intensity"),{u_matrix:v,u_extrude_scale:X(m,1,_),u_intensity:y}),null,s.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,s.paint,o.transform.zoom,f))}t.viewport.set([0,0,o.width,o.height])}else if("translucent"===o.renderPass){o.context.setColorMode(o.colorModeForRenderPass());{u=o;h=s;var g=u.context,c=g.gl,d=h.heatmapFbo;if(d){g.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,d.colorAttachment.get()),g.activeTexture.set(c.TEXTURE1);let e=h.colorRampTexture;(e=e||(h.colorRampTexture=new O(g,h.colorRamp,c.RGBA))).bind(c.LINEAR,c.CLAMP_TO_EDGE),u.useProgram("heatmapTexture").draw(g,c.TRIANGLES,Y.disabled,M.disabled,u.colorModeForRenderPass(),B.disabled,(d=u,g=h,c=W.create(),W.ortho(c,0,d.width,d.height,0,0,1),d=d.context.gl,{u_matrix:c,u_world:[d.drawingBufferWidth,d.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:g.paint.get("heatmap-opacity")}),null,h.id,u.viewportBuffer,u.quadTriangleIndexBuffer,u.viewportSegments,h.paint,u.transform.zoom)}}}var v,_,y},line:function(a,s,l,i){if("translucent"===a.renderPass){let e=l.paint.get("line-opacity"),t=l.paint.get("line-width");if(0!==e.constantOr(1)&&0!==t.constantOr(1)){var c,u,d,h,p,f,m,g,v,_,y,b=a.depthModeForSublayer(0,Y.ReadOnly),x=a.colorModeForRenderPass(),w=l.paint.get("line-dasharray"),C=l.paint.get("line-pattern"),T=C.constantOr(1),S=l.paint.get("line-gradient"),k=l.getCrossfadeParameters(),E=T?"linePattern":w?"lineSDF":S?"lineGradient":"line",A=a.context,P=A.gl;let e=!0;for(let o of i){let r=s.getTile(o);if(!T||r.patternsLoaded()){let n=r.getBucket(l);if(n){var M=n.programConfigurations.get(l.id),I=a.context.program.get(),D=a.useProgram(E,M),I=e||D.program!==I,L=a.style.terrain&&a.style.terrain.getTerrainData(o),z=C.constantOr(null);if(z&&r.imageAtlas){let e=r.imageAtlas,t=e.patternPositions[z.to.toString()],i=e.patternPositions[z.from.toString()];t&&i&&M.setConstantPatternPositions(t,i)}var z=L?o:null,R=T?(p=a,f=r,m=l,g=k,v=z,y=_=void 0,_=p.transform,y=_t(f,_),{u_matrix:yt(p,f,m,v),u_texsize:f.imageAtlasTexture.size,u_ratio:1/X(f,1,_.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[y,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}):w?(m=a,v=r,f=l,p=w,y=k,g=z,h=u=d=u=c=_=void 0,_=m.lineAtlas,c=_t(v,m.transform),u="round"===f.layout.get("line-cap"),d=_.getDash(p.from,u),p=_.getDash(p.to,u),u=d.width*y.fromScale,h=p.width*y.toScale,W.extend(vt(m,v,f,g),{u_patternscale_a:[c/u,-d.height/2],u_patternscale_b:[c/h,-p.height/2],u_sdfgamma:_.width/(256*Math.min(u,h)*m.pixelRatio)/2,u_image:0,u_tex_y_a:d.y,u_tex_y_b:p.y,u_mix:y.t})):S?(c=a,u=r,h=l,d=n.lineClipsArray.length,R=z,W.extend(vt(c,u,h,R),{u_image:0,u_image_height:d})):vt(a,r,l,z);if(T)A.activeTexture.set(P.TEXTURE0),r.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),M.updatePaintBuffers(k);else if(w&&(I||a.lineAtlas.dirty))A.activeTexture.set(P.TEXTURE0),a.lineAtlas.bind(A);else if(S){let e=n.gradients[l.id],t=e.texture;if(l.gradientVersion!==e.version){let i=256;if(l.stepInterpolant){let e=s.getSource().maxzoom,t=o.canonical.z===e?Math.ceil(1<<a.transform.maxZoom-o.canonical.z):1;i=W.clamp(W.nextPowerOfTwo(n.maxLineLength/W.EXTENT*1024*t),256,A.maxTextureSize)}e.gradient=W.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:i,image:e.gradient||void 0,clips:n.lineClipsArray}),e.texture?e.texture.update(e.gradient):e.texture=new O(A,e.gradient,P.RGBA),e.version=l.gradientVersion,t=e.texture}A.activeTexture.set(P.TEXTURE0),t.bind(l.stepInterpolant?P.NEAREST:P.LINEAR,P.CLAMP_TO_EDGE)}D.draw(A,P.TRIANGLES,b,a.stencilModeForClipping(o),x,B.disabled,R,L,l.id,n.layoutVertexBuffer,n.indexBuffer,n.segments,l.paint,a.transform.zoom,M,n.layoutVertexBuffer2),e=!1}}}}}},fill:function(t,i,n,r){var e=n.paint.get("fill-color"),o=n.paint.get("fill-opacity");if(0!==o.constantOr(1)){var a=t.colorModeForRenderPass(),s=n.paint.get("fill-pattern"),s=t.opaquePassEnabledForLayer()&&!s.constantOr(1)&&1===e.constantOr(W.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===s){let e=t.depthModeForSublayer(1,"opaque"===t.renderPass?Y.ReadWrite:Y.ReadOnly);fi(t,i,n,r,e,a,!1)}if("translucent"===t.renderPass&&n.paint.get("fill-antialias")){let e=t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Y.ReadOnly);fi(t,i,n,r,e,a,!0)}}},"fill-extrusion":function(t,i,n,r){let e=n.paint.get("fill-extrusion-opacity");if(0!==e&&"translucent"===t.renderPass){var o=new Y(t.context.gl.LEQUAL,Y.ReadWrite,t.depthRangeFor3D);if(1!==e||n.paint.get("fill-extrusion-pattern").constantOr(1))mi(t,i,n,r,o,M.disabled,P.disabled),mi(t,i,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{let e=t.colorModeForRenderPass();mi(t,i,n,r,o,M.disabled,e)}}},hillshade:function(a,s,l,t){if("offscreen"===a.renderPass||"translucent"===a.renderPass){let e=a.context,i=a.depthModeForSublayer(0,Y.ReadOnly),n=a.colorModeForRenderPass(),[r,o]="translucent"===a.renderPass?a.stencilConfigForOverlap(t):[{},t];for(let t of o){let e=s.getTile(t);if(void 0!==e.needsHillshadePrepare&&e.needsHillshadePrepare&&"offscreen"===a.renderPass){c=void 0;u=void 0;d=void 0;h=void 0;p=void 0;f=void 0;m=void 0;g=void 0;v=void 0;_=void 0;y=void 0;b=void 0;var c=a;var u=e;var d=l;var h=i;var p=M.disabled;var f=n;var m=c.context,g=m.gl,v=u.dem;if(v&&v.data){var _=v.dim,y=v.stride,b=v.getPixels();if(m.activeTexture.set(g.TEXTURE1),m.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||c.getTileTexture(y),u.demTexture){let e=u.demTexture;e.update(b,{premultiply:!1}),e.bind(g.NEAREST,g.CLAMP_TO_EDGE)}else u.demTexture=new O(m,b,g.RGBA,{premultiply:!1}),u.demTexture.bind(g.NEAREST,g.CLAMP_TO_EDGE);m.activeTexture.set(g.TEXTURE0);let t=u.fbo;if(!t){let e=new O(m,{width:_,height:_,data:null},g.RGBA);e.bind(g.LINEAR,g.CLAMP_TO_EDGE),(t=u.fbo=m.createFramebuffer(_,_,!0)).colorAttachment.set(e.texture)}m.bindFramebuffer.set(t.framebuffer),m.viewport.set([0,0,_,_]),c.useProgram("hillshadePrepare").draw(m,g.TRIANGLES,h,p,f,B.disabled,(y=u.tileID,_=(b=v).stride,m=W.create(),W.ortho(m,0,W.EXTENT,-W.EXTENT,0,0,1),W.translate(m,m,[0,-W.EXTENT,0]),{u_matrix:m,u_image:1,u_dimension:[_,_],u_zoom:y.overscaledZ,u_unpack:b.getUnpackVector()}),null,d.id,c.rasterBoundsBuffer,c.quadTriangleIndexBuffer,c.rasterBoundsSegments),u.needsHillshadePrepare=!1}}else"translucent"===a.renderPass&&gi(a,t,e,l,i,r[t.overscaledZ],n)}e.viewport.set([0,0,a.width,a.height])}},raster:function(p,f,m,t){if("translucent"===p.renderPass&&0!==m.paint.get("raster-opacity")&&t.length){let o=p.context,a=o.gl,s=f.getSource(),l=p.useProgram("raster"),c=p.colorModeForRenderPass(),[u,e]=s instanceof b?[{},t]:p.stencilConfigForOverlap(t),d=e[e.length-1].overscaledZ,h=!p.options.moving;for(let r of e){let e=p.depthModeForSublayer(r.overscaledZ-d,1===m.paint.get("raster-opacity")?Y.ReadWrite:Y.ReadOnly,a.LESS),t=f.getTile(r);t.registerFadeDuration(m.paint.get("raster-fade-duration"));var g=f.findLoadedParent(r,0),v=function(s,l,c,e,u,t){var d=e.paint.get("raster-fade-duration");if(!t&&0<d){let e=W.exported.now(),t=(e-s.timeAdded)/d,i=l?(e-l.timeAdded)/d:-1,n=c.getSource(),r=u.coveringZoomLevel({tileSize:n.tileSize,roundZoom:n.roundZoom}),o=!l||Math.abs(l.tileID.overscaledZ-r)>Math.abs(s.tileID.overscaledZ-r),a=o&&s.refreshedUponExpiration?1:W.clamp(o?t:1-i,0,1);return s.refreshedUponExpiration&&1<=t&&(s.refreshedUponExpiration=!1),l?{opacity:1,mix:1-a}:{opacity:a,mix:0}}return{opacity:1,mix:0}}(t,g,f,m,p.transform,p.style.terrain);let i,n;var _="nearest"===m.paint.get("raster-resampling")?a.NEAREST:a.LINEAR,g=(o.activeTexture.set(a.TEXTURE0),t.texture.bind(_,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.activeTexture.set(a.TEXTURE1),g?(g.texture.bind(_,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),i=Math.pow(2,g.tileID.overscaledZ-t.tileID.overscaledZ),n=[t.tileID.canonical.x*i%1,t.tileID.canonical.y*i%1]):t.texture.bind(_,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),p.style.terrain&&p.style.terrain.getTerrainData(r)),_=g?r:null,_=_?_.posMatrix:p.transform.calculatePosMatrix(r.toUnwrapped(),h),_=bt(_,n||[0,0],i||1,v,m);s instanceof b?l.draw(o,a.TRIANGLES,e,M.disabled,c,B.disabled,_,g,m.id,s.boundsBuffer,p.quadTriangleIndexBuffer,s.boundsSegments):l.draw(o,a.TRIANGLES,e,u[r.overscaledZ],c,B.disabled,_,g,m.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}}},background:function(h,e,p,f){var m=p.paint.get("background-color"),g=p.paint.get("background-opacity");if(0!==g){let l=h.context,c=l.gl,i=h.transform,u=i.tileSize,d=p.paint.get("background-pattern");if(!h.isPatternMissing(d)){let t=!d&&1===m.a&&1===g&&h.opaquePassEnabledForLayer()?"opaque":"translucent";if(h.renderPass===t){let r=M.disabled,o=h.depthModeForSublayer(0,"opaque"===t?Y.ReadWrite:Y.ReadOnly),a=h.colorModeForRenderPass(),s=h.useProgram(d?"backgroundPattern":"background"),e=f||i.coveringTiles({tileSize:u,terrain:h.style.terrain});d&&(l.activeTexture.set(c.TEXTURE0),h.imageManager.bind(h.context));var v,_,y,b=p.getCrossfadeParameters();for(let n of e){let e=f?n.posMatrix:h.transform.calculatePosMatrix(n.toUnwrapped()),t=d?(v=e,_=g,y={tileID:n,tileSize:u},W.extend(function(e,t,i,n){var r=i.imageManager.getPattern(e.from.toString()),e=i.imageManager.getPattern(e.to.toString()),{width:o,height:a}=i.imageManager.getPixelSize(),s=Math.pow(2,n.tileID.overscaledZ),l=n.tileSize*Math.pow(2,i.transform.tileZoom)/s,s=l*(n.tileID.canonical.x+n.tileID.wrap*s),l=l*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:e.tl,u_pattern_br_b:e.br,u_texsize:[o,a],u_mix:t.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:e.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/X(n,1,i.transform.tileZoom),u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}(d,b,h,y),{u_matrix:v,u_opacity:_})):{u_matrix:e,u_opacity:g,u_color:m},i=h.style.terrain&&h.style.terrain.getTerrainData(n);s.draw(l,c.TRIANGLES,o,r,a,B.disabled,t,i,p.id,h.tileExtentBuffer,h.quadTriangleIndexBuffer,h.tileExtentSegments)}}}}},debug:function(i,n,r){for(let t=0;t<r.length;t++){o=void 0;a=void 0;s=void 0;d=void 0;h=void 0;p=void 0;f=void 0;m=void 0;g=void 0;v=void 0;_=void 0;y=void 0;l=void 0;c=void 0;u=void 0;var o=i;var a=n;var s=r[t];var l,c,u,d=o.context,h=d.gl,p=s.posMatrix,f=o.useProgram("debug"),m=Y.disabled,g=M.disabled,v=o.colorModeForRenderPass(),_=o.style.terrain&&o.style.terrain.getTerrainData(s),y=(d.activeTexture.set(h.TEXTURE0),o.emptyTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),a.getTileByID(s.key).latestRawTileData),y=Math.floor((y&&y.byteLength||0)/1024),a=a.getTile(s).tileSize,a=512/Math.min(a,512)*(s.overscaledZ/o.transform.zoom)*.5;let e=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(e+=" => "+s.overscaledZ),s=o,y=e+` ${y}kB`,s.initDebugOverlayCanvas(),l=s.debugOverlayCanvas,c=s.context.gl,(u=s.debugOverlayCanvas.getContext("2d")).clearRect(0,0,l.width,l.height),u.shadowColor="white",u.shadowBlur=2,u.lineWidth=1.5,u.strokeStyle="white",u.textBaseline="top",u.font="bold 36px Open Sans, sans-serif",u.fillText(y,5,5),u.strokeText(y,5,5),s.debugOverlayTexture.update(l),s.debugOverlayTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),f.draw(d,h.TRIANGLES,m,g,P.alphaBlended,B.disabled,mt(p,W.Color.transparent,a),null,"$debug",o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments),f.draw(d,h.LINE_STRIP,m,g,v,B.disabled,mt(p,W.Color.red),_,"$debug",o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments)}},custom:function(t,e,i){var n=t.context,i=i.implementation;if("offscreen"===t.renderPass){let e=i.prerender;e&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),e.call(i,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(M.disabled);let e="3d"===i.renderingMode?new Y(t.context.gl.LEQUAL,Y.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Y.ReadOnly);n.setDepthMode(e),i.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}};class Ai{constructor(e,t){this.context=new li(e),this.transform=t,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:W.create(),renderTime:0},this.setup(),this.numSublayers=r.maxUnderzooming+r.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tt,this.gpuTimers={}}resize(e,t,i){if(this.width=e*i,this.height=t*i,this.pixelRatio=i,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let e of this.style._order)this.style._layers[e].resize()}setup(){var e=this.context,t=new W.PosArray,t=(t.emplaceBack(0,0),t.emplaceBack(W.EXTENT,0),t.emplaceBack(0,W.EXTENT),t.emplaceBack(W.EXTENT,W.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(t,c.members),this.tileExtentSegments=W.SegmentVector.simpleSegment(0,0,4,2),new W.PosArray),t=(t.emplaceBack(0,0),t.emplaceBack(W.EXTENT,0),t.emplaceBack(0,W.EXTENT),t.emplaceBack(W.EXTENT,W.EXTENT),this.debugBuffer=e.createVertexBuffer(t,c.members),this.debugSegments=W.SegmentVector.simpleSegment(0,0,4,5),new W.RasterBoundsArray),t=(t.emplaceBack(0,0,0,0),t.emplaceBack(W.EXTENT,0,W.EXTENT,0),t.emplaceBack(0,W.EXTENT,0,W.EXTENT),t.emplaceBack(W.EXTENT,W.EXTENT,W.EXTENT,W.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(t,n.members),this.rasterBoundsSegments=W.SegmentVector.simpleSegment(0,0,4,2),new W.PosArray),t=(t.emplaceBack(0,0),t.emplaceBack(1,0),t.emplaceBack(0,1),t.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(t,c.members),this.viewportSegments=W.SegmentVector.simpleSegment(0,0,4,2),new W.LineStripIndexArray),t=(t.emplaceBack(0),t.emplaceBack(1),t.emplaceBack(3),t.emplaceBack(2),t.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(t),new W.TriangleIndexArray),t=(t.emplaceBack(0,1,2),t.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(t),this.emptyTexture=new O(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA),this.context.gl);this.stencilClearMode=new M({func:t.ALWAYS,mask:0},0,255,t.ZERO,t.ZERO,t.ZERO)}clearStencil(){var e=this.context,t=e.gl,i=(this.nextStencilID=1,this.currentStencilSource=void 0,W.create());W.ortho(i,0,this.width,this.height,0,0,1),W.scale(i,i,[t.drawingBufferWidth,t.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,t.TRIANGLES,Y.disabled,this.stencilClearMode,P.disabled,B.disabled,gt(i),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t){if(this.currentStencilSource!==e.source&&e.isTileClipped()&&t&&t.length){this.currentStencilSource=e.source;var n=this.context,r=n.gl,o=(256<this.nextStencilID+t.length&&this.clearStencil(),n.setColorMode(P.disabled),n.setDepthMode(Y.disabled),this.useProgram("clippingMask"));this._tileClippingMaskIDs={};for(let i of t){let e=this._tileClippingMaskIDs[i.key]=this.nextStencilID++,t=this.style.terrain&&this.style.terrain.getTerrainData(i);o.draw(n,r.TRIANGLES,Y.disabled,new M({func:r.ALWAYS,mask:0},e,255,r.KEEP,r.KEEP,r.REPLACE),P.disabled,B.disabled,gt(i.posMatrix),t,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}}stencilModeFor3D(){this.currentStencilSource=void 0,256<this.nextStencilID+1&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new M({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){var t=this.context.gl;return new M({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){var i=this.context.gl,n=e.sort((e,t)=>t.overscaledZ-e.overscaledZ),r=n[n.length-1].overscaledZ,o=n[0].overscaledZ-r+1;if(1<o){this.currentStencilSource=void 0,256<this.nextStencilID+o&&this.clearStencil();let t={};for(let e=0;e<o;e++)t[e+r]=new M({func:i.GEQUAL,mask:255},e+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[t,n]}return[{[r]:M.disabled},n]}colorModeForRenderPass(){var e=this.context.gl;return this._showOverdrawInspector?new P([e.CONSTANT_COLOR,e.ONE],new W.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?P.unblended:P.alphaBlended}depthModeForSublayer(e,t,i){return this.opaquePassEnabledForLayer()?(e=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,new Y(i||this.context.gl.LEQUAL,t,[e,e])):Y.disabled}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,t){this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(W.exported.now()),this.imageManager.beginFrame();var n=this.style._order,r=this.style.sourceCaches,o=this.style.terrain&&new ki(this);for(let t in r){let e=r[t];e.used&&e.prepare(this.context)}var i,a,s={},l={},c={};for(let t in r){let e=r[t];s[t]=e.getVisibleCoordinates(),l[t]=s[t].slice().reverse(),c[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<n.length;e++)if(this.style._layers[n[e]].is3D()){this.opaquePassCutoff=e;break}if(o){this.opaquePassCutoff=0;let e=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);if(this.terrainFacilitator.dirty||!W.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||e.length){W.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1;{var u=this;var d=this.style.terrain;let n=u.context,r=n.gl,o=P.unblended,a=new Y(r.LEQUAL,Y.ReadWrite,[0,1]),s=d.getTerrainMesh(),e=d.sourceCache.getRenderableTiles(),l=u.useProgram("terrainDepth");n.bindFramebuffer.set(d.getFramebuffer("depth").framebuffer),n.viewport.set([0,0,u.width/devicePixelRatio,u.height/devicePixelRatio]),n.clear({color:W.Color.transparent,depth:1});for(let i of e){let e=d.getTerrainData(i.tileID),t=u.transform.calculatePosMatrix(i.tileID.toUnwrapped());l.draw(n,r.TRIANGLES,a,M.disabled,o,B.backCCW,{u_matrix:t},e,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}n.bindFramebuffer.set(null),n.viewport.set([0,0,u.width,u.height])}{var h=this;var p=this.style.terrain;let i=h.context,n=i.gl,r=P.unblended,o=new Y(n.LEQUAL,Y.ReadWrite,[0,1]),a=p.getTerrainMesh(),s=p.getCoordsTexture(),e=p.sourceCache.getRenderableTiles(),l=h.useProgram("terrainCoords");i.bindFramebuffer.set(p.getFramebuffer("coords").framebuffer),i.viewport.set([0,0,h.width/devicePixelRatio,h.height/devicePixelRatio]),i.clear({color:W.Color.transparent,depth:1}),p.coordsIndex=[];for(let t of e){let e=p.getTerrainData(t.tileID);i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s.texture);var f=h.transform.calculatePosMatrix(t.tileID.toUnwrapped());l.draw(i,n.TRIANGLES,o,M.disabled,r,B.backCCW,{u_matrix:f,u_terrain_coords_id:(255-p.coordsIndex.length)/255,u_texture:0},e,"terrain",a.vertexBuffer,a.indexBuffer,a.segments),p.coordsIndex.push(t.tileID.key)}i.bindFramebuffer.set(null),i.viewport.set([0,0,h.width,h.height])}}}this.renderPass="offscreen";for(let e of n){let t=this.style._layers[e];if(t.hasOffscreenPass()&&!t.isHidden(this.transform.zoom)){let e=l[t.source];"custom"!==t.type&&!e.length||this.renderLayer(this,r[t.source],t,e)}}if(this.context.bindFramebuffer.set(null),this.context.clear({color:t.showOverdrawInspector?W.Color.black:W.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=t.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!o)for(this.renderPass="opaque",this.currentLayer=n.length-1;0<=this.currentLayer;this.currentLayer--){let e=this.style._layers[n[this.currentLayer]],t=r[e.source],i=s[e.source];this._renderTileClippingMasks(e,i),this.renderLayer(this,t,e,i)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){let t=this.style._layers[n[this.currentLayer]],i=r[t.source];if(!o||!o.renderLayer(t)){let e=("symbol"===t.type?c:l)[t.source];this._renderTileClippingMasks(t,s[t.source]),this.renderLayer(this,i,t,e)}}if(this.options.showTileBoundaries){let t,i;Object.values(this.style._layers).forEach(e=>{e.source&&!e.isHidden(this.transform.zoom)&&(e.source!==(i&&i.id)&&(i=this.style.sourceCaches[e.source]),!t||t.getSource().maxzoom<i.getSource().maxzoom)&&(t=i)}),t&&Ei.debug(this,t,t.getVisibleCoordinates())}this.options.showPadding&&(e=(t=this).transform.padding,wi(t,t.transform.height-(e.top||0),3,vi),wi(t,e.bottom||0,3,_i),Ci(t,e.left||0,3,yi),Ci(t,t.transform.width-(e.right||0),3,bi),e=t.transform.centerPoint,i=t,a=e.x,t=t.transform.height-e.y,e=xi,g(i,a-1,t-10,2,20,e),g(i,a-10,t-1,20,2,e)),this.context.setDefault()}renderLayer(e,t,i,n){i.isHidden(this.transform.zoom)||"background"!==i.type&&"custom"!==i.type&&!(n||[]).length||(this.id=i.id,this.gpuTimingStart(i),Ei[i.type](e,t,i,n,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(this.options.gpuTiming){var i=this.context.extTimerQuery;let e=this.gpuTimers[t.id];(e=e||(this.gpuTimers[t.id]={calls:0,cpuTime:0,query:i.createQueryEXT()})).calls++,i.beginQueryEXT(i.TIME_ELAPSED_EXT,e.query)}}gpuTimingEnd(){var e;this.options.gpuTiming&&(e=this.context.extTimerQuery).endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){var e=this.gpuTimers;return this.gpuTimers={},e}queryGpuTimers(e){var t,i={};for(t in e){var n=e[t],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(n.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n.query),i[t]=o}return i}translatePosMatrix(e,t,i,n,r){if(!i[0]&&!i[1])return e;n=r?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(n){let e=Math.sin(n),t=Math.cos(n);i=[i[0]*t-i[1]*e,i[0]*e+i[1]*t]}n=[r?i[0]:X(t,i[0],this.transform.zoom),r?i[1]:X(t,i[1],this.transform.zoom),0],r=new Float32Array(16);return W.translate(r,e,n),r}saveTileTexture(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){e=this._tileTextures[e];return e&&0<e.length?e.pop():null}isPatternMissing(e){var t;return!(!e||e.from&&e.to&&(t=this.imageManager.getPattern(e.from.toString()),e=this.imageManager.getPattern(e.to.toString()),t)&&e)}useProgram(e,t){this.cache=this.cache||{};var i=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[i]||(this.cache[i]=new ut(this.context,e,f[e],t,Ct[e],this._showOverdrawInspector,this.style.terrain)),this.cache[i]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new O(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Pi{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(i,n,e){let r=Math.pow(2,e),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(e=>{var t=1/(e=W.transformMat4([],e,i))[3]/n*r;return W.mul$1(e,e,[t,t,1/e[3],t])}),t=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(e=>{var t=W.sub([],o[e[0]],o[e[1]]),i=W.sub([],o[e[2]],o[e[1]]),t=W.normalize([],W.cross([],t,i)),i=-W.dot(t,o[e[1]]);return t.concat(i)});return new Pi(o,t)}}class Mi{constructor(e,t){this.min=e,this.max=t,this.center=W.scale$1([],W.add([],this.min,this.max),.5)}quadrant(e){var t=[e%2==0,e<2],i=W.clone$2(this.min),n=W.clone$2(this.max);for(let e=0;e<t.length;e++)i[e]=(t[e]?this.min:this.center)[e],n[e]=(t[e]?this.center:this.max)[e];return n[2]=this.max[2],new Mi(i,n)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(r){var i=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let n=!0;for(let e=0;e<r.planes.length;e++){var o=r.planes[e];let t=0;for(let e=0;e<i.length;e++)0<=W.dot$1(o,i[e])&&t++;if(0===t)return 0;t!==i.length&&(n=!1)}if(n)return 2;for(let n=0;n<3;n++){let t=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let e=0;e<r.points.length;e++){var a=r.points[e][n]-this.min[n];t=Math.min(t,a),i=Math.max(i,a)}if(i<0||t>this.max[n]-this.min[n])return 0}return 1}}class Ii{constructor(e=0,t=0,i=0,n=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=i,this.right=n}interpolate(e,t,i){return null!=t.top&&null!=e.top&&(this.top=W.number(e.top,t.top,i)),null!=t.bottom&&null!=e.bottom&&(this.bottom=W.number(e.bottom,t.bottom,i)),null!=t.left&&null!=e.left&&(this.left=W.number(e.left,t.left,i)),null!=t.right&&null!=e.right&&(this.right=W.number(e.right,t.right,i)),this}getCenter(e,t){e=W.clamp((this.left+e-this.right)/2,0,e),t=W.clamp((this.top+t-this.bottom)/2,0,t);return new W.pointGeometry(e,t)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Ii(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Di{constructor(e,t,i,n,r){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===r||!!r,this._minZoom=e||0,this._maxZoom=t||22,this._minPitch=null==i?0:i,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new W.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ii,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){var e=new Di(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e._elevation=this._elevation,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new W.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){var t,i,n,r,o,a,e=-W.wrap(e,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=(e=new W.ARRAY_TYPE(4),W.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e),e=this.rotationMatrix,t=this.rotationMatrix,i=this.angle,n=t[0],r=t[1],o=t[2],t=t[3],a=Math.sin(i),i=Math.cos(i),e[0]=n*i+o*a,e[1]=r*i+t*a,e[2]=n*-a+o*i,e[3]=r*-a+t*i)}get pitch(){return this._pitch/Math.PI*180}set pitch(e){e=W.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){e=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){e=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(t){var i=[new W.UnwrappedTileID(0,t)];if(this._renderWorldCopies){var e=this.pointCoordinate(new W.pointGeometry(0,0)),n=this.pointCoordinate(new W.pointGeometry(this.width,0)),r=this.pointCoordinate(new W.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new W.pointGeometry(0,this.height)),a=Math.floor(Math.min(e.x,n.x,r.x,o.x)),s=Math.floor(Math.max(e.x,n.x,r.x,o.x));for(let e=a-1;e<=s+1;e++)0!==e&&i.push(new W.UnwrappedTileID(e,t))}return i}coveringTiles(u){var d,h;let e=this.coveringZoomLevel(u),t=e;if(void 0!==u.minzoom&&e<u.minzoom)return[];void 0!==u.maxzoom&&e>u.maxzoom&&(e=u.maxzoom);let i=this.pointCoordinate(this.getCameraPoint()),n=W.MercatorCoordinate.fromLngLat(this.center),r=Math.pow(2,e),s=[r*i.x,r*i.y,0],p=[r*n.x,r*n.y,0],f=Pi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,e),m=u.minzoom||0,g=(!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(m=e),u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3),o=e=>({aabb:new Mi([e*r,0,0],[(e+1)*r,r,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),v=[],_=[],y=e,b=u.reparseOverscaled?t:e;if(this._renderWorldCopies)for(let e=1;e<=3;e++)v.push(o(-e)),v.push(o(e));for(v.push(o(0));0<v.length;){let l=v.pop(),n=l.x,c=l.y,t=l.fullyVisible;if(!t){let e=l.aabb.intersects(f);if(0===e)continue;t=2===e}let e=u.terrain?s:p,i=l.aabb.distanceX(e),r=l.aabb.distanceY(e),o=Math.max(Math.abs(i),Math.abs(r)),a=g+(1<<y-l.zoom)-2;if(l.zoom===y||a<o&&l.zoom>=m){let e=y-l.zoom,t=s[0]-.5-(n<<e),i=s[1]-.5-(c<<e);_.push({tileID:new W.OverscaledTileID(l.zoom===y?b:l.zoom,l.wrap,l.zoom,n,c),distanceSq:W.sqrLen([p[0]-.5-n,p[1]-.5-c]),tileDistanceToCamera:Math.sqrt(t*t+i*i)})}else for(let e=0;e<4;e++){let r=(n<<1)+e%2,o=(c<<1)+(e>>1),a=l.zoom+1,s=l.aabb.quadrant(e);if(u.terrain){let e=new W.OverscaledTileID(a,l.wrap,a,r,o),t=u.terrain.getMinMaxElevation(e),i=null!=(d=t.minElevation)?d:this.elevation,n=null!=(h=t.maxElevation)?h:this.elevation;s=new Mi([s.min[0],s.min[1],i],[s.max[0],s.max[1],n])}v.push({aabb:s,zoom:a,x:r,y:o,wrap:l.wrap,fullyVisible:t})}}return _.sort((e,t)=>e.distanceSq-t.distanceSq).map(e=>e.tileID)}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){var t=W.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new W.pointGeometry(W.mercatorXfromLng(e.lng)*this.worldSize,W.mercatorYfromLat(t)*this.worldSize)}unproject(e){return new W.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(e){this.freezeElevation||(this.elevation=e?this.getElevation(this._center,e):0)}getElevation(e,t){var e=W.MercatorCoordinate.fromLngLat(e),i=(1<<this.tileZoom)*W.EXTENT,n=e.x*i,e=e.y*i,i=Math.floor(n/W.EXTENT),r=Math.floor(e/W.EXTENT),i=new W.OverscaledTileID(this.tileZoom,0,this.tileZoom,i,r);return t.getElevation(i,n%W.EXTENT,e%W.EXTENT,W.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){var t,i,n,r,o=this.pointLocation(this.centerPoint,e),e=this.getElevation(o,e);this.elevation-e&&(i=this.getCameraPosition(),i=W.MercatorCoordinate.fromLngLat(i.lngLat,i.altitude),n=W.MercatorCoordinate.fromLngLat(o,e),r=i.x-n.x,t=i.y-n.y,i=i.z-n.z,n=Math.sqrt(r*r+t*t+i*i),r=this.scaleZoom(this.cameraToCenterDistance/n/this.tileSize),this._elevation=e,this._center=o,this.zoom=r)}setLocationAtPoint(e,t){var t=this.pointCoordinate(t),i=this.pointCoordinate(this.centerPoint),e=this.locationCoordinate(e),e=new W.MercatorCoordinate(e.x-(t.x-i.x),e.y-(t.y-i.y));this.center=this.coordinateLocation(e),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),this.getElevation(e,t),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}locationCoordinate(e){return W.MercatorCoordinate.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(t,i){if(i){let e=i.pointCoordinate(t);if(null!=e)return e}var i=[t.x,t.y,0,1],t=[t.x,t.y,1,1],e=(W.transformMat4(i,i,this.pixelMatrixInverse),W.transformMat4(t,t,this.pixelMatrixInverse),i[3]),n=t[3],r=i[1]/e,o=t[1]/n,a=i[2]/e,s=t[2]/n,s=a==s?0:(0-a)/(s-a);return new W.MercatorCoordinate(W.number(i[0]/e,t[0]/n,s)/this.worldSize,W.number(r,o,s)/this.worldSize)}coordinatePoint(e,t=0,i=this.pixelMatrix){e=[e.x*this.worldSize,e.y*this.worldSize,t,1];return W.transformMat4(e,e,i),new W.pointGeometry(e[0]/e[3],e[1]/e[3])}getBounds(){var e=Math.max(0,this.height/2-this.getHorizon());return(new W.LngLatBounds).extend(this.pointLocation(new W.pointGeometry(0,e))).extend(this.pointLocation(new W.pointGeometry(this.width,e))).extend(this.pointLocation(new W.pointGeometry(this.width,this.height))).extend(this.pointLocation(new W.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new W.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,t=!1){var i,n,r,o=e.key,a=t?this._alignedPosMatrixCache:this._posMatrixCache;return a[o]||(i=e.canonical,n=this.worldSize/this.zoomScale(i.z),e=i.x+Math.pow(2,i.z)*e.wrap,r=W.identity(new Float64Array(16)),W.translate(r,r,[e*n,i.y*n,0]),W.scale(r,r,[n/W.EXTENT,n/W.EXTENT,1]),W.multiply(r,t?this.alignedProjMatrix:this.projMatrix,r),a[o]=new Float32Array(r)),a[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;let t,i,n,r,o=-90,a=90,s=-180,l=180;var c=this.size,e=this._unmodified;if(this.latRange){let e=this.latRange;o=W.mercatorYfromLat(e[1])*this.worldSize,a=W.mercatorYfromLat(e[0])*this.worldSize,t=a-o<c.y?c.y/(a-o):0}if(this.lngRange){let e=this.lngRange;s=W.wrap(W.mercatorXfromLng(e[0])*this.worldSize,0,this.worldSize),(l=W.wrap(W.mercatorXfromLng(e[1])*this.worldSize,0,this.worldSize))<s&&(l+=this.worldSize),i=l-s<c.x?c.x/(l-s):0}var u=this.point,d=Math.max(i||0,t||0);if(d)this.center=this.unproject(new W.pointGeometry(i?(l+s)/2:u.x,t?(a+o)/2:u.y)),this.zoom+=this.scaleZoom(d);else{if(this.latRange){let e=u.y,t=c.y/2;e-t<o&&(r=o+t),e+t>a&&(r=a-t)}if(this.lngRange){let e=(s+l)/2,t=W.wrap(u.x,e-this.worldSize/2,e+this.worldSize/2),i=c.x/2;t-i<s&&(n=s+i),t+i>l&&(n=l-i)}void 0===n&&void 0===r||(this.center=this.unproject(new W.pointGeometry(void 0!==n?n:u.x,void 0!==r?r:u.y)).wrap())}this._unmodified=e,this._constraining=!1}}_calcMatrices(){if(this.height){var t=this.centerOffset,i=this.point.x,n=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=W.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let e=W.identity(new Float64Array(16));W.scale(e,e,[this.width/2,-this.height/2,1]),W.translate(e,e,[1,-1,0]),this.labelPlaneMatrix=e,e=W.identity(new Float64Array(16)),W.scale(e,e,[1,-1,1]),W.translate(e,e,[-1,-1,0]),W.scale(e,e,[2/this.width,2/this.height,1]),this.glCoordMatrix=e,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);var r=Math.PI/2+this._pitch,o=this._fov*(.5+t.y/this.height),o=Math.sin(o)*this.cameraToSeaLevelDistance/Math.sin(W.clamp(Math.PI-r-o,.01,Math.PI-.01)),a=this.getHorizon(),a=2*Math.atan(a/this.cameraToCenterDistance)*(.5+t.y/(2*a)),r=Math.sin(a)*this.cameraToSeaLevelDistance/Math.sin(W.clamp(Math.PI-r-a,.01,Math.PI-.01)),a=Math.cos(Math.PI/2-this._pitch)*o+this.cameraToSeaLevelDistance,o=Math.cos(Math.PI/2-this._pitch)*r+this.cameraToSeaLevelDistance,r=1.01*Math.min(a,o),a=this.height/50,o=(e=new Float64Array(16),W.perspective(e,this._fov,this.width/this.height,a,r),e[8]=2*-t.x/this.width,e[9]=2*t.y/this.height,W.scale(e,e,[1,-1,1]),W.translate(e,e,[0,0,-this.cameraToCenterDistance]),W.rotateX(e,e,this._pitch),W.rotateZ(e,e,this.angle),W.translate(e,e,[-i,-n,0]),this.mercatorMatrix=W.scale([],e,[this.worldSize,this.worldSize,this.worldSize]),W.scale(e,e,[1,1,this._pixelPerMeter]),this.pixelMatrix=W.multiply(new Float64Array(16),this.labelPlaneMatrix,e),W.translate(e,e,[0,0,-this.elevation]),this.projMatrix=e,this.invProjMatrix=W.invert([],e),this.pixelMatrix3D=W.multiply(new Float64Array(16),this.labelPlaneMatrix,e),this.width%2/2),a=this.height%2/2,r=Math.cos(this.angle),t=Math.sin(this.angle),i=i-Math.round(i)+r*o+t*a,n=n-Math.round(n)+r*a+t*o,r=new Float64Array(e);if(W.translate(r,r,[.5<i?i-1:i,.5<n?n-1:n,0]),this.alignedProjMatrix=r,!(e=W.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=e,this._posMatrixCache={},this._alignedPosMatrixCache={}}}maxPitchScaleFactor(){var e;return this.pixelMatrixInverse?(e=[(e=this.pointCoordinate(new W.pointGeometry(0,0))).x*this.worldSize,e.y*this.worldSize,0,1],W.transformMat4(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance):1}getCameraPoint(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new W.pointGeometry(0,e))}getCameraQueryGeometry(o){var e=this.getCameraPoint();if(1===o.length)return[o[0],e];{let t=e.x,i=e.y,n=e.x,r=e.y;for(let e of o)t=Math.min(t,e.x),i=Math.min(i,e.y),n=Math.max(n,e.x),r=Math.max(r,e.y);return[new W.pointGeometry(t,i),new W.pointGeometry(n,i),new W.pointGeometry(n,r),new W.pointGeometry(t,r),new W.pointGeometry(t,i)]}}}class Li{constructor(e){this._hashName=e&&encodeURIComponent(e),W.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e){let t=!1,i=null,n=()=>{i=null,t&&(e(),i=setTimeout(n,300),t=!1)};return()=>(t=!0,i||n(),i)}(this._updateHashUnthrottled.bind(this))}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){let t=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,n),o=Math.round(t.lng*r)/r,a=Math.round(t.lat*r)/r,s=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=e?`/${o}/${a}/`+i:i+`/${a}/`+o,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+="/"+Math.round(l)),this._hashName){let i=this._hashName,n=!1,e=window.location.hash.slice(1).split("&").map(e=>{var t=e.split("=")[0];return t===i?(n=!0,t+"="+c):e}).filter(e=>e);return n||e.push(i+"="+c),"#"+e.join("&")}return"#"+c}_getCurrentHash(){var e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map(e=>e.split("=")).forEach(e=>{e[0]===this._hashName&&(t=e)}),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){var e,t=this._getCurrentHash();return 3<=t.length&&!t.some(e=>isNaN(e))&&(e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing(),this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0)}_updateHashUnthrottled(){var e=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,e)}catch(e){}}}let zi={linearity:.3,easing:W.bezier(0,0,.3,1)},Ri=W.extend({deceleration:2500,maxSpeed:1400},zi),Oi=W.extend({deceleration:20,maxSpeed:1400},zi),Bi=W.extend({deceleration:1e3,maxSpeed:360},zi),Fi=W.extend({deceleration:1e3,maxSpeed:90},zi);class Ni{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:W.exported.now(),settings:e})}_drainInertiaBuffer(){for(var e=this._inertiaBuffer,t=W.exported.now();0<e.length&&160<t-e[0].time;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var t={zoom:0,bearing:0,pitch:0,pan:new W.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(let{settings:e}of this._inertiaBuffer)t.zoom+=e.zoomDelta||0,t.bearing+=e.bearingDelta||0,t.pitch+=e.pitchDelta||0,e.panDelta&&t.pan._add(e.panDelta),e.around&&(t.around=e.around),e.pinchAround&&(t.pinchAround=e.pinchAround);var i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,n={};if(t.pan.mag()&&(e=Vi(t.pan.mag(),i,W.extend({},Ri,e||{})),n.offset=t.pan.mult(e.amount/t.pan.mag()),n.center=this._map.transform.center,ji(n,e)),t.zoom){let e=Vi(t.zoom,i,Oi);n.zoom=this._map.transform.zoom+e.amount,ji(n,e)}if(t.bearing){let e=Vi(t.bearing,i,Bi);n.bearing=this._map.transform.bearing+W.clamp(e.amount,-179,179),ji(n,e)}if(t.pitch){let e=Vi(t.pitch,i,Fi);n.pitch=this._map.transform.pitch+e.amount,ji(n,e)}if(n.zoom||n.bearing){let e=void 0===t.pinchAround?t.around:t.pinchAround;n.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),W.extend(n,{noMoveStart:!0})}}}function ji(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Vi(e,t,i){var{maxSpeed:n,linearity:r,deceleration:o}=i,e=W.clamp(e*r/(t/1e3),-n,n),t=Math.abs(e)/(o*r);return{easing:i.easing,duration:1e3*t,amount:e*(t/2)}}class d extends W.Event{constructor(e,t,i,n={}){var r=h.mousePos(t.getCanvasContainer(),i),o=t.unproject(r);super(e,W.extend({point:r,lngLat:o,originalEvent:i},n)),this._defaultPrevented=!1,this.target=t}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ui extends W.Event{constructor(e,t,i){var n="touchend"===e?i.changedTouches:i.touches,n=h.touchPos(t.getCanvasContainer(),n),r=n.map(e=>t.unproject(e)),o=n.reduce((e,t,i,n)=>e.add(t.div(n.length)),new W.pointGeometry(0,0));super(e,{points:n,point:o,lngLats:r,lngLat:t.unproject(o),originalEvent:i}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class $i extends W.Event{constructor(e,t,i){super(e,{originalEvent:i}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class qi{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new $i(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new d(e.type,this._map,e))}mouseup(e){this._map.fire(new d(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new d(e.type,this._map,e))}dblclick(e){return this._firePreventable(new d(e.type,this._map,e))}mouseover(e){this._map.fire(new d(e.type,this._map,e))}mouseout(e){this._map.fire(new d(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Ui(e.type,this._map,e))}touchmove(e){this._map.fire(new Ui(e.type,this._map,e))}touchend(e){this._map.fire(new Ui(e.type,this._map,e))}touchcancel(e){this._map.fire(new Ui(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new d(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new d("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new d(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zi{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(h.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){var i,n,r;!this._active||this._lastPos.equals(t=t)||!this._box&&t.dist(this._startPos)<this._clickTolerance||(r=this._startPos,this._lastPos=t,this._box||(this._box=h.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e)),e=Math.min(r.x,t.x),i=Math.max(r.x,t.x),n=Math.min(r.y,t.y),r=Math.max(r.y,t.y),h.setTransform(this._box,`translate(${e}px,${n}px)`),this._box.style.width=i-e+"px",this._box.style.height=r-n+"px")}mouseupWindow(e,n){if(this._active&&0===e.button){let t=this._startPos,i=n;if(this.reset(),h.suppressClick(),t.x!==i.x||t.y!==i.y)return this._map.fire(new W.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(t,i,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",e)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(h.remove(this._box),this._box=null),h.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,t){return this._map.fire(new W.Event(e,{originalEvent:t}))}}function Gi(t,i){if(t.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${t.length}, points `+i.length);var n={};for(let e=0;e<t.length;e++)n[t[e].identifier]=i[e];return n}class Wi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,t,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(t){var i=new W.pointGeometry(0,0);for(let e of t)i._add(e);return i.div(t.length)}(t),this.touches=Gi(i,t)))}touchmove(e,t,i){if(!this.aborted&&this.centroid){var n=Gi(i,t);for(let i in this.touches){let e=this.touches[i],t=n[i];(!t||30<t.dist(e))&&(this.aborted=!0)}}}touchend(e,t,i){if((!this.centroid||500<e.timeStamp-this.startTime)&&(this.aborted=!0),0===i.length){let e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Xi{constructor(e){this.singleTap=new Wi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,i){this.singleTap.touchstart(e,t,i)}touchmove(e,t,i){this.singleTap.touchmove(e,t,i)}touchend(i,e,t){var n=this.singleTap.touchend(i,e,t);if(n){let e=i.timeStamp-this.lastTime<500,t=!this.lastTap||this.lastTap.dist(n)<30;if(e&&t||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class Yi{constructor(){this._zoomIn=new Xi({numTouches:1,numTaps:2}),this._zoomOut=new Xi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i)}touchmove(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i)}touchend(t,e,i){let n=this._zoomIn.touchend(t,e,i),r=this._zoomOut.touchend(t,e,i);return n?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}let Ki={0:1,2:2};class Ji{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){var i;this._lastPoint||(i=h.mouseButton(e),this._correctButton(e,i)&&(this._lastPoint=t,this._eventButton=i))}mousemoveWindow(e,t){var i=this._lastPoint;if(i)if(e.preventDefault(),function(e,t){t=Ki[t];return void 0===e.buttons||(e.buttons&t)!==t}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)}mouseupWindow(e){this._lastPoint&&h.mouseButton(e)===this._eventButton&&(this._moved&&h.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qi extends Ji{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class en extends Ji{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){t=.8*(t.x-e.x);if(t)return this._active=!0,{bearingDelta:t}}contextmenu(e){e.preventDefault()}}class tn extends Ji{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){t=-.5*(t.y-e.y);if(t)return this._active=!0,{pitchDelta:t}}contextmenu(e){e.preventDefault()}}class nn{constructor(e,t){this._minTouches=e.cooperativeGestures?2:1,this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new W.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(e,t,i){return this._calculateTransform(e,t,i)}touchmove(e,t,i){if(this._map._cooperativeGestures&&(2===this._minTouches&&i.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(e,!1,i.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(i.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,i)}touchend(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,t,i){0<i.length&&(this._active=!0);var n=Gi(i,t),r=new W.pointGeometry(0,0),o=new W.pointGeometry(0,0);let a=0;for(let i in n){let e=n[i],t=this._touches[i];t&&(r._add(e),o._add(e.sub(t)),a++,n[i]=e)}if(this._touches=n,!(a<this._minTouches)&&o.mag())return i=o.div(a),this._sum._add(i),this._sum.mag()<this._clickTolerance?void 0:{around:r.div(a),panDelta:i}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(e){}_move(e,t,i){return{}}touchstart(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,i){if(this._firstTwoTouches){e.preventDefault();var[n,r]=this._firstTwoTouches,n=on(i,t,n),i=on(i,t,r);if(n&&i)return t=this._aroundCenter?null:n.add(i).div(2),this._move([n,i],t,e)}}touchend(e,t,i){var n,r;this._firstTwoTouches&&([r,n]=this._firstTwoTouches,r=on(i,t,r),i=on(i,t,n),r&&i||(this._active&&h.suppressClick(),this.reset()))}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function on(t,i,n){for(let e=0;e<t.length;e++)if(t[e].identifier===n)return i[e]}function an(e,t){return Math.log(e/t)/Math.LN2}class sn extends rn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){var i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(an(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:an(this._distance,i),pinchAround:t}}}function ln(e,t){return 180*e.angleWith(t)/Math.PI}class cn extends rn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){var i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ln(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,e=ln(e,this._startVector);return Math.abs(e)<t}}function un(e){return Math.abs(e.y)>Math.abs(e.x)}class dn extends rn{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,i){super.touchstart(e,t,i),this._currentTouchCount=i.length}_start(e){un((this._lastPoints=e)[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,i){var n,r;if(!(this._map._cooperativeGestures&&this._currentTouchCount<3))return n=e[0].sub(this._lastPoints[0]),r=e[1].sub(this._lastPoints[1]),this._valid=this.gestureBeginsVertically(n,r,i.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(n.y+r.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,i){var n,r;return void 0!==this._valid?this._valid:(r=2<=e.mag(),n=2<=t.mag(),r||n?r&&n?(r=0<e.y==0<t.y,un(e)&&un(t)&&r):(void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0):void 0)}}let hn={panStep:100,bearingStep:15,pitchStep:10};class pn{constructor(){var e=hn;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){let i=0,n=0,r=0,o=0,a=0;switch(s.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:s.shiftKey?n=-1:(s.preventDefault(),o=-1);break;case 39:s.shiftKey?n=1:(s.preventDefault(),o=1);break;case 38:s.shiftKey?r=1:(s.preventDefault(),a=-1);break;case 40:s.shiftKey?r=-1:(s.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:e=>{var t=e.getZoom();e.easeTo({duration:300,easeId:"keyboardHandler",easing:fn,zoom:i?Math.round(t)+i*(s.shiftKey?2:1):t,bearing:e.getBearing()+n*this._bearingStep,pitch:e.getPitch()+r*this._pitchStep,offset:[-o*this._panStep,-a*this._panStep],center:e.getCenter()},{originalEvent:s})}}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fn(e){return e*(2-e)}let mn=4.000244140625;class gn{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._handler=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,W.bindAll(["_onTimeout"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!this._map._metaPress)return;t.preventDefault()}let e=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;var i=W.exported.now(),n=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==e&&e%mn==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":400<n?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(n*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this._active||this._start(t)),t.preventDefault()}}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),e=h.mousePos(this._el,e),this._around=W.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))}renderFrame(){if(this._frameId&&(this._frameId=null,this.isActive())){let n=this._map.transform;if(0!==this._delta){let e="wheel"===this._type&&Math.abs(this._delta)>mn?this._wheelZoomRate:this._defaultZoomRate,t=2/(1+Math.exp(-Math.abs(this._delta*e))),i=(this._delta<0&&0!==t&&(t=1/t),"number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale);this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(i*t))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let i="number"==typeof this._targetZoom?this._targetZoom:n.zoom,r=this._startZoom,o=this._easing,a,s=!1;if("wheel"===this._type&&r&&o){let e=Math.min((W.exported.now()-this._lastWheelEventTime)/200,1),t=o(e);a=W.number(r,i,t),e<1?this._frameId||(this._frameId=!0):s=!0}else a=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}}_smoothOutEasing(e){let o=W.ease;if(this._prevEase){let e=this._prevEase,t=(W.exported.now()-e.start)/e.duration,i=e.easing(.01+t)-e.easing(t),n=.27/Math.sqrt(i*i+1e-4)*.01,r=Math.sqrt(.0729-n*n);o=W.bezier(n,r,.25,1)}return this._prevEase={start:W.exported.now(),duration:e,easing:o},o}reset(){this._active=!1}}class vn{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class _n{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,i){return t.preventDefault(),{cameraAnimation:e=>{e.easeTo({duration:300,zoom:e.getZoom()+(t.shiftKey?-1:1),around:e.unproject(i)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yn{constructor(){this._tap=new Xi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(e,t,i){this._swipePoint||(this._tapTime&&500<e.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<i.length&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i))}touchmove(e,t,i){var n,r;if(this._tapTime){if(this._swipePoint&&i[0].identifier===this._swipeTouch)return r=(n=t[0]).y-this._swipePoint.y,this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}else this._tap.touchmove(e,t,i)}touchend(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bn{constructor(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class xn{constructor(e,t,i){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class wn{constructor(e,t,i,n){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}let Cn=e=>e.zoom||e.drag||e.pitch||e.rotate;class Tn extends W.Event{}function Sn(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class kn{constructor(e,t){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ni(e),this._bearingSnap=t.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(t),W.bindAll(["handleEvent","handleWindowEvent"],this);e=this._el;this._listeners=[[e,"touchstart",{passive:!0}],[e,"touchmove",{passive:!1}],[e,"touchend",void 0],[e,"touchcancel",void 0],[e,"mousedown",void 0],[e,"mousemove",void 0],[e,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[e,"mouseover",void 0],[e,"mouseout",void 0],[e,"dblclick",void 0],[e,"click",void 0],[e,"keydown",{capture:!1}],[e,"keyup",void 0],[e,"wheel",{passive:!1}],[e,"contextmenu",void 0],[window,"blur",void 0]];for(let[e,t,i]of this._listeners)h.addEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(var[e,t,i]of this._listeners)h.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){let i=this._map,e=i.getCanvasContainer();this._add("mapEvent",new qi(i,t));var n=i.boxZoom=new Zi(i,t),n=(this._add("boxZoom",n),new Yi),r=new _n,n=(i.doubleClickZoom=new vn(r,n),this._add("tapZoom",n),this._add("clickZoom",r),new yn),r=(this._add("tapDragZoom",n),i.touchPitch=new dn(i)),r=(this._add("touchPitch",r),new en(t)),o=new tn(t),r=(i.dragRotate=new xn(t,r,o),this._add("mouseRotate",r,["mousePitch"]),this._add("mousePitch",o,["mouseRotate"]),new Qi(t)),o=new nn(t,i),r=(i.dragPan=new bn(e,r,o),this._add("mousePan",r),this._add("touchPan",o,["touchZoom","touchRotate"]),new cn),o=new sn,n=(i.touchZoomRotate=new wn(e,o,r,n),this._add("touchRotate",r,["touchPan","touchZoom"]),this._add("touchZoom",o,["touchPan","touchRotate"]),i.scrollZoom=new gn(i,this)),r=(this._add("scrollZoom",n,["mousePan"]),i.keyboard=new pn);this._add("keyboard",r),this._add("blockableMapEvent",new Hi(i));for(let e of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[e]&&i[e].enable(t[e])}_add(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(let{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(var{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Cn(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,i){for(var n in e)if(n!==i&&(!t||t.indexOf(n)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,e.type+"Window")}_getMapTouches(e){var t,i=[];for(t of e)this._el.contains(t.target)&&i.push(t);return i}handleEvent(u,d){if("blur"===u.type)this.stop(!0);else{this._updatingCamera=!0;let r="renderFrame"===u.type?void 0:u,o={needsRenderFrame:!1},a={},s={},e=u.touches,l=e?this._getMapTouches(e):void 0,c=l?h.touchPos(this._el,l):h.mousePos(this._el,u);for(let{handlerName:t,handler:i,allowed:n}of this._handlers)if(i.isEnabled()){let e;this._blockedByActive(s,n,t)?i.reset():i[d||u.type]&&(e=i[d||u.type](u,c,l),this.mergeHandlerResult(o,a,e,t,r),e)&&e.needsRenderFrame&&this._triggerRenderFrame(),(e||i.isActive())&&(s[t]=i)}let t={};for(let e in this._previousActiveHandlers)s[e]||(t[e]=r);this._previousActiveHandlers=s,(Object.keys(t).length||Sn(o))&&(this._changes.push([o,a,t]),this._triggerRenderFrame()),(Object.keys(s).length||Sn(o))&&this._map._stop(!0),this._updatingCamera=!1;var i=o["cameraAnimation"];i&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],i(this._map))}}mergeHandlerResult(e,t,i,n,r){i&&(W.extend(e,i),e={handlerName:n,originalEvent:i.originalEvent||r},void 0!==i.zoomDelta&&(t.zoom=e),void 0!==i.panDelta&&(t.drag=e),void 0!==i.pitchDelta&&(t.pitch=e),void 0!==i.bearingDelta)&&(t.rotate=e)}_applyChanges(){var e,t,i,n={},r={},o={};for([e,t,i]of this._changes)e.panDelta&&(n.panDelta=(n.panDelta||new W.pointGeometry(0,0))._add(e.panDelta)),e.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+e.zoomDelta),e.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+e.bearingDelta),e.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+e.pitchDelta),void 0!==e.around&&(n.around=e.around),void 0!==e.pinchAround&&(n.pinchAround=e.pinchAround),e.noInertia&&(n.noInertia=e.noInertia),W.extend(r,t),W.extend(o,i);this._updateMapTransform(n,r,o),this._changes=[]}_updateMapTransform(e,t,i){var n=this._map,r=n.transform,o=n.style&&n.style.terrain;if(!(Sn(e)||o&&this._drag))return this._fireEvents(t,i,!0);let{panDelta:a,zoomDelta:s,bearingDelta:l,pitchDelta:c,around:u,pinchAround:d}=e;void 0!==d&&(u=d),n._stop(!0),u=u||n.transform.centerPoint;var h=r.pointLocation(a?u.sub(a):u);l&&(r.bearing+=l),c&&(r.pitch+=c),s&&(r.zoom+=s),o?t.drag&&!this._drag?(this._drag={center:r.centerPoint,lngLat:r.pointLocation(u),point:u,handlerName:t.drag.handlerName},n.fire(new W.Event("freezeElevation",{freeze:!0}))):this._drag&&i[this._drag.handlerName]?(n.fire(new W.Event("freezeElevation",{freeze:!1})),this._drag=null):t.drag&&this._drag&&(r.center=r.pointLocation(r.centerPoint.sub(a))):r.setLocationAtPoint(h,u),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,i,!0)}_fireEvents(i,n,e){var t=Cn(this._eventsInProgress),r=Cn(i),o={};for(let t in i){let e=i[t]["originalEvent"];this._eventsInProgress[t]||(o[t+"start"]=e),this._eventsInProgress[t]=i[t]}!t&&r&&this._fireEvent("movestart",r.originalEvent);for(let e in o)this._fireEvent(e,o[e]);r&&this._fireEvent("move",r.originalEvent);for(let t in i){let e=i[t]["originalEvent"];this._fireEvent(t,e)}var a={};let s;for(let i in this._eventsInProgress){let{handlerName:e,originalEvent:t}=this._eventsInProgress[i];this._handlersById[e].isActive()||(delete this._eventsInProgress[i],s=n[e]||t,a[i+"end"]=s)}for(let e in a)this._fireEvent(e,a[e]);var l=Cn(this._eventsInProgress);if(e&&(t||r)&&!l){this._updatingCamera=!0;let e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),t=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;e?(t(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:s})):(this._map.fire(new W.Event("moveend",{originalEvent:s})),t(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,t){this._map.fire(new W.Event(e,t?{originalEvent:t}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Tn("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const En=(e,...t)=>W.extend(e,...t);class An extends W.Evented{constructor(e,t){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=t.bearingSnap,W.bindAll(["_renderFrameCallback"],this)}getCenter(){return new W.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(e,t,i){return e=W.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,W.extend({offset:e},t),i)}panTo(e,t,i){return this.easeTo(W.extend({center:e},t),i)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,t,i){return this.easeTo(W.extend({zoom:e},t),i)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,t,i){return this.easeTo(W.extend({bearing:e},t),i)}resetNorth(e,t){return this.rotateTo(0,W.extend({duration:1e3},e),t),this}resetNorthPitch(e,t){return this.easeTo(W.extend({bearing:0,pitch:0,duration:1e3},e),t),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(e,t){e=W.LngLatBounds.convert(e);var i=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),i,t)}_cameraForBoxAndBearing(e,t,i,n){var r={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=W.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){let e=n.padding;n.padding={top:e,bottom:e,right:e,left:e}}n.padding=W.extend(r,n.padding);var r=this.transform,o=r.padding,e=r.project(W.LngLat.convert(e)),t=r.project(W.LngLat.convert(t)),a=e.rotate(-i*Math.PI/180),s=t.rotate(-i*Math.PI/180),l=new W.pointGeometry(Math.max(a.x,s.x),Math.max(a.y,s.y)),a=new W.pointGeometry(Math.min(a.x,s.x),Math.min(a.y,s.y)),s=l.sub(a),l=(r.width-(o.left+o.right+n.padding.left+n.padding.right))/s.x,a=(r.height-(o.top+o.bottom+n.padding.top+n.padding.bottom))/s.y;if(!(a<0||l<0))return o=Math.min(r.scaleZoom(r.scale*Math.min(l,a)),n.maxZoom),s=W.pointGeometry.convert(n.offset),l=new W.pointGeometry((n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2).rotate(i*Math.PI/180),a=s.add(l).mult(r.scale/r.zoomScale(o)),{center:r.unproject(e.add(t).div(2).sub(a)),zoom:o,bearing:i};W.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}fitBounds(e,t,i){return this._fitInternal(this.cameraForBounds(e,t),t,i)}fitScreenCoordinates(e,t,i,n,r){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(W.pointGeometry.convert(e)),this.transform.pointLocation(W.pointGeometry.convert(t)),i,n),n,r)}_fitInternal(e,t,i){return e?(delete(t=W.extend(e,t)).padding,t.linear?this.easeTo(t,i):this.flyTo(t,i)):this}jumpTo(e,t){this.stop();var i=this.transform;let n=!1,r=!1,o=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(n=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=W.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(r=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(o=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this.fire(new W.Event("movestart",t)).fire(new W.Event("move",t)),n&&this.fire(new W.Event("zoomstart",t)).fire(new W.Event("zoom",t)).fire(new W.Event("zoomend",t)),r&&this.fire(new W.Event("rotatestart",t)).fire(new W.Event("rotate",t)).fire(new W.Event("rotateend",t)),o&&this.fire(new W.Event("pitchstart",t)).fire(new W.Event("pitch",t)).fire(new W.Event("pitchend",t)),this.fire(new W.Event("moveend",t))}calculateCameraOptionsFromTo(e,t,i,n=0){var e=W.MercatorCoordinate.fromLngLat(e,t),t=W.MercatorCoordinate.fromLngLat(i,n),i=t.x-e.x,n=t.y-e.y,e=t.z-e.z,r=Math.hypot(i,n,e);if(0===r)throw new Error("Can't calculate camera options with same From and To");var o=Math.hypot(i,n),a=this.transform.scaleZoom(this.transform.cameraToCenterDistance/r/this.transform.tileSize),i=180*Math.atan2(i,-n)/Math.PI,n=180*Math.acos(o/r)/Math.PI,n=e<0?90-n:90+n;return{center:t.toLngLat(),zoom:a,pitch:n,bearing:i}}easeTo(e,t){this._stop(!1,e.easeId),(!1===(e=W.extend({offset:[0,0],duration:500,easing:W.ease},e)).animate||!e.essential&&W.exported.prefersReducedMotion)&&(e.duration=0);let o=this.transform,a=this.getZoom(),i=this.getBearing(),n=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:a,c="bearing"in e?this._normalizeBearing(e.bearing,i):i,u="pitch"in e?+e.pitch:n,d=("padding"in e?e:o).padding,h=W.pointGeometry.convert(e.offset),p=o.centerPoint.add(h);var r=o.pointLocation(p),f=W.LngLat.convert(e.center||r);this._normalizeCenter(f);let m=o.project(r),g=o.project(f).sub(m),v=o.zoomScale(l-a),_,y;e.around&&(_=W.LngLat.convert(e.around),y=o.locationPoint(_));r={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==a,this._rotating=this._rotating||i!==c,this._pitching=this._pitching||u!==n,this._padding=!o.isPaddingEqual(d),this._easeId=e.easeId,this._prepareEase(t,e.noMoveStart,r),this._ease(r=>{if(this._zooming&&(o.zoom=W.number(a,l,r)),this._rotating&&(o.bearing=W.number(i,c,r)),this._pitching&&(o.pitch=W.number(n,u,r)),this._padding&&(o.interpolatePadding(s,d,r),p=o.centerPoint.add(h)),_)o.setLocationAtPoint(_,y);else{let e=o.zoomScale(o.zoom-a),t=l>a?Math.min(2,v):Math.max(.5,v),i=Math.pow(t,1-r),n=o.unproject(m.add(g.mult(r*i)).mult(e));o.setLocationAtPoint(o.renderWorldCopies?n.wrap():n,p)}this._fireMoveEvents(t)},e=>{this._afterEase(t,e)},e),this}_prepareEase(e,t,i={}){this._moving=!0,this.fire(new W.Event("freezeElevation",{freeze:!0})),t||i.moving||this.fire(new W.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new W.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new W.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new W.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new W.Event("move",e)),this._zooming&&this.fire(new W.Event("zoom",e)),this._rotating&&this.fire(new W.Event("rotate",e)),this._pitching&&this.fire(new W.Event("pitch",e))}_afterEase(e,t){var i,n;this._easeId&&t&&this._easeId===t||(delete this._easeId,this.fire(new W.Event("freezeElevation",{freeze:!1})),t=this._zooming,i=this._rotating,n=this._pitching,this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,t&&this.fire(new W.Event("zoomend",e)),i&&this.fire(new W.Event("rotateend",e)),n&&this.fire(new W.Event("pitchend",e)),this.fire(new W.Event("moveend",e)))}flyTo(i,n){if(!i.essential&&W.exported.prefersReducedMotion){let e=W.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(e,n)}this.stop(),i=W.extend({offset:[0,0],speed:1.2,curve:1.42,easing:W.ease},i);let r=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c="zoom"in i?W.clamp(+i.zoom,r.minZoom,r.maxZoom):o,u="bearing"in i?this._normalizeBearing(i.bearing,a):a,d="pitch"in i?+i.pitch:s,h=("padding"in i?i:r).padding,e=r.zoomScale(c-o),p=W.pointGeometry.convert(i.offset),f=r.centerPoint.add(p),t=r.pointLocation(f),m=W.LngLat.convert(i.center||t),g=(this._normalizeCenter(m),r.project(t)),v=r.project(m).sub(g),_=i.curve,y=Math.max(r.width,r.height),b=y/e,x=v.mag();if("minZoom"in i){let e=W.clamp(Math.min(i.minZoom,o,c),r.minZoom,r.maxZoom),t=y/r.zoomScale(e-o);_=Math.sqrt(t/x*2)}let w=_*_;function C(e){e=(b*b-y*y+(e?-1:1)*w*w*x*x)/(2*(e?b:y)*w*x);return Math.log(Math.sqrt(e*e+1)-e)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function S(e){return(Math.exp(e)+Math.exp(-e))/2}let k=C(0),E=function(e){return S(k)/S(k+_*e)},A=function(e){return y*((S(k)*(T(e=k+_*e)/S(e))-T(k))/w)/x},P=(C(1)-k)/_;if(Math.abs(x)<1e-6||!isFinite(P)){if(Math.abs(y-b)<1e-6)return this.easeTo(i,n);let t=b<y?-1:1;P=Math.abs(Math.log(b/y))/_,A=function(){return 0},E=function(e){return Math.exp(t*_*e)}}return i.duration="duration"in i?+i.duration:1e3*P/("screenSpeed"in i?+i.screenSpeed/_:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=a!==u,this._pitching=d!==s,this._padding=!r.isPaddingEqual(h),this._prepareEase(n,!1),this._ease(e=>{var t=e*P,i=1/E(t),e=(r.zoom=1===e?c:o+r.scaleZoom(i),this._rotating&&(r.bearing=W.number(a,u,e)),this._pitching&&(r.pitch=W.number(s,d,e)),this._padding&&(r.interpolatePadding(l,h,e),f=r.centerPoint.add(p)),1===e?m:r.unproject(g.add(v.mult(A(t))).mult(i)));r.setLocationAtPoint(r.renderWorldCopies?e.wrap():e,f),this._fireMoveEvents(n)},()=>this._afterEase(n),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){let e=this.handlers;e&&e.stop(!1)}return this}_ease(e,t,i){!1===i.animate||0===i.duration?(e(1),t()):(this._easeStart=W.exported.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){var e=Math.min((W.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,t){e=W.wrap(e,-180,180);var i=Math.abs(e-t);return Math.abs(e-360-t)<i&&(e-=360),Math.abs(e+360-t)<i&&(e+=360),e}_normalizeCenter(e){var t=this.transform;t.renderWorldCopies&&!t.lngRange&&(t=e.lng-t.center.lng,e.lng+=180<t?-360:t<-180?360:0)}}class Pn{constructor(e={}){this.options=e,W.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options&&this.options.compact,this._container=h.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=h.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=h.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){h.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){t=this._map._getUIString("AttributionControl."+t);e.title=t,e.setAttribute("aria-label",t)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()}_updateAttributions(){if(this._map.style){let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(e=>"string"!=typeof e?"":e)):"string"==typeof this.options.customAttribution&&n.push(this.options.customAttribution)),this._map.style.stylesheet){let e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}let t=this._map.style.sourceCaches;for(let e in t){var i=t[e];if(i.used||i.usedForTerrain){let e=i.getSource();e.attribution&&n.indexOf(e.attribution)<0&&n.push(e.attribution)}}(n=n.filter(e=>String(e).trim())).sort((e,t)=>e.length-t.length);let e=(n=n.filter((t,i)=>{for(let e=i+1;e<n.length;e++)if(0<=n[e].indexOf(t))return!1;return!0})).join(" | ");e!==this._attribHTML&&(this._attribHTML=e,n.length?(this._innerContainer.innerHTML=e,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Mn{constructor(e={}){this.options=e,W.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=h.create("div","maplibregl-ctrl mapboxgl-ctrl");e=h.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){h.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){var e=this._container.children;e.length&&(e=e[0],this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact","mapboxgl-compact"):e.classList.remove("maplibregl-compact","mapboxgl-compact"))}}class In{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(t){let e=this._currentlyRunning,i=e?this._queue.concat(e):this._queue;for(let e of i)if(e.id===t)return void(e.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");var t,i=this._currentlyRunning=this._queue;this._queue=[];for(t of i)if(!t.cancelled&&(t.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}let Dn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Ln={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},zn={showCompass:!0,showZoom:!0,visualizePitch:!1};class Rn{constructor(e,t,i=!1){this._clickTolerance=10,this.element=t,this.mouseRotate=new en({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,i&&(this.mousePitch=new tn({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),W.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener(t,"mousedown",this.mousedown),h.addEventListener(t,"touchstart",this.touchstart,{passive:!1}),h.addEventListener(t,"touchmove",this.touchmove),h.addEventListener(t,"touchend",this.touchend),h.addEventListener(t,"touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),h.disableDrag()}move(t,i){let n=this.map,e=this.mouseRotate.mousemoveWindow(t,i);if(e&&e.bearingDelta&&n.setBearing(n.getBearing()+e.bearingDelta),this.mousePitch){let e=this.mousePitch.mousemoveWindow(t,i);e&&e.pitchDelta&&n.setPitch(n.getPitch()+e.pitchDelta)}}off(){var e=this.element;h.removeEventListener(e,"mousedown",this.mousedown),h.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),h.removeEventListener(e,"touchmove",this.touchmove),h.removeEventListener(e,"touchend",this.touchend),h.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){h.enableDrag(),h.removeEventListener(window,"mousemove",this.mousemove),h.removeEventListener(window,"mouseup",this.mouseup)}mousedown(e){this.down(W.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),h.mousePos(this.element,e)),h.addEventListener(window,"mousemove",this.mousemove),h.addEventListener(window,"mouseup",this.mouseup)}mousemove(e){this.move(e,h.mousePos(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=h.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=h.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function On(t,e,i){var n,r,o;for(t=new W.LngLat(t.lng,t.lat),e&&(n=new W.LngLat(t.lng-360,t.lat),r=new W.LngLat(t.lng+360,t.lat),o=i.locationPoint(t).distSqr(e),i.locationPoint(n).distSqr(e)<o?t=n:i.locationPoint(r).distSqr(e)<o&&(t=r));180<Math.abs(t.lng-i.center.lng);){let e=i.locationPoint(t);if(0<=e.x&&0<=e.y&&e.x<=i.width&&e.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}let Bn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fn(e,t,i){var n=e.classList;for(let e in Bn)n.remove(`maplibregl-${i}-anchor-`+e,`mapboxgl-${i}-anchor-`+e);n.add(`maplibregl-${i}-anchor-`+t,`mapboxgl-${i}-anchor-`+t)}class Nn extends W.Evented{constructor(t,e){if(super(),(t instanceof HTMLElement||e)&&(t=W.extend({element:t},e)),W.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=W.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=h.create("div"),this._element.setAttribute("aria-label","Map marker");let e=h.createNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"display","block"),e.setAttributeNS(null,"height","41px"),e.setAttributeNS(null,"width","27px"),e.setAttributeNS(null,"viewBox","0 0 27 41");var i=h.createNS("http://www.w3.org/2000/svg","g"),i=(i.setAttributeNS(null,"stroke","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"fill-rule","evenodd"),h.createNS("http://www.w3.org/2000/svg","g")),n=(i.setAttributeNS(null,"fill-rule","nonzero"),h.createNS("http://www.w3.org/2000/svg","g")),r=(n.setAttributeNS(null,"transform","translate(3.0, 29.0)"),n.setAttributeNS(null,"fill","#000000"),[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}]);for(let t of r){let e=h.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),n.appendChild(e)}var r=h.createNS("http://www.w3.org/2000/svg","g"),o=(r.setAttributeNS(null,"fill",this._color),h.createNS("http://www.w3.org/2000/svg","path")),o=(o.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),r.appendChild(o),h.createNS("http://www.w3.org/2000/svg","g")),a=(o.setAttributeNS(null,"opacity","0.25"),o.setAttributeNS(null,"fill","#000000"),h.createNS("http://www.w3.org/2000/svg","path")),a=(a.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),o.appendChild(a),h.createNS("http://www.w3.org/2000/svg","g")),s=(a.setAttributeNS(null,"transform","translate(6.0, 7.0)"),a.setAttributeNS(null,"fill","#FFFFFF"),h.createNS("http://www.w3.org/2000/svg","g")),l=(s.setAttributeNS(null,"transform","translate(8.0, 8.0)"),h.createNS("http://www.w3.org/2000/svg","circle")),c=(l.setAttributeNS(null,"fill","#000000"),l.setAttributeNS(null,"opacity","0.25"),l.setAttributeNS(null,"cx","5.5"),l.setAttributeNS(null,"cy","5.5"),l.setAttributeNS(null,"r","5.4999962"),h.createNS("http://www.w3.org/2000/svg","circle"));c.setAttributeNS(null,"fill","#FFFFFF"),c.setAttributeNS(null,"cx","5.5"),c.setAttributeNS(null,"cy","5.5"),c.setAttributeNS(null,"r","5.4999962"),s.appendChild(l),s.appendChild(c),i.appendChild(n),i.appendChild(r),i.appendChild(o),i.appendChild(a),i.appendChild(s),e.appendChild(i),e.setAttributeNS(null,"height",41*this._scale+"px"),e.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(e),this._offset=W.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()}),Fn(this._element,this._anchor,"marker"),this._popup=null}addTo(e){return this.remove(),(this._map=e).getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),h.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=W.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){var t;return this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e&&("offset"in e.options||(t=Math.sqrt(Math.pow(13.5,2)/2),e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset),this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)),this}_onKeyPress(e){var t=e.code,e=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==e&&13!==e||this.togglePopup()}_onMapClick(e){var e=e.originalEvent.target,t=this._element;this._popup&&(e===t||t.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){var e=this._popup;return e&&(e.isOpen()?e.remove():e.addTo(this._map)),this}_update(i){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=On(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let e="",t=("viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`),"");"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?t="rotateX(0deg)":"map"===this._pitchAlignment&&(t=`rotateX(${this._map.getPitch()}deg)`),i&&"moveend"!==i.type||(this._pos=this._pos.round()),h.setTransform(this._element,`${Bn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${t} `+e),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{var e=this._map.unproject(this._pos),t=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=e.distanceTo(this._lngLat)>20*t?"0.2":"1.0",this._opacityTimeout=null},100))}}getOffset(){return this._offset}setOffset(e){return this._offset=W.pointGeometry.convert(e),this._update(),this}_onMove(t){if(!this._isDragging){let e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new W.Event("dragstart"))),this.fire(new W.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new W.Event("dragend")),this._state="inactive"}_addDragHandler(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}let jn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},p,Vn=0,Un=!1,$n={maxWidth:100,unit:"metric"};function qn(t,i,e){var n=e&&e.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),r=t.unproject([n,r]),o=o.distanceTo(r);if(e&&"imperial"===e.unit){let e=3.2808*o;5280<e?v(i,n,e/5280,t._getUIString("ScaleControl.Miles")):v(i,n,e,t._getUIString("ScaleControl.Feet"))}else e&&"nautical"===e.unit?v(i,n,o/1852,t._getUIString("ScaleControl.NauticalMiles")):1e3<=o?v(i,n,o/1e3,t._getUIString("ScaleControl.Kilometers")):v(i,n,o,t._getUIString("ScaleControl.Meters"))}function v(e,t,i,n){r=i;var r,o=(o=Math.pow(10,(""+Math.floor(r)).length-1))*(10<=(r/=o)?10:5<=r?5:3<=r?3:2<=r?2:1<=r?1:(o=r,r=Math.pow(10,Math.ceil(-Math.log(o)/Math.LN10)),Math.round(o*r)/r));e.style.width=t*(o/i)+"px",e.innerHTML=o+"&nbsp;"+n}let Hn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");let Gn={supported:_,setRTLTextPlugin:W.setRTLTextPlugin,getRTLTextPluginStatus:W.getRTLTextPluginStatus,Map:class extends An{constructor(e){var t;if(W.PerformanceUtils.mark(W.PerformanceMarkers.create),null!=(e=W.extend({},Ln,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&85<e.maxPitch)throw new Error("maxPitch must be less than or equal to 85");if(super(new Di(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._interactive=e.interactive,this._cooperativeGestures=e.cooperativeGestures,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new In,this._controls=[],this._mapId=W.uniqueId(),this._locale=W.extend({},Dn,e.locale),this._clickTolerance=e.clickTolerance,this._pixelRatio=null!=(t=e.pixelRatio)?t:devicePixelRatio,this._requestManager=new z(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),W.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new kn(this,e),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=e.hash&&new Li("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,W.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Pn({customAttribution:e.customAttribution})),e.maplibreLogo&&this.addControl(new Mn,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",e=>{this._update("style"===e.dataType),this.fire(new W.Event(e.dataType+"data",e))}),this.on("dataloading",e=>{this.fire(new W.Event(e.dataType+"dataloading",e))}),this.on("dataabort",e=>{this.fire(new W.Event("sourcedataabort",e))})}_getMapId(){return this._mapId}addControl(e,t){var i;return void 0===t&&(t=e.getDefaultPosition?e.getDefaultPosition():"top-right"),e&&e.onAdd?(i=e.onAdd(this),this._controls.push(e),e=this._controlPositions[t],-1!==t.indexOf("bottom")?e.insertBefore(i,e.firstChild):e.appendChild(i),this):this.fire(new W.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")))}removeControl(e){var t;return e&&e.onRemove?(-1<(t=this._controls.indexOf(e))&&this._controls.splice(t,1),e.onRemove(this),this):this.fire(new W.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")))}hasControl(e){return-1<this._controls.indexOf(e)}calculateCameraOptionsFromTo(e,t,i,n){return null==n&&this.style.terrain&&(n=this.transform.getElevation(i,this.style.terrain)),super.calculateCameraOptionsFromTo(e,t,i,n)}resize(e){var t=this._containerDimensions(),i=t[0],t=t[1],i=(this._resizeCanvas(i,t,this.getPixelRatio()),this.transform.resize(i,t),this.painter.resize(i,t,this.getPixelRatio()),!this._moving);return i&&(this.stop(),this.fire(new W.Event("movestart",e)).fire(new W.Event("move",e))),this.fire(new W.Event("resize",e)),i&&this.fire(new W.Event("moveend",e)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){var[t,i]=this._containerDimensions();this._pixelRatio=e,this._resizeCanvas(t,i,e),this.painter.resize(t,i,e)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(W.LngLatBounds.convert(e)),this._update()}setMinZoom(e){if(-2<=(e=null==e?-2:e)&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(0<=e&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if(85<(e=null==e?60:e))throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(e){return this.transform.locationPoint(W.LngLat.convert(e),this.style&&this.style.terrain)}unproject(e){return this.transform.pointLocation(W.pointGeometry.convert(e),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(n,r,o){if("mouseenter"===n||"mouseover"===n){let i=!1;return{layer:r,listener:o,delegates:{mousemove:e=>{var t=this.getLayer(r)?this.queryRenderedFeatures(e.point,{layers:[r]}):[];t.length?i||(i=!0,o.call(this,new d(n,this,e.originalEvent,{features:t}))):i=!1},mouseout:()=>{i=!1}}}}if("mouseleave"===n||"mouseout"===n){let t=!1;return{layer:r,listener:o,delegates:{mousemove:e=>{(this.getLayer(r)?this.queryRenderedFeatures(e.point,{layers:[r]}):[]).length?t=!0:t&&(t=!1,o.call(this,new d(n,this,e.originalEvent)))},mouseout:e=>{t&&(t=!1,o.call(this,new d(n,this,e.originalEvent)))}}}}return{layer:r,listener:o,delegates:{[n]:e=>{var t=this.getLayer(r)?this.queryRenderedFeatures(e.point,{layers:[r]}):[];t.length&&(e.features=t,o.call(this,e),delete e.features)}}}}on(e,t,i){if(void 0===i)return super.on(e,t);var n=this._createDelegatedListener(e,t,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n);for(let e in n.delegates)this.on(e,n.delegates[e]);return this}once(e,t,i){if(void 0===i)return super.once(e,t);var n=this._createDelegatedListener(e,t,i);for(let e in n.delegates)this.once(e,n.delegates[e]);return this}off(e,n,r){return void 0===r?super.off(e,n):(this._delegatedListeners&&this._delegatedListeners[e]&&(()=>{var i=this._delegatedListeners[e];for(let e=0;e<i.length;e++){let t=i[e];if(t.layer===n&&t.listener===r){for(let e in t.delegates)this.off(e,t.delegates[e]);return i.splice(e,1)}}})(),this)}queryRenderedFeatures(i,e){if(!this.style)return[];let n;if(void 0!==e||void 0===i||i instanceof W.pointGeometry||Array.isArray(i)||(e=i,i=void 0),e=e||{},(i=i||[[0,0],[this.transform.width,this.transform.height]])instanceof W.pointGeometry||"number"==typeof i[0])n=[W.pointGeometry.convert(i)];else{let e=W.pointGeometry.convert(i[0]),t=W.pointGeometry.convert(i[1]);n=[e,new W.pointGeometry(t.x,e.y),t,new W.pointGeometry(e.x,t.y),e]}return this.style.queryRenderedFeatures(n,e,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,t){return!1!==(t=W.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},t)).diff&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(e,t))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){var t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new a(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)):delete this.style,this}_lazyInitEmptyStyle(){this.style||(this.style=new a(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,i){var t;"string"==typeof e?(t=this._requestManager.transformRequest(e,W.ResourceType.Style),W.getJSON(t,(e,t)=>{e?this.fire(new W.ErrorEvent(e)):t&&this._updateDiff(t,i)})):"object"==typeof e&&this._updateDiff(e,i)}_updateDiff(t,i){try{this.style.setState(t)&&this._update(!0)}catch(e){W.warnOnce(`Unable to perform style diff: ${e.message||e.error||e}.  Rebuilding the style from scratch.`),this._updateStyle(t,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():W.warnOnce("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){var t=this.style&&this.style.sourceCaches[e];if(void 0!==t)return t.loaded();this.fire(new W.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}setTerrain(e){return this.style.setTerrain(e),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){let e=this.style&&this.style.sourceCaches;for(var t in e){var i=e[t]._tiles;for(let e in i){var n=i[e];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0}addSourceType(e,t,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i)}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(e,t,{pixelRatio:i=1,sdf:n=!1,stretchX:r,stretchY:o,content:a}={}){if(this._lazyInitEmptyStyle(),t instanceof HTMLImageElement||W.isImageBitmap(t)){var{width:s,height:l,data:c}=W.exported.getImageData(t);this.style.addImage(e,{data:new W.RGBAImage({width:s,height:l},c),pixelRatio:i,stretchX:r,stretchY:o,content:a,sdf:n,version:0})}else{if(void 0===t.width||void 0===t.height)return this.fire(new W.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var{width:s,height:l,data:c}=t;this.style.addImage(e,{data:new W.RGBAImage({width:s,height:l},new Uint8Array(c)),pixelRatio:i,stretchX:r,stretchY:o,content:a,sdf:n,version:0,userImage:t}),t.onAdd&&t.onAdd(this,e)}}updateImage(e,t){var i,n,r,o=this.style.getImage(e);return o?({width:r,height:i,data:n}=t instanceof HTMLImageElement||W.isImageBitmap(t)?W.exported.getImageData(t):t,void 0===r||void 0===i?this.fire(new W.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):r!==o.data.width||i!==o.data.height?this.fire(new W.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r=!(t instanceof HTMLImageElement||W.isImageBitmap(t)),o.data.replace(n,r),void this.style.updateImage(e,o))):this.fire(new W.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new W.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e,t){W.getImage(this._requestManager.transformRequest(e,W.ResourceType.Image),t)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)}setFilter(e,t,i={}){return this.style.setFilter(e,t,i),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,i,n={}){return this.style.setPaintProperty(e,t,i,n),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,i,n={}){return this.style.setLayoutProperty(e,t,i,n),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){var e=this._container,t=(e.classList.add("maplibregl-map","mapboxgl-map"),this._canvasContainer=h.create("div","maplibregl-canvas-container mapboxgl-canvas-container",e)),t=(this._interactive&&t.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=h.create("canvas","maplibregl-canvas mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._containerDimensions());this._resizeCanvas(t[0],t[1],this.getPixelRatio());let i=this._controlContainer=h.create("div","maplibregl-control-container mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(e=>{n[e]=h.create("div",`maplibregl-ctrl-${e} mapboxgl-ctrl-`+e,i)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){var e=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=h.create("div","maplibregl-cooperative-gesture-screen",e);let t="Control",i="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(i="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",t="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${i}</div>
            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",e=>{e.key===t&&(this._metaPress=!0)}),document.addEventListener("keyup",e=>{e.key===t&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",e=>{this._onCooperativeGesture(e,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(e,t,i){this._canvas.width=i*e,this._canvas.height=i*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"}_setupPainter(){var e=W.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),e=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);e?(this.painter=new Ai(e,this.transform),W.exported$1.testSupport(e)):this.fire(new W.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new W.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new W.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(e,t,i){return!t&&i<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint()),this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){let i,n=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),n=W.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){let r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let e=this.transform.zoom,t=W.exported.now(),i=(this.style.zoomHistory.update(e,t),new W.EvaluationParameters(e,{now:t,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()})),n=i.crossFadingFactor();1===n&&n===this._crossFadingFactor||(r=!0,this._crossFadingFactor=n),this.style.update(i)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new W.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,W.PerformanceUtils.mark(W.PerformanceMarkers.load),this.fire(new W.Event("load"))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){let t=W.exported.now()-n;o.endQueryEXT(o.TIME_ELAPSED_EXT,i),setTimeout(()=>{var e=o.getQueryObjectEXT(i,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(i),this.fire(new W.Event("gpu-timing-frame",{cpuTime:t,gpuTime:e}))},50)}if(this.listens("gpu-timing-layer")){let t=this.painter.collectGpuTimers();setTimeout(()=>{var e=this.painter.queryGpuTimers(t);this.fire(new W.Event("gpu-timing-layer",{layerTimes:e}))},50)}e=this._sourcesDirty||this._styleDirty||this._placementDirty;return e||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new W.Event("idle")),!this._loaded||this._fullyLoaded||e||(this._fullyLoaded=!0,W.PerformanceUtils.mark(W.PerformanceMarkers.fullLoad)),this}}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(let e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),h.remove(this._canvasContainer),h.remove(this._controlContainer),this._cooperativeGestures&&h.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),W.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new W.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=W.exported.frame(e=>{W.PerformanceUtils.frame(e),this._frame=null,this._render(e)}))}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&((this._showCollisionBoxes=e)?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}_setCacheLimits(e,t){W.setCacheLimits(e,t)}get version(){return"2.4.0"}},NavigationControl:class{constructor(e){this.options=W.extend({},zn,e),this._container=h.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(W.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),h.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),h.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(W.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=h.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){var e=this._map.getZoom(),t=e===this._map.getMaxZoom(),e=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=e,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",e.toString())}_rotateCompassArrow(){var e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rn(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){h.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){e=h.create("button",e,this._container);return e.type="button",e.addEventListener("click",t),e}_setButtonTitle(e,t){t=this._map._getUIString("NavigationControl."+t);e.title=t,e.setAttribute("aria-label",t)}},GeolocateControl:class extends W.Evented{constructor(e){super(),this.options=W.extend({},jn,e),W.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(e){var t;return this._map=e,this._container=h.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,void 0!==p?t(p):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(e=>{p="denied"!==e.state,t(p)}):(p=!!window.navigator.geolocation,t(p)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),h.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vn=0,Un=!1}_isOutOfMapMaxBounds(e){var t=this._map.getMaxBounds(),e=e.coords;return t&&(e.longitude<t.getWest()||e.longitude>t.getEast()||e.latitude<t.getSouth()||e.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error("Unexpected watchState "+this._watchState)}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))this._setErrorState(),this.fire(new W.Event("outofmaxbounds",e)),this._updateMarker();else{if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error("Unexpected watchState "+this._watchState)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new W.Event("geolocate",e))}this._finish()}}_updateCamera(e){var t=new W.LngLat(e.coords.longitude,e.coords.latitude),e=e.coords.accuracy,i=this._map.getBearing(),i=W.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(e),i,{geolocateSource:!0})}_updateMarker(e){var t;e?(t=new W.LngLat(e.coords.longitude,e.coords.latitude),this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()):(this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove())}_updateCircleRadius(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),e=this._map.unproject([1,e]),t=t.distanceTo(e),e=Math.ceil(2*this._accuracy/t);this._circleElement.style.width=e+"px",this._circleElement.style.height=e+"px"}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Un)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new W.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=h.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),h.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),!(this._geolocateButton.type="button")===e){W.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");let e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{let e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=h.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Nn(this._dotElement),this._circleElement=h.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new W.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return W.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new W.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vn--,Un=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new W.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new W.Event("trackuserlocationstart"));break;default:throw new Error("Unexpected watchState "+this._watchState)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error("Unexpected watchState "+this._watchState)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Vn++,Un=1<Vn?(e={maximumAge:6e5,timeout:0},!0):(e=this.options.positionOptions,!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Pn,LogoControl:Mn,ScaleControl:class{constructor(e){this.options=W.extend({},$n,e),W.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){qn(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=h.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){h.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,qn(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:W.warnOnce("Full screen control 'container' must be a DOM element.")),W.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=h.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",W.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){h.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){var e=this._fullscreenButton=h.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);h.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(e){this.options=e,W.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(e){return this._map=e,this._container=h.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=h.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),h.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){h.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends W.Evented{constructor(e){super(),this.options=W.extend(Object.create(Hn),e),W.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new W.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&h.remove(this._content),this._container&&(h.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new W.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=W.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){var t,i=document.createDocumentFragment(),n=document.createElement("body");for(n.innerHTML=e;t=n.firstChild;)i.appendChild(t);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=h.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){this._container&&this._container.classList.add(e)}removeClassName(e){this._container&&this._container.classList.remove(e)}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}_createCloseButton(){this.options.closeButton&&(this._closeButton=h.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(e){this._update(e.point)}_onMouseMove(e){this._update(e.point)}_onDrag(e){this._update(e.point)}_update(t){if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=h.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=h.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(e=>this._container.classList.add(e)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=On(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var n=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let i=this.options.anchor;var r=function e(t){var i;return t?"number"==typeof t?(i=Math.round(Math.sqrt(.5*Math.pow(t,2))),{center:new W.pointGeometry(0,0),top:new W.pointGeometry(0,t),"top-left":new W.pointGeometry(i,i),"top-right":new W.pointGeometry(-i,i),bottom:new W.pointGeometry(0,-t),"bottom-left":new W.pointGeometry(i,-i),"bottom-right":new W.pointGeometry(-i,-i),left:new W.pointGeometry(t,0),right:new W.pointGeometry(-t,0)}):t instanceof W.pointGeometry||Array.isArray(t)?{center:i=W.pointGeometry.convert(t),top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}:{center:W.pointGeometry.convert(t.center||[0,0]),top:W.pointGeometry.convert(t.top||[0,0]),"top-left":W.pointGeometry.convert(t["top-left"]||[0,0]),"top-right":W.pointGeometry.convert(t["top-right"]||[0,0]),bottom:W.pointGeometry.convert(t.bottom||[0,0]),"bottom-left":W.pointGeometry.convert(t["bottom-left"]||[0,0]),"bottom-right":W.pointGeometry.convert(t["bottom-right"]||[0,0]),left:W.pointGeometry.convert(t.left||[0,0]),right:W.pointGeometry.convert(t.right||[0,0])}:e(new W.pointGeometry(0,0))}(this.options.offset);if(!i){let e=this._container.offsetWidth,t=this._container.offsetHeight;var o=n.y+r.bottom.y<t?["top"]:n.y>this._map.transform.height-t?["bottom"]:[];n.x<e/2?o.push("left"):n.x>this._map.transform.width-e/2&&o.push("right"),i=0===o.length?"bottom":o.join("-")}let e=n.add(r[i]).round();h.setTransform(this._container,`${Bn[i]} translate(${e.x}px,${e.y}px)`),Fn(this._container,i,"popup")}}_focusFirstElement(){var e;this.options.focusAfterOpen&&this._container&&(e=this._container.querySelector(Zn))&&e.focus()}_onClose(){this.remove()}},Marker:Nn,Style:a,LngLat:W.LngLat,LngLatBounds:W.LngLatBounds,Point:W.pointGeometry,MercatorCoordinate:W.MercatorCoordinate,Evented:W.Evented,AJAXError:W.AJAXError,config:W.config,CanvasSource:ne,GeoJSONSource:te,ImageSource:b,RasterDEMTileSource:ee,RasterTileSource:J,VectorTileSource:K,VideoSource:ie,prewarm:function(){fe().acquire(he)},clearPrewarmedResources:function(){var e=i;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(he),i=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return t.workerCount},set workerCount(e){t.workerCount=e},get maxParallelImageRequests(){return W.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){W.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){W.clearTileCache(e)},workerUrl:"",addProtocol(e,t){W.config.REGISTERED_PROTOCOLS[e]=t},removeProtocol(e){delete W.config.REGISTERED_PROTOCOLS[e]}};return En(Gn,{isSafari:W.isSafari,getPerformanceMetrics:W.PerformanceUtils.getPerformanceMetrics}),Gn}),a}),!function(e,t){"function"==typeof define&&define.amd?define(["leaflet","maplibre-gl"],t):"object"==typeof exports?module.exports=t(require("leaflet"),require("maplibre-gl")):e.returnExports=t(e.L,e.maplibregl)}("undefined"!=typeof globalThis?globalThis:this||self,function(o,i){o.MaplibreGL=o.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(e){o.setOptions(this,e),this._throttledUpdate=o.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(e){this._container||this._initContainer();var t=this.getPaneName();e.getPane(t).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&o.DomEvent.on(e._proxy,o.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(e){this._map._proxy&&this._map.options.zoomAnimation&&o.DomEvent.off(this._map._proxy,o.DomUtil.TRANSITION_END,this._transitionEnd,this);var t=this.getPaneName();e.getPane(t).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getBounds:function(){var e=this.getSize().multiplyBy(.5),t=this._map.latLngToContainerPoint(this._map.getCenter());return o.latLngBounds(this._map.containerPointToLatLng(t.subtract(e)),this._map.containerPointToLatLng(t.add(e)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(e){return{x:Math.round(e.x),y:Math.round(e.y)}},_initContainer:function(){var e=this._container=o.DomUtil.create("div","leaflet-gl-layer"),t=this.getSize(),i=this._map.getSize().multiplyBy(this.options.padding),t=(e.style.width=t.x+"px",e.style.height=t.y+"px",this._map.containerPointToLayerPoint([0,0]).subtract(i));o.DomUtil.setPosition(e,this._roundPoint(t))},_initGL:function(){var e=this._map.getCenter(),e=o.extend({},this.options,{container:this._container,center:[e.lng,e.lat],zoom:this._map.getZoom()-1,attributionControl:!1}),e=(this._glMap=new i.Map(e),this._glMap.transform.latRange=null,this._glMap.transform.maxValidLatitude=1/0,this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas,this._glMap._actualCanvas);o.DomUtil.addClass(e,"leaflet-image-layer"),o.DomUtil.addClass(e,"leaflet-zoom-animated"),this.options.interactive&&o.DomUtil.addClass(e,"leaflet-interactive"),this.options.className&&o.DomUtil.addClass(e,this.options.className)},_update:function(e){var t,i,n,r;this._offset=this._map.containerPointToLayerPoint([0,0]),this._zooming||(t=this.getSize(),i=this._container,n=this._glMap,r=this._map.getSize().multiplyBy(this.options.padding),r=this._map.containerPointToLayerPoint([0,0]).subtract(r),o.DomUtil.setPosition(i,this._roundPoint(r)),this._transformGL(n),n.transform.width!==t.x||n.transform.height!==t.y?(i.style.width=t.x+"px",i.style.height=t.y+"px",null!==n._resize&&void 0!==n._resize?n._resize():n.resize()):null!==n._update&&void 0!==n._update?n._update():n.update())},_transformGL:function(e){var t=this._map.getCenter(),e=e.transform;e.center=i.LngLat.convert([t.lng,t.lat]),e.zoom=this._map.getZoom()-1},_pinchZoom:function(e){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map.getSize().multiplyBy(this.options.padding*t),n=this.getSize()._divideBy(2),n=this._map.project(e.center,e.zoom)._subtract(n)._add(this._map._getMapPanePos().add(i))._round(),i=this._map.project(this._map.getBounds().getNorthWest(),e.zoom)._subtract(n);o.DomUtil.setTransform(this._glMap._actualCanvas,i.subtract(this._offset),t)},_zoomStart:function(e){this._zooming=!0},_zoomEnd:function(){var e=this._map.getZoomScale(this._map.getZoom());o.DomUtil.setTransform(this._glMap._actualCanvas,null,e),this._zooming=!1,this._update()},_transitionEnd:function(e){o.Util.requestAnimFrame(function(){var e=this._map.getZoom(),t=this._map.getCenter(),i=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());o.DomUtil.setTransform(this._glMap._actualCanvas,i,1),this._glMap.once("moveend",o.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:t,zoom:e-1})},this)},_resize:function(e){this._transitionEnd(e)}}),o.maplibreGL=function(e){return new o.MaplibreGL(e)}}),((m,g,v)=>{g=void 0!==g&&g.Math===Math?g:globalThis,m.fn.site=function(e){var s,n=Date.now(),r=[],t=e,i="string"==typeof t,l=[].slice.call(arguments,1),a=m.isPlainObject(e)?m.extend(!0,{},m.site.settings,e):m.extend({},m.site.settings),o=a.namespace,c=a.error,u="module-"+o,d=m(v),h=this,p=d.data(u),f={initialize:function(){f.instantiate()},instantiate:function(){f.verbose("Storing instance of site",f),p=f,d.data(u,f)},normalize:function(){},fix:{consoleClear:function(){f.debug("Disabling programmatic console clearing"),g.console.clear=function(){}}},moduleExists:function(e){return void 0!==m.fn[e]&&void 0!==m.fn[e].settings},enabled:{modules:function(e){var i=[];return e=e||a.modules,m.each(e,function(e,t){f.moduleExists(t)&&i.push(t)}),i}},disabled:{modules:function(e){var i=[];return e=e||a.modules,m.each(e,function(e,t){f.moduleExists(t)||i.push(t)}),i}},change:{setting:function(n,r,e,o){e="string"==typeof e?"all"===e?a.modules:[e]:e||a.modules,o=void 0===o||o,m.each(e,function(e,t){var i=!f.moduleExists(t)||m.fn[t].settings.namespace||!1;f.moduleExists(t)&&(f.verbose("Changing default setting",n,r,t),m.fn[t].settings[n]=r,o)&&i&&0<(i=m(":data(module-"+i+")")).length&&(f.verbose("Modifying existing settings",i),i[t]("setting",n,r))})},settings:function(n,e,r){e="string"==typeof e?[e]:e||a.modules,r=void 0===r||r,m.each(e,function(e,t){var i;f.moduleExists(t)&&(f.verbose("Changing default setting",n,t),m.extend(!0,m.fn[t].settings,n),r)&&o&&0<(i=m(":data(module-"+o+")")).length&&(f.verbose("Modifying existing settings",i),i[t]("setting",n))})}},enable:{console:function(){f.console(!0)},debug:function(e,t){e=e||a.modules,f.debug("Enabling debug for modules",e),f.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||a.modules,f.debug("Enabling verbose debug for modules",e),f.change.setting("verbose",!0,e,t)}},disable:{console:function(){f.console(!1)},debug:function(e,t){e=e||a.modules,f.debug("Disabling debug for modules",e),f.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||a.modules,f.debug("Disabling verbose debug for modules",e),f.change.setting("verbose",!1,e,t)}},console:function(e){e?void 0===p.cache.console?f.error(c.console):(f.debug("Restoring console function"),g.console=p.cache.console):(f.debug("Disabling console function"),p.cache.console=g.console,g.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},table:function(){},warn:function(){}})},destroy:function(){f.verbose("Destroying previous site for",d),d.removeData(u)},cache:{},setting:function(e,t){if(m.isPlainObject(e))m.extend(!0,a,e);else{if(void 0===t)return a[e];a[e]=t}},internal:function(e,t){if(m.isPlainObject(e))m.extend(!0,f,e);else{if(void 0===t)return f[e];f[e]=t}},debug:function(){a.debug&&(a.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,a.name+":"),f.debug.apply(console,arguments)))},verbose:function(){a.verbose&&a.debug&&(a.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),f.verbose.apply(console,arguments)))},error:function(){f.error=Function.prototype.bind.call(console.error,console,a.name+":"),f.error.apply(console,arguments)},performance:{log:function(e){var t,i;a.performance&&(i=(t=Date.now())-(n||t),n=t,r.push({Element:h,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(function(){f.performance.display()},500)},display:function(){var e=a.name+":",i=0;n=!1,clearTimeout(f.performance.timer),m.each(r,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<r.length&&(console.groupCollapsed(e),console.table?console.table(r):m.each(r,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),r=[]}},invoke:function(n,e,t){var r,o,i,a=p;return e=e||l,t=t||h,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,m.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!m.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):m.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:f.error(c.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(s)?s.push(i):void 0!==s?s=[s,i]:void 0!==i&&(s=i),o}};return i?(void 0===p&&f.initialize(),f.invoke(t)):(void 0!==p&&f.destroy(),f.initialize()),void 0!==s?s:this},m.site=m.fn.site,m.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","calendar","checkbox","dimmer","dropdown","embed","flyout","form","modal","nag","popup","progress","rating","search","shape","sidebar","slider","state","sticky","tab","toast","transition","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},m.extend(m.expr.pseudos,{data:m.expr.createPseudo(function(t){return function(e){return!!m.data(e,t)}})})})(jQuery,window,document),((z,R,O)=>{function B(e){return"function"==typeof e&&"number"!=typeof e.nodeType}R=void 0!==R&&R.Math===Math?R:globalThis,z.fn.form=function(S){var k,E=z(this),A=z(R),P=Date.now(),M=[],I=S,D="string"==typeof I,L=[].slice.call(arguments,1);return E.each(function(){var r,h,e,t,p,d,f,m,g,i,c,n,o,a,s,l,u,v=z(this),_=this,y=[],b=!1,x=!1,w=!1,C=["clean","clean"],T={initialize:function(){T.get.settings(),v.addClass(g.initial),D?(void 0===u&&T.instantiate(),T.invoke(I)):(void 0!==u&&(u.invoke("destroy"),T.refresh()),T.verbose("Initializing form validation",v,p),T.bindEvents(),T.set.defaults(),p.autoCheckRequired&&T.set.autoCheck(),T.instantiate())},instantiate:function(){T.verbose("Storing instance of module",T),u=T,v.data(o,T)},destroy:function(){T.verbose("Destroying previous module",u),T.removeEvents(),v.removeData(o)},refresh:function(){T.verbose("Refreshing selector cache"),r=v.find(m.field),h=v.find(m.group),e=v.find(m.message),v.find(m.prompt),t=v.find(m.submit),v.find(m.clear),v.find(m.reset)},refreshEvents:function(){T.removeEvents(),T.bindEvents()},submit:function(e){T.verbose("Submitting form",v),x=!0,v.trigger("submit"),e&&e.preventDefault()},attachEvents:function(e,t){t=t||"submit",z(e).on("click"+a,function(e){T[t](),e.preventDefault()}),s=e,l=t},bindEvents:function(){T.verbose("Attaching form events"),v.on("submit"+a,T.validate.form).on("blur"+a,m.field,T.event.field.blur).on("click"+a,m.submit,T.submit).on("click"+a,m.reset,T.reset).on("click"+a,m.clear,T.clear),r.on("invalid"+a,T.event.field.invalid),p.keyboardShortcuts&&v.on("keydown"+a,m.field,T.event.field.keydown),r.each(function(e,t){var i=(t=z(t)).prop("type"),i=T.get.changeEvent(i,t);t.on(i+a,T.event.field.change)}),p.preventLeaving&&A.on("beforeunload"+a,T.event.beforeUnload),r.on("change"+a+" click"+a+" keyup"+a+" keydown"+a+" blur"+a,function(e){T.determine.isDirty()}),v.on("dirty"+a,function(e){p.onDirty.call()}),v.on("clean"+a,function(e){p.onClean.call()}),s&&T.attachEvents(s,l)},clear:function(){r.each(function(e,t){var i=(t=z(t)).parent(),n=t.closest(h),r=n.find(m.prompt),o=t.closest(m.uiCalendar),a=t.data(f.defaultValue)||"",s=t.is(m.checkbox),l=i.is(m.uiDropdown)&&T.can.useElement("dropdown"),c=0<o.length&&T.can.useElement("calendar");n.hasClass(g.error)&&(T.verbose("Resetting error on field",n),n.removeClass(g.error),r.remove()),l?(T.verbose("Resetting dropdown value",i,a),i.dropdown("clear",!0)):s?t.prop("checked",!1):c?o.calendar("clear"):(T.verbose("Resetting field value",t,a),t.val(""))}),T.remove.states()},reset:function(){r.each(function(e,t){var i=(t=z(t)).parent(),n=t.closest(h),r=t.closest(m.uiCalendar),o=n.find(m.prompt),a=t.data(f.defaultValue),s=t.is(m.checkbox),l=i.is(m.uiDropdown)&&T.can.useElement("dropdown"),c=0<r.length&&T.can.useElement("calendar"),u=t.is(m.file),d=n.hasClass(g.error);void 0!==a&&(d&&(T.verbose("Resetting error on field",n),n.removeClass(g.error),o.remove()),l?(T.verbose("Resetting dropdown value",i,a),i.dropdown("restore defaults",!0)):s?(T.verbose("Resetting checkbox value",t,a),t.prop("checked",a)):c?r.calendar("set date",a):(T.verbose("Resetting field value",t,a),t.val(u?"":a)))}),T.remove.states()},determine:{isValid:function(){var n=!0;return r.each(function(e,t){var t=z(t),i=T.get.validation(t)||{},t=T.get.identifier(i,t);T.validate.field(i,t,!0)||(n=!1)}),n},isDirty:function(e){var n=!1;r.each(function(e,t){var i=0<(t=z(t)).filter(m.checkbox).length?T.is.checkboxDirty(t):T.is.fieldDirty(t);t.data(p.metadata.isDirty,i),n=n||i}),n?T.set.dirty():T.set.clean()}},is:{bracketedRule:function(e){return e.type&&e.type.match(p.regExp.bracket)},shorthandRules:function(e){return"string"==typeof e||Array.isArray(e)},empty:function(e){return!e||0===e.length||(e.is(m.checkbox)?!e.is(":checked"):T.is.blank(e))},blank:function(e){return""===String(e.val()).trim()},valid:function(e,i){var n=!0;return e?(T.verbose("Checking if field is valid",e),T.validate.field(d[e],e,!!i)):(T.verbose("Checking if form is valid"),z.each(d,function(e,t){T.is.valid(e,i)||(n=!1)}),n)},dirty:function(){return w},clean:function(){return!w},fieldDirty:function(e){var t=e.data(f.defaultValue);null==t?t="":Array.isArray(t)&&(t=t.toString());null==(e=e.val())?e="":Array.isArray(e)&&(e=e.toString());var i=/^(true|false)$/i;return i.test(t)&&i.test(e)?!new RegExp("^"+t+"$","i").test(e):e!==t},checkboxDirty:function(e){return e.data(f.defaultValue)!==e.is(":checked")},justDirty:function(){return"dirty"===C[0]},justClean:function(){return"clean"===C[0]}},removeEvents:function(){v.off(a),r.off(a),t.off(a),p.preventLeaving&&A.off(a),s&&(z(s).off(a),s=void 0)},event:{field:{keydown:function(e){var t=z(this),i=e.which,n=t.is(m.input),r=t.is(m.checkbox),o=0<t.closest(m.uiDropdown).length;27===i&&(T.verbose("Escape key pressed blurring field"),t[0].blur()),e.ctrlKey||13!==i||!n||o||r||(b||(t.one("keyup"+a,T.event.field.keyup),T.submit(e),T.debug("Enter pressed on input submitting form")),b=!0)},keyup:function(){b=!1},invalid:function(e){e.preventDefault()},blur:function(e){var t=z(this),i=T.get.validation(t)||{},n=T.get.identifier(i,t);("blur"===p.on||!v.hasClass(g.initial)&&p.revalidate)&&(T.debug("Revalidating field",t,i),T.validate.field(i,n),p.inline||T.validate.form(!1,!0))},change:function(e){var t=z(this),i=T.get.validation(t)||{},n=T.get.identifier(i,t);("change"===p.on||!v.hasClass(g.initial)&&p.revalidate)&&(clearTimeout(T.timer),T.timer=setTimeout(function(){T.debug("Revalidating field",t,i),T.validate.field(i,n),p.inline||T.validate.form(!1,!0)},p.delay))}},beforeUnload:function(e){if(T.is.dirty()&&!x)return(e=e||R.event)&&(e.returnValue=p.text.leavingMessage),p.text.leavingMessage}},get:{ancillaryValue:function(e){return!(!e.type||!e.value&&!T.is.bracketedRule(e))&&(void 0!==e.value?e.value:e.type.match(p.regExp.bracket)[1]+"")},ruleName:function(e){return T.is.bracketedRule(e)?e.type.replace(e.type.match(p.regExp.bracket)[0],""):e.type},changeEvent:function(e,t){return 0<=["file","checkbox","radio","hidden"].indexOf(e)||t.is("select")?"change":"input"},fieldsFromShorthand:function(e){var n={};return z.each(e,function(i,e){Array.isArray(e)||"object"!=typeof e?("string"==typeof e&&(e=[e]),n[i]={rules:[]},z.each(e,function(e,t){n[i].rules.push({type:t})})):n[i]=e}),n},identifier:function(e,t){return e.identifier||t.attr("id")||t.attr("name")||t.data(f.validate)},prompt:function(e,t){var i,n=T.get.ruleName(e),r=T.get.ancillaryValue(e),o=T.get.field(t.identifier),a=o.val(),s=-1!==(a=B(e.prompt)?e.prompt(a):e.prompt||p.prompt[n]||p.text.unspecifiedRule).search("{value}"),l=-1!==a.search("{name}");return r&&0<=["integer","decimal","number","size"].indexOf(n)&&0<=r.indexOf("..")&&(i=r.split("..",2),e.prompt||"size"===n||(a+=(""===i[0]?p.prompt.maxValue.replace(/{ruleValue}/g,"{max}"):""===i[1]?p.prompt.minValue.replace(/{ruleValue}/g,"{min}"):p.prompt.range).replace(/{name}/g," "+p.text.and)),a=(a=a.replace(/{min}/g,i[0])).replace(/{max}/g,i[1])),r&&0<=["match","different"].indexOf(n)&&(a=a.replace(/{ruleValue}/g,T.get.fieldLabel(r,!0))),s&&(a=a.replace(/{value}/g,o.val())),a=(a=(a=l?a.replace(/{name}/g,T.get.fieldLabel(o)):a).replace(/{identifier}/g,t.identifier)).replace(/{ruleValue}/g,r),e.prompt||T.verbose("Using default validation prompt for type",a,n),a},settings:function(){z.isPlainObject(S)?(S.fields&&(S.fields=T.get.fieldsFromShorthand(S.fields)),p=z.extend(!0,{},z.fn.form.settings,S),d=z.extend(!0,{},z.fn.form.settings.defaults,p.fields),T.verbose("Extending settings",d,p)):(p=z.extend(!0,{},z.fn.form.settings),d=z.extend(!0,{},z.fn.form.settings.defaults),T.verbose("Using default form validation",d,p)),n=p.namespace,f=p.metadata,m=p.selector,g=p.className,i=p.regExp,c=p.error,o="module-"+n,a="."+n,((u=v.data(o))||T).refresh()},field:function(e,t){var i;return T.verbose("Finding field with identifier",e),e=T.escape.string(e),0<(i=r.filter("#"+e)).length||0<(i=r.filter('[name="'+e+'"]')).length||0<(i=r.filter('[name="'+e+'[]"]')).length||0<(i=r.filter("[data-"+f.validate+'="'+e+'"]')).length?i:(T.error(c.noField.replace("{identifier}",e)),t?z():z("<input/>"))},fields:function(e,i){var n=z();return z.each(e,function(e,t){n=n.add(T.get.field(t,i))}),n},fieldLabel:function(e,t){var i="string"==typeof e?T.get.field(e):e,n=i.closest(m.group).find("label:not(:empty)").eq(0);return 1===n.length?n.text():i.prop("placeholder")||(t?e:p.text.unspecifiedField)},validation:function(n){var r,o;return d&&(z.each(d,function(e,i){o=i.identifier||e,z.each(T.get.field(o),function(e,t){if(t==n[0])return i.identifier=o,r=i,!1})}),r)||!1},value:function(e,t){var i=[];return i.push(e),e=T.get.values.call(_,i,t),0<(i=Object.keys(e)).length?e[i[0]]:void 0},values:function(e,t){var e=Array.isArray(e)&&0<e.length?T.get.fields(e,t):r,d={};return e.each(function(e,t){var i=(t=z(t)).closest(m.uiCalendar),n=t.prop("name"),r=t.val(),o=t.is(m.checkbox),a=t.is(m.radio),s=-1!==n.indexOf("[]"),l=0<i.length&&T.can.useElement("calendar"),t=!!o&&t.is(":checked");if(n)if(s)n=n.replace("[]",""),d[n]||(d[n]=[]),o?t?d[n].push(r||!0):d[n].push(!1):d[n].push(r);else if(a)void 0!==d[n]&&!1!==d[n]||(d[n]=!!t&&(r||!0));else if(o)d[n]=!!t&&(r||!0);else if(l){var c=i.calendar("get date");if(null!==c)switch(p.dateHandling){case"date":d[n]=c;break;case"input":d[n]=i.calendar("get input date");break;case"formatter":var u=i.calendar("setting","type");switch(u){case"date":d[n]=p.formatter.date(c);break;case"datetime":d[n]=p.formatter.datetime(c);break;case"time":d[n]=p.formatter.time(c);break;case"month":d[n]=p.formatter.month(c);break;case"year":d[n]=p.formatter.year(c);break;default:T.debug("Wrong calendar mode",i,u),d[n]=""}}else d[n]=""}else d[n]=r}),d},dirtyFields:function(){return r.filter(function(e,t){return z(t).data(f.isDirty)})}},has:{field:function(e){return T.verbose("Checking for existence of a field with identifier",e),0<T.get.field(e,!0).length}},can:{useElement:function(e){return void 0!==z.fn[e]||(T.error(c.noElement.replace("{element}",e)),!1)}},escape:{string:function(e){return(e=String(e)).replace(i.escape,"\\$&")}},checkErrors:function(e,t){return e&&0!==e.length?t||"string"!=typeof e?e:[e]:(t||T.error(p.error.noErrorMessage),!1)},add:{rule:function(e,t){T.add.field(e,t)},field:function(i,e){void 0!==d[i]&&void 0!==d[i].rules||(d[i]={rules:[]});var n={rules:[]};T.is.shorthandRules(e)?(e=Array.isArray(e)?e:[e],z.each(e,function(e,t){n.rules.push({type:t})})):n.rules=e.rules,z.each(n.rules,function(e,t){0===z.grep(d[i].rules,function(e){return e.type===t.type}).length&&d[i].rules.push(t)}),T.debug("Adding rules",n.rules,d),T.refreshEvents()},fields:function(e){d=z.extend(!0,{},d,T.get.fieldsFromShorthand(e)),T.refreshEvents()},prompt:function(e,t,i){var n,r,o,a;!1!==(t=T.checkErrors(t))&&(o=0<(r=(n=T.get.field(e).closest(h)).children(m.prompt)).length,a=p.transition&&T.can.useElement("transition"),T.verbose("Adding field error state",e),i||n.addClass(g.error),p.inline?(o&&(a?r.transition("is animating")&&r.transition("stop all"):r.is(":animated")&&r.stop(!0,!0),o=0<(r=n.children(m.prompt)).length),o||(r=z("<div/>").addClass(g.label),a||r.css("display","none"),r.appendTo(n)),r.html(p.templates.prompt(t)),o||(a?(T.verbose("Displaying error with css transition",p.transition),r.transition(p.transition+" in",p.duration)):(T.verbose("Displaying error with fallback javascript animation"),r.fadeIn(p.duration)))):T.verbose("Inline errors are disabled, no inline error added",e))},errors:function(t){var n,r;!1!==(t=T.checkErrors(t))&&(T.debug("Adding form error messages",t),T.set.error(),n=[],z.isPlainObject(t)?z.each(Object.keys(t),function(e,i){!1!==T.checkErrors(t[i],!0)&&(p.inline?T.add.prompt(i,t[i]):!1!==(r=T.checkErrors(t[i]))&&z.each(r,function(e,t){n.push(p.prompt.addErrors.replace(/{name}/g,T.get.fieldLabel(i)).replace(/{error}/g,t))}))}):n=t,0<n.length)&&e.html(p.templates.error(n))}},remove:{errors:function(){T.debug("Removing form error messages"),e.empty()},states:function(){v.removeClass(g.error).removeClass(g.success).addClass(g.initial),p.inline||T.remove.errors(),T.determine.isDirty()},rule:function(i,e){var n=Array.isArray(e)?e:[e];void 0!==d[i]&&Array.isArray(d[i].rules)&&(void 0===e?(T.debug("Removed all rules"),T.has.field(i)?d[i].rules=[]:delete d[i]):z.each(d[i].rules,function(e,t){t&&-1!==n.indexOf(t.type)&&(T.debug("Removed rule",t.type),d[i].rules.splice(e,1))}))},field:function(e){e=Array.isArray(e)?e:[e],z.each(e,function(e,t){T.remove.rule(t)}),T.refreshEvents()},rules:function(e,i){Array.isArray(e)?z.each(e,function(e,t){T.remove.rule(t,i)}):T.remove.rule(e,i)},fields:function(e){T.remove.field(e)},prompt:function(e){var t=T.get.field(e).closest(h),i=t.children(m.prompt);t.removeClass(g.error),p.inline&&i.is(":visible")&&(T.verbose("Removing prompt for field",e),p.transition&&T.can.useElement("transition")?i.transition(p.transition+" out",p.duration,function(){i.remove()}):i.fadeOut(p.duration,function(){i.remove()}))}},set:{success:function(){v.removeClass(g.error).addClass(g.success)},defaults:function(){r.each(function(e,t){var i=(t=z(t)).parent(),n=0<t.filter(m.checkbox).length,r=(i.is(m.uiDropdown)||t.is(m.uiDropdown))&&T.can.useElement("dropdown"),o=t.closest(m.uiCalendar),a=0<o.length&&T.can.useElement("calendar"),n=n?t.is(":checked"):t.val();r?(i.is(m.uiDropdown)?i:t).dropdown("save defaults"):a&&o.calendar("refresh"),t.data(f.defaultValue,n),t.data(f.isDirty,!1)})},error:function(){v.removeClass(g.success).addClass(g.error)},value:function(e,t){var i={};return i[e]=t,T.set.values.call(_,i)},values:function(e){z.isEmptyObject(e)||z.each(e,function(e,t){var i,n=T.get.field(e),r=n.parent(),e=n.closest(m.uiCalendar),o=n.is(m.file),a=Array.isArray(t),s=r.is(m.uiCheckbox)&&T.can.useElement("checkbox"),l=r.is(m.uiDropdown)&&T.can.useElement("dropdown"),c=n.is(m.radio)&&s,u=0<e.length&&T.can.useElement("calendar");0<n.length&&(a&&s?(T.verbose("Selecting multiple",t,n),r.checkbox("uncheck"),z.each(t,function(e,t){i=n.filter('[value="'+t+'"]'),r=i.parent(),0<i.length&&r.checkbox("check")})):c?(T.verbose("Selecting radio value",t,n),n.filter('[value="'+t+'"]').parent(m.uiCheckbox).checkbox("check")):s?(T.verbose("Setting checkbox value",t,r),!0===t||1===t||"on"===t?r.checkbox("check"):r.checkbox("uncheck"),"string"==typeof t&&n.val(t)):l?(T.verbose("Setting dropdown value",t,r),r.dropdown("set selected",t)):u?e.calendar("set date",t):(T.verbose("Setting field value",t,n),n.val(o?"":t)))})},dirty:function(){T.verbose("Setting state dirty"),w=!0,C[0]=C[1],C[1]="dirty",T.is.justClean()&&v.trigger("dirty")},clean:function(){T.verbose("Setting state clean"),w=!1,C[0]=C[1],C[1]="clean",T.is.justDirty()&&v.trigger("clean")},asClean:function(){T.set.defaults(),T.set.clean()},asDirty:function(){T.set.defaults(),T.set.dirty()},autoCheck:function(){T.debug("Enabling auto check on required fields"),d&&z.each(d,function(e){T.has.field(e)||(T.verbose("Field not found, removing from validation",e),T.remove.field(e))}),r.each(function(e,t){var i=(t=z(t)).closest(h),n=0<t.filter(m.checkbox).length,r=t.prop("required")||i.hasClass(g.required)||i.parent().hasClass(g.required),i=t.is(":disabled")||i.hasClass(g.disabled)||i.parent().hasClass(g.disabled),o=!!(a=T.get.validation(t))&&0!==z.grep(a.rules,function(e){return"empty"===e.type}),a=T.get.identifier(a,t);!r||i||o||void 0===a||(n?(T.verbose("Adding 'checked' rule on field",a),T.add.rule(a,"checked")):(T.verbose("Adding 'empty' rule on field",a),T.add.rule(a,"empty")))})},optional:function(i,n){n=!1!==n,z.each(d,function(e,t){i!==e&&i!==t.identifier||(t.optional=n)})}},validate:{form:function(e,t){var i,n=T.get.values();if(b)return!1;if(v.removeClass(g.initial),y=[],T.determine.isValid()){if(T.debug("Form has no validation errors, submitting"),T.set.success(),p.inline||T.remove.errors(),!0!==t)return p.onSuccess.call(_,e,n)}else if(T.debug("Form has errors"),x=!1,T.set.error(),p.inline||T.add.errors(y),e&&void 0!==v.data("moduleApi")&&e.stopImmediatePropagation(),p.errorFocus&&!0!==t&&(e=!0,"string"==typeof p.errorFocus?(e=(i=z(O).find(p.errorFocus)).is("[tabindex]"))||i.attr("tabindex",-1):i=h.filter("."+g.error).first().find(m.field),i.trigger("focus"),e||i.removeAttr("tabindex")),!0!==t)return p.onFailure.call(_,y,n)},field:function(n,e,r){if(r=void 0===r||r,"string"==typeof n&&(T.verbose("Validating field",n),n=d[e=n]),n){var o,a=n.identifier||e,t=T.get.field(a),i=!!n.depends&&T.get.field(n.depends),s=!0,l=[],c=0===t.filter(":not(:disabled)").length,u=t[0].validationMessage;if(n.identifier||(T.debug("Using field name as identifier",a),n.identifier=a),u?(T.debug("Field is natively invalid",a),l.push(u),s=!1,r&&t.closest(h).addClass(g.error)):r&&t.closest(h).removeClass(g.error),c?T.debug("Field is disabled. Skipping",a):n.optional&&T.is.blank(t)?T.debug("Field is optional and blank. Skipping",a):n.depends&&T.is.empty(i)?T.debug("Field depends on another value that is not present or empty. Skipping",i):void 0!==n.rules&&(o=n.errorLimit||p.errorLimit,z.each(n.rules,function(e,t){var i;T.has.field(a)&&(!o||l.length<o)&&0<(i=T.validate.rule(n,t,!0)||[]).length&&(T.debug("Field is invalid",a,t.type),l.push(T.get.prompt(t,n)),s=!1,r)&&z(i).closest(h).addClass(g.error)})),!s)return r&&(y=y.concat(l),T.add.prompt(a,l,!0),p.onInvalid.call(t,l)),!1;r&&(T.remove.prompt(a),p.onValid.call(t))}else T.debug("Unable to find field validation. Skipping",e);return!0},rule:function(e,i,t){function n(e){var t=void 0===(t=(l?z(e).filter(":checked"):z(e)).val())||""===t||null===t?"":p.shouldTrim&&!1!==i.shouldTrim||i.shouldTrim?String(t+"").trim():String(t+"");return a.call(e,t,r,T)}var e=T.get.field(e.identifier),r=T.get.ancillaryValue(i),o=T.get.ruleName(i),a=p.rules[o],s=[],l=e.is(m.checkbox);if(B(a))return l?n(e)||(s=e):z.each(e,function(e,t){n(t)||s.push(t)}),t?s:0===s.length;T.error(c.noRule,o)}},setting:function(e,t){if(z.isPlainObject(e))z.extend(!0,p,e);else{if(void 0===t)return p[e];p[e]=t}},internal:function(e,t){if(z.isPlainObject(e))z.extend(!0,T,e);else{if(void 0===t)return T[e];T[e]=t}},debug:function(){!p.silent&&p.debug&&(p.performance?T.performance.log(arguments):(T.debug=Function.prototype.bind.call(console.info,console,p.name+":"),T.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?T.performance.log(arguments):(T.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),T.verbose.apply(console,arguments)))},error:function(){p.silent||(T.error=Function.prototype.bind.call(console.error,console,p.name+":"),T.error.apply(console,arguments))},performance:{log:function(e){var t,i;p.performance&&(i=(t=Date.now())-(P||t),P=t,M.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:_,"Execution Time":i})),clearTimeout(T.performance.timer),T.performance.timer=setTimeout(function(){T.performance.display()},500)},display:function(){var e=p.name+":",i=0;P=!1,clearTimeout(T.performance.timer),z.each(M,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",1<E.length&&(e+=" ("+E.length+")"),0<M.length&&(console.groupCollapsed(e),console.table?console.table(M):z.each(M,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),M=[]}},invoke:function(n,e,t){var r,o,i,a=u;return e=e||L,t=t||_,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,z.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!z.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):z.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:T.error(c.method,n),!1);a=a[i]})),B(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(k)?k.push(i):void 0!==k?k=[k,i]:void 0!==i&&(k=i),o}};T.initialize()}),void 0!==k?k:this},z.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,shouldTrim:!0,transition:"scale",duration:200,autoCheckRequired:!1,preventLeaving:!1,errorFocus:!0,dateHandling:"date",errorLimit:0,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},onDirty:function(){},onClean:function(){},metadata:{defaultValue:"default",validate:"validate",isDirty:"isDirty"},regExp:{htmlID:/^[A-Za-z][\w.:-]*$/g,bracket:/\[(.*)]/i,decimal:/^\d+\.?\d*$/,email:/^[\w!#$%&'*+./=?^`{|}~-]+@[\da-z]([\da-z-]*[\da-z])?(\.[\da-z]([\da-z-]*[\da-z])?)*$/i,escape:/[$()*+,./:=?@[\\\]^{|}-]/g,flags:/^\/(.*)\/(.*)?/,integer:/^-?\d+$/,number:/^-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s.]+\.\S{2,}|www\.\S+\.\S{2,})/i},text:{and:"and",unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field",leavingMessage:"There are unsaved changes on this page which will be discarded if you continue."},prompt:{range:"{name} must be in a range from {min} to {max}",maxValue:"{name} must have a maximum value of {ruleValue}",minValue:"{name} must have a minimum value of {ruleValue}",empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contains:'{name} must contain "{ruleValue}"',containsExactly:'{name} must contain exactly "{ruleValue}"',doesntContain:'{name} cannot contain "{ruleValue}"',doesntContainExactly:'{name} cannot contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",size:"{name} must have a length between {min} and {max} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices",addErrors:"{name}: {error}"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:'input:not(.search):not([type="reset"]):not([type="button"]):not([type="submit"]), textarea, select',file:'input[type="file"]',group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown",uiCalendar:".ui.calendar"},className:{initial:"initial",error:"error",label:"ui basic red pointing prompt label",pressed:"down",success:"success",required:"required",disabled:"disabled"},error:{method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",noField:"Field identifier {identifier} not found",noElement:"This module requires ui {element}",noErrorMessage:"No error message provided"},templates:{error:function(e){var i='<ul class="list">';return z.each(e,function(e,t){i+="<li>"+t+"</li>"}),i+="</ul>"},prompt:function(e){var i;return 1===e.length?e[0]:(i='<ul class="ui list">',z.each(e,function(e,t){i+="<li>"+t+"</li>"}),i+="</ul>")}},formatter:{date:function(e){return Intl.DateTimeFormat("en-GB").format(e)},datetime:function(e){return Intl.DateTimeFormat("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(e)},time:function(e){return Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(e)},month:function(e){return Intl.DateTimeFormat("en-GB",{month:"2-digit",year:"numeric"}).format(e)},year:function(e){return Intl.DateTimeFormat("en-GB",{year:"numeric"}).format(e)}},rules:{empty:function(e){return!(void 0===e||""===e||Array.isArray(e)&&0===e.length)},checked:function(){return 0<z(this).filter(":checked").length},email:function(e){return z.fn.form.settings.regExp.email.test(e)},url:function(e){return z.fn.form.settings.regExp.url.test(e)},regExp:function(e,t){var i,n;return t instanceof RegExp?e.match(t):((i=t.match(z.fn.form.settings.regExp.flags))&&(t=2<=i.length?i[1]:t,n=3<=i.length?i[2]:""),e.match(new RegExp(t,n)))},minValue:function(e,t){return z.fn.form.settings.rules.range(e,t+"..","number")},maxValue:function(e,t){return z.fn.form.settings.rules.range(e,".."+t,"number")},integer:function(e,t){return z.fn.form.settings.rules.range(e,t,"integer")},range:function(e,t,i,n){var r,o;return(i="string"==typeof i?z.fn.form.settings.regExp[i]:i)instanceof RegExp||(i=z.fn.form.settings.regExp.integer),t&&-1===["",".."].indexOf(t)&&(-1===t.indexOf("..")?i.test(t)&&(o=r=+t):(t=t.split("..",2),i.test(t[0])&&(r=+t[0]),i.test(t[1])&&(o=+t[1]))),n&&(e=e.length),i.test(e)&&(void 0===r||r<=e)&&(void 0===o||e<=o)},decimal:function(e,t){return z.fn.form.settings.rules.range(e,t,"decimal")},number:function(e,t){return z.fn.form.settings.rules.range(e,t,"number")},is:function(e,t){return t="string"==typeof t?t.toLowerCase():t,(e="string"==typeof e?e.toLowerCase():e)==t},isExactly:function(e,t){return e==t},not:function(e,t){return(e="string"==typeof e?e.toLowerCase():e)!=("string"==typeof t?t.toLowerCase():t)},notExactly:function(e,t){return e!=t},contains:function(e,t){return t=t.replace(z.fn.form.settings.regExp.escape,"\\$&"),-1!==e.search(new RegExp(t,"i"))},containsExactly:function(e,t){return t=t.replace(z.fn.form.settings.regExp.escape,"\\$&"),-1!==e.search(new RegExp(t))},doesntContain:function(e,t){return t=t.replace(z.fn.form.settings.regExp.escape,"\\$&"),-1===e.search(new RegExp(t,"i"))},doesntContainExactly:function(e,t){return t=t.replace(z.fn.form.settings.regExp.escape,"\\$&"),-1===e.search(new RegExp(t))},minLength:function(e,t){return z.fn.form.settings.rules.range(e,t+"..","integer",!0)},exactLength:function(e,t){return z.fn.form.settings.rules.range(e,t+".."+t,"integer",!0)},maxLength:function(e,t){return z.fn.form.settings.rules.range(e,".."+t,"integer",!0)},size:function(e,t){return z.fn.form.settings.rules.range(e,t,"integer",!0)},match:function(e,t,i){return void 0!==(i=i.get.value(t,!0))&&e.toString()===i.toString()},different:function(e,t,i){return void 0!==(i=i.get.value(t,!0))&&e.toString()!==i.toString()},creditCard:function(i,e){var n,r={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9]\d|[2-8]\d{2}|9[01]\d|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8]\d)/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},o=!1,e="string"==typeof e&&e.split(",");if("string"==typeof i&&0!==i.length){if(i=i.replace(/[\s-]/g,""),e&&(z.each(e,function(e,t){(n=r[t])&&0<(n={length:-1!==z.inArray(i.length,n.length),pattern:-1!==i.search(n.pattern)}).length&&n.pattern&&(o=!0)}),!o))return!1;if((e={number:-1!==z.inArray(i.length,r.unionPay.length),pattern:-1!==i.search(r.unionPay.pattern)}).number&&e.pattern)return!0;for(var t=i.length,a=0,s=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],l=0;t--;)l+=s[a][parseInt(i.charAt(t),10)],a^=1;return l%10==0&&0<l}},minCount:function(e,t){return 0===(t=Number(t))||(1===t?""!==e:e.split(",").length>=t)},exactCount:function(e,t){return 0===(t=Number(t))?""===e:1===t?""!==e&&-1===e.search(","):e.split(",").length===t},maxCount:function(e,t){return 0!==(t=Number(t))&&(1===t?-1===e.search(","):e.split(",").length<=t)}}}})(jQuery,window,document),((x,w)=>{w=void 0!==w&&w.Math===Math?w:globalThis,x.fn.accordion=function(f){var m,e=x(this),g=Date.now(),v=[],_=f,y="string"==typeof _,b=[].slice.call(arguments,1);return e.each(function(){var e,o=x.isPlainObject(f)?x.extend(!0,{},x.fn.accordion.settings,f):x.extend({},x.fn.accordion.settings),a=o.className,t=o.namespace,s=o.selector,l=o.error,i="."+t,n="module-"+t,r=x(this),c=r.find(s.title),u=r.find(s.content),d=this,h=r.data(n),p={initialize:function(){p.debug("Initializing",r),p.bind.events(),o.observeChanges&&p.observeChanges(),p.instantiate()},instantiate:function(){h=p,r.data(n,p)},destroy:function(){p.debug("Destroying previous instance",r),r.off(i).removeData(n)},refresh:function(){c=r.find(s.title),u=r.find(s.content)},observeChanges:function(){"MutationObserver"in w&&((e=new MutationObserver(function(e){p.debug("DOM tree modified, updating selector cache"),p.refresh()})).observe(d,{childList:!0,subtree:!0}),p.debug("Setting up mutation observer",e))},bind:{events:function(){p.debug("Binding delegated events"),r.on(o.on+i,s.trigger,p.event.click)}},event:{click:function(e){0===x(e.target).closest(s.ignore).length&&p.toggle.call(this)}},toggle:function(e){var t=(n=(e=void 0!==e?"number"==typeof e?c.eq(e):x(e).closest(s.title):x(this).closest(s.title)).next(u)).hasClass(a.animating),i=(n=n.hasClass(a.active))&&!t,n=!n&&t;p.debug("Toggling visibility of content",e),i||n?o.collapsible?p.close.call(e):p.debug("Cannot close accordion content collapsing is disabled"):p.open.call(e)},open:function(e){var t=(e=void 0!==e?"number"==typeof e?c.eq(e):x(e).closest(s.title):x(this).closest(s.title)).next(u),i=t.hasClass(a.animating);t.hasClass(a.active)||i?p.debug("Accordion already open, skipping",t):(p.debug("Opening accordion content",e),o.onOpening.call(t),o.onChanging.call(t),o.exclusive&&p.closeOthers.call(e),e.addClass(a.active),t.stop(!0,!0).addClass(a.animating),o.animateChildren&&(void 0!==x.fn.transition?t.children().transition({animation:"fade in",queue:!1,useFailSafe:!0,debug:o.debug,verbose:o.verbose,silent:o.silent,duration:o.duration,skipInlineHidden:!0,onComplete:function(){t.children().removeClass(a.transition)}}):t.children().stop(!0,!0).animate({opacity:1},o.duration,p.resetOpacity)),t.slideDown(o.duration,o.easing,function(){t.removeClass(a.animating).addClass(a.active),p.reset.display.call(this),o.onOpen.call(this),o.onChange.call(this)}))},close:function(e){var t=(e=void 0!==e?"number"==typeof e?c.eq(e):x(e).closest(s.title):x(this).closest(s.title)).next(u),i=t.hasClass(a.animating),n=t.hasClass(a.active);!n&&(n||!i)||n&&i||(p.debug("Closing accordion content",t),o.onClosing.call(t),o.onChanging.call(t),e.removeClass(a.active),t.stop(!0,!0).addClass(a.animating),o.animateChildren&&(void 0!==x.fn.transition?t.children().transition({animation:"fade out",queue:!1,useFailSafe:!0,debug:o.debug,verbose:o.verbose,silent:o.silent,duration:o.duration,skipInlineHidden:!0}):t.children().stop(!0,!0).animate({opacity:0},o.duration,p.resetOpacity)),t.slideUp(o.duration,o.easing,function(){t.removeClass(a.animating).removeClass(a.active),p.reset.display.call(this),o.onClose.call(this),o.onChange.call(this)}))},closeOthers:function(e){var t,i=(e=void 0!==e?c.eq(e):x(this).closest(s.title)).parents(s.content).prev(s.title),e=e.closest(s.accordion),n=s.title+"."+a.active+":visible",r=s.content+"."+a.active+":visible",r=(t=o.closeNested?e.find(n).not(i):(t=e.find(n).not(i),e=e.find(r).find(n).not(i),t.not(e))).next(u);0<t.length&&(p.debug("Exclusive enabled, closing other content",t),t.removeClass(a.active),r.removeClass(a.animating).stop(!0,!0),o.animateChildren&&(void 0!==x.fn.transition?r.children().transition({animation:"fade out",useFailSafe:!0,debug:o.debug,verbose:o.verbose,silent:o.silent,duration:o.duration,skipInlineHidden:!0}):r.children().stop(!0,!0).animate({opacity:0},o.duration,p.resetOpacity)),r.slideUp(o.duration,o.easing,function(){x(this).removeClass(a.active),p.reset.display.call(this)}))},reset:{display:function(){p.verbose("Removing inline display from element",this);var e=x(this);e.css("display",""),""===e.attr("style")&&e.attr("style","").removeAttr("style")},opacity:function(){p.verbose("Removing inline opacity from element",this);var e=x(this);e.css("opacity",""),""===e.attr("style")&&e.attr("style","").removeAttr("style")}},setting:function(e,t){if(p.debug("Changing setting",e,t),x.isPlainObject(e))x.extend(!0,o,e);else{if(void 0===t)return o[e];x.isPlainObject(o[e])?x.extend(!0,o[e],t):o[e]=t}},internal:function(e,t){if(p.debug("Changing internal",e,t),void 0===t)return p[e];x.isPlainObject(e)?x.extend(!0,p,e):p[e]=t},debug:function(){!o.silent&&o.debug&&(o.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,o.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!o.silent&&o.verbose&&o.debug&&(o.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),p.verbose.apply(console,arguments)))},error:function(){o.silent||(p.error=Function.prototype.bind.call(console.error,console,o.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,i;o.performance&&(i=(t=Date.now())-(g||t),g=t,v.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:d,"Execution Time":i})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(function(){p.performance.display()},500)},display:function(){var e=o.name+":",i=0;g=!1,clearTimeout(p.performance.timer),x.each(v,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<v.length&&(console.groupCollapsed(e),console.table?console.table(v):x.each(v,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),v=[]}},invoke:function(n,e,t){var r,o,i,a=h;return e=e||b,t=t||d,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,x.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!x.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):x.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:p.error(l.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(m)?m.push(i):void 0!==m?m=[m,i]:void 0!==i&&(m=i),o}};y?(void 0===h&&p.initialize(),p.invoke(_)):(void 0!==h&&h.invoke("destroy"),p.initialize())}),void 0!==m?m:this},x.fn.accordion.settings={name:"Accordion",namespace:"accordion",silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",observeChanges:!0,exclusive:!0,collapsible:!0,closeNested:!1,animateChildren:!0,duration:350,easing:"easeOutQuad",onOpening:function(){},onClosing:function(){},onChanging:function(){},onOpen:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active",animating:"animating",transition:"transition"},selector:{accordion:".accordion",title:".title",trigger:".title",ignore:".ui.dropdown",content:".content"}},x.extend(x.easing,{easeOutQuad:function(e){return 1-(1-e)*(1-e)}})})(jQuery,window,document),((oe,T,S)=>{T=void 0!==T&&T.Math===Math?T:globalThis,oe.fn.calendar=function(m){var g,e=oe(this),v=oe(S),_=Date.now(),y=[],b=m,x="string"==typeof b,w=[].slice.call(arguments,1),C={5:{row:4,column:3},10:{row:3,column:2},15:{row:2,column:2},20:{row:3,column:1},30:{row:2,column:1}},re=["","one","two","three","four","five","six","seven","eight"];return e.each(function(){var d,e,X=oe.isPlainObject(m)?oe.extend(!0,{},oe.fn.calendar.settings,m):oe.extend({},oe.fn.calendar.settings),Y=X.className,i=X.namespace,n=X.selector,K=X.formatter,J=X.parser,Q=X.metadata,ee=C[X.minTimeGap],s=X.error,t="."+i,r="module-"+i,o=oe(this),a=o.find(n.input),l=o.find(n.activator),c=this,u=o.data(r),te=u&&u.popupId?v.find("#"+u.popupId):o.find(n.popup),h=!1,ie=o.hasClass(Y.inverted),p=!1,f=!1,ne={initialize:function(){ne.debug("Initializing calendar for",c,o),d=ne.get.isTouch(),ne.setup.config(),ne.setup.popup(),ne.setup.inline(),ne.setup.input(),ne.setup.date(),ne.create.calendar(),ne.bind.events(),ne.observeChanges(),ne.instantiate()},instantiate:function(){ne.verbose("Storing instance of calendar"),u=ne,o.data(r,u)},destroy:function(){ne.verbose("Destroying previous calendar for",c),o.removeData(r),ne.unbind.events(),ne.disconnect.classObserver()},setup:{config:function(){null!==ne.get.minDate()&&ne.set.minDate(o.data(Q.minDate)),null!==ne.get.maxDate()&&ne.set.maxDate(o.data(Q.maxDate)),ne.setting("type",ne.get.type()),ne.setting("on",X.on||"click")},popup:function(){var e,t;X.inline||0===l.length&&0===(l=o.children().first()).length||(void 0===oe.fn.popup?ne.error(s.popup):((te=0===te.length?X.context?(ne.popupId=i+"_popup_"+(Math.random().toString(16)+"000000000").slice(2,10),oe("<div/>",{id:ne.popupId}).addClass(Y.popup).appendTo(v.find(X.context))):(e=0<(t=l.parent()).closest(n.append).length?"appendTo":"prependTo",oe("<div/>").addClass(Y.popup)[e](t)):te).addClass(Y.calendar),ie&&te.addClass(Y.inverted),e=function(){return ne.refreshTooltips(),X.onVisible.apply(te,arguments)},0===a.length&&(te.attr("tabindex","0"),e=function(){return ne.refreshTooltips(),ne.focus(),X.onVisible.apply(te,arguments)}),t=ne.setting("on"),t=oe.extend({},X.popupOptions,{popup:te,movePopup:!X.context,on:t,hoverable:"hover"===t,closable:"click"===t,onShow:function(){return ne.set.focusDate(ne.get.date()),ne.set.mode(ne.get.validatedMode(X.startMode)),X.onShow.apply(te,arguments)},onVisible:e,onHide:X.onHide,onHidden:function(){return ne.blur(),X.onHidden.apply(te,arguments)}}),ne.popup(t)))},inline:function(){0<l.length&&!X.inline||(X.inline=!0,te=oe("<div/>").addClass(Y.calendar).appendTo(o),0===a.length&&te.attr("tabindex","0"))},input:function(){X.touchReadonly&&0<a.length&&d&&a.prop("readonly",!0),ne.check.disabled()},date:function(){var e;X.initialDate?e=J.date(X.initialDate,X):void 0!==o.data(Q.date)?e=J.date(o.data(Q.date),X):0<a.length&&(e=J.date(a.val(),X)),ne.set.date(e,X.formatInput,!1),ne.set.mode(ne.get.mode(),!1)}},trigger:{change:function(){var e,t=a[0];t&&(e=S.createEvent("HTMLEvents"),ne.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},create:{calendar:function(){var e,t,O,i=ne.get.mode(),n=new Date,B=ne.get.date(),r=ne.get.focusDate(),o=ne.helper.dateInRange(r||B||J.date(X.initialDate,X)||n),a=(r||ne.set.focusDate(r=o,!1,!1),"year"===i),s="month"===i,l="day"===i,c="hour"===i,u="minute"===i,F="time"===X.type,N=Math.max(X.multiMonth,1),j=l?ne.get.monthOffset():0,d=o.getMinutes(),h=o.getHours(),p=o.getDate(),V=o.getMonth()+j,f=o.getFullYear(),m=l?X.showWeekNumbers?8:7:c?4:ee.column,U=l||c?6:ee.row,g=l?N:1,v=(_=te).hasClass("left")?"right center":"left center";for(_.empty(),1<g&&(O=oe("<div/>").addClass(Y.grid).appendTo(_)),t=0;t<g;t++){1<g&&(_=oe("<div/>").addClass(Y.column).appendTo(O));var _,y=V+t,$=(new Date(f,y,1).getDay()-X.firstDayOfWeek%7+7)%7,b=(!X.constantHeight&&l&&(b=new Date(f,y+1,0).getDate()+$,U=Math.ceil(b/7)),a?10:s?1:0),x=l?1:0,w=c||u?1:0,C=c||u?p:1,T=new Date(f-b,y-x,C-w,h),x=new Date(f+b,y+x,C+w,h),C=a?new Date(10*Math.ceil(f/10)-9,0,0):s?new Date(f,0,0):l?new Date(f,y,0):new Date(f,y,p,-1),w=a?new Date(10*Math.ceil(f/10)+1,0,1):s?new Date(f+1,0,1):l?new Date(f,y+1,1):new Date(f,y,p+1),S=i,S=(l&&X.showWeekNumbers&&(S+=" andweek"),oe("<table/>").addClass(Y.table).addClass(S).addClass(re[m]+" column").appendTo(_)),q=(ie&&S.addClass(Y.inverted),m);if(!F){var H=oe("<thead/>").appendTo(S),k=oe("<tr/>").appendTo(H),E=oe("<th/>").attr("colspan",""+m).appendTo(k),A=a||s?new Date(f,0,1):l?new Date(f,y,1):new Date(f,y,p,h,d),P=oe("<span/>").addClass(Y.link).appendTo(E),A=(P.text(ne.helper.dateFormat(K[i+"Header"],A)),s?X.disableYear?"day":"year":l?X.disableMonth?"year":"month":"day");if(P.data(Q.mode,A),0===t&&((P=oe("<span/>").addClass(Y.prev).appendTo(E)).data(Q.focusDate,T),P.toggleClass(Y.disabledCell,!ne.helper.isDateInRange(C,i)),oe("<i/>").addClass(Y.prevIcon).appendTo(P)),t===g-1&&((A=oe("<span/>").addClass(Y.next).appendTo(E)).data(Q.focusDate,x),A.toggleClass(Y.disabledCell,!ne.helper.isDateInRange(w,i)),oe("<i/>").addClass(Y.nextIcon).appendTo(A)),l)for(k=oe("<tr/>").appendTo(H),X.showWeekNumbers&&((E=oe("<th/>").appendTo(k)).text(X.text.weekNo),E.addClass(Y.weekCell),q--),M=0;M<q;M++)(E=oe("<th/>").appendTo(k)).text(K.dayColumnHeader((M+X.firstDayOfWeek)%7,X))}for(var Z=oe("<tbody/>").appendTo(S),M=a?10*Math.ceil(f/10)-9:l?1-$:0,G=0;G<U;G++)for(k=oe("<tr/>").appendTo(Z),l&&X.showWeekNumbers&&((E=oe("<th/>").appendTo(k)).text(ne.get.weekOfYear(f,y,M+1-X.firstDayOfWeek)),E.addClass(Y.weekCell)),e=0;e<q;e++,M++){var I,D=a?new Date(M,y,1,h,d):s?new Date(f,M,1,h,d):l?new Date(f,y,M,h,d):c?new Date(f,y,p,M):new Date(f,y,p,h,M*X.minTimeGap),L=a?M:s?X.text.monthsShort[M]:l?D.getDate():ne.helper.dateFormat(K.cellTime,D),L=((E=oe("<td/>").addClass(Y.cell).appendTo(k)).text(L),E.data(Q.date,D),l&&D.getMonth()!==(y+12)%12),z=!X.selectAdjacentDays&&L||!ne.helper.isDateInRange(D,i)||X.isDisabled(D,i)||ne.helper.isDisabled(D,i)||!ne.helper.isEnabled(D,i),R=(z?(null!==(R=ne.helper.findDayAsObject(D,i,X.disabledDates))&&R[Q.message]&&(E.attr("data-tooltip",R[Q.message]),E.attr("data-position",R[Q.position]||v),(R[Q.inverted]||ie&&void 0===R[Q.inverted])&&E.attr("data-inverted",""),R[Q.variation])&&E.attr("data-variation",R[Q.variation]),"hour"===i&&null!==(R=ne.helper.findHourAsObject(D,i,X.disabledHours))&&R[Q.message]&&(E.attr("data-tooltip",R[Q.message]),E.attr("data-position",R[Q.position]||v),(R[Q.inverted]||ie&&void 0===R[Q.inverted])&&E.attr("data-inverted",""),R[Q.variation])&&E.attr("data-variation",R[Q.variation])):null!==(I=ne.helper.findDayAsObject(D,i,X.eventDates))&&(E.addClass(I[Q.class]||X.eventClass),I[Q.message])&&(E.attr("data-tooltip",I[Q.message]),E.attr("data-position",I[Q.position]||v),(I[Q.inverted]||ie&&void 0===I[Q.inverted])&&E.attr("data-inverted",""),I[Q.variation])&&E.attr("data-variation",I[Q.variation]),ne.helper.dateEqual(D,B,i)),W=ne.helper.dateEqual(D,n,i),L=(E.toggleClass(Y.adjacentCell,L&&!I),E.toggleClass(Y.disabledCell,z),E.toggleClass(Y.activeCell,R&&!(L&&z)),c||u||E.toggleClass(Y.todayCell,!L&&W),{mode:i,adjacent:L,disabled:z,active:R,today:W});K.cell(E,D,L),ne.helper.dateEqual(D,r,i)&&ne.set.focusDate(D,!1,!1)}X.today&&(T=oe("<tr/>").appendTo(Z),(C=oe("<td/>").attr("colspan",""+m).addClass(Y.today).appendTo(T)).text(K.today(X)),C.data(Q.date,n)),ne.update.focus(!1,S),X.inline&&ne.refreshTooltips()}}},update:{focus:function(e,t){t=t||te;var a=ne.get.mode(),i=ne.get.date(),s=ne.get.focusDate(),l=ne.get.startDate(),c=ne.get.endDate(),u=(e?s:null)||i||(d?null:s);t.find("td").each(function(){var e,t,i,n,r=oe(this),o=r.data(Q.date);o&&(e=r.hasClass(Y.disabledCell),t=r.hasClass(Y.activeCell),i=r.hasClass(Y.adjacentCell),n=ne.helper.dateEqual(o,s,a),o=!!u&&(!!l&&ne.helper.isDateInRange(o,a,l,u)||!!c&&ne.helper.isDateInRange(o,a,u,c)),r.toggleClass(Y.focusCell,n&&(!d||h)&&(!i||X.selectAdjacentDays&&i)&&!e),ne.helper.isTodayButton(r)||r.toggleClass(Y.rangeCell,o&&!t&&!e))})}},refresh:function(){ne.create.calendar()},refreshTooltips:function(){var n=oe(T).width();te.find("td[data-position]").each(function(){var e=oe(this),t=T.getComputedStyle(e[0],"::after").width.replace(/[^\d.]/g,""),i=e.attr("data-position"),t=n-e.width()-(parseInt(t,10)||250)>e.offset().left?"right":"left";-1===i.indexOf(t)&&e.attr("data-position",i.replace(/(left|right)/,t))})},bind:{events:function(){ne.debug("Binding events"),te.on("mousedown"+t,ne.event.mousedown),te.on("touchstart"+t,ne.event.mousedown),te.on("mouseup"+t,ne.event.mouseup),te.on("touchend"+t,ne.event.mouseup),te.on("mouseover"+t,ne.event.mouseover),(0<a.length?(a.on("input"+t,ne.event.inputChange),a.on("focus"+t,ne.event.inputFocus),a.on("blur"+t,ne.event.inputBlur),a):te).on("keydown"+t,ne.event.keydown)}},unbind:{events:function(){ne.debug("Unbinding events"),te.off(t),0<a.length&&a.off(t)}},event:{mouseover:function(e){var t=oe(e.target).data(Q.date),e=1===e.buttons;t&&ne.set.focusDate(t,!1,!0,e)},mousedown:function(e){0<a.length&&e.preventDefault(),h=0<=e.type.indexOf("touch"),(e=oe(e.target).data(Q.date))&&ne.set.focusDate(e,!1,!0,!0)},mouseup:function(e){var t,i,n;ne.focus(),e.preventDefault(),e.stopPropagation(),h=!1,(e=oe(e.target)).hasClass("disabled")||(t=(e=(t=e.parent()).data(Q.date)||t.data(Q.focusDate)||t.data(Q.mode)?t:e).data(Q.date),i=e.data(Q.focusDate),n=e.data(Q.mode),t&&!1!==X.onSelect.call(c,t,ne.get.mode())?(e=e.hasClass(Y.today),ne.selectDate(t,e)):i?ne.set.focusDate(i):n&&ne.set.mode(n))},keydown:function(e){var t=e.which;if(9===t&&ne.popup("hide"),ne.popup("is visible")){var i=ne.get.mode();switch(t){case 37:case 38:case 39:case 40:var n="day"===i?7:"hour"===i?4:"minute"===i?ee.column:3,n=37===t?-1:38===t?-n:39===t?1:n,r=(n*="minute"===i?X.minTimeGap:1,ne.get.focusDate()||ne.get.date()||new Date),o=r.getFullYear()+("year"===i?n:0),a=r.getMonth()+("month"===i?n:0),s=r.getDate()+("day"===i?n:0),l=r.getHours()+("hour"===i?n:0),n=r.getMinutes()+("minute"===i?n:0),o=new Date(o,a,s,l,n);"time"===X.type&&(o=ne.helper.mergeDateTime(r,o)),ne.helper.isDateInRange(o,i)&&ne.set.focusDate(o);break;case 13:(a=ne.get.focusDate())&&!X.isDisabled(a,i)&&!ne.helper.isDisabled(a,i)&&ne.helper.isEnabled(a,i)&&!1!==X.onSelect.call(c,a,ne.get.mode())&&ne.selectDate(a),e.preventDefault(),e.stopPropagation();break;case 27:ne.popup("hide"),e.stopPropagation()}}38!==t&&40!==t||(e.preventDefault(),ne.popup("show"))},inputChange:function(){var e=a.val(),e=J.date(e,X);ne.set.date(e,!1)},inputFocus:function(){te.addClass(Y.active)},inputBlur:function(){var e;te.removeClass(Y.active),X.formatInput&&(e=ne.get.date(),e=ne.helper.dateFormat(K[X.type],e),a.val(e)),f&&(ne.trigger.change(),f=!1)},class:{mutation:function(e){e.forEach(function(e){"class"===e.attributeName&&ne.check.disabled()})}}},observeChanges:function(){"MutationObserver"in T&&(e=new MutationObserver(ne.event.class.mutation),ne.debug("Setting up mutation observer",e),ne.observe.class())},disconnect:{classObserver:function(){0<a.length&&e&&e.disconnect()}},observe:{class:function(){0<a.length&&e&&e.observe(o[0],{attributes:!0})}},is:{disabled:function(){return o.hasClass(Y.disabled)}},check:{disabled:function(){a.attr("tabindex",ne.is.disabled()?-1:0)}},get:{weekOfYear:function(e,t,i){return e=Date.UTC(e,t,i+3)/864e5,t=Math.floor(e/7),i=new Date(6048e5*t).getUTCFullYear(),t-Math.floor(Date.UTC(i,0,7)/6048e5)+1},formattedDate:function(e,t){return ne.helper.dateFormat(e||K[X.type],t||ne.get.date())},date:function(){return ne.helper.sanitiseDate(o.data(Q.date))||null},inputDate:function(){return a.val()},focusDate:function(){return o.data(Q.focusDate)||null},startDate:function(){var e=ne.get.calendarModule(X.startCalendar);return(e?e.get.date():o.data(Q.startDate))||null},endDate:function(){var e=ne.get.calendarModule(X.endCalendar);return(e?e.get.date():o.data(Q.endDate))||null},minDate:function(){return o.data(Q.minDate)||null},maxDate:function(){return o.data(Q.maxDate)||null},monthOffset:function(){return o.data(Q.monthOffset)||X.monthOffset||0},mode:function(){var e=o.data(Q.mode)||X.startMode;return ne.get.validatedMode(e)},validatedMode:function(e){var t=ne.get.validModes();return 0<=oe.inArray(e,t)?e:"time"===X.type?"hour":"month"===X.type?"month":"year"===X.type?"year":"day"},type:function(){return o.data(Q.type)||X.type},validModes:function(){var e=[];return"time"!==X.type&&(X.disableYear&&"year"!==X.type||e.push("year"),(X.disableMonth||"year"===X.type)&&"month"!==X.type||e.push("month"),0<=X.type.indexOf("date"))&&e.push("day"),0<=X.type.indexOf("time")&&(e.push("hour"),X.disableMinute||e.push("minute")),e},isTouch:function(){try{return S.createEvent("TouchEvent"),!0}catch(e){return!1}},calendarModule:function(e){return e?(e=e instanceof oe?e:v.find(e).first()).data(r):null}},set:{date:function(e,t,i){t=!1!==t,i=!1!==i,e=ne.helper.sanitiseDate(e),e=ne.helper.dateInRange(e);var n,r=ne.get.mode(),o=ne.helper.dateFormat(K[X.type],e);return!(i&&!1===X.onBeforeChange.call(c,e,o,r)||(ne.set.focusDate(e),X.isDisabled(e,r)))&&((n=ne.get.endDate())&&e&&n<e&&ne.set.endDate(),ne.set.dataKeyValue(Q.date,e),t&&0<a.length&&a.val(o),void(i&&X.onChange.call(c,e,o,r)))},startDate:function(e,t){e=ne.helper.sanitiseDate(e);var i=ne.get.calendarModule(X.startCalendar);i&&i.set.date(e),ne.set.dataKeyValue(Q.startDate,e,t)},endDate:function(e,t){e=ne.helper.sanitiseDate(e);var i=ne.get.calendarModule(X.endCalendar);i&&i.set.date(e),ne.set.dataKeyValue(Q.endDate,e,t)},focusDate:function(e,t,i,n){e=ne.helper.sanitiseDate(e),e=ne.helper.dateInRange(e);var r="day"===ne.get.mode(),o=ne.get.focusDate(),r=(r&&e&&o&&(r=12*(e.getFullYear()-o.getFullYear())+e.getMonth()-o.getMonth())&&(o=ne.get.monthOffset()-r,ne.set.monthOffset(o,!1)),ne.set.dataKeyValue(Q.focusDate,e,!!e&&t));i=!1!==i&&r&&!1===t||p!=n,p=n,i&&ne.update.focus(n)},minDate:function(e){e=ne.helper.sanitiseDate(e),null!==X.maxDate&&X.maxDate<=e?ne.verbose("Unable to set minDate variable bigger that maxDate variable",e,X.maxDate):(ne.setting("minDate",e),ne.set.dataKeyValue(Q.minDate,e))},maxDate:function(e){e=ne.helper.sanitiseDate(e),null!==X.minDate&&X.minDate>=e?ne.verbose("Unable to set maxDate variable lower that minDate variable",e,X.minDate):(ne.setting("maxDate",e),ne.set.dataKeyValue(Q.maxDate,e))},monthOffset:function(e,t){var i=Math.max(X.multiMonth,1);e=Math.max(1-i,Math.min(0,e)),ne.set.dataKeyValue(Q.monthOffset,e,t)},mode:function(e,t){ne.set.dataKeyValue(Q.mode,e,t)},dataKeyValue:function(e,t,i){var n=(n=o.data(e))===t||n<=t&&t<=n;return t?o.data(e,t):o.removeData(e),(i=!1!==i&&!n)&&ne.refresh(),!n}},selectDate:function(e,t){ne.verbose("New date selection",e);var i=ne.get.mode();t||"minute"===i||X.disableMinute&&"hour"===i||"date"===X.type&&"day"===i||"month"===X.type&&"month"===i||"year"===X.type&&"year"===i?!1!==ne.set.date(e)&&(f=!0,X.closable)&&(ne.popup("hide"),t=ne.get.calendarModule(X.endCalendar))&&(t.refresh(),"focus"!==t.setting("on")&&t.popup("show"),t.focus()):(t="year"===i?X.disableMonth?"day":"month":"month"===i?"day":"day"===i?"hour":"minute",ne.set.mode(t),"hour"===i||"day"===i&&ne.get.date()?ne.set.date(e,!0,!1):ne.set.focusDate(e))},changeDate:function(e){ne.set.date(e)},clear:function(){ne.set.date()},popup:function(){return l.popup.apply(l,arguments)},focus:function(){(0<a.length?a:te).trigger("focus")},blur:function(){(0<a.length?a:te).trigger("blur")},helper:{dateFormat:function(e,t){var i,n,r,o,a,s,l,c,u,d;return t instanceof Date?"function"==typeof e?e.call(ne,t,X):(i=t.getDate(),n=t.getMonth(),r=t.getFullYear(),o=t.getDay(),a=t.getHours(),s=t.getMinutes(),t=t.getSeconds(),l=ne.get.weekOfYear(r,n,i+1-X.firstDayOfWeek),c=a%12||12,u=(a<12?X.text.am:X.text.pm).toLowerCase(),d={D:i,DD:("0"+i).slice(-2),M:n+1,MM:("0"+(n+1)).slice(-2),MMM:X.text.monthsShort[n],MMMM:X.text.months[n],Y:r,YY:String(r).slice(2),YYYY:r,d:o,dd:X.text.dayNamesShort[o].slice(0,2),ddd:X.text.dayNamesShort[o],dddd:X.text.dayNames[o],h:c,hh:("0"+c).slice(-2),H:a,HH:("0"+a).slice(-2),m:s,mm:("0"+s).slice(-2),s:t,ss:("0"+t).slice(-2),a:u,A:u.toUpperCase(),S:["th","st","nd","rd"][3<i%10||i%100-i%10==10?0:i%10],w:l,ww:("0"+l).slice(-2)},e.replace(X.regExp.token,function(e){return e in d?d[e]:e.slice(1,-1)})):""},isDisabled:function(n,r){return("day"===r||"month"===r||"year"===r||"hour"===r)&&("day"===r&&-1!==X.disabledDaysOfWeek.indexOf(n.getDay())||X.disabledDates.some(function(e){var t,i=!1;return(e="string"==typeof e?ne.helper.sanitiseDate(e):e)instanceof Date?i=ne.helper.dateEqual(n,e,r):null!==e&&"object"==typeof e&&(e[Q.year]?"number"==typeof e[Q.year]?i=n.getFullYear()===e[Q.year]:Array.isArray(e[Q.year])&&(i=-1<e[Q.year].indexOf(n.getFullYear())):e[Q.month]?"number"==typeof e[Q.month]?i=n.getMonth()===e[Q.month]:Array.isArray(e[Q.month])?i=-1<e[Q.month].indexOf(n.getMonth()):e[Q.month]instanceof Date&&(t=ne.helper.sanitiseDate(e[Q.month]),i=n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()):e[Q.date]&&"day"===r&&(e[Q.date]instanceof Date?i=ne.helper.dateEqual(n,ne.helper.sanitiseDate(e[Q.date]),r):Array.isArray(e[Q.date])&&(i=e[Q.date].some(function(e){return ne.helper.dateEqual(n,e,r)})))),i})||"hour"===r&&X.disabledHours.some(function(e){var t=!1;return(e="string"==typeof e?ne.helper.sanitiseDate(e):e)instanceof Date?t=ne.helper.dateEqual(n,e,r):"number"==typeof e?t=n.getHours()===e:null!==e&&"object"==typeof e&&(e[Q.date]&&(e[Q.date]instanceof Date?t=ne.helper.dateEqual(n,ne.helper.sanitiseDate(e[Q.date])):Array.isArray(e[Q.date])&&(t=e[Q.date].some(function(e){return ne.helper.dateEqual(n,e,r)}))),e[Q.days]&&("number"==typeof e[Q.days]?t=n.getDay()===e[Q.days]:Array.isArray(e[Q.days])&&(t=-1<e[Q.days].indexOf(n.getDay()))),e[Q.hours])&&("number"==typeof e[Q.hours]?t=t&&n.getHours()===e[Q.hours]:Array.isArray(e[Q.hours])&&(t=t&&-1<e[Q.hours].indexOf(n.getHours()))),t}))},isEnabled:function(i,n){return"day"!==n||0===X.enabledDates.length||X.enabledDates.some(function(e){var t=!1;return(e="string"==typeof e?ne.helper.sanitiseDate(e):e)instanceof Date?t=ne.helper.dateEqual(i,e,n):null!==e&&"object"==typeof e&&e[Q.date]&&(t=ne.helper.dateEqual(i,ne.helper.sanitiseDate(e[Q.date]),n)),t})},findDayAsObject:function(t,i,e){if("day"===i||"month"===i||"year"===i)for(var n,r=0;r<e.length;r++){if((n="string"==typeof(n=e[r])?ne.helper.sanitiseDate(n):n)instanceof Date&&ne.helper.dateEqual(t,n,i))return(o={})[Q.date]=n,o;if(null!==n&&"object"==typeof n)if(n[Q.year]){if("number"==typeof n[Q.year]&&t.getFullYear()===n[Q.year])return n;if(Array.isArray(n[Q.year])&&-1<n[Q.year].indexOf(t.getFullYear()))return n}else if(n[Q.month]){if("number"==typeof n[Q.month]&&t.getMonth()===n[Q.month])return n;if(Array.isArray(n[Q.month])){if(-1<n[Q.month].indexOf(t.getMonth()))return n}else if(n[Q.month]instanceof Date){var o=ne.helper.sanitiseDate(n[Q.month]);if(t.getMonth()===o.getMonth()&&t.getFullYear()===o.getFullYear())return n}}else if(n[Q.date]&&"day"===i){if(n[Q.date]instanceof Date&&ne.helper.dateEqual(t,ne.helper.sanitiseDate(n[Q.date]),i))return n;if(Array.isArray(n[Q.date])&&n[Q.date].some(function(e){return ne.helper.dateEqual(t,e,i)}))return n}}return null},findHourAsObject:function(t,i,e){if("hour"===i)for(var n,r=function(e,t){return t[Q.hours]&&("number"==typeof t[Q.hours]&&e.getHours()===t[Q.hours]||Array.isArray(t[Q.hours])&&-1<t[Q.hours].indexOf(e.getHours()))?t:void 0},o=0;o<e.length;o++){if("number"==typeof(n=e[o])&&t.getHours()===n)return null;if(null!==n&&"object"==typeof n)if(n[Q.days]&&r(t,n)){if("number"==typeof n[Q.days]&&t.getDay()===n[Q.days])return n;if(Array.isArray(n[Q.days])&&-1<n[Q.days].indexOf(t.getDay()))return n}else if(n[Q.date]&&r(t,n)){if(n[Q.date]instanceof Date&&ne.helper.dateEqual(t,ne.helper.sanitiseDate(n[Q.date])))return n;if(Array.isArray(n[Q.date])&&n[Q.date].some(function(e){return ne.helper.dateEqual(t,e,i)}))return n}else if(r(t,n))return n}return null},sanitiseDate:function(e){return!(e=e instanceof Date?e:J.date(""+e,X))||isNaN(e.getTime())?null:e},dateDiff:function(e,t,i){var n="time"===X.type,r="year"===(i=i||"day"),o=r||"month"===i,a="minute"===i,i=a||"hour"===i;return e=new Date(n?2e3:e.getFullYear(),n||r?0:e.getMonth(),n||o?1:e.getDate(),i?e.getHours():0,a?X.minTimeGap*Math.floor(e.getMinutes()/X.minTimeGap):0),(t=new Date(n?2e3:t.getFullYear(),n||r?0:t.getMonth(),n||o?1:t.getDate(),i?t.getHours():0,a?X.minTimeGap*Math.floor(t.getMinutes()/X.minTimeGap):0)).getTime()-e.getTime()},dateEqual:function(e,t,i){return!!e&&!!t&&0===ne.helper.dateDiff(e,t,i)},isDateInRange:function(e,t,i,n){var r;return i||n||(i=(r=ne.get.startDate())&&X.minDate?new Date(Math.max(r,X.minDate)):r||X.minDate,n=X.maxDate),i=i&&new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),X.minTimeGap*Math.ceil(i.getMinutes()/X.minTimeGap)),!(!e||i&&0<ne.helper.dateDiff(e,i,t)||n&&0<ne.helper.dateDiff(n,e,t))},dateInRange:function(e,t,i){t||i||(t=(n=ne.get.startDate())&&X.minDate?new Date(Math.max(n,X.minDate)):n||X.minDate,i=X.maxDate),t=t&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),X.minTimeGap*Math.ceil(t.getMinutes()/X.minTimeGap));var n="time"===X.type;return e&&(t&&0<ne.helper.dateDiff(e,t,"minute")?n?ne.helper.mergeDateTime(e,t):t:i&&0<ne.helper.dateDiff(i,e,"minute")?n?ne.helper.mergeDateTime(e,i):i:e)},mergeDateTime:function(e,t){return e&&t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes()):t},isTodayButton:function(e){return e.text()===X.text.today}},setting:function(e,t){if(ne.debug("Changing setting",e,t),oe.isPlainObject(e))oe.extend(!0,X,e);else{if(void 0===t)return X[e];oe.isPlainObject(X[e])?oe.extend(!0,X[e],t):X[e]=t}},internal:function(e,t){if(oe.isPlainObject(e))oe.extend(!0,ne,e);else{if(void 0===t)return ne[e];ne[e]=t}},debug:function(){!X.silent&&X.debug&&(X.performance?ne.performance.log(arguments):(ne.debug=Function.prototype.bind.call(console.info,console,X.name+":"),ne.debug.apply(console,arguments)))},verbose:function(){!X.silent&&X.verbose&&X.debug&&(X.performance?ne.performance.log(arguments):(ne.verbose=Function.prototype.bind.call(console.info,console,X.name+":"),ne.verbose.apply(console,arguments)))},error:function(){X.silent||(ne.error=Function.prototype.bind.call(console.error,console,X.name+":"),ne.error.apply(console,arguments))},performance:{log:function(e){var t,i;X.performance&&(i=(t=Date.now())-(_||t),_=t,y.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:c,"Execution Time":i})),clearTimeout(ne.performance.timer),ne.performance.timer=setTimeout(function(){ne.performance.display()},500)},display:function(){var e=X.name+":",i=0;_=!1,clearTimeout(ne.performance.timer),oe.each(y,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<y.length&&(console.groupCollapsed(e),console.table?console.table(y):oe.each(y,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),y=[]}},invoke:function(n,e,t){var r,o,i,a=u;return e=e||w,t=t||c,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,oe.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!oe.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):oe.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:ne.error(s.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(g)?g.push(i):void 0!==g?g=[g,i]:void 0!==i&&(g=i),o}};x?(void 0===u&&ne.initialize(),ne.invoke(b)):(void 0!==u&&u.invoke("destroy"),ne.initialize())}),void 0!==g?g:this},oe.fn.calendar.settings={name:"Calendar",namespace:"calendar",silent:!1,debug:!1,verbose:!1,performance:!0,context:!1,type:"datetime",firstDayOfWeek:0,constantHeight:!0,today:!1,closable:!0,monthFirst:!0,touchReadonly:!0,inline:!1,on:null,initialDate:null,startMode:!1,minDate:null,maxDate:null,disableYear:!1,disableMonth:!1,disableMinute:!1,formatInput:!0,startCalendar:null,endCalendar:null,multiMonth:1,monthOffset:0,minTimeGap:5,showWeekNumbers:!1,disabledHours:[],disabledDates:[],disabledDaysOfWeek:[],enabledDates:[],eventDates:[],centuryBreak:60,currentCentury:2e3,selectAdjacentDays:!1,popupOptions:{position:"bottom left",lastResort:"bottom left",prefer:"opposite",observeChanges:!1,hideOnScroll:!1},text:{days:["S","M","T","W","T","F","S"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM",weekNo:"Week"},formatter:{yearHeader:function(e,t){return(e=10*Math.ceil(e.getFullYear()/10))-9+" - "+(2+e)},monthHeader:"YYYY",dayHeader:"MMMM YYYY",hourHeader:"MMMM D, YYYY",minuteHeader:"MMMM D, YYYY",dayColumnHeader:function(e,t){return t.text.days[e]},datetime:"MMMM D, YYYY h:mm A",date:"MMMM D, YYYY",time:"h:mm A",cellTime:"h:mm A",month:"MMMM YYYY",year:"YYYY",today:function(e){return"date"===e.type?e.text.today:e.text.now},cell:function(e,t,i){}},parser:{date:function(e,t){if(e instanceof Date)return e;if(!e)return null;if(0===(e=String(e).trim().replace(/([./:-])\s+/g,"$1").replace(/\s+([./:-])/g,"$1").replace(/\s+/g," ")).length)return null;/^\d{4}(?:[./-]\d{1,2}){2}$/.test(e)&&(e=e.replace(/[./-]/g,"/")+" 00:00:00"),e=t.monthFirst||!/^\d{1,2}[./-]/.test(e)?e:e.replace(/[./-]/g,"/").replace(/(\d+)\/(\d+)/,"$2/$1");var i,n,r,o=new Date(e);if(null===e.match(/^\d+$/)&&!isNaN(o.getDate()))return o;e=e.toLowerCase();var a,s,l,c,u=-1,d=-1,h=-1,p=-1,f=-1,o="time"===t.type,m=t.type.indexOf("time")<0,g=e.split(t.regExp.dateWords),v=e.split(t.regExp.dateNumbers);if(!m)for(a=0<=oe.inArray(t.text.am.toLowerCase(),g)||!(0<=oe.inArray(t.text.pm.toLowerCase(),g))&&void 0,i=0;i<v.length;i++)if(0<=(l=v[i]).indexOf(":")){if(d<0||u<0)for(c=l.split(":"),r=0;r<Math.min(2,c.length);r++)n=parseInt(c[r],10),isNaN(n)&&(n=0),0===r?d=n%24:u=n%60;v.splice(i,1)}if(!o){for(i=0;i<g.length;i++)if(!((s=g[i]).length<=0)){for(n=0;n<t.text.months.length;n++)if(t.text.months[n].slice(0,s.length).toLowerCase()===s){p=n+1;break}if(0<=p)break}for(i=0;i<v.length;i++)if(n=parseInt(v[i],10),!isNaN(n)&&n>=t.centuryBreak&&i===v.length-1){n<=99&&(n+=t.currentCentury-100),f=n,v.splice(i,1);break}if(p<0)for(i=0;i<v.length;i++)if(r=1<i||t.monthFirst?i:1===i?0:1,n=parseInt(v[r],10),!isNaN(n)&&1<=n&&n<=12){p=n,v.splice(r,1);break}for(i=0;i<v.length;i++)if(n=parseInt(v[i],10),!isNaN(n)&&1<=n&&n<=31){h=n,v.splice(i,1);break}if(f<0)for(i=v.length-1;0<=i;i--)if(n=parseInt(v[i],10),!isNaN(n)){n<=99&&(n+=t.currentCentury),f=n,v.splice(i,1);break}}if(!m){if(d<0)for(i=0;i<v.length;i++)if(n=parseInt(v[i],10),!isNaN(n)&&0<=n&&n<=23){d=n,v.splice(i,1);break}if(u<0)for(i=0;i<v.length;i++)if(n=parseInt(v[i],10),!isNaN(n)&&0<=n&&n<=59){u=n,v.splice(i,1);break}}return u<0&&d<0&&h<0&&p<0&&f<0||(u<0&&(u=0),d<0&&(d=0),h<0&&(h=1),p<0&&(p=1),f<0&&(f=(new Date).getFullYear()),void 0!==a&&(a?12===d&&(d=0):d<12&&(d+=12)),(e=new Date(f,p-1,h,d,u)).getMonth()===p-1&&e.getFullYear()===f||(e=new Date(f,p,0,d,u)),isNaN(e.getTime()))?null:e}},onBeforeChange:function(e,t,i){return!0},onChange:function(e,t,i){},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},onSelect:function(e,t){},isDisabled:function(e,t){return!1},selector:{popup:".ui.popup",input:"input",activator:"input",append:".inline.field,.inline.fields"},regExp:{dateWords:/[^A-Za-z\u00C0-\u024F]+/g,dateNumbers:/[^\d:]+/g,token:/d{1,4}|D{1,2}|M{1,4}|YY(?:YY)?|([Hhmsw])\1?|[ASYa]|"[^"]*"|'[^']*'/g},error:{popup:"UI Popup, a required component is not included in this page",method:"The method you called is not defined."},className:{calendar:"calendar",active:"active",popup:"ui popup",grid:"ui equal width grid",column:"column",table:"ui celled center aligned unstackable table",inverted:"inverted",prev:"prev link",next:"next link",prevIcon:"chevron left icon",nextIcon:"chevron right icon",link:"link",cell:"link",disabledCell:"disabled",weekCell:"disabled",adjacentCell:"adjacent",activeCell:"active",rangeCell:"range",focusCell:"focus",todayCell:"today",today:"today link",disabled:"disabled"},metadata:{date:"date",focusDate:"focusDate",startDate:"startDate",endDate:"endDate",minDate:"minDate",maxDate:"maxDate",mode:"mode",type:"type",monthOffset:"monthOffset",message:"message",class:"class",inverted:"inverted",variation:"variation",position:"position",month:"month",year:"year",hours:"hours",days:"days"},eventClass:"blue"}})(jQuery,window,document),((T,S,k)=>{function E(e){return"function"==typeof e&&"number"!=typeof e.nodeType}S=void 0!==S&&S.Math===Math?S:globalThis,T.fn.checkbox=function(v){var _,e=T(this),y=Date.now(),b=[],x=v,w="string"==typeof x,C=[].slice.call(arguments,1);return e.each(function(){var e,a=T.extend(!0,{},T.fn.checkbox.settings,v),t=a.className,i=a.namespace,s=a.selector,l=a.error,n="."+i,r="module-"+i,c=T(this),o=T(this).children(s.label),u=T(this).children(s.input),d=u[0],h=!1,p=!1,f=c.data(r),m=this,g={initialize:function(){g.verbose("Initializing checkbox",a),g.create.label(),g.bind.events(),g.set.tabbable(),g.hide.input(),g.observeChanges(),g.instantiate(),g.setup()},instantiate:function(){g.verbose("Storing instance of module",g),f=g,c.data(r,g)},destroy:function(){g.verbose("Destroying module"),g.unbind.events(),g.show.input(),c.removeData(r)},fix:{reference:function(){c.is(s.input)&&(g.debug("Behavior called on <input> adjusting invoked element"),c=c.closest(s.checkbox),g.refresh())}},setup:function(){g.set.initialLoad(),g.is.indeterminate()?(g.debug("Initial value is indeterminate"),g.indeterminate()):g.is.checked()?(g.debug("Initial value is checked"),g.check()):(g.debug("Initial value is unchecked"),g.uncheck()),g.remove.initialLoad()},refresh:function(){o=c.children(s.label),u=c.children(s.input),d=u[0]},hide:{input:function(){g.verbose("Modifying <input> z-index to be unselectable"),u.addClass(t.hidden)}},show:{input:function(){g.verbose("Modifying <input> z-index to be selectable"),u.removeClass(t.hidden)}},observeChanges:function(){"MutationObserver"in S&&((e=new MutationObserver(function(e){g.debug("DOM tree modified, updating selector cache"),g.refresh()})).observe(m,{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",e))},attachEvents:function(e,t){var i=T(e);t=E(g[t])?g[t]:g.toggle,0<i.length?(g.debug("Attaching checkbox events to element",e,t),i.on("click"+n,t)):g.error(l.notFound)},preventDefaultOnInputTarget:function(){null!=event&&T(event.target).is(s.input)&&(g.verbose("Preventing default check action after manual check action"),event.preventDefault())},event:{change:function(e){g.should.ignoreCallbacks()||a.onChange.call(d)},click:function(e){var t=T(e.target);t.is(s.input)?g.verbose("Using default check action on initialized checkbox"):t.is(s.link)?g.debug("Clicking link inside checkbox, skipping toggle"):(g.toggle(),u.trigger("focus"),e.preventDefault())},keydown:function(e){var t=e.which,i=g.get.radios(),n=i.index(c),r=i.length,o=!1;if(37===t||38===t?o=(0===n?r:n)-1:39!==t&&40!==t||(o=n===r-1?0:n+1),!g.should.ignoreCallbacks()&&!1!==o){if(!1===a.beforeUnchecked.apply(d))return g.verbose("Option not allowed to be unchecked, cancelling key navigation"),!1;if(!1===a.beforeChecked.apply(T(i[o]).children(s.input)[0]))return g.verbose("Next option should not allow check, cancelling key navigation"),!1}p=!1,27===t?(g.verbose("Escape key pressed blurring field"),u.trigger("blur"),p=!0,e.stopPropagation()):g.can.change()?e.ctrlKey||(32===t||13===t&&a.enableEnterKey?(g.verbose("Enter/space key pressed, toggling checkbox"),g.toggle(),p=!0):c.is(".toggle, .slider")&&!g.is.radio()&&(37===t&&g.is.checked()?(g.uncheck(),p=!0):39===t&&g.is.unchecked()&&(g.check(),p=!0))):p=!0},keyup:function(e){p&&e.preventDefault()}},check:function(){g.should.allowCheck()&&(g.debug("Checking checkbox",u),g.set.checked(),g.should.ignoreCallbacks()||(a.onChecked.call(d),g.trigger.change()),g.preventDefaultOnInputTarget())},uncheck:function(){g.should.allowUncheck()&&(g.debug("Unchecking checkbox"),g.set.unchecked(),g.should.ignoreCallbacks()||(a.onUnchecked.call(d),g.trigger.change()),g.preventDefaultOnInputTarget())},indeterminate:function(){g.should.allowIndeterminate()?g.debug("Checkbox is already indeterminate"):(g.debug("Making checkbox indeterminate"),g.set.indeterminate(),g.should.ignoreCallbacks()||(a.onIndeterminate.call(d),g.trigger.change()))},determinate:function(){g.should.allowDeterminate()?g.debug("Checkbox is already determinate"):(g.debug("Making checkbox determinate"),g.set.determinate(),g.should.ignoreCallbacks()||(a.onDeterminate.call(d),g.trigger.change()))},enable:function(){g.is.enabled()?g.debug("Checkbox is already enabled"):(g.debug("Enabling checkbox"),g.set.enabled(),g.should.ignoreCallbacks()||(a.onEnable.call(d),a.onEnabled.call(d)))},disable:function(){g.is.disabled()?g.debug("Checkbox is already disabled"):(g.debug("Disabling checkbox"),g.set.disabled(),g.should.ignoreCallbacks()||(a.onDisable.call(d),a.onDisabled.call(d)))},get:{radios:function(){var e=g.get.name();return T('input[name="'+e+'"]').closest(s.checkbox)},otherRadios:function(){return g.get.radios().not(c)},name:function(){return u.attr("name")}},is:{initialLoad:function(){return h},radio:function(){return u.hasClass(t.radio)||"radio"===u.attr("type")},indeterminate:function(){return void 0!==u.prop("indeterminate")&&u.prop("indeterminate")},checked:function(){return void 0!==u.prop("checked")&&u.prop("checked")},disabled:function(){return void 0!==u.prop("disabled")&&u.prop("disabled")},enabled:function(){return!g.is.disabled()},determinate:function(){return!g.is.indeterminate()},unchecked:function(){return!g.is.checked()}},should:{allowCheck:function(){return g.is.determinate()&&g.is.checked()&&!g.is.initialLoad()?(g.debug("Should not allow check, checkbox is already checked"),!1):!(!g.should.ignoreCallbacks()&&!1===a.beforeChecked.apply(d)&&(g.debug("Should not allow check, beforeChecked cancelled"),1))},allowUncheck:function(){return g.is.determinate()&&g.is.unchecked()&&!g.is.initialLoad()?(g.debug("Should not allow uncheck, checkbox is already unchecked"),!1):!(!g.should.ignoreCallbacks()&&!1===a.beforeUnchecked.apply(d)&&(g.debug("Should not allow uncheck, beforeUnchecked cancelled"),1))},allowIndeterminate:function(){return g.is.indeterminate()&&!g.is.initialLoad()?(g.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):!(!g.should.ignoreCallbacks()&&!1===a.beforeIndeterminate.apply(d)&&(g.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),1))},allowDeterminate:function(){return g.is.determinate()&&!g.is.initialLoad()?(g.debug("Should not allow determinate, checkbox is already determinate"),!1):!(!g.should.ignoreCallbacks()&&!1===a.beforeDeterminate.apply(d)&&(g.debug("Should not allow determinate, beforeDeterminate cancelled"),1))},ignoreCallbacks:function(){return h&&!a.fireOnInit}},can:{change:function(){return!(c.hasClass(t.disabled)||c.hasClass(t.readOnly)||u.prop("disabled")||u.prop("readonly"))},uncheck:function(){return"boolean"==typeof a.uncheckable?a.uncheckable:!g.is.radio()}},set:{initialLoad:function(){h=!0},checked:function(){g.verbose("Setting class to checked"),c.removeClass(t.indeterminate).addClass(t.checked),g.is.radio()&&g.uncheckOthers(),!g.is.indeterminate()&&g.is.checked()?g.debug("Input is already checked, skipping input property change"):(g.verbose("Setting state to checked",d),u.prop("indeterminate",!1).prop("checked",!0))},unchecked:function(){g.verbose("Removing checked class"),c.removeClass(t.indeterminate).removeClass(t.checked),!g.is.indeterminate()&&g.is.unchecked()?g.debug("Input is already unchecked"):(g.debug("Setting state to unchecked"),u.prop("indeterminate",!1).prop("checked",!1))},indeterminate:function(){g.verbose("Setting class to indeterminate"),c.addClass(t.indeterminate),g.is.indeterminate()?g.debug("Input is already indeterminate, skipping input property change"):(g.debug("Setting state to indeterminate"),u.prop("indeterminate",!0))},determinate:function(){g.verbose("Removing indeterminate class"),c.removeClass(t.indeterminate),g.is.determinate()?g.debug("Input is already determinate, skipping input property change"):(g.debug("Setting state to determinate"),u.prop("indeterminate",!1))},disabled:function(){g.verbose("Setting class to disabled"),c.addClass(t.disabled),g.is.disabled()?g.debug("Input is already disabled, skipping input property change"):(g.debug("Setting state to disabled"),u.prop("disabled","disabled"))},enabled:function(){g.verbose("Removing disabled class"),c.removeClass(t.disabled),g.is.enabled()?g.debug("Input is already enabled, skipping input property change"):(g.debug("Setting state to enabled"),u.prop("disabled",!1))},tabbable:function(){g.verbose("Adding tabindex to checkbox"),void 0===u.attr("tabindex")&&u.attr("tabindex",0)}},remove:{initialLoad:function(){h=!1}},trigger:{change:function(){var e,t=u[0];t&&(e=k.createEvent("HTMLEvents"),g.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},create:{label:function(){0<u.prevAll(s.label).length?(u.prev(s.label).detach().insertAfter(u),g.debug("Moving existing label",o)):g.has.label()||(o=T("<label>").insertAfter(u),g.debug("Creating label",o))}},has:{label:function(){return 0<o.length}},bind:{events:function(){g.verbose("Attaching checkbox events"),c.on("click"+n,g.event.click).on("change"+n,g.event.change).on("keydown"+n,s.input,g.event.keydown).on("keyup"+n,s.input,g.event.keyup)}},unbind:{events:function(){g.debug("Removing events"),c.off(n)}},uncheckOthers:function(){var e=g.get.otherRadios();g.debug("Unchecking other radios",e),e.removeClass(t.checked)},toggle:function(){g.can.change()?g.is.indeterminate()||g.is.unchecked()?(g.debug("Currently unchecked"),g.check()):g.is.checked()&&g.can.uncheck()&&(g.debug("Currently checked"),g.uncheck()):g.is.radio()||g.debug("Checkbox is read-only or disabled, ignoring toggle")},setting:function(e,t){if(g.debug("Changing setting",e,t),T.isPlainObject(e))T.extend(!0,a,e);else{if(void 0===t)return a[e];T.isPlainObject(a[e])?T.extend(!0,a[e],t):a[e]=t}},internal:function(e,t){if(T.isPlainObject(e))T.extend(!0,g,e);else{if(void 0===t)return g[e];g[e]=t}},debug:function(){!a.silent&&a.debug&&(a.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,a.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!a.silent&&a.verbose&&a.debug&&(a.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),g.verbose.apply(console,arguments)))},error:function(){a.silent||(g.error=Function.prototype.bind.call(console.error,console,a.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,i;a.performance&&(i=(t=Date.now())-(y||t),y=t,b.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:m,"Execution Time":i})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(function(){g.performance.display()},500)},display:function(){var e=a.name+":",i=0;y=!1,clearTimeout(g.performance.timer),T.each(b,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<b.length&&(console.groupCollapsed(e),console.table?console.table(b):T.each(b,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(n,e,t){var r,o,i,a=f;return e=e||C,t=t||m,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,T.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!T.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):T.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:g.error(l.method,n),!1);a=a[i]})),E(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(_)?_.push(i):void 0!==_?_=[_,i]:void 0!==i&&(_=i),o}};w?(void 0===f&&g.initialize(),g.invoke(x)):(void 0!==f&&f.invoke("destroy"),g.initialize())}),void 0!==_?_:this},T.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!1,performance:!0,uncheckable:"auto",fireOnInit:!1,enableEnterKey:!0,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}})(jQuery,window,document),((w,e,C)=>{function T(e){return"function"==typeof e&&"number"!=typeof e.nodeType}void 0!==e&&e.Math===Math||globalThis,w.fn.dimmer=function(f){var m,g=w(this),v=Date.now(),_=[],y=f,b="string"==typeof y,x=[].slice.call(arguments,1);return g.each(function(){var r,t,o=w.isPlainObject(f)?w.extend(!0,{},w.fn.dimmer.settings,f):w.extend({},w.fn.dimmer.settings),i=o.selector,e=o.namespace,n=o.className,s=o.error,a="."+e,l="module-"+e,c="ontouchstart"in C.documentElement?"touchstart":"click",u=w(this),d=this,h=u.data(l),p={preinitialize:function(){r=p.is.dimmer()?(t=u.parent(),u):(t=u,p.has.dimmer()?o.dimmerName?t.find(i.dimmer).filter("."+o.dimmerName):t.find(i.dimmer):p.create())},initialize:function(){p.debug("Initializing dimmer",o),p.bind.events(),p.set.dimmable(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),h=p,u.data(l,h)},destroy:function(){p.verbose("Destroying previous module",r),p.unbind.events(),p.remove.variation(),t.off(a)},bind:{events:function(){"hover"===o.on?t.on("mouseenter"+a,p.show).on("mouseleave"+a,p.hide):"click"===o.on&&t.on(c+a,p.toggle),p.is.page()&&(p.debug("Setting as a page dimmer",t),p.set.pageDimmer()),p.is.closable()&&(p.verbose("Adding dimmer close event",r),t.on(c+a,i.dimmer,p.event.click))}},unbind:{events:function(){u.removeData(l),t.off(a)}},event:{click:function(e){p.verbose("Determining if event occurred on dimmer",e),0!==r.find(e.target).length&&!w(e.target).is(i.content)||(p.hide(),e.stopImmediatePropagation())}},addContent:function(e){e=w(e),p.debug("Add content to dimmer",e),e.parent()[0]!==r[0]&&e.detach().appendTo(r)},create:function(){var e=w(o.template.dimmer(o));return o.dimmerName&&(p.debug("Creating named dimmer",o.dimmerName),e.addClass(o.dimmerName)),e.appendTo(t),e},show:function(e){e=T(e)?e:function(){},p.is.dimmed()&&!p.is.animating()||!p.is.enabled()?p.debug("Dimmer is already shown or disabled"):!1===o.onShow.call(d)?p.verbose("Show callback returned false cancelling dimmer show"):(p.debug("Showing dimmer",r,o),p.set.variation(),p.animate.show(e),o.onChange.call(d))},hide:function(e){e=T(e)?e:function(){},p.is.dimmed()||p.is.animating()?!1===o.onHide.call(d)?p.verbose("Hide callback returned false cancelling dimmer hide"):(p.debug("Hiding dimmer",r),p.animate.hide(e),o.onChange.call(d)):p.debug("Dimmer is not visible")},toggle:function(){p.verbose("Toggling dimmer visibility",r),p.is.dimmed()?p.is.closable()&&p.hide():p.show()},animate:{show:function(e){e=T(e)?e:function(){},o.useCSS&&void 0!==w.fn.transition?((o.useFlex?(p.debug("Using flex dimmer"),p.remove):(p.debug("Using legacy non-flex dimmer"),p.set)).legacy(),"auto"!==o.opacity&&p.set.opacity(),r.transition({debug:o.debug,verbose:o.verbose,silent:o.silent,displayType:o.useFlex?"flex":"block",animation:(o.transition.showMethod||o.transition)+" in",queue:!1,duration:p.get.duration(),useFailSafe:!0,onStart:function(){p.set.dimmed()},onComplete:function(){p.set.active(),o.onVisible.call(r),e()}})):(p.verbose("Showing dimmer animation with javascript"),p.set.dimmed(),"auto"===o.opacity&&(o.opacity=.8),r.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(p.get.duration(),o.opacity,function(){r.removeAttr("style"),p.set.active(),o.onVisible.call(r),e()}))},hide:function(e){e=T(e)?e:function(){},o.useCSS&&void 0!==w.fn.transition?(p.verbose("Hiding dimmer with css"),r.transition({debug:o.debug,verbose:o.verbose,silent:o.silent,displayType:o.useFlex?"flex":"block",animation:(o.transition.hideMethod||o.transition)+" out",queue:!1,duration:p.get.duration(),useFailSafe:!0,onComplete:function(){p.remove.dimmed(),p.remove.variation(),p.remove.active(),o.onHidden.call(r),e()}})):(p.verbose("Hiding dimmer with javascript"),r.stop().fadeOut(p.get.duration(),function(){p.remove.dimmed(),p.remove.active(),r.removeAttr("style"),o.onHidden.call(r),e()}))}},get:{dimmer:function(){return r},duration:function(){return p.is.active()?o.transition.hideDuration||o.duration.hide||o.duration:o.transition.showDuration||o.duration.show||o.duration}},has:{dimmer:function(){return o.dimmerName?0<u.find(i.dimmer).filter("."+o.dimmerName).length:0<u.find(i.dimmer).length}},is:{active:function(){return r.hasClass(n.active)},animating:function(){return r.is(":animated")||r.hasClass(n.animating)},closable:function(){return"auto"===o.closable?"hover"!==o.on:o.closable},dimmer:function(){return u.hasClass(n.dimmer)},dimmable:function(){return u.hasClass(n.dimmable)},dimmed:function(){return t.hasClass(n.dimmed)},disabled:function(){return t.hasClass(n.disabled)},enabled:function(){return!p.is.disabled()},page:function(){return t.is("body")},pageDimmer:function(){return r.hasClass(n.pageDimmer)}},can:{show:function(){return!r.hasClass(n.disabled)}},set:{opacity:function(e){var t=r.css("background-color"),i=t.split(","),n=i&&3<=i.length;e=0===o.opacity?0:o.opacity||e,t=n?(i[2]=i[2].replace(")",""),i[3]=e+")",i.join(",")):"rgba(0, 0, 0, "+e+")",p.debug("Setting opacity to",e),r.css("background-color",t)},legacy:function(){r.addClass(n.legacy)},active:function(){r.addClass(n.active)},dimmable:function(){t.addClass(n.dimmable)},dimmed:function(){t.addClass(n.dimmed)},pageDimmer:function(){r.addClass(n.pageDimmer)},disabled:function(){r.addClass(n.disabled)},variation:function(e){(e=e||o.variation)&&r.addClass(e)}},remove:{active:function(){r.removeClass(n.active)},legacy:function(){r.removeClass(n.legacy)},dimmed:function(){t.removeClass(n.dimmed)},disabled:function(){r.removeClass(n.disabled)},variation:function(e){(e=e||o.variation)&&r.removeClass(e)}},setting:function(e,t){if(p.debug("Changing setting",e,t),w.isPlainObject(e))w.extend(!0,o,e);else{if(void 0===t)return o[e];w.isPlainObject(o[e])?w.extend(!0,o[e],t):o[e]=t}},internal:function(e,t){if(w.isPlainObject(e))w.extend(!0,p,e);else{if(void 0===t)return p[e];p[e]=t}},debug:function(){!o.silent&&o.debug&&(o.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,o.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!o.silent&&o.verbose&&o.debug&&(o.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),p.verbose.apply(console,arguments)))},error:function(){o.silent||(p.error=Function.prototype.bind.call(console.error,console,o.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,i;o.performance&&(i=(t=Date.now())-(v||t),v=t,_.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:d,"Execution Time":i})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(function(){p.performance.display()},500)},display:function(){var e=o.name+":",i=0;v=!1,clearTimeout(p.performance.timer),w.each(_,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",1<g.length&&(e+=" ("+g.length+")"),0<_.length&&(console.groupCollapsed(e),console.table?console.table(_):w.each(_,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),_=[]}},invoke:function(n,e,t){var r,o,i,a=h;return e=e||x,t=t||d,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,w.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!w.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):w.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:p.error(s.method,n),!1);a=a[i]})),T(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(m)?m.push(i):void 0!==m?m=[m,i]:void 0!==i&&(m=i),o}};p.preinitialize(),b?(void 0===h&&p.initialize(),p.invoke(y)):(void 0!==h&&h.invoke("destroy"),p.initialize())}),void 0!==m?m:this},w.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",silent:!1,debug:!1,verbose:!1,performance:!0,useFlex:!0,dimmerName:!1,variation:!1,closable:"auto",useCSS:!0,transition:"fade",on:!1,opacity:"auto",duration:{show:500,hide:500},displayLoader:!1,loaderText:!1,loaderVariation:"",onChange:function(){},onShow:function(){},onHide:function(){},onVisible:function(){},onHidden:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",legacy:"legacy",pageDimmer:"page",show:"show",loader:"ui loader"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(e){var t,i=w("<div/>").addClass("ui dimmer");return e.displayLoader&&(t=w("<div/>").addClass(e.className.loader).addClass(e.loaderVariation),e.loaderText&&(t.text(e.loaderText),t.addClass("text")),i.append(t)),i}}}})(jQuery,window,document),((ee,te,ie)=>{function ne(e){return"function"==typeof e&&"number"!=typeof e.nodeType}te=void 0!==te&&te.Math===Math?te:globalThis,ee.fn.dropdown=function(q){var H,Z=ee(this),G=ee(ie),W=Date.now(),X=[],Y=q,K="string"==typeof Y,J=[].slice.call(arguments,1),Q=function(e,t){var i;return 0<=[te,ie].indexOf(e)?i=ee(e):0===(i=ee(t.document).find(e)).length&&(i=t.frameElement?Q(e,t.parent):te),i};return Z.each(function(O){var h,B,t,i,n,e,r,o,a,p=ee.isPlainObject(q)?ee.extend(!0,{},ee.fn.dropdown.settings,q):ee.extend({},ee.fn.dropdown.settings),m=p.className,f=p.message,l=p.fields,g=p.keys,v=p.metadata,F=p.namespace,s=p.regExp,_=p.selector,c=p.error,N=p.templates,u="."+F,d="module-"+F,y=ee(this),b=Q(p.context,te),x=y.find(_.text),w=y.find(_.search),C=y.find(_.sizer),T=y.find(_.input),j=y.find(_.icon),V=y.find(_.clearIcon),S=0<y.prev().find(_.text).length?y.prev().find(_.text):y.prev(),k=y.children(_.menu),E=k.find(_.item),A=p.hideDividers?E.parent().children(_.divider):ee(),P=!1,U=!1,$=!1,M=!1,I=this,D=!1,L=y.data(d),z=!1,R={initialize:function(){R.debug("Initializing dropdown",p),R.is.alreadySetup()?R.setup.reference():(p.ignoreDiacritics&&!String.prototype.normalize&&(p.ignoreDiacritics=!1,R.error(c.noNormalize,I)),R.create.id(),R.setup.layout(),p.values&&(R.set.initialLoad(),R.change.values(p.values),R.remove.initialLoad()),R.refreshData(),R.save.defaults(),R.restore.selected(),R.bind.events(),R.observeChanges(),R.instantiate())},instantiate:function(){R.verbose("Storing instance of dropdown",R),L=R,y.data(d,R)},destroy:function(){R.verbose("Destroying previous dropdown",y),R.remove.tabbable(),R.remove.active(),k.transition("stop all"),k.removeClass(m.visible).addClass(m.hidden),y.off(u).removeData(d),k.off(u),G.off(n),R.disconnect.menuObserver(),R.disconnect.selectObserver(),R.disconnect.classObserver()},observeChanges:function(){"MutationObserver"in te&&(r=new MutationObserver(R.event.select.mutation),o=new MutationObserver(R.event.menu.mutation),a=new MutationObserver(R.event.class.mutation),R.debug("Setting up mutation observer",r,o,a),R.observe.select(),R.observe.menu(),R.observe.class())},disconnect:{menuObserver:function(){o&&o.disconnect()},selectObserver:function(){r&&r.disconnect()},classObserver:function(){a&&a.disconnect()}},observe:{select:function(){R.has.input()&&r&&r.observe(y[0],{attributes:!0,childList:!0,subtree:!0})},menu:function(){R.has.menu()&&o&&o.observe(k[0],{childList:!0,subtree:!0})},class:function(){R.has.search()&&a&&a.observe(y[0],{attributes:!0})}},create:{id:function(){e=(Math.random().toString(16)+"000000000").slice(2,10),n="."+e,R.verbose("Creating unique id for element",e)},userChoice:function(e){var i,n;return!!(e=e||R.get.userValues())&&(e=Array.isArray(e)?e:[e],ee.each(e,function(e,t){!1===R.get.item(t)&&(n=p.templates.addition(R.add.variables(f.addResult,t)),n=ee("<div />").html(n).attr("data-"+v.value,t).attr("data-"+v.text,t).addClass(m.addition).addClass(m.item),p.hideAdditions&&n.addClass(m.hidden),i=void 0===i?n:i.add(n),R.verbose("Creating user choices for value",t,n))}),i)},userLabels:function(e){var t=R.get.userValues();t&&(R.debug("Adding user labels",t),ee.each(t,function(e,t){R.verbose("Adding custom user value"),R.add.label(t,t)}))},menu:function(){k=ee("<div />").addClass(m.menu).appendTo(y)},sizer:function(){C=ee("<span />").addClass(m.sizer).insertAfter(w)}},search:function(e){e=void 0!==e?e:R.get.query(),R.verbose("Searching for query",e),!1===p.fireOnInit&&R.is.initialLoad()?R.verbose("Skipping callback on initial load",p.onSearch):R.has.minCharacters(e)&&!1!==p.onSearch.call(I,e)?R.filter(e):R.hide(null,!0)},select:{firstUnfiltered:function(){R.verbose("Selecting first non-filtered element"),R.remove.selectedItem(),E.not(_.unselectable).not(_.addition+_.hidden).eq(0).addClass(m.selected)},nextAvailable:function(e){var t=(e=e.eq(0)).nextAll(_.item).not(_.unselectable).eq(0),e=e.prevAll(_.item).not(_.unselectable).eq(0);(0<t.length?(R.verbose("Moving selection to",t),t):(R.verbose("Moving selection to",e),e)).addClass(m.selected)}},setup:{api:function(){var e={debug:p.debug,urlData:{value:R.get.value(),query:R.get.query()},on:!1};R.verbose("First request, initializing API"),y.api(e)},layout:function(){var e;y.is("select")&&(R.setup.select(),R.setup.returnedObject()),R.has.menu()||R.create.menu(),R.is.clearable()&&!R.has.clearItem()&&(R.verbose("Adding clear icon"),V=ee("<i />").addClass("remove icon").insertAfter(j)),R.is.search()&&!R.has.search()&&(R.verbose("Adding search input"),e=y.prev("label"),w=ee("<input />").addClass(m.search).prop("autocomplete",R.is.chrome()?"fomantic-search":"off"),0<e.length&&(e.attr("id")||e.attr("id","_"+R.get.id()+"_formLabel"),w.attr("aria-labelledby",e.attr("id"))),w.insertBefore(x)),R.is.multiple()&&R.is.searchSelection()&&!R.has.sizer()&&R.create.sizer(),p.allowTab&&R.set.tabbable()},select:function(){var e=R.get.selectValues();R.debug("Dropdown initialized on a select",e),0<(T=y.is("select")?y:T).parent(_.dropdown).length?(R.debug("UI dropdown already exists. Creating dropdown menu only"),y=T.closest(_.dropdown),R.has.menu()||R.create.menu(),k=y.children(_.menu),R.setup.menu(e)):(R.debug("Creating entire dropdown from select"),y=ee("<div />").attr("class",T.attr("class")).addClass(m.selection).addClass(m.dropdown).html(N.dropdown(e,l,p.preserveHTML,p.className)).insertBefore(T),T.hasClass(m.multiple)&&!1===T.prop("multiple")&&(R.error(c.missingMultiple),T.prop("multiple",!0)),T.is("[multiple]")&&R.set.multiple(),T.prop("disabled")&&(R.debug("Disabling dropdown"),y.addClass(m.disabled)),T.is("[required]")&&(p.forceSelection=!0),p.allowTab||T.removeAttr("tabindex"),T.prop("required",!1).removeAttr("class").detach().prependTo(y)),R.refresh()},menu:function(e){k.html(N.menu(e,l,p.preserveHTML,p.className)),E=k.find(_.item),A=p.hideDividers?E.parent().children(_.divider):ee()},reference:function(){R.debug("Dropdown behavior was called on select, replacing with closest dropdown"),y=y.parent(_.dropdown),L=y.data(d),I=y[0],R.refresh(),R.setup.returnedObject()},returnedObject:function(){var e=Z.slice(0,O),t=Z.slice(O+1);Z=e.add(y).add(t)}},refresh:function(){R.refreshSelectors(),R.refreshData()},refreshItems:function(){E=k.find(_.item),A=p.hideDividers?E.parent().children(_.divider):ee()},refreshSelectors:function(){R.verbose("Refreshing selector cache"),x=y.find(_.text),w=y.find(_.search),T=y.find(_.input),j=y.find(_.icon),S=0<y.prev().find(_.text).length?y.prev().find(_.text):y.prev(),k=y.children(_.menu),E=k.find(_.item),A=p.hideDividers?E.parent().children(_.divider):ee()},refreshData:function(){R.verbose("Refreshing cached metadata"),E.removeData(v.text).removeData(v.value)},clearData:function(){R.verbose("Clearing metadata"),E.removeData(v.text).removeData(v.value),y.removeData(v.defaultText).removeData(v.defaultValue).removeData(v.placeholderText)},clearItems:function(){k.empty(),R.refreshItems()},toggle:function(){R.verbose("Toggling menu visibility"),R.is.active()?R.hide():R.show()},show:function(e,t){if(e=ne(e)?e:function(){},(D||M)&&R.is.remote()&&R.is.noApiCache()&&!R.has.maxSelections()&&R.clearItems(),!R.can.show()&&R.is.remote()&&(R.debug("No API results retrieved, searching before show"),R.queryRemote(R.get.query(),R.show,[e,t])),R.can.show()&&!R.is.active()){if(R.debug("Showing dropdown"),!R.has.message()||R.has.maxSelections()||R.has.allResultsFiltered()||R.remove.message(),R.is.allFiltered())return!0;!1!==p.onShow.call(I)&&(R.remove.empty(),R.animate.show(function(){R.bind.intent(),R.has.search()&&!t&&R.focusSearch(),R.set.visible(),e.call(I)}))}},hide:function(e,t){var i;e=ne(e)?e:function(){},R.is.active()&&!R.is.animatingOutward()?(R.debug("Hiding dropdown"),!1!==p.onHide.call(I)&&(R.animate.hide(function(){R.remove.visible(),R.is.focusedOnSearch()&&!0!==t&&w.trigger("blur"),e.call(I)}),0<(i=y.find(_.menu)).length)&&(R.verbose("Hiding sub-menu",i),i.each(function(){var e=ee(this);R.is.animating(e)||R.animate.hide(!1,e)}))):R.unbind.intent(),D=M=!1},hideOthers:function(){R.verbose("Finding other dropdowns to hide"),Z.not(y).has(_.menu+"."+m.visible).dropdown("hide")},hideMenu:function(){R.verbose("Hiding menu  instantaneously"),R.remove.active(),R.remove.visible(),k.transition("destroy").transition("hide")},hideSubMenus:function(){var e=k.children(_.item).find(_.menu);R.verbose("Hiding sub menus",e),e.transition("hide")},bind:{events:function(){R.bind.keyboardEvents(),R.bind.inputEvents(),R.bind.mouseEvents()},keyboardEvents:function(){R.verbose("Binding keyboard events"),y.on("keydown"+u,R.event.keydown),R.has.search()&&y.on(R.get.inputEvent()+u,_.search,R.event.input),R.is.multiple()&&G.on("keydown"+n,R.event.document.keydown)},inputEvents:function(){R.verbose("Binding input change events"),y.on("change"+u,_.input,R.event.change),R.is.multiple()&&R.is.searchSelection()&&y.on("paste"+u,_.search,R.event.paste)},mouseEvents:function(){R.verbose("Binding mouse events"),R.is.multiple()&&y.on("click"+u,_.label,R.event.label.click).on("click"+u,_.remove,R.event.remove.click),R.is.searchSelection()?(y.on("mousedown"+u,R.event.mousedown).on("mouseup"+u,R.event.mouseup).on("mousedown"+u,_.menu,R.event.menu.mousedown).on("mouseup"+u,_.menu,R.event.menu.mouseup).on("click"+u,_.icon,R.event.icon.click).on("click"+u,_.clearIcon,R.event.clearIcon.click).on("focus"+u,_.search,R.event.search.focus).on("click"+u,_.search,R.event.search.focus).on("blur"+u,_.search,R.event.search.blur).on("click"+u,_.text,R.event.text.focus),R.is.multiple()&&y.on("click"+u,R.event.click).on("click"+u,R.event.search.focus)):("click"===p.on?y.on("click"+u,_.icon,R.event.icon.click).on("click"+u,R.event.test.toggle):"hover"===p.on?y.on("mouseenter"+u,R.delay.show).on("mouseleave"+u,R.delay.hide).on("touchstart"+u,R.event.test.toggle).on("touchstart"+u,_.icon,R.event.icon.click):y.on(p.on+u,R.toggle),y.on("mousedown"+u,R.event.mousedown).on("mouseup"+u,R.event.mouseup).on("focus"+u,R.event.focus).on("click"+u,_.clearIcon,R.event.clearIcon.click),R.has.menuSearch()?y.on("blur"+u,_.search,R.event.search.blur):y.on("blur"+u,R.event.blur)),k.on("mouseenter"+u,_.item,R.event.item.mouseenter).on("touchstart"+u,_.item,R.event.item.mouseenter).on("mouseleave"+u,_.item,R.event.item.mouseleave).on("click"+u,_.item,R.event.item.click)},intent:function(){R.verbose("Binding hide intent event to document"),G.on("click"+n,R.event.test.hide)}},unbind:{intent:function(){R.verbose("Removing hide intent event from document"),G.off("click"+n)}},filter:function(e){function t(){R.is.multiple()&&R.filterActive(),(e||!e&&0===R.get.activeItem().length)&&R.select.firstUnfiltered(),R.has.allResultsFiltered()?p.onNoResults.call(I,i)?p.allowAdditions?p.hideAdditions&&(R.verbose("User addition with no menu, setting empty style"),R.set.empty(),R.hideMenu()):(R.verbose("All items filtered, showing message",i),R.add.message(f.noResults)):(R.verbose("All items filtered, hiding dropdown",i),R.set.empty(),R.hideMenu()):(R.remove.empty(),R.remove.message()),p.allowAdditions&&R.add.userSuggestion(R.escape.htmlEntities(e)),R.is.searchSelection()&&R.can.show()&&R.is.focusedOnSearch()&&!R.is.empty()&&R.show()}var i=void 0!==e?e:R.get.query();p.useLabels&&R.has.maxSelections()?R.show():p.apiSettings?R.can.useAPI()?R.queryRemote(i,function(){p.filterRemoteData&&R.filterItems(i);var e=T.val();Array.isArray(e)||(e=e&&""!==e?e.split(p.delimiter):[]),R.is.multiple()&&ee.each(e,function(e,t){E.filter('[data-value="'+t+'"]').addClass(m.filtered)}),R.focusSearch(!0),t()}):R.error(c.noAPI):(R.filterItems(i),t())},queryRemote:function(e,o,a){Array.isArray(a)||(a=[a]);var e={errorDuration:!1,cache:"local",throttle:p.throttle,urlData:{query:e}},t={onError:function(e,t,i){R.add.message(f.serverError),D=M=!1,o.apply(null,a),"function"==typeof p.apiSettings.onError&&p.apiSettings.onError.call(this,e,t,i)},onFailure:function(e,t,i){R.add.message(f.serverError),D=M=!1,o.apply(null,a),"function"==typeof p.apiSettings.onFailure&&p.apiSettings.onFailure.call(this,e,t,i)},onSuccess:function(e,t,i){var n=e[l.remoteValues],r=(Array.isArray(n)||(n=[]),R.remove.message(),{});r[l.values]=n,R.setup.menu(r),0!==n.length||p.allowAdditions?""!==(r=R.is.multiple()?R.get.values():R.get.value())&&(R.verbose("Value(s) present after click icon, select value(s) in items"),R.set.selected(r,null,!0,!0)):R.add.message(f.noResults),D=M=!1,o.apply(null,a),"function"==typeof p.apiSettings.onSuccess&&p.apiSettings.onSuccess.call(this,e,t,i)}};y.api("get request")||R.setup.api(),e=ee.extend(!0,{},e,p.apiSettings,t,z?{cache:!1}:{}),y.api("setting",e).api("query"),z=!1},filterItems:function(e){var i=R.remove.diacritics(void 0!==e?e:R.get.query()),n=null,e=R.escape.string(i),t=(p.ignoreSearchCase?"i":"")+"gm",r=new RegExp("^"+e,t);R.has.query()&&(n=[],R.verbose("Searching for matching values",i),E.each(function(){var e,t=ee(this);return t.hasClass(m.unfilterable)||("both"===p.match||"text"===p.match)&&(-1!==(e=R.remove.diacritics(String(R.get.choiceText(t,!1)))).search(r)||"exact"===p.fullTextSearch&&R.exactSearch(i,e)||!0===p.fullTextSearch&&R.fuzzySearch(i,e))||("both"===p.match||"value"===p.match)&&(-1!==(t=R.remove.diacritics(String(R.get.choiceValue(t,e)))).search(r)||"exact"===p.fullTextSearch&&R.exactSearch(i,t)||!0===p.fullTextSearch&&R.fuzzySearch(i,t))?(n.push(this),!0):void 0})),R.debug("Showing only matched items",i),R.remove.filteredItem(),n&&E.not(n).addClass(m.filtered),R.has.query()?!0===p.hideDividers?A.addClass(m.hidden):"empty"===p.hideDividers&&A.removeClass(m.hidden).filter(function(){var e=ee(this).nextUntil(_.item);return 0===(0<e.length?e:ee(this)).nextUntil(_.divider).filter(_.item+":not(."+m.filtered+")").length}).addClass(m.hidden):A.removeClass(m.hidden)},fuzzySearch:function(e,t){var i=t.length,n=e.length;if(e=p.ignoreSearchCase?e.toLowerCase():e,t=p.ignoreSearchCase?t.toLowerCase():t,i<n)return!1;if(n===i)return e===t;for(var r=0,o=0;r<n;r++){for(var a=!1,s=e.charCodeAt(r);o<i;)if(t.charCodeAt(o++)===s){a=!0;break}if(!a)return!1}return!0},exactSearch:function(e,t){return e=p.ignoreSearchCase?e.toLowerCase():e,-1<(t=p.ignoreSearchCase?t.toLowerCase():t).indexOf(e)},filterActive:function(){p.useLabels&&E.filter("."+m.active).addClass(m.filtered)},focusSearch:function(e){R.has.search()&&!R.is.focusedOnSearch()&&(e?(y.off("focus"+u,_.search),w.trigger("focus"),y.on("focus"+u,_.search,R.event.search.focus)):w.trigger("focus"))},blurSearch:function(){R.has.search()&&w.trigger("blur")},forceSelection:function(){var e=E.not(m.filtered).filter("."+m.selected).eq(0),t=E.not(m.filtered).filter("."+m.active).eq(0),t=0<(e=0<e.length?e:t).length;p.allowAdditions||t&&!R.is.multiple()?(R.debug("Forcing partial selection to selected item",e),R.event.item.click.call(e,{},!0)):R.remove.searchTerm()},change:{values:function(e){p.allowAdditions||R.clear(),R.debug("Creating dropdown with specified values",e);var t={};t[l.values]=e,R.setup.menu(t),ee.each(e,function(e,t){if(!0===t.selected&&(R.debug("Setting initial selection to",t[l.value]),R.set.selected(t[l.value]),!R.is.multiple()))return!1}),R.has.selectInput()&&(R.disconnect.selectObserver(),T.html(""),T.append("<option disabled selected value></option>"),ee.each(e,function(e,t){var i=p.templates.deQuote(t[l.value]),n=p.templates.escape(t[l.name]||"",p.preserveHTML);T.append('<option value="'+i+'"'+(!0===t.selected?" selected":"")+">"+n+"</option>")}),R.observe.select())}},event:{paste:function(e){var t,i,n,r,o,a=(e.originalEvent.clipboardData||te.clipboardData).getData("text").split(p.delimiter),s=[];a.forEach(function(e){!1===R.set.selected(R.escape.htmlEntities(e.trim()),null,!1,!0)&&s.push(e.trim())}),e.preventDefault(),0<s.length&&(t=(a=w[0]).selectionStart,i=a.selectionEnd,n=a.value,o=t+(r=s.join(p.delimiter)).length,w.val(n.slice(0,t)+r+n.slice(i)),a.selectionStart=o,a.selectionEnd=o,R.event.input(e))},change:function(){$||(R.debug("Input changed, updating selection"),R.set.selected())},focus:function(){p.showOnFocus&&!P&&R.is.hidden()&&!t&&(D=!0,R.show())},blur:function(e){t=ie.activeElement===this,P||t||(R.remove.activeLabel(),R.hide())},mousedown:function(){R.is.searchSelection(!0)?i=!0:P=!0},mouseup:function(){R.is.searchSelection(!0)?i=!1:P=!1},click:function(e){ee(e.target).is(y)&&(R.is.focusedOnSearch()?R.show():R.focusSearch())},search:{focus:function(e){P=!0,R.is.multiple()&&R.remove.activeLabel(),D||R.is.active()||!(p.showOnFocus||"focus"!==e.type&&"focusin"!==e.type)||"touchstart"===e.type||(D=!0,R.search())},blur:function(e){t=ie.activeElement===this,!R.is.searchSelection(!0)||i||U||t||(p.forceSelection?R.forceSelection():p.allowAdditions||R.remove.searchTerm(),R.hide()),i=!1}},clearIcon:{click:function(e){R.clear(),R.is.searchSelection()&&R.remove.searchTerm(),R.hide(),e.stopPropagation()}},icon:{click:function(e){M=!0,R.has.search()?R.is.active()?R.blurSearch():p.showOnFocus?R.focusSearch():R.toggle():R.toggle(),e.stopPropagation()}},text:{focus:function(e){P=!0,R.focusSearch()}},input:function(e){(R.is.multiple()||R.is.searchSelection())&&R.set.filtered(),clearTimeout(R.timer),R.timer=setTimeout(function(){R.search()},p.delay.search)},label:{click:function(e){var t=ee(this),i=y.find(_.label),n=i.filter("."+m.active),r=t.nextAll("."+m.active),o=t.prevAll("."+m.active),r=(0<r.length?t.nextUntil(r):t.prevUntil(o)).add(n).add(t);e.shiftKey?(n.removeClass(m.active),r.addClass(m.active)):e.ctrlKey?t.toggleClass(m.active):(n.removeClass(m.active),t.addClass(m.active)),p.onLabelSelect.apply(this,i.filter("."+m.active)),e.stopPropagation()}},remove:{click:function(e){var t=ee(this).parent();t.hasClass(m.active)?R.remove.activeLabels():R.remove.activeLabels(t),e.stopPropagation()}},test:{toggle:function(e){var t=R.is.multiple()?R.show:R.toggle;R.is.bubbledLabelClick(e)||R.is.bubbledIconClick(e)||(R.is.multiple()&&(!R.is.multiple()||R.is.active())||(D=!0),R.determine.eventOnElement(e,t)&&"touchstart"!==e.type&&e.preventDefault())},hide:function(e){R.determine.eventInModule(e,R.hide)&&I.id&&ee(e.target).attr("for")===I.id&&e.preventDefault()}},class:{mutation:function(e){e.forEach(function(e){"class"===e.attributeName&&R.check.disabled()})}},select:{mutation:function(e){R.is.selectMutation(e)&&(R.debug("<select> modified, recreating menu"),R.disconnect.selectObserver(),R.refresh(),R.setup.select(),R.set.selected(),R.observe.select())}},menu:{mutation:function(e){var t=(e=e[0]).addedNodes?ee(e.addedNodes[0]):ee(!1),e=ee(!!e.removedNodes&&e.removedNodes[0]),e=(t=t.add(e)).is(_.addition)||0<t.closest(_.addition).length,t=t.is(_.message)||0<t.closest(_.message).length;e||t?(R.debug("Updating item selector cache"),R.refreshItems()):(R.debug("Menu modified, updating selector cache"),R.refresh())},mousedown:function(){U=!0},mouseup:function(){U=!1}},item:{mouseenter:function(e){var t=ee(e.target),i=(r=ee(this)).children(_.menu),n=r.siblings(_.item).children(_.menu),r=0<i.length;0<i.find(t).length||!r||(clearTimeout(R.itemTimer),R.itemTimer=setTimeout(function(){R.verbose("Showing sub-menu",i),ee.each(n,function(){R.animate.hide(!1,ee(this))}),R.animate.show(!1,i)},p.delay.show),e.preventDefault())},mouseleave:function(e){var t=ee(this).find(_.menu);0<t.length&&(clearTimeout(R.itemTimer),R.itemTimer=setTimeout(function(){R.verbose("Hiding sub-menu",t),t.each(function(){R.animate.hide(!1,ee(this))})},p.delay.hide))},click:function(e,t){var i=ee(this),e=ee(e&&e.target||""),n=i.find(_.menu),r=R.get.choiceText(i),o=R.get.choiceValue(i,r),a=0<n.length,n=0<n.find(e).length;"input"!==ie.activeElement.tagName.toLowerCase()&&ee(ie.activeElement).trigger("blur"),n||a&&!p.allowCategorySelection||(R.is.searchSelection()&&(p.allowAdditions&&R.remove.userAddition(),p.keepSearchTerm||(R.remove.filteredItem(),R.remove.searchTerm()),!R.is.visible()&&0<e.length&&R.show(),R.is.focusedOnSearch()||!0===t||R.focusSearch(!0)),p.useLabels||(R.remove.filteredItem(),R.set.scrollPosition(i)),R.determine.selectAction.call(this,r,o))}},document:{keydown:function(e){var t=e.which;if(R.is.inObject(t,g)){var i=y.find(_.label),n=i.filter("."+m.active),r=(n.data(v.value),i.index(n)),o=i.length,a=0<n.length,s=1<n.length,l=0===r,c=r+1===o,u=R.is.searchSelection(),d=R.is.focusedOnSearch(),h=R.is.focused(),p=d&&0===R.get.caretPosition(!1),f=p&&0!==R.get.caretPosition(!0);if(!u||a||d)switch(t){case g.leftArrow:!h&&!p||a?a&&(e.shiftKey?R.verbose("Adding previous label to selection"):(R.verbose("Selecting previous label"),i.removeClass(m.active)),l&&!s?n.addClass(m.active):n.prev(_.siblingLabel).addClass(m.active).end(),e.preventDefault()):(R.verbose("Selecting previous label"),i.last().addClass(m.active));break;case g.rightArrow:h&&!a&&i.first().addClass(m.active),a&&(e.shiftKey?R.verbose("Adding next label to selection"):(R.verbose("Selecting next label"),i.removeClass(m.active)),c?u?d?i.removeClass(m.active):R.focusSearch():(s?n.next(_.siblingLabel):n).addClass(m.active):n.next(_.siblingLabel).addClass(m.active),e.preventDefault());break;case g.deleteKey:case g.backspace:a?(R.verbose("Removing active labels"),c&&u&&!d&&R.focusSearch(),n.last().next(_.siblingLabel).addClass(m.active),R.remove.activeLabels(n),R.is.visible()||R.show(),e.preventDefault()):!p||f||a||t!==g.backspace||(R.verbose("Removing last label on input backspace"),n=i.last().addClass(m.active),R.remove.activeLabels(n),R.is.visible())||R.show();break;default:n.removeClass(m.active)}}}},keydown:function(e){var t=e.which;if(R.is.inObject(t,g)||e.key===p.delimiter){var i,n=E.not(_.unselectable).filter("."+m.selected).eq(0),r=k.children("."+m.active).eq(0),r=0<(n=0<n.length?n:r).length?n.siblings(":not(."+m.filtered+")").addBack():k.children(":not(."+m.filtered+")"),o=n.children(_.menu),a=n.closest(_.menu),s=a.hasClass(m.visible)||a.hasClass(m.animating)||0<a.parent(_.menu).length,l=0<o.length,c=0<n.length,u=0<n.not(_.unselectable).length,d=e.key===p.delimiter&&R.is.multiple();if(p.allowAdditions&&(t===g.enter||d)&&(u&&p.hideAdditions&&(R.verbose("Selecting item from keyboard shortcut",n),R.event.item.click.call(n,e)),R.is.searchSelection()&&R.remove.searchTerm(),R.is.multiple())&&e.preventDefault(),R.is.visible()){if(t!==g.enter&&!d||(t===g.enter&&c&&l&&!p.allowCategorySelection?(R.verbose("Pressed enter on unselectable category, opening sub menu"),t=g.rightArrow):u&&(R.verbose("Selecting item from keyboard shortcut",n),R.event.item.click.call(n,e),R.is.searchSelection())&&(p.keepSearchTerm||R.remove.searchTerm(),R.is.multiple())&&w.trigger("focus"),e.preventDefault()),c&&(t===g.leftArrow&&a[0]!==k[0]&&(R.verbose("Left key pressed, closing sub-menu"),R.animate.hide(!1,a),n.removeClass(m.selected),a.closest(_.item).addClass(m.selected),e.preventDefault()),t===g.rightArrow)&&l&&(R.verbose("Right key pressed, opening sub-menu"),R.animate.show(!1,o),n.removeClass(m.selected),o.find(_.item).eq(0).addClass(m.selected),e.preventDefault()),t===g.upArrow){if(i=(c&&s?n.prevAll(_.item+":not("+_.unselectable+")"):E).eq(0),r.index(i)<0)return R.verbose("Up key pressed but reached top of current menu"),void e.preventDefault();R.verbose("Up key pressed, changing active item"),n.removeClass(m.selected),i.addClass(m.selected),R.set.scrollPosition(i),p.selectOnKeydown&&R.is.single()&&!i.hasClass(m.actionable)&&R.set.selectedItem(i),e.preventDefault()}if(t===g.downArrow){if(0===(i=(c&&s?n.nextAll(_.item+":not("+_.unselectable+")"):E).eq(0)).length)return R.verbose("Down key pressed but reached bottom of current menu"),void e.preventDefault();R.verbose("Down key pressed, changing active item"),E.removeClass(m.selected),i.addClass(m.selected),R.set.scrollPosition(i),p.selectOnKeydown&&R.is.single()&&!i.hasClass(m.actionable)&&R.set.selectedItem(i),e.preventDefault()}t===g.pageUp&&(R.scrollPage("up"),e.preventDefault()),t===g.pageDown&&(R.scrollPage("down"),e.preventDefault()),t===g.escape&&(R.verbose("Escape key pressed, closing dropdown"),R.hide(),e.stopPropagation())}else t!==g.enter&&!d||e.preventDefault(),t!==g.downArrow||R.is.visible()||(R.verbose("Down key pressed, showing dropdown"),R.show(),e.preventDefault())}else R.has.search()||R.set.selectedLetter(String.fromCharCode(t))}},trigger:{change:function(){var e,t=T[0];t&&(e=ie.createEvent("HTMLEvents"),R.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},determine:{selectAction:function(e,t){h=!0,R.verbose("Determining action",p.action),ne(R.action[p.action])?(R.verbose("Triggering preset action",p.action,e,t),R.action[p.action].call(I,e,t,this)):ne(p.action)?(R.verbose("Triggering user action",p.action,e,t),p.action.call(I,e,t,this)):R.error(c.action,p.action),h=!1},eventInModule:function(e,t){var i=0<(e=ee(e.target)).closest(ie.documentElement).length,e=0<e.closest(y).length;return t=ne(t)?t:function(){},i&&!e?(R.verbose("Triggering event",t),t(),!0):(R.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(e,t){var i=(n=ee(e.target)).closest(_.siblingLabel),e=ie.body.contains(e.target),i=0===y.find(i).length||!(R.is.multiple()&&p.useLabels),n=0===n.closest(k).length;return t=ne(t)?t:function(){},e&&i&&n?(R.verbose("Triggering event",t),t(),!0):(R.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(e,t,i){t=void 0!==t?t:e,R.can.activate(ee(i))&&(R.set.selected(t,ee(i),!1,p.keepSearchTerm),R.is.multiple()||!p.collapseOnActionable&&ee(i).hasClass(m.actionable)||R.hideAndClear())},select:function(e,t,i){t=void 0!==t?t:e,R.can.activate(ee(i))&&(R.set.value(t,e,ee(i)),R.is.multiple()||!p.collapseOnActionable&&ee(i).hasClass(m.actionable)||R.hideAndClear())},combo:function(e,t,i){R.set.selected(t=void 0!==t?t:e,ee(i)),R.hideAndClear()},hide:function(e,t,i){R.set.value(t,e,ee(i)),R.hideAndClear()}},get:{id:function(){return e},defaultText:function(){return y.data(v.defaultText)},defaultValue:function(){return y.data(v.defaultValue)},placeholderText:function(){return"auto"!==p.placeholder&&"string"==typeof p.placeholder?p.placeholder:y.data(v.placeholderText)||""},text:function(){return p.preserveHTML?x.html():x.text()},query:function(){return String(w.val()).trim()},searchWidth:function(e){return e=void 0!==e?e:w.val(),C.text(e),Math.ceil(C.width()+(R.is.edge()?3:1))},selectionCount:function(){var e=R.get.values();return R.is.multiple()?Array.isArray(e)?e.length:0:""!==R.get.value()?1:0},transition:function(e){return"auto"===p.transition?R.is.upward(e)?"slide up":"slide down":p.transition},userValues:function(){var e=R.get.values(!0);return!!e&&(e=Array.isArray(e)?e:[e],ee.grep(e,function(e){return!1===R.get.item(e)}))},uniqueArray:function(i){return ee.grep(i,function(e,t){return ee.inArray(e,i)===t})},caretPosition:function(e){var t,i,n=w[0];return e&&"selectionEnd"in n?n.selectionEnd:!e&&"selectionStart"in n?n.selectionStart:ie.selection?(n.focus(),i=(t=ie.selection.createRange()).text.length,e?i:(t.moveStart("character",-n.value.length),t.text.length-i)):void 0},value:function(){var e=0<T.length?T.val():y.data(v.value),t=Array.isArray(e)&&1===e.length&&""===e[0];return void 0===e||t?"":e},values:function(e){var t=R.get.value();return""===t?"":!R.has.selectInput()&&R.is.multiple()?"string"==typeof t?(e?t:R.escape.htmlEntities(t)).split(p.delimiter):"":t},remoteValues:function(){var e=R.get.values(),n=!1;return e&&ee.each("string"==typeof e?[e]:e,function(e,t){var i=R.read.remoteData(t);R.verbose("Restoring value from session data",i,t),i&&((n=n||{})[t]=i)}),n},choiceText:function(e,t){if(t=void 0!==t?t:p.preserveHTML,e)return 0<e.find(_.menu).length&&(R.verbose("Retrieving text of element with sub-menu"),(e=e.clone()).find(_.menu).remove(),e.find(_.menuIcon).remove()),void 0!==e.data(v.text)?e.data(v.text):t?e.html()&&e.html().trim():e.text()&&e.text().trim()},choiceValue:function(e,t){return t=t||R.get.choiceText(e),!!e&&(void 0!==e.data(v.value)?String(e.data(v.value)):"string"==typeof t?String(p.ignoreSearchCase?t.toLowerCase():t).trim():String(t))},inputEvent:function(){var e=w[0];return!!e&&(void 0!==e.oninput?"input":void 0!==e.onpropertychange?"propertychange":"keyup")},selectValues:function(){var o={},a=[],s=[];return y.find("option").each(function(){var e=(r=ee(this)).html(),t=r.attr("disabled"),i=void 0!==r.attr("value")?r.attr("value"):e,n=void 0!==r.data(v.text)?r.data(v.text):e,r=r.parent("optgroup");"auto"===p.placeholder&&""===i?o.placeholder=e:(r.length===a.length&&r[0]===a[0]||(s.push({type:"header",divider:p.headerDivider,name:r.attr("label")||""}),a=r),s.push({name:e,value:i,text:R.escape.htmlEntities(n,!0),disabled:t}))}),p.placeholder&&"auto"!==p.placeholder&&(R.debug("Setting placeholder value to",p.placeholder),o.placeholder=p.placeholder),p.sortSelect?(!0===p.sortSelect?s.sort(function(e,t){return e.name.localeCompare(t.name)}):"natural"===p.sortSelect?s.sort(function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}):ne(p.sortSelect)&&s.sort(p.sortSelect),o[l.values]=s,R.debug("Retrieved and sorted values from select",o)):(o[l.values]=s,R.debug("Retrieved values from select",o)),o},activeItem:function(){return E.filter("."+m.active)},selectedItem:function(){var e=E.not(_.unselectable).filter("."+m.selected);return 0<e.length?e:E.eq(0)},itemWithAdditions:function(e){var t=R.get.item(e);return(e=R.create.userChoice(e))&&0<e.length?0<t.length?t.add(e):e:t},item:function(i,n){var e,r,o=!1;return i=void 0!==i?i:void 0!==R.get.values()?R.get.values():R.get.text(),e=(r=R.is.multiple()&&Array.isArray(i))?0<i.length:null!=i,n=""===i||!1===i||!0===i||n||!1,e&&E.each(function(){var e=ee(this),t=R.get.choiceText(e);if(null!=(t=R.get.choiceValue(e,t)))if(r)-1!==ee.inArray(R.escape.htmlEntities(String(t)),i.map(String).map(R.escape.htmlEntities))&&(o=o?o.add(e):e);else if(n){if(R.verbose("Ambiguous dropdown value using strict type check",e,i),t===i)return o=e,!0}else if(p.ignoreCase&&(t=t.toLowerCase(),i=i.toLowerCase()),R.escape.htmlEntities(String(t))===R.escape.htmlEntities(String(i)))return R.verbose("Found select item by value",t,i),o=e,!0}),o},displayType:function(){return y.hasClass("column")?"flex":p.displayType}},check:{maxSelections:function(e){return!!p.maxSelections&&((e=void 0!==e?e:R.get.selectionCount())>=p.maxSelections?(R.debug("Maximum selection count reached"),p.useLabels&&(E.addClass(m.filtered),R.add.message(f.maxSelections)),!0):(R.verbose("No longer at maximum selection count"),R.remove.message(),R.remove.filteredItem(),R.is.searchSelection()&&R.filterItems(),!1))},disabled:function(){w.attr("tabindex",R.is.disabled()?-1:0)}},restore:{defaults:function(e){R.clear(e),R.restore.defaultText(),R.restore.defaultValue()},defaultText:function(){var e=R.get.defaultText();e===R.get.placeholderText?(R.debug("Restoring default placeholder text",e),R.set.placeholderText(e)):(R.debug("Restoring default text",e),R.set.text(e))},placeholderText:function(){R.set.placeholderText()},defaultValue:function(){var e=R.get.defaultValue();void 0!==e&&(R.debug("Restoring default value",e),""!==e?(R.set.value(e),R.set.selected()):(R.remove.activeItem(),R.remove.selectedItem()))},labels:function(){p.allowAdditions&&(p.useLabels||(R.error(c.labels),p.useLabels=!0),R.debug("Restoring selected values"),R.create.userLabels()),R.check.maxSelections()},selected:function(){R.restore.values(),R.is.multiple()?(R.debug("Restoring previously selected values and labels"),R.restore.labels()):R.debug("Restoring previously selected values")},values:function(){R.set.initialLoad(),p.apiSettings&&p.saveRemoteData&&R.get.remoteValues()?R.restore.remoteValues():R.set.selected();var e=R.get.value();!e||""===e||Array.isArray(e)&&0===e.length?T.addClass(m.noselection):T.removeClass(m.noselection),R.remove.initialLoad()},remoteValues:function(){var e=R.get.remoteValues();R.debug("Recreating selected from session data",e),e&&(R.is.single()?ee.each(e,function(e,t){R.set.text(t)}):p.useLabels&&ee.each(e,function(e,t){R.add.label(e,t)}))}},read:{remoteData:function(e){if(void 0!==te.Storage)return void 0!==(e=sessionStorage.getItem(e+n))&&e;R.error(c.noStorage)}},save:{defaults:function(){R.save.defaultText(),R.save.placeholderText(),R.save.defaultValue()},defaultValue:function(){var e=R.get.value();R.verbose("Saving default value as",e),y.data(v.defaultValue,e)},defaultText:function(){var e=R.get.text();R.verbose("Saving default text as",e),y.data(v.defaultText,e)},placeholderText:function(){var e;!1!==p.placeholder&&x.hasClass(m.placeholder)&&(e=R.get.text(),R.verbose("Saving placeholder text as",e),y.data(v.placeholderText,e))},remoteData:function(e,t){void 0===te.Storage?R.error(c.noStorage):(R.verbose("Saving remote data to session storage",t,e),sessionStorage.setItem(t+n,e))}},clear:function(e){R.is.multiple()&&p.useLabels?R.remove.labels(y.find(_.label),e):(R.remove.activeItem(),R.remove.selectedItem(),R.remove.filteredItem()),R.set.placeholderText(),R.clearValue(e)},clearValue:function(e){R.set.value("",null,null,e)},clearCache:function(){R.debug("Clearing API cache once"),z=!0},scrollPage:function(e,t){var i=(t=t||R.get.selectedItem()).closest(_.menu),n=i.outerHeight(),r=i.scrollTop(),o=E.eq(0).outerHeight(),n=Math.floor(n/o),r="up"===e?r-o*n:r+o*n,o=E.not(_.unselectable),n="up"===e?o.index(t)-n:o.index(t)+n;0<(n=("up"===e?0<=n:n<o.length)?o.eq(n):"up"===e?o.first():o.last()).length&&(R.debug("Scrolling page",e,n),t.removeClass(m.selected),n.addClass(m.selected),p.selectOnKeydown&&R.is.single()&&!n.hasClass(m.actionable)&&R.set.selectedItem(n),i.scrollTop(r))},set:{filtered:function(){var e=R.is.multiple(),t=R.is.searchSelection(),i=e&&t,n="string"==typeof(t=t?R.get.query():"")&&0<t.length,r=R.get.searchWidth(),t=""!==t;e&&n&&(R.verbose("Adjusting input width",r),w.css("width",r+"px")),n||i&&t?(R.verbose("Hiding placeholder text"),x.addClass(m.filtered)):e&&(!i||t)||(R.verbose("Showing placeholder text"),x.removeClass(m.filtered))},empty:function(){y.addClass(m.empty)},loading:function(){y.addClass(m.loading)},placeholderText:function(e){e=e||R.get.placeholderText(),R.debug("Setting placeholder text",e),R.set.text(e),x.addClass(m.placeholder)},tabbable:function(){R.is.searchSelection()?(R.debug("Added tabindex to searchable dropdown"),w.val(""),R.check.disabled(),k.attr("tabindex",-1)):(R.debug("Added tabindex to dropdown"),void 0===y.attr("tabindex")&&(y.attr("tabindex",T.attr("tabindex")||0),k.attr("tabindex",-1))),T.removeAttr("tabindex")},initialLoad:function(){R.verbose("Setting initial load"),B=!0},activeItem:function(e){p.allowAdditions&&0<e.filter(_.addition).length?e.addClass(m.filtered):e.addClass(m.active)},partialSearch:function(e){var t=R.get.query().length;w.val(e.slice(0,t))},scrollPosition:function(e,t){var i,n,r=(e=e||R.get.selectedItem()).closest(_.menu),o=e&&0<e.length;t=void 0!==t&&t,0===R.get.activeItem().length&&(t=!1),e&&0<r.length&&o&&(e.position().top,r.addClass(m.loading),e=(o=r.scrollTop())-r.offset().top+e.offset().top,t||(n=o+r.height()<e+5,i=e-5<o),R.debug("Scrolling to active item",e),(t||i||n)&&r.scrollTop(e),r.removeClass(m.loading))},text:function(e,t){"combo"===p.action?(R.debug("Changing combo button text",e,S),p.preserveHTML?S.html(e):S.text(e)):"activate"===p.action&&(e===R.get.placeholderText()&&!t||x.removeClass(m.placeholder),R.debug("Changing text",e,x),x.removeClass(m.filtered),p.preserveHTML?x.html(e):x.text(e))},selectedItem:function(e){var t=R.get.choiceValue(e),i=R.get.choiceText(e,!1),n=R.get.choiceText(e);R.debug("Setting user selection to item",e),R.remove.activeItem(),R.set.partialSearch(i),R.set.activeItem(e),R.set.selected(t,e),R.set.text(n)},selectedLetter:function(e){var t,i=E.filter("."+m.selected),n=0<i.length&&R.has.firstLetter(i,e),r=!1;(r=n&&(t=i.nextAll(E).eq(0),R.has.firstLetter(t,e))?t:r)||E.each(function(){if(R.has.firstLetter(ee(this),e))return r=ee(this),!1}),r&&(R.verbose("Scrolling to next value with letter",e),R.set.scrollPosition(r),i.removeClass(m.selected),r.addClass(m.selected),p.selectOnKeydown)&&R.is.single()&&!t.hasClass(m.actionable)&&R.set.selectedItem(r)},direction:function(e){"auto"===p.direction?(e?R.is.upward(e)&&R.remove.upward(e):R.remove.upward(),(R.can.openDownward(e)?R.remove:R.set).upward(e),R.is.leftward(e)||R.can.openRightward(e)||R.set.leftward(e)):"upward"===p.direction&&R.set.upward(e)},upward:function(e){(e||y).addClass(m.upward)},leftward:function(e){(e||k).addClass(m.leftward)},value:function(e,t,i,n){"boolean"==typeof t&&(n=t,t=i=void 0),void 0===e||""===e||Array.isArray(e)&&0===e.length?T.addClass(m.noselection):T.removeClass(m.noselection);var r=R.escape.value(e),o=0<T.length,a=R.get.values(),s=void 0!==e?String(e):e;if(o){if(!p.allowReselection&&s==a&&(R.verbose("Skipping value update already same value",e,a),!R.is.initialLoad()))return;R.is.single()&&R.has.selectInput()&&R.can.extendSelect()&&(R.debug("Adding user option",e),R.add.optionValue(e)),R.debug("Updating input value",r,a),$=!0,T.val(r),!1===p.fireOnInit&&R.is.initialLoad()?R.debug("Input native change event ignored on initial load"):!0!==n&&R.trigger.change(),$=!1}else R.verbose("Storing value in metadata",r,T),r!==a&&y.data(v.value,s);!1===p.fireOnInit&&R.is.initialLoad()?R.verbose("No callback on initial load",p.onChange):!0!==n&&p.onChange.call(I,e,t,i)},active:function(){y.addClass(m.active)},multiple:function(){y.addClass(m.multiple)},visible:function(){y.addClass(m.visible)},exactly:function(e,t,i){"boolean"==typeof t&&(i=t,t=void 0),R.debug("Setting selected to exact values"),R.clear(),R.set.selected(e,t,i)},selected:function(e,l,c,u){"boolean"==typeof l&&(u=c,c=l,l=void 0);var d=R.is.multiple();if(!(l=p.allowAdditions?l||R.get.itemWithAdditions(e):l||R.get.item(e)))return!1;R.debug("Setting selected menu item to",l),R.is.multiple()&&!u&&R.remove.searchWidth(),R.is.single()?(R.remove.activeItem(),R.remove.selectedItem()):p.useLabels&&R.remove.selectedItem(),l.each(function(){var e=ee(this),t=R.get.choiceText(e),i=R.get.choiceValue(e,t),n=e.hasClass(m.filtered),r=e.hasClass(m.active),o=e.hasClass(m.actionable),a=e.hasClass(m.addition),s=d&&l&&1===l.length;o?(d&&r&&!a||!p.apiSettings||!p.saveRemoteData||R.save.remoteData(t,i),p.onActionable.call(I,i,t,e)):d?!r||a?(p.apiSettings&&p.saveRemoteData&&R.save.remoteData(t,i),p.useLabels?(R.add.value(i,t,e,c),R.add.label(i,t,s),R.set.activeItem(e),R.filterActive(),R.select.nextAvailable(l)):(R.add.value(i,t,e,c),R.set.text(R.add.variables(f.count)),R.set.activeItem(e))):n||!p.useLabels&&!h||(R.debug("Selected active value, removing label"),R.remove.selected(i)):(p.apiSettings&&p.saveRemoteData&&R.save.remoteData(t,i),u||e.hasClass(m.actionable)||R.set.text(t,!0),R.set.value(i,t,e,c),e.addClass(m.active).addClass(m.selected))}),u||R.remove.searchTerm(),R.is.allFiltered()&&(R.set.empty(),R.hideMenu())}},add:{label:function(e,t,i){var n,r=R.is.searchSelection()?w:x,o=R.escape.value(e);p.ignoreCase&&(o=o.toLowerCase()),n=ee("<a />").addClass(m.label).attr("data-"+v.value,o).html(N.label(o,t,p.preserveHTML,p.className)),n=p.onLabelCreate.call(n,o,t),R.has.label(e)?R.debug("User selection already exists, skipping",o):(p.label.variation&&n.addClass(p.label.variation),!0===i&&p.label.transition?(R.debug("Animating in label",n),n.addClass(m.hidden).insertBefore(r).transition({animation:p.label.transition,debug:p.debug,verbose:p.verbose,silent:p.silent,duration:p.label.duration})):(R.debug("Adding selection label",n),n.insertBefore(r)))},message:function(e){var t=k.children(_.message),e=p.templates.message(R.add.variables(e));0<t.length?t.html(e):ee("<div/>").html(e).addClass(m.message).appendTo(k)},optionValue:function(e){var t=R.escape.value(e);0<T.find('option[value="'+R.escape.string(t)+'"]').length||(R.disconnect.selectObserver(),R.is.single()&&(R.verbose("Removing previous user addition"),T.find("option."+m.addition).remove()),ee("<option/>").prop("value",t).addClass(m.addition).text(e).appendTo(T),R.verbose("Adding user addition as an <option>",e),R.observe.select())},userSuggestion:function(e){var t=k.children(_.addition),i=(i=R.get.item(e))&&0<i.not(_.addition).length,n=0<t.length;p.useLabels&&R.has.maxSelections()||(""===e||i?t.remove():(n?(t.data(v.value,e).data(v.text,e).attr("data-"+v.value,e).attr("data-"+v.text,e).removeClass(m.filtered),p.hideAdditions||(i=p.templates.addition(R.add.variables(f.addResult,e)),t.html(i)),R.verbose("Replacing user suggestion with new value",t)):((t=R.create.userChoice(e)).prependTo(k),R.verbose("Adding item choice to menu corresponding with user choice addition",t)),p.hideAdditions&&!R.is.allFiltered()||t.addClass(m.selected).siblings().removeClass(m.selected),R.refreshItems()))},variables:function(e,t){var i=-1!==e.search("{count}"),n=-1!==e.search("{maxCount}"),r=-1!==e.search("{term}");return R.verbose("Adding templated variables to message",e),i&&(e=e.replace("{count}",R.get.selectionCount())),n&&(e=e.replace("{maxCount}",p.maxSelections)),r&&(i=t||R.get.query(),e=e.replace("{term}",i)),e},value:function(e,t,i,n){"boolean"==typeof t&&(n=t,t=i=void 0);var r,o=R.get.values(!0);R.has.value(e)?R.debug("Value already selected"):""===e?R.debug("Cannot select blank values from multiselect"):(r=Array.isArray(o)?(r=i&&i.hasClass(m.actionable)?o:o.concat([e]),R.get.uniqueArray(r)):[e],R.has.selectInput()?R.can.extendSelect()&&(R.debug("Adding value to select",e,r,T),R.add.optionValue(e)):(r=r.join(p.delimiter),R.debug("Setting hidden input to delimited value",r,T)),!1===p.fireOnInit&&R.is.initialLoad()?R.verbose("Skipping onadd callback on initial load",p.onAdd):p.onAdd.call(I,e,t,i),R.set.value(r,t,i,n),R.check.maxSelections())}},remove:{active:function(){y.removeClass(m.active)},activeLabel:function(){y.find(_.label).removeClass(m.active)},empty:function(){y.removeClass(m.empty)},loading:function(){y.removeClass(m.loading)},initialLoad:function(){B=!1},upward:function(e){(e||y).removeClass(m.upward)},leftward:function(e){(e||k).removeClass(m.leftward)},visible:function(){y.removeClass(m.visible)},activeItem:function(){E.removeClass(m.active)},filteredItem:function(){p.useLabels&&R.has.maxSelections()||((p.useLabels&&R.is.multiple()?E.not("."+m.active):E).removeClass(m.filtered),p.hideDividers&&A.removeClass(m.hidden),R.remove.empty())},optionValue:function(e){var e=R.escape.value(e),t=T.find('option[value="'+R.escape.string(e)+'"]');0<t.length&&t.hasClass(m.addition)&&(R.disconnect.selectObserver(),t.remove(),R.verbose("Removing user addition as an <option>",e),R.observe.select())},message:function(){k.children(_.message).remove()},searchWidth:function(){w.css("width","")},searchTerm:function(){R.verbose("Cleared search term"),w.val(""),R.set.filtered()},userAddition:function(){E.filter(_.addition).remove()},selected:function(e,t,n){if(!(t=p.allowAdditions?t||R.get.itemWithAdditions(e):t||R.get.item(e)))return!1;t.each(function(){var e=ee(this),t=R.get.choiceText(e),i=R.get.choiceValue(e,t);R.is.multiple()?p.useLabels?(R.remove.value(i,t,e,n),R.remove.label(i)):(R.remove.value(i,t,e,n),0===R.get.selectionCount()?R.set.placeholderText():R.set.text(R.add.variables(f.count))):R.remove.value(i,t,e,n),e.removeClass(m.filtered).removeClass(m.active),p.useLabels&&e.removeClass(m.selected)})},selectedItem:function(){E.removeClass(m.selected)},value:function(e,t,i,n){var r,o=R.get.values(!0);R.has.selectInput()?(R.verbose("Input is <select> removing selected option",e),r=R.remove.arrayValue(e,o),R.remove.optionValue(e)):(R.verbose("Removing from delimited values",e),r=(r=R.remove.arrayValue(e,o)).join(p.delimiter)),!1===p.fireOnInit&&R.is.initialLoad()?R.verbose("No callback on initial load",p.onRemove):p.onRemove.call(I,e,t,i),R.set.value(r,t,i,n),R.check.maxSelections()},arrayValue:function(t,e){return Array.isArray(e)||(e=[e]),e=ee.grep(e,function(e){return t!=e}),R.verbose("Removed value from delimited string",t,e),e},label:function(e,t){e=R.escape.value(e),e=y.find(_.label).filter("[data-"+v.value+'="'+R.escape.string(p.ignoreCase?e.toLowerCase():e)+'"]'),R.verbose("Removing label",e),e.remove()},activeLabels:function(e){e=e||y.find(_.label).filter("."+m.active),R.verbose("Removing active label selections",e),R.remove.labels(e)},labels:function(e,r){e=e||y.find(_.label),R.verbose("Removing labels",e),e.each(function(){var e=ee(this),t=e.data(v.value),i=void 0!==t?String(t):t,n=R.is.userValue(i);!1===p.onLabelRemove.call(e,t)?R.debug("Label remove callback cancelled removal"):(R.remove.message(),n?(R.remove.value(i,i,R.get.item(i),r),R.remove.label(i)):R.remove.selected(i,!1,r))})},tabbable:function(){(R.is.searchSelection()?(R.debug("Searchable dropdown initialized"),w):(R.debug("Simple selection dropdown initialized"),y)).removeAttr("tabindex"),k.removeAttr("tabindex")},diacritics:function(e){return p.ignoreDiacritics?e.normalize("NFD").replace(/[\u0300-\u036F]/g,""):e}},has:{menuSearch:function(){return R.has.search()&&0<w.closest(k).length},clearItem:function(){return 0<V.length},search:function(){return 0<w.length},sizer:function(){return 0<C.length},selectInput:function(){return T.is("select")},minCharacters:function(e){return p.minCharacters&&!M?(e=void 0!==e?String(e):String(R.get.query())).length>=p.minCharacters:!(M=!1)},firstLetter:function(e,t){return!(!e||0===e.length||"string"!=typeof t)&&(e=R.get.choiceText(e,!1),(t=t.toLowerCase())==String(e).charAt(0).toLowerCase())},input:function(){return 0<T.length},items:function(){return 0<E.length},menu:function(){return 0<k.length},subMenu:function(e){return 0<(e||k).find(_.menu).length},message:function(){return 0<k.children(_.message).length},label:function(e){var e=R.escape.value(e),t=y.find(_.label);return p.ignoreCase&&(e=e.toLowerCase()),0<t.filter("[data-"+v.value+'="'+R.escape.string(e)+'"]').length},maxSelections:function(){return p.maxSelections&&R.get.selectionCount()>=p.maxSelections},allResultsFiltered:function(){var e=E.not(_.addition);return e.filter(_.unselectable).length===e.length},userSuggestion:function(){return 0<k.children(_.addition).length},query:function(){return""!==R.get.query()},value:function(e){return p.ignoreCase?R.has.valueIgnoringCase(e):R.has.valueMatchingCase(e)},valueMatchingCase:function(e){var t=R.get.values(!0);return!!(Array.isArray(t)?t&&-1!==ee.inArray(e,t):t==e)},valueIgnoringCase:function(i){var e=R.get.values(!0),n=!1;return Array.isArray(e)||(e=[e]),ee.each(e,function(e,t){if(String(i).toLowerCase()===String(t).toLowerCase())return!(n=!0)}),n}},is:{active:function(){return y.hasClass(m.active)},animatingInward:function(){return k.transition("is inward")},animatingOutward:function(){return k.transition("is outward")},bubbledLabelClick:function(e){return ee(e.target).is("select, input")&&0<y.closest("label").length},bubbledIconClick:function(e){return 0<ee(e.target).closest(j).length},edge:function(){return!!te.chrome&&!!te.StyleMedia},empty:function(){return y.hasClass(m.empty)},chrome:function(){return!!te.chrome&&!te.StyleMedia},alreadySetup:function(){return y.is("select")&&void 0!==y.parent(_.dropdown).data(d)&&0===y.prev().length},animating:function(e){return e?e.transition&&e.transition("is animating"):k.transition&&k.transition("is animating")},leftward:function(e){return(e||k).hasClass(m.leftward)},clearable:function(){return y.hasClass(m.clearable)||p.clearable},disabled:function(){return y.hasClass(m.disabled)},focused:function(){return ie.activeElement===y[0]},focusedOnSearch:function(){return ie.activeElement===w[0]},allFiltered:function(){return(R.is.multiple()||R.has.search())&&!(!p.hideAdditions&&R.has.userSuggestion())&&!R.has.message()&&R.has.allResultsFiltered()},hidden:function(e){return!R.is.visible(e)},initialLoad:function(){return B},inObject:function(i,e){var n=!1;return ee.each(e,function(e,t){if(t==i)return n=!0}),n},multiple:function(){return y.hasClass(m.multiple)},remote:function(){return p.apiSettings&&R.can.useAPI()},noApiCache:function(){return z||p.apiSettings&&!p.apiSettings.cache},single:function(){return!R.is.multiple()},selectMutation:function(e){var i=!1;return ee.each(e,function(e,t){if(ee(t.target).is("option, optgroup")||ee(t.addedNodes).is("select")||ee(t.target).is("select")&&"attributes"!==t.type)return!(i=!0)}),i},search:function(){return y.hasClass(m.search)},searchSelection:function(e){return R.has.search()&&1===(e?w.parents(_.dropdown):w.parent(_.dropdown)).length},selection:function(){return y.hasClass(m.selection)},userValue:function(e){return-1!==ee.inArray(e,R.get.userValues())},upward:function(e){return(e||y).hasClass(m.upward)},visible:function(e){return(e||k).hasClass(m.visible)},verticallyScrollableContext:function(){var e=b[0]!==te&&b.css("overflow-y");return"auto"===e||"scroll"===e},horizontallyScrollableContext:function(){var e=b[0]!==te&&b.css("overflow-X");return"auto"===e||"scroll"===e}},can:{activate:function(e){return p.useLabels||!R.has.maxSelections()||R.has.maxSelections()&&e.hasClass(m.active)},openDownward:function(e){var t;return(e=e||k).addClass(m.loading),t={context:{offset:b[0]===te?{top:0,left:0}:b.offset(),scrollTop:b.scrollTop(),height:b.outerHeight()},menu:{offset:e.offset(),height:e.outerHeight()}},R.is.verticallyScrollableContext()&&(t.menu.offset.top+=t.context.scrollTop),R.has.subMenu(e)&&(t.menu.height+=e.find(_.menu).first().outerHeight()),t=(t={above:t.context.scrollTop<=t.menu.offset.top-t.context.offset.top-t.menu.height,below:t.context.scrollTop+t.context.height>=t.menu.offset.top-t.context.offset.top+t.menu.height}).below?(R.verbose("Dropdown can fit in context downward",t),!0):t.above?(R.verbose("Dropdown cannot fit below, opening upward",t),!1):(R.verbose("Dropdown cannot fit in either direction, favoring downward",t),!0),e.removeClass(m.loading),t},openRightward:function(e){var t,i=!0;return(e=e||k).addClass(m.loading),t={context:{offset:b[0]===te?{top:0,left:0}:b.offset(),scrollLeft:b.scrollLeft(),width:b.outerWidth()},menu:{offset:e.offset(),width:e.outerWidth()}},R.is.horizontallyScrollableContext()&&(t.menu.offset.left+=t.context.scrollLeft),(t=t.menu.offset.left-t.context.offset.left+t.menu.width>=t.context.scrollLeft+t.context.width)&&(R.verbose("Dropdown cannot fit in context rightward",t),i=!1),e.removeClass(m.loading),i},extendSelect:function(){return p.allowAdditions||p.apiSettings},show:function(){return!R.is.disabled()&&(R.has.items()||R.has.message())},useAPI:function(){return void 0!==ee.fn.api},useElement:function(e){return void 0!==ee.fn[e]||(R.error(c.noElement.replace("{element}",e)),!1)}},animate:{show:function(e,t){var i=t||k,n=t?function(){}:function(){R.hideSubMenus(),R.hideOthers(),R.set.active()};e=ne(e)?e:function(){},R.verbose("Doing menu show animation",i),R.set.direction(t),t=p.transition.showMethod||R.get.transition(t),R.is.selection()&&R.set.scrollPosition(R.get.selectedItem(),!0),(R.is.hidden(i)||R.is.animating(i))&&("none"===t?(n(),i.transition({displayType:R.get.displayType()}).transition("show"),e.call(I)):R.can.useElement("transition")&&i.transition({animation:t+" in",debug:p.debug,verbose:p.verbose,silent:p.silent,duration:p.transition.showDuration||p.duration,queue:!0,onStart:n,displayType:R.get.displayType(),onComplete:function(){e.call(I)}}))},hide:function(e,t){var i=t||k,n=t?function(){}:function(){R.unbind.intent(),R.remove.active()},t=p.transition.hideMethod||R.get.transition(t);e=ne(e)?e:function(){},(R.is.visible(i)||R.is.animating(i))&&(R.verbose("Doing menu hide animation",i),"none"===t?(n(),i.transition({displayType:R.get.displayType()}).transition("hide"),e.call(I)):void 0!==ee.fn.transition?i.transition({animation:t+" out",duration:p.transition.hideDuration||p.duration,debug:p.debug,verbose:p.verbose,silent:p.silent,queue:!1,onStart:n,displayType:R.get.displayType(),onComplete:function(){e.call(I)}}):R.error(c.transition))}},hideAndClear:function(){R.remove.searchTerm(),R.has.maxSelections()||(R.has.search()?R.hide(function(){R.remove.filteredItem()}):R.hide())},delay:{show:function(){R.verbose("Delaying show event to ensure user intent"),clearTimeout(R.timer),R.timer=setTimeout(function(){R.show()},p.delay.show)},hide:function(){R.verbose("Delaying hide event to ensure user intent"),clearTimeout(R.timer),R.timer=setTimeout(function(){R.hide()},p.delay.hide)}},escape:{value:function(e){var t=Array.isArray(e),i=!(n="string"==typeof e)&&!t,n=n&&-1!==e.search(s.quote),r=[];return i||!n?e:(R.debug("Encoding quote values for use in select",e),t?(ee.each(e,function(e,t){r.push(t.replace(s.quote,"&quot;"))}),r):e.replace(s.quote,"&quot;"))},string:function(e){return(e=String(e)).replace(s.escape,"\\$&")},htmlEntities:function(e,t){var i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/["&'<>`]/.test(e)?(e=e.replace(t?/&/g:/&(?![\d#a-z]{1,12};)/gi,"&amp;")).replace(/["'<>`]/g,function(e){return i[e]}):e}},setting:function(e,t){if(R.debug("Changing setting",e,t),ee.isPlainObject(e))ee.extend(!0,p,e);else{if(void 0===t)return p[e];ee.isPlainObject(p[e])?ee.extend(!0,p[e],t):p[e]=t}},internal:function(e,t){if(ee.isPlainObject(e))ee.extend(!0,R,e);else{if(void 0===t)return R[e];R[e]=t}},debug:function(){!p.silent&&p.debug&&(p.performance?R.performance.log(arguments):(R.debug=Function.prototype.bind.call(console.info,console,p.name+":"),R.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?R.performance.log(arguments):(R.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),R.verbose.apply(console,arguments)))},error:function(){p.silent||(R.error=Function.prototype.bind.call(console.error,console,p.name+":"),R.error.apply(console,arguments))},performance:{log:function(e){var t,i;p.performance&&(i=(t=Date.now())-(W||t),W=t,X.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:I,"Execution Time":i})),clearTimeout(R.performance.timer),R.performance.timer=setTimeout(function(){R.performance.display()},500)},display:function(){var e=p.name+":",i=0;W=!1,clearTimeout(R.performance.timer),ee.each(X,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<X.length&&(console.groupCollapsed(e),console.table?console.table(X):ee.each(X,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),X=[]}},invoke:function(n,e,t){var r,o,i,a=L;return e=e||J,t=t||I,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,ee.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!ee.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):ee.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:R.error(c.method,n),!1);a=a[i]})),ne(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(H)?H.push(i):void 0!==H?H=[H,i]:void 0!==i&&(H=i),o}};K?(void 0===L&&R.initialize(),R.invoke(Y)):(void 0!==L&&L.invoke("destroy"),R.initialize())}),void 0!==H?H:Z},ee.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,clearable:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:te,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:"exact",ignoreDiacritics:!1,hideDividers:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!1,allowAdditions:!1,keepSearchTerm:!1,ignoreCase:!1,ignoreSearchCase:!0,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!1,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,displayType:!1,headerDivider:!0,collapseOnActionable:!0,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20},onChange:function(e,t,i){},onAdd:function(e,t,i){},onRemove:function(e,t,i){},onActionable:function(e,t,i){},onSearch:function(e){},onLabelSelect:function(e){},onLabelCreate:function(e,t){return ee(this)},onLabelRemove:function(e){return!0},onNoResults:function(e){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noElement:"This module requires ui {element}",noNormalize:'"ignoreDiacritics" setting will be ignored. Browser does not support String().normalize(). You may consider including <https://cdn.jsdelivr.net/npm/unorm@1.4.1/lib/unorm.min.js> as a polyfill.'},regExp:{escape:/[\s#$()*+,.:=?@[\\\]^{|}-]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",description:"description",descriptionVertical:"descriptionVertical",value:"value",text:"text",type:"type",image:"image",imageClass:"imageClass",icon:"icon",iconClass:"iconClass",class:"class",divider:"divider",actionable:"actionable"},keys:{backspace:8,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",divider:".divider, .header",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> span.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered",clearIcon:"> .remove.icon"},className:{active:"active",addition:"addition",animating:"animating",description:"description",descriptionVertical:"vertical",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",icon:"icon",image:"image",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",text:"text",upward:"upward",leftward:"left",visible:"visible",clearable:"clearable",noselection:"noselection",delete:"delete",header:"header",divider:"divider",groupIcon:"",unfilterable:"unfilterable",actionable:"actionable"}},ee.fn.dropdown.settings.templates={deQuote:function(e,t){return String(e).replace(/"/g,t?"&quot;":"")},escape:function(e,t){var i;return!t&&(i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},/["&'<>`]/.test(e))?(e=e.replace(/&(?![\d#a-z]{1,12};)/gi,"&amp;")).replace(/["'<>`]/g,function(e){return i[e]}):e},dropdown:function(e,t,i,n){var r=e.placeholder||!1,o=ee.fn.dropdown.settings.templates.escape,a=ee.fn.dropdown.settings.templates.deQuote;return'<i class="dropdown icon"></i>'+(r?'<div class="default text">'+o(r,i)+"</div>":'<div class="text"></div>')+'<div class="'+a(n.menu)+'">'+ee.fn.dropdown.settings.templates.menu(e,t,i,n)+"</div>"},menu:function(e,c,u,d){var e=e[c.values]||[],h="",p=ee.fn.dropdown.settings.templates.escape,f=ee.fn.dropdown.settings.templates.deQuote;return ee.each(e,function(e,t){var i,n,r,o,a,s=t[c.type]||"item",l=-1!==s.indexOf("menu");"item"===s||l?(i=t[c.text]?' data-text="'+f(t[c.text],!0)+'"':"",o=t[c.actionable]?d.actionable+" ":"",a=t[c.disabled]?d.disabled+" ":"",n=t[c.descriptionVertical]?d.descriptionVertical+" ":"",r=""!==p(t[c.description]||"",u),h+='<div class="'+f(o+a+n+(t[c.class]||d.item))+'" data-value="'+f(t[c.value],!0)+'"'+i+">",l&&(h+='<i class="'+(-1!==s.indexOf("left")?"left":"")+' dropdown icon"></i>'),t[c.image]&&(h+='<img class="'+f(t[c.imageClass]||d.image)+'" src="'+f(t[c.image])+'">'),t[c.icon]&&(h+='<i class="'+f(t[c.icon]+" "+(t[c.iconClass]||d.icon))+'"></i>'),r&&(h=(h+='<span class="'+f(d.description)+'">'+p(t[c.description]||"",u)+"</span>")+(l?"":'<span class="'+f(d.text)+'">')),l&&(h+='<span class="'+f(d.text)+'">'),h+=p(t[c.name]||"",u),l?h=(h=(h+="</span>")+'<div class="'+f(s)+'">')+ee.fn.dropdown.settings.templates.menu(t,c,u,d)+"</div>":r&&(h+="</span>"),h+="</div>"):"header"===s&&(o=p(t[c.name]||"",u),a=f(t[c.icon]||d.groupIcon),""===o&&""===a||(h+='<div class="'+f(t[c.class]||d.header)+'">',""!==a&&(h+='<i class="'+f(a+" "+(t[c.iconClass]||d.icon))+'"></i>'),h=h+o+"</div>"),t[c.divider])&&(h+='<div class="'+f(d.divider)+'"></div>')}),h},label:function(e,t,i,n){var r=ee.fn.dropdown.settings.templates.escape,o=ee.fn.dropdown.settings.templates.deQuote;return r(t,i)+'<i class="'+o(n.delete)+' icon"></i>'},message:function(e){return e},addition:function(e){return e}}})(jQuery,window,document),((C,e)=>{void 0!==e&&e.Math===Math||globalThis,C.fn.embed=function(m){var g,v=C(this),_=Date.now(),y=[],b=m,x="string"==typeof b,w=[].slice.call(arguments,1);return v.each(function(){var n=C.isPlainObject(m)?C.extend(!0,{},C.fn.embed.settings,m):C.extend({},C.fn.embed.settings),e=n.selector,t=n.className,r=n.sources,s=n.error,o=n.metadata,i=n.namespace,a=n.templates,l="."+i,c="module-"+i,u=C(this),d=(u.find(e.placeholder),u.find(e.icon),u.find(e.embed)),h=this,p=u.data(c),f={initialize:function(){f.debug("Initializing embed"),f.determine.autoplay(),f.create(),f.bind.events(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),p=f,u.data(c,f)},destroy:function(){f.verbose("Destroying previous instance of embed"),f.reset(),u.removeData(c).off(l)},refresh:function(){f.verbose("Refreshing selector cache"),u.find(e.placeholder),u.find(e.icon),d=u.find(e.embed)},bind:{events:function(){f.has.placeholder()&&(f.debug("Adding placeholder events"),u.on("click"+l,e.placeholder,f.createAndShow).on("click"+l,e.icon,f.createAndShow))}},create:function(){f.get.placeholder()?f.createPlaceholder():f.createAndShow()},createPlaceholder:function(e){var t=f.get.icon();e=e||f.get.placeholder(),u.html(a.placeholder(e,t)),f.debug("Creating placeholder for embed",e,t)},createEmbed:function(e){f.refresh(),e=e||f.get.url(),d=C("<div/>").addClass(t.embed).html(f.generate.embed(e)).appendTo(u),n.onCreate.call(h,e),f.debug("Creating embed object",d)},changeEmbed:function(e){d.html(f.generate.embed(e))},createAndShow:function(){f.createEmbed(),f.show()},change:function(e,t,i){f.debug("Changing video to ",e,t,i),u.data(o.source,e).data(o.id,t),i?u.data(o.url,i):u.removeData(o.url),f.has.embed()?f.changeEmbed():f.create()},reset:function(){f.debug("Clearing embed and showing placeholder"),f.remove.data(),f.remove.active(),f.remove.embed(),f.showPlaceholder(),n.onReset.call(h)},show:function(){f.debug("Showing embed"),f.set.active(),n.onDisplay.call(h)},hide:function(){f.debug("Hiding embed"),f.showPlaceholder()},showPlaceholder:function(){f.debug("Showing placeholder image"),f.remove.active(),n.onPlaceholderDisplay.call(h)},get:{id:function(){return n.id||u.data(o.id)},placeholder:function(){return n.placeholder||u.data(o.placeholder)},icon:function(){return n.icon||(void 0!==u.data(o.icon)?u.data(o.icon):f.determine.icon())},source:function(e){return n.source||(void 0!==u.data(o.source)?u.data(o.source):f.determine.source())},type:function(){var e=f.get.source();return void 0!==r[e]&&r[e].type},url:function(){return n.url||(void 0!==u.data(o.url)?u.data(o.url):f.determine.url())}},determine:{autoplay:function(){f.should.autoplay()&&(n.autoplay=!0)},source:function(i){var n=!1;return(i=i||f.get.url())&&C.each(r,function(e,t){if(-1!==i.search(t.domain))return n=e,!1}),n},icon:function(){var e=f.get.source();return void 0!==r[e]&&r[e].icon},url:function(){var e=n.id||u.data(o.id),t=n.source||u.data(o.source);return(t=void 0!==r[t]&&r[t].url.replace("{id}",e))&&u.data(o.url,t),t}},set:{active:function(){u.addClass(t.active)}},remove:{data:function(){u.removeData(o.id).removeData(o.icon).removeData(o.placeholder).removeData(o.source).removeData(o.url)},active:function(){u.removeClass(t.active)},embed:function(){d.empty()}},encode:{parameters:function(e){var t,i=[];for(t in e)i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i.join("&amp;")}},generate:{embed:function(e){f.debug("Generating embed html");var t,i=f.get.source();return(e=f.get.url(e))?(i=f.generate.parameters(i),t=a.iframe(e,i)):f.error(s.noURL,u),t},parameters:function(e,t){return e=r[e]&&void 0!==r[e].parameters?r[e].parameters(n):{},(t=t||n.parameters)&&(e=C.extend({},e,t)),e=n.onEmbed(e),f.encode.parameters(e)}},has:{embed:function(){return 0<d.length},placeholder:function(){return n.placeholder||u.data(o.placeholder)}},should:{autoplay:function(){return"auto"===n.autoplay?n.placeholder||void 0!==u.data(o.placeholder):n.autoplay}},is:{video:function(){return"video"===f.get.type()}},setting:function(e,t){if(f.debug("Changing setting",e,t),C.isPlainObject(e))C.extend(!0,n,e);else{if(void 0===t)return n[e];C.isPlainObject(n[e])?C.extend(!0,n[e],t):n[e]=t}},internal:function(e,t){if(C.isPlainObject(e))C.extend(!0,f,e);else{if(void 0===t)return f[e];f[e]=t}},debug:function(){!n.silent&&n.debug&&(n.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,n.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!n.silent&&n.verbose&&n.debug&&(n.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,n.name+":"),f.verbose.apply(console,arguments)))},error:function(){n.silent||(f.error=Function.prototype.bind.call(console.error,console,n.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,i;n.performance&&(i=(t=Date.now())-(_||t),_=t,y.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:h,"Execution Time":i})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(function(){f.performance.display()},500)},display:function(){var e=n.name+":",i=0;_=!1,clearTimeout(f.performance.timer),C.each(y,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",1<v.length&&(e+=" ("+v.length+")"),0<y.length&&(console.groupCollapsed(e),console.table?console.table(y):C.each(y,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),y=[]}},invoke:function(n,e,t){var r,o,i,a=p;return e=e||w,t=t||h,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,C.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!C.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):C.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:f.error(s.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(g)?g.push(i):void 0!==g?g=[g,i]:void 0!==i&&(g=i),o}};x?(void 0===p&&f.initialize(),f.invoke(b)):(void 0!==p&&p.invoke("destroy"),f.initialize())}),void 0!==g?g:this},C.fn.embed.settings={name:"Embed",namespace:"embed",silent:!1,debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.color||void 0,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.color||void 0,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{deQuote:function(e,t){return String(e).replace(/"/g,t?"&quot;":"")},iframe:function(e,t){return t&&(e+="?"+t),'<iframe src="'+(0,C.fn.embed.settings.templates.deQuote)(e)+'" width="100%" height="100%" msallowFullScreen allowFullScreen></iframe>'},placeholder:function(e,t){var i="",n=C.fn.embed.settings.templates.deQuote;return t&&(i+='<i class="'+n(t)+' icon"></i>'),e&&(i+='<img class="placeholder" src="'+n(e)+'">'),i}},api:!1,onPause:function(){},onPlay:function(){},onStop:function(){}}})(jQuery,window,document),((q,H,Z)=>{function G(e){return"function"==typeof e&&"number"!=typeof e.nodeType}H=void 0!==H&&H.Math===Math?H:globalThis,q.fn.flyout=function(D){var L,e=q(this),z=q(H),R=q(Z),O=(q("html"),q("head")),B=q("body"),F=Date.now(),N=[],j=D,V="string"==typeof j,U=[].slice.call(arguments,1),$=function(e,t){var i;return 0<=[H,Z].indexOf(e)?i=B:0===(i=q(t.document).find(e)).length&&(i=t.frameElement?$(e,t.parent):B),i};return e.each(function(){var i,e,r,o,t,n,a,s=q.isPlainObject(D)?q.extend(!0,{},q.fn.flyout.settings,D):q.extend({},q.fn.flyout.settings),l=s.selector,c=s.className,u=s.namespace,d=s.fields,h=s.regExp,p=s.error,f="."+u,m="module-"+u,g=q(this),v=$(s.context,H),_=g.find(l.close),y=g.children(l.flyout),b=v.children(l.pusher),x=g.hasClass("flyout"),w=this,C=x?g.data(m):void 0,T=!1,S=v[0]===B[0],k="",E="",A=!1,P=!1,M=!1,I={initialize:function(){var o;I.debug("Initializing flyout",D),I.create.id(),x||(I.create.flyout(),G(s.onHidden)||(s.onHidden=function(){I.destroy(),g.remove()}),s.autoShow)||(s.autoShow=!0),g.addClass(s.class),""!==s.title&&g.find(l.header).html(I.helpers.escape(s.title,s.preserveHTML)).addClass(s.classTitle),""!==s.content&&g.find(l.content).html(I.helpers.escape(s.content,s.preserveHTML)).addClass(s.classContent),I.has.configActions()&&(0===(o=g.find(l.actions).addClass(s.classActions)).length?o=q("<div/>",{class:c.actions+" "+(s.classActions||"")}).appendTo(g):o.empty(),s.actions.forEach(function(e){var t=e[d.icon]?"<i "+(e[d.text]?'aria-hidden="true"':"")+' class="'+I.helpers.deQuote(e[d.icon])+' icon"></i>':"",i=I.helpers.escape(e[d.text]||"",s.preserveHTML),n=I.helpers.deQuote(e[d.class]||""),r=e[d.click]&&G(e[d.click])?e[d.click]:function(){};o.append(q("<button/>",{html:t+i,"aria-label":(e[d.text]||e[d.icon]||"").replace(/<[^>]+(>|$)/g,""),class:c.button+" "+n,on:{click:function(){!1!==r.call(w,g)&&I.hide()}}}))})),s.delaySetup?requestAnimationFrame(I.setup.layout):I.setup.layout(),requestAnimationFrame(function(){I.setup.cache()}),"left"!==I.get.direction()&&"right"!==I.get.direction()||(I.setup.heights(),I.bind.resize()),I.bind.events(),I.observeChanges(),I.instantiate(),s.autoShow&&I.show()},instantiate:function(){I.verbose("Storing instance of module",I),C=I,g.data(m,C)},create:{flyout:function(){var e;I.verbose("Programmaticaly create flyout",v),g=q("<div/>",{class:c.flyout,role:"dialog","aria-modal":s.dimPage}),s.closeIcon&&(_=q("<i/>",{class:c.close,role:"button",tabindex:0,"aria-label":s.text.close}),g.append(_)),""!==s.title&&(e="_"+I.get.id()+"title",g.attr("aria-labelledby",e),q("<div/>",{class:c.header,id:e}).appendTo(g)),""!==s.content&&(e="_"+I.get.id()+"desc",g.attr("aria-describedby",e),q("<div/>",{class:c.content,id:e}).appendTo(g)),I.has.configActions()&&q("<div/>",{class:c.actions}).appendTo(g),g.prependTo(v),w=g[0]},id:function(){t=(Math.random().toString(16)+"000000000").slice(2,10),o="."+t,I.verbose("Creating unique id for element",t)}},destroy:function(){n&&n.disconnect(),I.verbose("Destroying previous module for",g),g.off(f).removeData(m),_.off(o),i&&i.off(o),v.off(o),z.off(o),R.off(o)},event:{keyboard:function(e){e.which===s.keys.escape&&(s.closable?(I.debug("Escape key pressed hiding flyout"),I.hide()):I.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){I.setup.heights()},focus:function(){P=!0},click:function(e){P&&Z.activeElement!==e.target&&I.is.visible()&&s.autofocus&&s.dimPage&&0===q(Z.activeElement).closest(l.flyout).length&&requestAnimationFrame(I.set.autofocus),P=!1},clickaway:function(e){var t;s.closable&&(t=0<b.find(e.target).length||b.is(e.target),e=v.is(e.target),t&&(I.verbose("User clicked on dimmed page"),I.hide()),e)&&(I.verbose("User clicked on dimmable context (scaled out page)"),I.hide())},close:function(e){I.hide()},closeKeyUp:function(e){(e=e.which)!==s.keys.enter&&e!==s.keys.space||I.hide()},inputKeyDown:{first:function(e){e.which===s.keys.tab&&e.shiftKey&&(i.last().trigger("focus"),e.preventDefault())},last:function(e){e.which!==s.keys.tab||e.shiftKey||(i.first().trigger("focus"),e.preventDefault())}},approve:function(e){T||!1===s.onApprove.call(I.element,q(this))?I.verbose("Approve callback returned false cancelling close"):(T=!0,I.hide(function(){T=!1}))},deny:function(e){T||!1===s.onDeny.call(I.element,q(this))?I.verbose("Deny callback returned false cancelling close"):(T=!0,I.hide(function(){T=!1}))},touch:function(e){},containScroll:function(e){w.scrollTop<=0&&(w.scrollTop=1),w.scrollTop+w.offsetHeight>=w.scrollHeight&&(w.scrollTop=w.scrollHeight-w.offsetHeight-1)},scroll:function(e){0===q(e.target).closest(l.flyout).length&&e.preventDefault()}},bind:{resize:function(){I.verbose("Adding resize event to window",z),z.on("resize"+o,I.event.resize)},events:function(){I.verbose("Attaching events"),g.on("click"+f,l.close,I.event.close).on("click"+f,l.approve,I.event.approve).on("click"+f,l.deny,I.event.deny),_.on("keyup"+o,I.event.closeKeyUp),z.on("focus"+o,I.event.focus),v.on("click"+o,I.event.click)},clickaway:function(){I.verbose("Adding clickaway events to context",v),v.on("click"+o,I.event.clickaway).on("touchend"+o,I.event.clickaway)},scrollLock:function(){s.scrollLock&&(I.debug("Disabling page scroll"),(A=I.has.scrollbar())&&(I.save.bodyMargin(),I.set.bodyMargin()),v.addClass(c.locked)),I.verbose("Adding events to contain flyout scroll"),R.on("touchmove"+o,I.event.touch),g.on("scroll"+f,I.event.containScroll)}},unbind:{clickaway:function(){I.verbose("Removing clickaway events from context",v),v.off(o)},scrollLock:function(){I.verbose("Removing scroll lock from page"),A&&I.restore.bodyMargin(),v.removeClass(c.locked),R.off(o),g.off("scroll"+f)}},add:{inlineCSS:function(){var e=I.cache.width||g.outerWidth(),t=I.cache.height||g.outerHeight(),i=I.is.rtl(),n=I.get.direction(),t={left:e,right:-e,top:t,bottom:-t};i&&(I.verbose("RTL detected, flipping widths"),t.left=-e,t.right=e),i="<style>","left"===n||"right"===n?(I.debug("Adding CSS rules for animation distance",e),i+=" .ui.visible."+n+".flyout ~ .fixed, .ui.visible."+n+".flyout ~ .pusher {           transform: translate3d("+t[n]+"px, 0, 0); }"):"top"!==n&&"bottom"!==n||(i+=" .ui.visible."+n+".flyout ~ .fixed, .ui.visible."+n+".flyout ~ .pusher {           transform: translate3d(0, "+t[n]+"px, 0); }"),I.is.ie()&&("left"===n||"right"===n?(I.debug("Adding CSS rules for animation distance",e),i+=" body.pushable > .ui.visible."+n+".flyout ~ .pusher::after {           transform: translate3d("+t[n]+"px, 0, 0); }"):"top"!==n&&"bottom"!==n||(i+=" body.pushable > .ui.visible."+n+".flyout ~ .pusher::after {           transform: translate3d(0, "+t[n]+"px, 0); }"),i+=" body.pushable > .ui.visible.left.flyout ~ .ui.visible.right.flyout ~ .pusher::after, body.pushable > .ui.visible.right.flyout ~ .ui.visible.left.flyout ~ .pusher::after {           transform: translate3d(0, 0, 0); }"),r=q(i+="</style>").appendTo(O),I.debug("Adding sizing css to head",r)},keyboardShortcuts:function(){I.verbose("Adding keyboard shortcuts"),R.on("keydown"+f,I.event.keyboard)}},observeChanges:function(){"MutationObserver"in H&&((n=new MutationObserver(function(e){function r(e){for(var t=[],i=0,n=e.length;i<n;i++)Array.prototype.push.apply(t,r(e[i].childNodes)),t.push(e[i]);return t}var i=!1,n=!0;e.every(function(e){var t;return"attributes"===e.type?M&&("disabled"===e.attributeName||0<q(e.target).find(":input").addBack(":input").filter(":visible").length)&&(i=!0):(t=q(r(e.addedNodes)).filter("a[href], [tabindex], :input:enabled").filter(":visible"),e=q(r(e.removedNodes)).filter("a[href], [tabindex], :input"),(0<t.length||0<e.length)&&(i=!0,0<t.filter(":input").length||0<e.filter(":input").length)&&(n=!1)),!i}),i&&I.refreshInputs(n)})).observe(w,{attributeFilter:["class","disabled"],attributes:!0,childList:!0,subtree:!0}),I.debug("Setting up mutation observer",n))},refresh:function(){I.verbose("Refreshing selector cache"),v=$(s.context,H),I.refreshFlyouts(),b=v.children(l.pusher),I.clear.cache()},refreshFlyouts:function(){I.verbose("Refreshing other flyouts"),y=v.children(l.flyout)},refreshInputs:function(e){i&&i.off("keydown"+o),s.dimPage&&(0===(i=g.find("a[href], [tabindex], :input:enabled").filter(":visible").filter(function(){return 0===q(this).closest(".disabled").length})).filter(":input").length?(i=g.add(i),g.attr("tabindex",-1)):g.removeAttr("tabindex"),i.first().on("keydown"+o,I.event.inputKeyDown.first),i.last().on("keydown"+o,I.event.inputKeyDown.last),!e)&&s.autofocus&&0===i.filter(":focus").length&&I.set.autofocus()},setup:{cache:function(){I.cache={width:g.outerWidth(),height:g.outerHeight()}},layout:function(){0===v.children(l.pusher).length&&(I.debug("Adding wrapper element for flyout"),I.error(p.pusher),b=q('<div class="pusher" />'),v.children().not(l.omitted).not(y).wrapAll(b),I.refresh()),0!==g.nextAll(l.pusher).length&&g.nextAll(l.pusher)[0]===b[0]||(I.debug("Moved flyout to correct parent element"),I.error(p.movedFlyout,w),g.detach().prependTo(v),I.refresh()),I.is.mobile()&&g.addClass(c.fullscreen),I.clear.cache(),I.set.pushable(),I.set.direction()},heights:function(){I.debug("Setting up heights",g);var e=g.children(l.header),t=g.children(l.content),i=g.children(l.actions);0<(e=(v.height()||0)-(e.outerHeight()||0)-(i.outerHeight()||0))&&t.css("min-height",String(e)+"px")}},attachEvents:function(e,t){var i=q(e);t=G(I[t])?I[t]:I.toggle,0<i.length?(I.debug("Attaching flyout events to element",e,t),i.on("click"+f,t)):I.error(p.notFound,e)},show:function(e){e=G(e)?e:function(){},I.is.hidden()?!1===s.onShow.call(w)?I.verbose("Show callback returned false cancelling show"):(I.refresh(),I.othersActive()&&(I.debug("Other flyouts currently visible"),s.exclusive?I.hideOthers():T=!1),I.set.dimmerStyles(),I.set.observeAttributes(!1),I.pushPage(function(){e.call(w),s.onVisible.call(w),s.keyboardShortcuts&&I.add.keyboardShortcuts(),I.save.focus(),I.refreshInputs(),requestAnimationFrame(I.set.observeAttributes)}),s.onChange.call(w)):I.debug("Flyout is already visible")},hide:function(e){if(e=G(e)?e:function(){},!1===s.onHide.call(w,q(this)))return I.verbose("Hide callback returned false cancelling hide"),T=!1;(I.is.visible()||I.is.animating())&&(I.debug("Hiding flyout",e),I.refreshFlyouts(),I.set.observeAttributes(!1),I.pullPage(function(){e.call(w),G(s.onHidden)&&s.onHidden.call(w),I.restore.focus()}),s.onChange.call(w))},othersAnimating:function(){return 0<y.not(g).filter("."+c.animating).length},othersVisible:function(){return 0<y.not(g).filter("."+c.visible).length},othersActive:function(){return I.othersVisible()||I.othersAnimating()},hideOthers:function(e){var t=y.not(g).filter("."+c.visible),i=t.length,n=0;e=e||function(){},t.flyout("hide",function(){++n===i&&e()})},toggle:function(){I.verbose("Determining toggled direction"),I.is.hidden()?I.show():I.hide()},pushPage:function(t){var e,i,n;t=G(t)?t:function(){},I.set.overlay(),s.returnScroll&&(a=(S?z:v).scrollTop()),I.bind.scrollLock(),e=function(){I.bind.clickaway(),I.add.inlineCSS(),I.set.animating(),I.set.visible()},i=function(){I.set.dimmed()},n=function(e){e.target===g[0]&&(g.off("transitionend"+o,n),I.remove.animating(),t.call(w))},g.off("transitionend"+o),g.on("transitionend"+o,n),requestAnimationFrame(e),s.dimPage&&!I.othersVisible()&&requestAnimationFrame(i)},pullPage:function(t){var e,i;t=G(t)?t:function(){},I.verbose("Removing context push state",I.get.direction()),I.unbind.clickaway(),I.othersActive()||(I.unbind.scrollLock(),s.keyboardShortcuts&&I.remove.keyboardShortcuts()),e=function(){I.set.overlay(),I.set.animating(),s.dimPage&&!I.othersVisible()&&I.set.closing(),I.remove.visible()},i=function(e){e.target===g[0]&&(g.off("transitionend"+o,i),I.remove.animating(),I.remove.closing(),I.remove.overlay(),I.remove.inlineCSS(),s.returnScroll&&I.scrollBack(),s.dimPage&&!I.othersVisible()&&b.removeClass(c.dimmed),t.call(w))},g.off("transitionend"+o),g.on("transitionend"+o,i),requestAnimationFrame(e)},scrollToTop:function(){I.verbose("Scrolling to top of page to avoid animation issues"),g.scrollTop(0),(S?z:v)[0].scrollTo(0,0)},scrollBack:function(){I.verbose("Scrolling back to original page position"),(S?z:v)[0].scrollTo(0,a)},clear:{cache:function(){I.verbose("Clearing cached dimensions"),I.cache={}}},set:{observeAttributes:function(e){M=!1!==e},autofocus:function(){var e=i.filter("[autofocus]"),t=i.filter(":input");(0<e.length?e:0<t.length?t:g).first().trigger("focus")},dimmerStyles:function(){s.blurring?b.addClass(c.blurring):b.removeClass(c.blurring)},bodyMargin:function(){var i=I.can.leftBodyScrollbar()?"left":"right";v.css((S?"margin-":"padding-")+i,E+"px"),v.find(l.bodyFixed.replace("right",i)).each(function(){var e=q(this),t="fixed"===e.css("position")?"padding-"+i:i;e.css(t,"calc("+e.css(t)+" + "+E+"px)")})},pushed:function(){v.addClass(c.pushed)},pushable:function(){v.addClass(c.pushable)},dimmed:function(){b.addClass(c.dimmed)},active:function(){g.addClass(c.active)},animating:function(){g.addClass(c.animating)},closing:function(){b.addClass(c.closing)},direction:function(e){e=e||I.get.direction(),g.addClass(c[e])},visible:function(){g.addClass(c.visible)},overlay:function(){g.addClass(c.overlay)}},remove:{inlineCSS:function(){I.debug("Removing inline css styles",r),r&&0<r.length&&r.remove()},keyboardShortcuts:function(){I.verbose("Removing keyboard shortcuts"),R.off("keydown"+f)},pushed:function(){v.removeClass(c.pushed)},pushable:function(){v.removeClass(c.pushable)},active:function(){g.removeClass(c.active)},animating:function(){g.removeClass(c.animating)},closing:function(){b.removeClass(c.closing)},direction:function(e){e=e||I.get.direction(),g.removeClass(c[e])},visible:function(){g.removeClass(c.visible)},overlay:function(){g.removeClass(c.overlay)}},get:{direction:function(){return g.hasClass(c.top)?c.top:g.hasClass(c.right)?c.right:g.hasClass(c.bottom)?c.bottom:c.left},id:function(){return t},element:function(){return g},settings:function(){return s}},can:{leftBodyScrollbar:function(){return void 0===I.cache.leftBodyScrollbar&&(I.cache.leftBodyScrollbar=I.is.rtl()&&(I.is.iframe&&!I.is.firefox()||I.is.safari()||I.is.edge()||I.is.ie())),I.cache.leftBodyScrollbar}},save:{focus:function(){0<q(Z.activeElement).closest(g).length||(e=q(Z.activeElement).trigger("blur"))},bodyMargin:function(){k=v.css((S?"margin-":"padding-")+(I.can.leftBodyScrollbar()?"left":"right"));var e=parseInt(k.replace(/[^\d.]/g,""),10),t=S?H.innerWidth-Z.documentElement.clientWidth:v[0].offsetWidth-v[0].clientWidth;E=e+t}},is:{safari:function(){return void 0===I.cache.isSafari&&(I.cache.isSafari=/constructor/i.test(H.HTMLElement)||!!H.ApplePaySession),I.cache.isSafari},edge:function(){return void 0===I.cache.isEdge&&(I.cache.isEdge=!!H.setImmediate&&!I.is.ie()),I.cache.isEdge},firefox:function(){return void 0===I.cache.isFirefox&&(I.cache.isFirefox=!!H.InstallTrigger),I.cache.isFirefox},iframe:function(){return!(self===top)},ie:function(){var e,t;return void 0===I.cache.isIE&&(e=!H.ActiveXObject&&"ActiveXObject"in H,t="ActiveXObject"in H,I.cache.isIE=e||t),I.cache.isIE},mobile:function(){var e=navigator.userAgent;return e.match(h.mobile)?(I.verbose("Browser was found to be mobile",e),!0):(I.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!I.is.visible()},visible:function(){return g.hasClass(c.visible)},animating:function(){return v.hasClass(c.animating)},rtl:function(){return void 0===I.cache.isRTL&&(I.cache.isRTL="rtl"===g.attr("dir")||"rtl"===g.css("direction")||"rtl"===B.attr("dir")||"rtl"===B.css("direction")||"rtl"===v.attr("dir")||"rtl"===v.css("direction")),I.cache.isRTL}},has:{configActions:function(){return Array.isArray(s.actions)&&0<s.actions.length},scrollbar:function(){return S||"hidden"!==v.css("overflow-y")}},restore:{focus:function(){e&&0<e.length&&s.restoreFocus&&e.trigger("focus")},bodyMargin:function(){var i=I.can.leftBodyScrollbar()?"left":"right";v.css((S?"margin-":"padding-")+i,k),v.find(l.bodyFixed.replace("right",i)).each(function(){var e=q(this),t="fixed"===e.css("position")?"padding-"+i:i;e.css(t,"")})}},helpers:{deQuote:function(e){return String(e).replace(/"/g,"")},escape:function(e,t){var i;return!t&&(i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},/["&'<>`]/.test(e))?(e=e.replace(/&(?![\d#a-z]{1,12};)/gi,"&amp;")).replace(/["'<>`]/g,function(e){return i[e]}):e}},setting:function(e,t){if(I.debug("Changing setting",e,t),q.isPlainObject(e))q.extend(!0,s,e);else{if(void 0===t)return s[e];q.isPlainObject(s[e])?q.extend(!0,s[e],t):s[e]=t}},internal:function(e,t){if(q.isPlainObject(e))q.extend(!0,I,e);else{if(void 0===t)return I[e];I[e]=t}},debug:function(){!s.silent&&s.debug&&(s.performance?I.performance.log(arguments):(I.debug=Function.prototype.bind.call(console.info,console,s.name+":"),I.debug.apply(console,arguments)))},verbose:function(){!s.silent&&s.verbose&&s.debug&&(s.performance?I.performance.log(arguments):(I.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),I.verbose.apply(console,arguments)))},error:function(){s.silent||(I.error=Function.prototype.bind.call(console.error,console,s.name+":"),I.error.apply(console,arguments))},performance:{log:function(e){var t,i;s.performance&&(i=(t=Date.now())-(F||t),F=t,N.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":i})),clearTimeout(I.performance.timer),I.performance.timer=setTimeout(function(){I.performance.display()},500)},display:function(){var e=s.name+":",i=0;F=!1,clearTimeout(I.performance.timer),q.each(N,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<N.length&&(console.groupCollapsed(e),console.table?console.table(N):q.each(N,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),N=[]}},invoke:function(n,e,t){var r,o,i,a=C;return e=e||U,t=w||t,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,q.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!q.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):q.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:I.error(p.method,n),!1);a=a[i]})),G(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(L)?L.push(i):void 0!==L?L=[L,i]:void 0!==i&&(L=i),o}};V?(void 0===C&&(G(s.templates[j])&&(s.autoShow=!0,s.className.flyout=s.className.template,s=q.extend(!0,{},s,s.templates[j].apply(I,U)),c=s.className,d=s.fields,p=s.error),I.initialize()),G(s.templates[j])||I.invoke(j)):(void 0!==C&&C.invoke("destroy"),I.initialize(),L=g)}),void 0!==L?L:this},q.flyout=q.fn.flyout,q.fn.flyout.settings={name:"Flyout",namespace:"flyout",silent:!1,debug:!1,verbose:!1,performance:!0,context:"body",exclusive:!1,closable:!0,autofocus:!0,restoreFocus:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,autoShow:!1,keyboardShortcuts:!0,title:"",content:"",class:"",classTitle:"",classContent:"",classActions:"",closeIcon:!1,actions:!1,preserveHTML:!0,fields:{class:"class",text:"text",icon:"icon",click:"click"},onChange:function(){},onShow:function(){},onHide:function(){return!0},onHidden:!1,onVisible:function(){},onApprove:function(){},onDeny:function(){},keys:{space:32,enter:13,escape:27,tab:9},className:{flyout:"ui flyout",close:"close icon",header:"ui header",content:"content",actions:"actions",active:"active",animating:"animating",blurring:"blurring",closing:"closing",dimmed:"dimmed",locked:"locked",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible",overlay:"overlay",fullscreen:"fullscreen",template:"ui flyout",button:"ui button",ok:"positive",cancel:"negative",prompt:"ui fluid input"},selector:{bodyFixed:"> .ui.fixed.menu, > .ui.right.toast-container, > .ui.right.sidebar, > .ui.right.flyout, > .ui.fixed.nag, > .ui.fixed.nag > .close",fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",flyout:".ui.flyout",header:".ui.header",content:".content",actions:".actions",close:".close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel"},regExp:{mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedFlyout:"Had to move flyout. For optimal performance make sure flyout and pusher are direct children of your body tag",notFound:"There were no elements that matched the specified selector"},text:{ok:"Ok",cancel:"Cancel",close:"Close"}},q.fn.flyout.settings.templates={getArguments:function(e){return e=[].slice.call(e),q.isPlainObject(e[0])?q.extend({handler:function(){},content:"",title:""},e[0]):(G(e[e.length-1])||e.push(function(){}),{handler:e.pop(),content:e.pop()||"",title:e.pop()||""})},alert:function(){var e=this.get.settings(),t=e.templates.getArguments(arguments);return{title:t.title,content:t.content,actions:[{text:e.text.ok,class:e.className.ok,click:t.handler}]}},confirm:function(){var e=this.get.settings(),t=e.templates.getArguments(arguments);return{title:t.title,content:t.content,actions:[{text:e.text.ok,class:e.className.ok,click:function(){t.handler(!0)}},{text:e.text.cancel,class:e.className.cancel,click:function(){t.handler(!1)}}]}},prompt:function(){var t=this,e=this.get.settings(),i=e.templates.getArguments(arguments);return 0===q(q.parseHTML(i.content)).filter(".ui.input").length&&(i.content+='<p><div class="'+e.className.prompt+'"><input placeholder="'+this.helpers.deQuote(i.placeholder||"")+'" type="text" value="'+this.helpers.deQuote(i.defaultValue||"")+'"></div></p>'),{title:i.title,content:i.content,actions:[{text:e.text.ok,class:e.className.ok,click:function(){var e=t.get.settings(),e=t.get.element().find(e.selector.prompt)[0];i.handler(q(e).val())}},{text:e.text.cancel,class:e.className.cancel,click:function(){i.handler(null)}}]}}}})(jQuery,window,document),((H,Z,G)=>{function W(e){return"function"==typeof e&&"number"!=typeof e.nodeType}Z=void 0!==Z&&Z.Math===Math?Z:globalThis,H.fn.modal=function(z){var R,e=H(this),O=H(Z),B=H(G),F=H("body"),N=Date.now(),j=[],V=z,U="string"==typeof V,$=[].slice.call(arguments,1),q=function(e,t){var i;return 0<=[Z,G].indexOf(e)?i=F:0===(i=H(t.document).find(e)).length&&(i=t.frameElement?q(e,t.parent):F),i};return e.each(function(){var i,r,o,e,n,t,a,s,l,c,u,d=H.isPlainObject(z)?H.extend(!0,{},H.fn.modal.settings,z):H.extend({},H.fn.modal.settings),h=d.selector,p=d.className,f=d.namespace,m=d.fields,g=d.error,v="."+f,_="module-"+f,y=H(this),b=q(d.context,Z),x=b[0]===F[0],w=y.find(h.closeIcon),C=y.hasClass("modal"),T=this,S=C?y.data(_):void 0,k=!1,E="",A="",P=!1,M=!1,I=!1,D=!1,L={initialize:function(){var o;L.create.id(),C||(L.create.modal(),W(d.onHidden))||(d.onHidden=function(){L.destroy(),y.remove()}),y.addClass(d.class),""!==d.title&&y.find(h.title).html(L.helpers.escape(d.title,d.preserveHTML)).addClass(d.classTitle),""!==d.content&&y.find(h.content).html(L.helpers.escape(d.content,d.preserveHTML)).addClass(d.classContent),L.has.configActions()&&(0===(o=y.find(h.actions).addClass(d.classActions)).length?o=H("<div/>",{class:p.actions+" "+(d.classActions||"")}).appendTo(y):o.empty(),d.actions.forEach(function(e){var t=e[m.icon]?"<i "+(e[m.text]?'aria-hidden="true"':"")+' class="'+L.helpers.deQuote(e[m.icon])+' icon"></i>':"",i=L.helpers.escape(e[m.text]||"",d.preserveHTML),n=L.helpers.deQuote(e[m.class]||""),r=e[m.click]&&W(e[m.click])?e[m.click]:function(){};o.append(H("<button/>",{html:t+i,"aria-label":(e[m.text]||e[m.icon]||"").replace(/<[^>]+(>|$)/g,""),class:p.button+" "+n,on:{click:function(){var e=H(this);e.is(h.approve)||e.is(h.deny)||!1===r.call(T,y)||L.hide()}}}))})),L.cache={},L.verbose("Initializing dimmer",b),L.create.dimmer(),d.allowMultiple&&L.create.innerDimmer(),d.centered||y.addClass("top aligned"),L.refreshModals(),L.bind.events(),L.observeChanges(),L.instantiate(),d.autoShow&&L.show()},instantiate:function(){L.verbose("Storing instance of modal"),S=L,y.data(_,S)},create:{modal:function(){var e;y=H("<div/>",{class:p.modal,role:"dialog","aria-modal":!0}),d.closeIcon&&(w=H("<i/>",{class:p.close,role:"button",tabindex:0,"aria-label":d.text.close}),y.append(w)),""!==d.title&&(e="_"+L.get.id()+"title",y.attr("aria-labelledby",e),H("<div/>",{class:p.title,id:e}).appendTo(y)),""!==d.content&&(e="_"+L.get.id()+"desc",y.attr("aria-describedby",e),H("<div/>",{class:p.content,id:e}).appendTo(y)),L.has.configActions()&&H("<div/>",{class:p.actions}).appendTo(y),b.append(y),T=y[0]},dimmer:function(){var e={debug:d.debug,dimmerName:"modals"},e=H.extend(!0,e,d.dimmerSettings);void 0===H.fn.dimmer?L.error(g.dimmer):(L.debug("Creating dimmer"),n=b.dimmer(e),P=L.is.scrolling(),d.detachable?(L.verbose("Modal is detachable, moving content into dimmer"),n.dimmer("add content",y)):L.set.undetached(),t=n.dimmer("get dimmer"))},id:function(){c=(Math.random().toString(16)+"000000000").slice(2,10),l="."+c,L.verbose("Creating unique id for element",c)},innerDimmer:function(){0===y.find(h.dimmer).length&&H("<div/>",{class:p.innerDimmer}).prependTo(y)}},destroy:function(){u&&u.disconnect(),L.verbose("Destroying previous modal"),y.removeData(_).off(v),O.off(l),b.off(l),t.off(l),w.off(l),i&&i.off(l),b.dimmer("destroy")},observeChanges:function(){"MutationObserver"in Z&&((u=new MutationObserver(function(e){function r(e){for(var t=[],i=0,n=e.length;i<n;i++)Array.prototype.push.apply(t,r(e[i].childNodes)),t.push(e[i]);return t}var i=!1,n=!1,o=!0;e.every(function(e){var t;return"attributes"===e.type?D&&("disabled"===e.attributeName||0<H(e.target).find(":input").addBack(":input").filter(":visible").length)&&(n=!0):(i=!0,t=H(r(e.addedNodes)).filter("a[href], [tabindex], :input:enabled").filter(":visible"),e=H(r(e.removedNodes)).filter("a[href], [tabindex], :input"),(0<t.length||0<e.length)&&(n=!0,0<t.filter(":input").length||0<e.filter(":input").length)&&(o=!1)),!n}),i&&d.observeChanges&&(L.debug("DOM tree modified, refreshing"),L.refresh()),n&&L.refreshInputs(o)})).observe(T,{attributeFilter:["class","disabled"],attributes:!0,childList:!0,subtree:!0}),L.debug("Setting up mutation observer",u))},refresh:function(){L.remove.scrolling(),L.cacheSizes(),L.can.useFlex()||L.set.modalOffset(),L.set.screenHeight(),L.set.type()},refreshModals:function(){o=y.siblings(h.modal),r=o.add(y)},refreshInputs:function(e){i&&i.off("keydown"+l),0===(i=y.find("a[href], [tabindex], :input:enabled").filter(":visible").filter(function(){return 0===H(this).closest(".disabled").length})).filter(":input").length?(i=y.add(i),y.attr("tabindex",-1)):y.removeAttr("tabindex"),i.first().on("keydown"+l,L.event.inputKeyDown.first),i.last().on("keydown"+l,L.event.inputKeyDown.last),!e&&d.autofocus&&0===i.filter(":focus").length&&L.set.autofocus()},attachEvents:function(e,t){var i=H(e);t=W(L[t])?L[t]:L.toggle,0<i.length?(L.debug("Attaching modal events to element",e,t),i.off(v).on("click"+v,t)):L.error(g.notFound,e)},bind:{events:function(){L.verbose("Attaching events"),y.on("click"+v,h.close,L.event.close).on("click"+v,h.approve,L.event.approve).on("click"+v,h.deny,L.event.deny),w.on("keyup"+l,L.event.closeKeyUp),O.on("resize"+l,L.event.resize).on("focus"+l,L.event.focus),b.on("click"+l,L.event.click)},scrollLock:function(){n[0].addEventListener("touchmove",L.event.preventScroll,{passive:!1})}},unbind:{scrollLock:function(){n[0].removeEventListener("touchmove",L.event.preventScroll,{passive:!1})}},get:{id:function(){return c},element:function(){return y},settings:function(){return d}},event:{approve:function(){k||!1===d.onApprove.call(T,H(this))?L.verbose("Approve callback returned false cancelling hide"):(k=!0,L.hide(function(){k=!1}))},preventScroll:function(e){-1!==e.target.className.indexOf("dimmer")&&e.preventDefault()},deny:function(){k||!1===d.onDeny.call(T,H(this))?L.verbose("Deny callback returned false cancelling hide"):(k=!0,L.hide(function(){k=!1}))},close:function(){L.hide()},closeKeyUp:function(e){(e=e.which)!==d.keys.enter&&e!==d.keys.space||!y.hasClass(p.front)||L.hide()},inputKeyDown:{first:function(e){e.which===d.keys.tab&&e.shiftKey&&(i.last().trigger("focus"),e.preventDefault())},last:function(e){e.which!==d.keys.tab||e.shiftKey||(i.first().trigger("focus"),e.preventDefault())}},mousedown:function(e){var t=H(e.target),i=L.is.rtl();(a=0<t.closest(h.modal).length)&&L.verbose("Mouse down event registered inside the modal"),(s=L.is.scrolling()&&(!i&&O.outerWidth()-d.scrollbarWidth<=e.clientX||i&&d.scrollbarWidth>=e.clientX))&&L.verbose("Mouse down event registered inside the scrollbar")},mouseup:function(e){if(d.closable)if(a)L.debug("Dimmer clicked but mouse down was initially registered inside the modal");else if(s)L.debug("Dimmer clicked but mouse down was initially registered inside the scrollbar");else{var t=0<H(e.target).closest(h.modal).length,e=H.contains(G.documentElement,e.target);if(!t&&e&&L.is.active()&&y.hasClass(p.front)){if(L.debug("Dimmer clicked, hiding all modals"),d.allowMultiple){if(!L.hideAll())return}else if(!L.hide())return;L.remove.clickaway()}}else L.verbose("Dimmer clicked but closable setting is disabled")},debounce:function(e,t){clearTimeout(L.timer),L.timer=setTimeout(function(){e()},t)},keyboard:function(e){e.which===d.keys.escape&&(d.closable?(L.debug("Escape key pressed hiding modal"),y.hasClass(p.front)&&L.hide()):L.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){n.dimmer("is active")&&(L.is.animating()||L.is.active())&&requestAnimationFrame(L.refresh)},focus:function(){I=!0},click:function(e){I&&G.activeElement!==e.target&&n.dimmer("is active")&&L.is.active()&&d.autofocus&&0===H(G.activeElement).closest(h.modal).length&&requestAnimationFrame(L.set.autofocus),I=!1}},toggle:function(){L.is.active()||L.is.animating()?L.hide():L.show()},show:function(e){e=W(e)?e:function(){},L.refreshModals(),L.set.dimmerSettings(),L.set.dimmerStyles(),L.showModal(e)},hide:function(e){return e=W(e)?e:function(){},L.refreshModals(),L.hideModal(e)},showModal:function(e){e=W(e)?e:function(){},L.is.animating()||!L.is.active()?!1===d.onShow.call(T)?L.verbose("Show callback returned false cancelling show"):(M=L.has.scrollbar(),L.showDimmer(),L.cacheSizes(),M&&L.set.bodyMargin(),L.can.useFlex()?L.remove.legacy():(L.set.legacy(),L.set.modalOffset(),L.debug("Using non-flex legacy modal positioning.")),L.set.screenHeight(),L.set.type(),L.set.clickaway(),!d.allowMultiple&&L.others.active()?L.hideOthers(L.showModal):(k=!1,d.allowMultiple&&(L.others.active()&&o.filter("."+p.active).find(h.dimmer).removeClass("out").addClass("transition fade in active"),d.detachable)&&y.detach().appendTo(t),d.transition&&void 0!==H.fn.transition?(L.debug("Showing modal with css animations"),L.set.observeAttributes(!1),y.transition({debug:d.debug,verbose:d.verbose,silent:d.silent,animation:(d.transition.showMethod||d.transition)+" in",queue:d.queue,duration:d.transition.showDuration||d.duration,useFailSafe:!0,onComplete:function(){d.onVisible.apply(T),d.keyboardShortcuts&&L.add.keyboardShortcuts(),L.save.focus(),L.set.active(),L.refreshInputs(),requestAnimationFrame(L.set.observeAttributes),e()}})):L.error(g.noTransition))):L.debug("Modal is already visible")},hideModal:function(e,t,i){var n=o.filter("."+p.active).last();if(e=W(e)?e:function(){},!1===d.onHide.call(T,H(this)))return L.verbose("Hide callback returned false cancelling hide"),k=!1;(L.is.animating()||L.is.active())&&(L.debug("Hiding modal"),d.transition&&void 0!==H.fn.transition?(L.remove.active(),L.set.observeAttributes(!1),y.transition({debug:d.debug,verbose:d.verbose,silent:d.silent,animation:(d.transition.hideMethod||d.transition)+" out",queue:d.queue,duration:d.transition.hideDuration||d.duration,useFailSafe:!0,onStart:function(){L.others.active()||L.others.animating()||t?d.allowMultiple&&(i?r:n).find(h.dimmer).removeClass("in").addClass("out"):L.hideDimmer(),d.keyboardShortcuts&&!L.others.active()&&L.remove.keyboardShortcuts()},onComplete:function(){L.unbind.scrollLock(),L.remove.active(),d.allowMultiple&&(n.addClass(p.front),y.removeClass(p.front),(i?r:n).find(h.dimmer).removeClass("active")),W(d.onHidden)&&d.onHidden.call(T),L.remove.dimmerStyles(),L.restore.focus(),e()}})):L.error(g.noTransition))},showDimmer:function(){n.dimmer("is animating")||!n.dimmer("is active")?(M&&(x||t.css("top",n.scrollTop()),L.save.bodyMargin()),L.debug("Showing dimmer"),n.dimmer("show")):L.debug("Dimmer already visible")},hideDimmer:function(){n.dimmer("is animating")||n.dimmer("is active")?(L.unbind.scrollLock(),n.dimmer("hide",function(){M&&L.restore.bodyMargin(),L.remove.clickaway(),L.remove.screenHeight()})):L.debug("Dimmer is not visible cannot hide")},hideAll:function(i){var n,e=r.filter("."+p.active+", ."+p.animating);if(i=W(i)?i:function(){},0<e.length)return L.debug("Hiding all visible modals"),n=!0,H(e.get().reverse()).each(function(e,t){n=n&&H(t).modal("hide modal",i,!1,!0)}),n&&L.hideDimmer(),n},hideOthers:function(e){var t=o.filter("."+p.active+", ."+p.animating);e=W(e)?e:function(){},0<t.length&&(L.debug("Hiding other modals",o),t.modal("hide modal",e,!0))},others:{active:function(){return 0<o.filter("."+p.active).length},animating:function(){return 0<o.filter("."+p.animating).length}},add:{keyboardShortcuts:function(){L.verbose("Adding keyboard shortcuts"),B.on("keydown"+v,L.event.keyboard)}},save:{focus:function(){0<H(G.activeElement).closest(y).length||(e=H(G.activeElement).trigger("blur"))},bodyMargin:function(){E=b.css((x?"margin-":"padding-")+(L.can.leftBodyScrollbar()?"left":"right"));var e=parseInt(E.replace(/[^\d.]/g,""),10),t=x?Z.innerWidth-G.documentElement.clientWidth:b[0].offsetWidth-b[0].clientWidth;A=e+t}},restore:{focus:function(){e&&0<e.length&&d.restoreFocus&&e.trigger("focus")},bodyMargin:function(){var i=L.can.leftBodyScrollbar()?"left":"right";b.css((x?"margin-":"padding-")+i,E),b.find(h.bodyFixed.replace("right",i)).each(function(){var e=H(this),t="fixed"===e.css("position")?"padding-"+i:i;e.css(t,"")})}},remove:{active:function(){y.removeClass(p.active)},legacy:function(){y.removeClass(p.legacy)},clickaway:function(){d.detachable||y.off("mousedown"+l),t.off("mousedown"+l),t.off("mouseup"+l)},dimmerStyles:function(){t.removeClass(p.inverted),n.removeClass(p.blurring)},bodyStyle:function(){""===b.attr("style")&&(L.verbose("Removing style attribute"),b.removeAttr("style"))},screenHeight:function(){L.debug("Removing page height"),b.css("height",""),L.remove.bodyStyle()},keyboardShortcuts:function(){L.verbose("Removing keyboard shortcuts"),B.off("keydown"+v)},scrolling:function(){P||n.removeClass(p.scrolling),y.removeClass(p.scrolling)}},cacheSizes:function(){y.addClass(p.loading);var e=y.prop("scrollHeight"),t=y.outerWidth(),i=y.outerHeight();void 0!==L.cache.pageHeight&&0===i||(H.extend(L.cache,{pageHeight:B.outerHeight(),width:t,height:i+d.offset,scrollHeight:e+d.offset,contextHeight:(x?O:n).height()}),L.cache.topOffset=-L.cache.height/2),y.removeClass(p.loading),L.debug("Caching modal and container sizes",L.cache)},helpers:{deQuote:function(e){return String(e).replace(/"/g,"")},escape:function(e,t){var i;return!t&&(i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},/["&'<>`]/.test(e))?(e=e.replace(/&(?![\d#a-z]{1,12};)/gi,"&amp;")).replace(/["'<>`]/g,function(e){return i[e]}):e}},can:{leftBodyScrollbar:function(){return void 0===L.cache.leftBodyScrollbar&&(L.cache.leftBodyScrollbar=L.is.rtl()&&(L.is.iframe&&!L.is.firefox()||L.is.safari()||L.is.edge()||L.is.ie())),L.cache.leftBodyScrollbar},useFlex:function(){return"auto"===d.useFlex?d.detachable&&!L.is.ie():(d.useFlex&&L.is.ie()?L.debug("useFlex true is not supported in IE"):d.useFlex&&!d.detachable&&L.debug("useFlex true in combination with detachable false is not supported"),d.useFlex)},fit:function(){var e=L.cache.contextHeight,t=L.cache.contextHeight/2,i=L.cache.topOffset,n=L.cache.scrollHeight,r=L.cache.height,o=d.padding;return r<n?t+i+n+o<e:r+2*o<e}},has:{configActions:function(){return Array.isArray(d.actions)&&0<d.actions.length},scrollbar:function(){return x||"hidden"!==b.css("overflow-y")}},is:{active:function(){return y.hasClass(p.active)},ie:function(){var e,t;return void 0===L.cache.isIE&&(e=!Z.ActiveXObject&&"ActiveXObject"in Z,t="ActiveXObject"in Z,L.cache.isIE=e||t),L.cache.isIE},animating:function(){return y.transition("is animating")},scrolling:function(){return n.hasClass(p.scrolling)},modernBrowser:function(){return!(Z.ActiveXObject||"ActiveXObject"in Z)},rtl:function(){return void 0===L.cache.isRTL&&(L.cache.isRTL="rtl"===y.attr("dir")||"rtl"===y.css("direction")||"rtl"===F.attr("dir")||"rtl"===F.css("direction")||"rtl"===b.attr("dir")||"rtl"===b.css("direction")),L.cache.isRTL},safari:function(){return void 0===L.cache.isSafari&&(L.cache.isSafari=/constructor/i.test(Z.HTMLElement)||!!Z.ApplePaySession),L.cache.isSafari},edge:function(){return void 0===L.cache.isEdge&&(L.cache.isEdge=!!Z.setImmediate&&!L.is.ie()),L.cache.isEdge},firefox:function(){return void 0===L.cache.isFirefox&&(L.cache.isFirefox=!!Z.InstallTrigger),L.cache.isFirefox},iframe:function(){return!(self===top)}},set:{observeAttributes:function(e){D=!1!==e},autofocus:function(){var e=i.filter("[autofocus]"),t=i.filter(":input");(0<e.length?e:0<t.length?t:y).first().trigger("focus")},bodyMargin:function(){var i=L.can.leftBodyScrollbar()?"left":"right";(d.detachable||L.can.fit())&&b.css((x?"margin-":"padding-")+i,A+"px"),b.find(h.bodyFixed.replace("right",i)).each(function(){var e=H(this),t="fixed"===e.css("position")?"padding-"+i:i;e.css(t,"calc("+e.css(t)+" + "+A+"px)")})},clickaway:function(){d.detachable||y.on("mousedown"+l,L.event.mousedown),t.on("mousedown"+l,L.event.mousedown),t.on("mouseup"+l,L.event.mouseup)},dimmerSettings:function(){var e;void 0===H.fn.dimmer?L.error(g.dimmer):(e={debug:d.debug,dimmerName:"modals",closable:"auto",useFlex:L.can.useFlex(),duration:{show:d.transition.showDuration||d.duration,hide:d.transition.hideDuration||d.duration}},e=H.extend(!0,e,d.dimmerSettings),d.inverted&&(e.variation=void 0!==e.variation?e.variation+" inverted":"inverted"),b.dimmer("setting",e))},dimmerStyles:function(){d.inverted?t.addClass(p.inverted):t.removeClass(p.inverted),d.blurring?n.addClass(p.blurring):n.removeClass(p.blurring)},modalOffset:function(){var e;d.detachable?y.css({marginTop:!y.hasClass("aligned")&&L.can.fit()?-L.cache.height/2:d.padding/2,marginLeft:-L.cache.width/2}):(e=L.can.fit(),y.css({top:!y.hasClass("aligned")&&e?B.scrollTop()+(L.cache.contextHeight-L.cache.height)/2:!e||y.hasClass("top")?B.scrollTop()+d.padding:B.scrollTop()+(L.cache.contextHeight-L.cache.height-d.padding),marginLeft:-L.cache.width/2})),L.verbose("Setting modal offset for legacy mode")},screenHeight:function(){L.can.fit()?b.css("height",""):y.hasClass("bottom")||(L.debug("Modal is taller than page content, resizing page height"),b.css("height",L.cache.height+2*d.padding+"px"))},active:function(){y.addClass(p.active+" "+p.front),o.filter("."+p.active).removeClass(p.front)},scrolling:function(){n.addClass(p.scrolling),y.addClass(p.scrolling),L.unbind.scrollLock()},legacy:function(){y.addClass(p.legacy)},type:function(){L.can.fit()?(L.verbose("Modal fits on screen"),L.others.active()||L.others.animating()||(L.remove.scrolling(),L.bind.scrollLock())):y.hasClass("bottom")?L.verbose("Bottom aligned modal not fitting on screen is unsupported for scrolling"):(L.verbose("Modal cannot fit on screen setting to scrolling"),L.set.scrolling())},undetached:function(){n.addClass(p.undetached)}},setting:function(e,t){if(L.debug("Changing setting",e,t),H.isPlainObject(e))H.extend(!0,d,e);else{if(void 0===t)return d[e];H.isPlainObject(d[e])?H.extend(!0,d[e],t):d[e]=t}},internal:function(e,t){if(H.isPlainObject(e))H.extend(!0,L,e);else{if(void 0===t)return L[e];L[e]=t}},debug:function(){!d.silent&&d.debug&&(d.performance?L.performance.log(arguments):(L.debug=Function.prototype.bind.call(console.info,console,d.name+":"),L.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?L.performance.log(arguments):(L.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),L.verbose.apply(console,arguments)))},error:function(){d.silent||(L.error=Function.prototype.bind.call(console.error,console,d.name+":"),L.error.apply(console,arguments))},performance:{log:function(e){var t,i;d.performance&&(i=(t=Date.now())-(N||t),N=t,j.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":i})),clearTimeout(L.performance.timer),L.performance.timer=setTimeout(function(){L.performance.display()},500)},display:function(){var e=d.name+":",i=0;N=!1,clearTimeout(L.performance.timer),H.each(j,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<j.length&&(console.groupCollapsed(e),console.table?console.table(j):H.each(j,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),j=[]}},invoke:function(n,e,t){var r,o,i,a=S;return e=e||$,t=t||T,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,H.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!H.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):H.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:L.error(g.method,n),!1);a=a[i]})),W(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(R)?R.push(i):void 0!==R?R=[R,i]:void 0!==i&&(R=i),o}};U?(void 0===S&&(W(d.templates[V])&&(d.autoShow=!0,d.className.modal=d.className.template,d=H.extend(!0,{},d,d.templates[V].apply(L,$)),p=d.className,m=d.fields,g=d.error),L.initialize()),W(d.templates[V])||L.invoke(V)):(void 0!==S&&S.invoke("destroy"),L.initialize(),R=y)}),void 0!==R?R:this},H.modal=H.fn.modal,H.fn.modal.settings={name:"Modal",namespace:"modal",useFlex:"auto",offset:0,silent:!1,debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,restoreFocus:!0,autoShow:!1,inverted:!1,blurring:!1,centered:!0,dimmerSettings:{closable:!1,useCSS:!0},keyboardShortcuts:!0,context:"body",queue:!1,duration:500,transition:"scale",padding:50,scrollbarWidth:10,title:"",content:"",class:"",classTitle:"",classContent:"",classActions:"",closeIcon:!1,actions:!1,preserveHTML:!0,fields:{class:"class",text:"text",icon:"icon",click:"click"},onShow:function(){},onVisible:function(){},onHide:function(){return!0},onHidden:!1,onApprove:function(){return!0},onDeny:function(){return!0},keys:{space:32,enter:13,escape:27,tab:9},selector:{title:"> .header",content:"> .content",actions:"> .actions",close:"> .close",closeIcon:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal",dimmer:"> .ui.dimmer",bodyFixed:"> .ui.fixed.menu, > .ui.right.toast-container, > .ui.right.sidebar, > .ui.fixed.nag, > .ui.fixed.nag > .close",prompt:".ui.input > input"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",inverted:"inverted",legacy:"legacy",loading:"loading",scrolling:"scrolling",undetached:"undetached",front:"front",close:"close icon",button:"ui button",modal:"ui modal",title:"header",content:"content",actions:"actions",template:"ui tiny modal",ok:"positive",cancel:"negative",prompt:"ui fluid input",innerDimmer:"ui inverted dimmer"},text:{ok:"Ok",cancel:"Cancel",close:"Close"}},H.fn.modal.settings.templates={getArguments:function(e){return e=[].slice.call(e),H.isPlainObject(e[0])?H.extend({handler:function(){},content:"",title:""},e[0]):(W(e[e.length-1])||e.push(function(){}),{handler:e.pop(),content:e.pop()||"",title:e.pop()||""})},alert:function(){var e=this.get.settings(),t=e.templates.getArguments(arguments),i=t.handler;return{title:t.title,content:t.content,onApprove:i,actions:[{text:e.text.ok,class:e.className.ok,click:i}]}},confirm:function(){function e(){n.handler(!0)}function t(){n.handler(!1)}var i=this.get.settings(),n=i.templates.getArguments(arguments);return{title:n.title,content:n.content,onApprove:e,onDeny:t,actions:[{text:i.text.ok,class:i.className.ok,click:e},{text:i.text.cancel,class:i.className.cancel,click:t}]}},prompt:function(){function e(){var e=i.get.settings(),e=i.get.element().find(e.selector.prompt)[0];r.handler(H(e).val())}function t(){r.handler(null)}var i=this,n=this.get.settings(),r=n.templates.getArguments(arguments);return 0===H(H.parseHTML(r.content)).filter(".ui.input").length&&(r.content+='<p><div class="'+this.helpers.deQuote(n.className.prompt)+'"><input placeholder="'+this.helpers.deQuote(r.placeholder||"")+'" type="text" value="'+this.helpers.deQuote(r.defaultValue||"")+'"></div></p>'),{title:r.title,content:r.content,onApprove:e,onDeny:t,actions:[{text:n.text.ok,class:n.className.ok,click:e},{text:n.text.cancel,class:n.className.cancel,click:t}]}}}})(jQuery,window,document),((x,w,C)=>{w=void 0!==w&&w.Math===Math?w:globalThis,x.fn.nag=function(h){var p,e=x(this),f=x("body"),m=Date.now(),g=[],v=h,_="string"==typeof v,y=[].slice.call(arguments,1),b=function(e,t){var i;return 0<=[w,C].indexOf(e)?i=x(e):0===(i=x(t.document).find(e)).length&&(i=t.frameElement?b(e,t.parent):f),i};return e.each(function(){var n,r=x.isPlainObject(h)?x.extend(!0,{},x.fn.nag.settings,h):x.extend({},x.fn.nag.settings),e=r.selector,s=r.error,t=r.namespace,i="."+t,o=t+"-module",a=x(this),l=r.context?b(r.context,w):f,c=this,u=a.data(o),d={initialize:function(){d.verbose("Initializing element"),"string"!=typeof r.value&&(r.value=JSON.stringify(r.value)),n=d.get.storage(),a.on("click"+i,e.close,d.dismiss).data(o,d),r.detachable&&a.parent()[0]!==l[0]&&a.detach().prependTo(l),0<r.displayTime&&setTimeout(function(){d.hide()},r.displayTime),d.show()},destroy:function(){d.verbose("Destroying instance"),a.removeData(o).off(i)},show:function(){if(d.should.show()&&!a.is(":visible")){if(!1===r.onShow.call(c))return d.debug("onShow callback returned false, cancelling nag animation"),!1;d.debug("Showing nag",r.animation.show),"fade"===r.animation.show?a.fadeIn(r.duration,r.easing,r.onVisible):a.slideDown(r.duration,r.easing,r.onVisible)}},hide:function(){if(!1===r.onHide.call(c))return d.debug("onHide callback returned false, cancelling nag animation"),!1;d.debug("Hiding nag",r.animation.hide),"fade"===r.animation.hide?a.fadeOut(r.duration,r.easing,r.onHidden):a.slideUp(r.duration,r.easing,r.onHidden)},dismiss:function(e){!1!==d.hide()&&r.storageMethod&&(d.debug("Dismissing nag",r.storageMethod,r.key,r.value,r.expires),d.storage.set(r.key,r.value)),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return r.persist?(d.debug("Persistent nag is set, can show nag"),!0):d.storage.get(r.key)!=r.value.toString()?(d.debug("Stored value is not set, can show nag",d.storage.get(r.key)),!0):(d.debug("Stored value is set, cannot show nag",d.storage.get(r.key)),!1)}},get:{expirationDate:function(e){if((e="number"==typeof e?new Date(Date.now()+864e5*e):e)instanceof Date&&e.getTime())return e.toUTCString();d.error(s.expiresFormat)},storage:function(){return"localstorage"===r.storageMethod&&void 0!==w.localStorage?(d.debug("Using local storage"),w.localStorage):"sessionstorage"===r.storageMethod&&void 0!==w.sessionStorage?(d.debug("Using session storage"),w.sessionStorage):"cookie"in C?(d.debug("Using cookie"),{setItem:function(e,t,i){e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),t=encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[B-D])/g,decodeURIComponent);var n,r="";for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r+="; "+n,"string"==typeof i[n])&&(r+="="+i[n].split(";")[0]);C.cookie=e+"="+t+r},getItem:function(e){for(var t=C.cookie.split("; "),i=0,n=t.length;i<n;i++){var r=t[i].split("=");if(e===r[0].replace(/(%[\da-f]{2})+/gi,decodeURIComponent))return r[1]||""}},removeItem:function(e,t){n.setItem(e,"",t)}}):void d.error(s.noStorage)},storageOptions:function(){var e={};return r.expires&&(e.expires=d.get.expirationDate(r.expires)),r.domain&&(e.domain=r.domain),r.path&&(e.path=r.path),r.secure&&(e.secure=r.secure),r.samesite&&(e.samesite=r.samesite),e}},clear:function(){d.storage.remove(r.key)},storage:{set:function(e,t){var i=d.get.storageOptions();n===w.localStorage&&i.expires&&(d.debug("Storing expiration value in localStorage",e,i.expires),n.setItem(e+r.expirationKey,i.expires)),d.debug("Value stored",e,t);try{n.setItem(e,t,i)}catch(e){d.error(s.setItem,e)}},get:function(e){var t,i=n.getItem(e);return n===w.localStorage&&null!=(t=n.getItem(e+r.expirationKey))&&new Date(t)<new Date&&(d.debug("Value in localStorage has expired. Deleting key",e),d.storage.remove(e),i=null),"undefined"!==i&&"null"!==i&&null!=i?i:void 0},remove:function(e){var t=d.get.storageOptions();t.expires=d.get.expirationDate(-1),n===w.localStorage&&n.removeItem(e+r.expirationKey),n.removeItem(e,t)}},setting:function(e,t){if(d.debug("Changing setting",e,t),x.isPlainObject(e))x.extend(!0,r,e);else{if(void 0===t)return r[e];x.isPlainObject(r[e])?x.extend(!0,r[e],t):r[e]=t}},internal:function(e,t){if(x.isPlainObject(e))x.extend(!0,d,e);else{if(void 0===t)return d[e];d[e]=t}},debug:function(){!r.silent&&r.debug&&(r.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,r.name+":"),d.debug.apply(console,arguments)))},verbose:function(){!r.silent&&r.verbose&&r.debug&&(r.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,r.name+":"),d.verbose.apply(console,arguments)))},error:function(){r.silent||(d.error=Function.prototype.bind.call(console.error,console,r.name+":"),d.error.apply(console,arguments))},performance:{log:function(e){var t,i;r.performance&&(i=(t=Date.now())-(m||t),m=t,g.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:c,"Execution Time":i})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(function(){d.performance.display()},500)},display:function(){var e=r.name+":",i=0;m=!1,clearTimeout(d.performance.timer),x.each(g,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<g.length&&(console.groupCollapsed(e),console.table?console.table(g):x.each(g,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),g=[]}},invoke:function(n,e,t){var r,o,i,a=u;return e=e||y,t=t||c,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,x.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!x.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):x.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:d.error(s.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(p)?p.push(i):void 0!==p?p=[p,i]:void 0!==i&&(p=i),o}};_?(void 0===u&&d.initialize(),d.invoke(v)):(void 0!==u&&u.invoke("destroy"),d.initialize())}),void 0!==p?p:this},x.fn.nag.settings={name:"Nag",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},context:!1,detachable:!1,expires:30,domain:!1,path:"/",secure:!1,samesite:!1,storageMethod:"cookie",key:"nag",value:"dismiss",expirationKey:"ExpirationDate",error:{noStorage:"Unsupported storage method",method:"The method you called is not defined.",setItem:"Unexpected error while setting value",expiresFormat:'"expires" must be a number of days or a Date Object'},className:{bottom:"bottom",fixed:"fixed"},selector:{close:"> .close.icon"},duration:500,easing:"easeOutQuad",onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){}},x.extend(x.easing,{easeOutQuad:function(e){return 1-(1-e)*(1-e)}})})(jQuery,window,document),((O,B,F)=>{function N(e){return"function"==typeof e&&"number"!=typeof e.nodeType}B=void 0!==B&&B.Math===Math?B:globalThis,O.fn.popup=function(T){var S,e=O(this),k=O(F),E=O(B),A=O("body"),P="ontouchstart"in F.documentElement?"touchstart":"click",M=Date.now(),I=[],D=T,L="string"==typeof D,z=[].slice.call(arguments,1),R=function(e,t){var i;return 0<=[B,F].indexOf(e)?i=O(e):0===(i=O(t.document).find(e)).length&&(i=t.frameElement?R(e,t.parent):A),i};return e.each(function(){var c,s,e,t,i,u=O.isPlainObject(T)?O.extend(!0,{},O.fn.popup.settings,T):O.extend({},O.fn.popup.settings),r=u.selector,d=u.className,h=u.error,p=u.metadata,n=u.namespace,o="."+u.namespace,a="module-"+n,f=O(this),l=R(u.context,B),m=R(u.scrollContext,B),g=R(u.boundary,B),v=u.target?R(u.target,B):f,_=0,y=!1,b=!1,x=this,w=f.data(a),C={initialize:function(){C.debug("Initializing",f),C.createID(),C.bind.events(),!C.exists()&&u.preserve&&C.create(),u.observeChanges&&C.observeChanges(),C.instantiate()},instantiate:function(){C.verbose("Storing instance",C),w=C,f.data(a,w)},observeChanges:function(){"MutationObserver"in B&&((e=new MutationObserver(C.event.documentChanged)).observe(F,{childList:!0,subtree:!0}),C.debug("Setting up mutation observer",e))},refresh:function(){u.popup?c=k.find(u.popup).eq(0):u.inline&&(c=v.nextAll(r.popup).eq(0),u.popup=c),u.popup?(C.set.invisible(),s=C.get.offsetParent(),C.remove.invisible(),u.movePopup&&C.has.popup()&&C.get.offsetParent(c)[0]!==s[0]&&(C.debug("Moving popup to the same offset parent as target"),c.detach().appendTo(s))):s=u.inline?C.get.offsetParent(v):C.has.popup()?C.get.offsetParent(c):A,s.is("html")&&s[0]!==A[0]&&(C.debug("Setting page as offset parent"),s=A),C.get.variation()&&C.set.variation()},reposition:function(){C.refresh(),C.set.position()},destroy:function(){C.debug("Destroying previous module"),e&&e.disconnect(),c&&!u.preserve&&C.removePopup(),clearTimeout(C.hideTimer),clearTimeout(C.showTimer),C.unbind.close(),C.unbind.events(),f.removeData(a)},event:{start:function(e){var t=O.isPlainObject(u.delay)?u.delay.show:u.delay;clearTimeout(C.hideTimer),b&&!u.addTouchEvents||(C.showTimer=setTimeout(function(){C.show()},t))},end:function(){var e=O.isPlainObject(u.delay)?u.delay.hide:u.delay;clearTimeout(C.showTimer),C.hideTimer=setTimeout(function(){C.hide()},e)},touchstart:function(e){b=!0,u.addTouchEvents&&C.show()},resize:function(){C.is.visible()&&C.set.position()},documentChanged:function(e){[].forEach.call(e,function(e){e.removedNodes&&[].forEach.call(e.removedNodes,function(e){(e===x||0<O(e).find(x).length)&&(C.debug("Element removed from DOM, tearing down events"),C.destroy())})})},hideGracefully:function(e){var t=O(e.target),i=O.contains(F.documentElement,e.target),t=0<t.closest(r.popup).length;e&&!t&&i?(C.debug("Click occurred outside popup hiding popup"),C.hide()):C.debug("Click was inside popup, keeping popup open")}},create:function(){var e=v.next(r.popup),t=!u.popup&&0===e.length&&f.attr("title"),i=C.get.html(),n=C.get.title(),t=C.get.content(t);i||t||n?(C.debug("Creating pop-up html"),i=i||u.templates.popup({title:n,content:t}),c=O("<div/>").addClass(d.popup).data(p.activator,f).html(i),u.inline?(C.verbose("Inserting popup element inline",c),c.insertAfter(f)):(C.verbose("Appending popup element to body",c),c.appendTo(l)),C.refresh(),C.set.variation(),u.hoverable&&C.bind.popup(),u.onCreate.call(c,x)):u.popup?(k.find(u.popup).data(p.activator,f),C.verbose("Used popup specified in settings"),C.refresh(),u.hoverable&&C.bind.popup()):0<e.length?(C.verbose("Pre-existing popup found"),u.inline=!0,u.popup=e.data(p.activator,f),C.refresh(),u.hoverable&&C.bind.popup()):C.debug("No content specified skipping display",x)},createID:function(){i=(Math.random().toString(16)+"000000000").slice(2,10),t="."+i,C.verbose("Creating unique id for element",i)},toggle:function(){C.debug("Toggling pop-up"),C.is.hidden()?(C.debug("Popup is hidden, showing pop-up"),C.unbind.close(),C.show()):(C.debug("Popup is visible, hiding pop-up"),C.hide())},show:function(e){e=e||function(){},C.debug("Showing pop-up",u.transition),!C.is.hidden()||C.is.active()&&C.is.dropdown()||(C.exists()||C.create(),!1===u.onShow.call(c,x)?C.debug("onShow callback returned false, cancelling popup animation"):(u.preserve||u.popup||C.refresh(),c&&C.set.position()&&(C.save.conditions(),u.exclusive&&C.hideAll(),C.animate.show(e))))},hide:function(e){e=e||function(){},(C.is.visible()||C.is.animating())&&(!1===u.onHide.call(c,x)?C.debug("onHide callback returned false, cancelling popup animation"):(C.remove.visible(),C.unbind.close(),C.restore.conditions(),C.animate.hide(e)))},hideAll:function(){k.find(r.popup).filter("."+d.popupVisible).each(function(){O(this).data(p.activator).popup("hide")})},exists:function(){return!!c&&(u.inline||u.popup?C.has.popup():0<c.closest(l).length)},removePopup:function(){C.has.popup()&&!u.popup&&(C.debug("Removing popup",c),c.remove(),c=void 0,u.onRemove.call(c,x))},save:{conditions:function(){C.cache={title:f.attr("title")},C.cache.title&&f.removeAttr("title"),C.verbose("Saving original attributes",C.cache.title)}},restore:{conditions:function(){return C.cache&&C.cache.title&&(f.attr("title",C.cache.title),C.verbose("Restoring original attributes",C.cache.title)),!0}},supports:{svg:function(){return"undefined"!=typeof SVGGraphicsElement}},animate:{show:function(e){e=N(e)?e:function(){},u.transition&&C.can.useElement("transition")&&(C.set.visible(),c.transition({animation:(u.transition.showMethod||u.transition)+" in",queue:!1,debug:u.debug,verbose:u.verbose,silent:u.silent,duration:u.transition.showDuration||u.duration,onComplete:function(){C.bind.close(),e.call(c,x),u.onVisible.call(c,x)}}))},hide:function(e){e=N(e)?e:function(){},C.debug("Hiding pop-up"),u.transition&&void 0!==O.fn.transition?c.transition({animation:(u.transition.hideMethod||u.transition)+" out",queue:!1,duration:u.transition.hideDuration||u.duration,debug:u.debug,verbose:u.verbose,silent:u.silent,onComplete:function(){C.reset(),e.call(c,x),u.onHidden.call(c,x)}}):C.error(h.noTransition)}},change:{content:function(e){c.html(e)}},get:{html:function(){return f.removeData(p.html),f.data(p.html)||u.html},title:function(){return f.removeData(p.title),f.data(p.title)||u.title},content:function(e){return f.removeData(p.content),f.data(p.content)||u.content||e},variation:function(){return f.removeData(p.variation),f.data(p.variation)||u.variation},popup:function(){return c},popupOffset:function(){return c.offset()},calculations:function(){var e=C.get.offsetParent(c),t=v[0],i=g[0]===B,n=v.offset(),r=u.inline||u.popup&&u.movePopup?v.offsetParent().offset():{top:0,left:0},o=i?{top:0,left:0}:g.offset(),a={},i=i?{top:E.scrollTop(),left:E.scrollLeft()}:{top:0,left:0},a={target:{element:v[0],width:v.outerWidth(),height:v.outerHeight(),top:n.top-r.top,left:n.left-r.left,margin:{}},popup:{width:c.outerWidth(),height:c.outerHeight()},parent:{width:s.outerWidth(),height:s.outerHeight()},screen:{top:o.top,left:o.left,scroll:{top:i.top,left:i.left},width:g.width(),height:g.height()}};return e[0]!==s[0]&&(n=e.offset(),a.target.top-=n.top,a.target.left-=n.left,a.parent.width=e.outerWidth(),a.parent.height=e.outerHeight()),u.setFluidWidth&&C.is.fluid()&&(a.container={width:c.parent().outerWidth()},a.popup.width=a.container.width),a.target.margin.top=u.inline?parseInt(B.getComputedStyle(t).getPropertyValue("margin-top"),10):0,a.target.margin.left=u.inline?C.is.rtl()?parseInt(B.getComputedStyle(t).getPropertyValue("margin-right"),10):parseInt(B.getComputedStyle(t).getPropertyValue("margin-left"),10):0,a.boundary={top:(r=a.screen).top+r.scroll.top,bottom:r.top+r.scroll.top+r.height,left:r.left+r.scroll.left,right:r.left+r.scroll.left+r.width},a},id:function(){return i},startEvent:function(){return"hover"===u.on?"mouseenter":"focus"===u.on&&"focus"},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"===u.on?"mouseleave":"focus"===u.on&&"blur"},distanceFromBoundary:function(e,t){var i={},n=(t=t||C.get.calculations()).popup,t=t.boundary;return e&&(i={top:e.top-t.top,left:e.left-t.left,right:t.right-(e.left+n.width),bottom:t.bottom-(e.top+n.height)},C.verbose("Distance from boundaries determined",e,i)),i},offsetParent:function(e){var t=(void 0!==e?e:v)[0].parentNode,i=O(t);if(t)for(var n="none"===i.css("transform"),r="static"===i.css("position"),o=i.is("body");t&&!o&&r&&n;)t=t.parentNode,n="none"===(i=O(t)).css("transform"),r="static"===i.css("position"),o=i.is("body");return i&&0<i.length?i:O()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(e){var t=(i=e.split(" "))[0],i=i[1],n="top"===t||"bottom"===t,r=!1,o=!1,a=!1;return y||(C.verbose("All available positions available"),y=C.get.positions()),C.debug("Recording last position tried",e),y[e]=!0,"opposite"===u.prefer&&(a=(a=[{top:"bottom",bottom:"top",left:"right",right:"left"}[t],i]).join(" "),r=!0===y[a],C.debug("Trying opposite strategy",a)),"adjacent"===u.prefer&&n&&(a=(a=[t,{left:"center",center:"right",right:"left"}[i]]).join(" "),o=!0===y[a],C.debug("Trying adjacent strategy",a)),(o||r)&&(C.debug("Using backup position",a),a={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"}[e]),a}},set:{position:function(e,t){if(0!==v.length&&0!==c.length){var i,n,r,o,a,s,l;if(t=t||C.get.calculations(),e=e||f.data(p.position)||u.position,i=f.data(p.offset)||u.offset,n=u.distanceAway,r=t.target,o=t.popup,a=t.parent,C.should.centerArrow(t)&&(C.verbose("Adjusting offset to center arrow on small target element"),"top left"!==e&&"bottom left"!==e||(i=(i+=r.width/2)-u.arrowPixelsFromEdge),"top right"!==e&&"bottom right"!==e||(i=(i-=r.width/2)+u.arrowPixelsFromEdge)),0===r.width&&0===r.height&&!C.is.svg(r.element))return C.debug("Popup target is hidden, no action taken"),!1;switch(u.inline&&(C.debug("Adding margin to calculation",r.margin),"left center"===e||"right center"===e?(i+=r.margin.top,n+=-r.margin.left):"top left"===e||"top center"===e||"top right"===e?(i+=r.margin.left,n-=r.margin.top):(i+=r.margin.left,n+=r.margin.top)),C.debug("Determining popup position from calculations",e,t),C.is.rtl()&&(e=e.replace(/left|right/g,function(e){return"left"===e?"right":"left"}),C.debug("RTL: Popup position updated",e)),e=_===u.maxSearchDepth&&"string"==typeof u.lastResort?u.lastResort:e){case"top left":s={top:"auto",bottom:a.height-r.top+n,left:r.left+i,right:"auto"};break;case"top center":s={bottom:a.height-r.top+n,left:r.left+r.width/2-o.width/2+i,top:"auto",right:"auto"};break;case"top right":s={bottom:a.height-r.top+n,right:a.width-r.left-r.width-i,top:"auto",left:"auto"};break;case"left center":s={top:r.top+r.height/2-o.height/2+i,right:a.width-r.left+n,left:"auto",bottom:"auto"};break;case"right center":s={top:r.top+r.height/2-o.height/2+i,left:r.left+r.width+n,bottom:"auto",right:"auto"};break;case"bottom left":s={top:r.top+r.height+n,left:r.left+i,bottom:"auto",right:"auto"};break;case"bottom center":s={top:r.top+r.height+n,left:r.left+r.width/2-o.width/2+i,bottom:"auto",right:"auto"};break;case"bottom right":s={top:r.top+r.height+n,right:a.width-r.left-r.width-i,left:"auto",bottom:"auto"}}if(void 0===s&&C.error(h.invalidPosition,e),C.debug("Calculated popup positioning values",s),c.css(s).removeClass(d.position).addClass(e),C.set.invisible(),l=C.get.popupOffset(),l=C.get.distanceFromBoundary(l,t),!u.forcePosition&&C.is.offstage(l,e)){if(C.debug("Position is outside viewport",e),_<u.maxSearchDepth)return _++,e=C.get.nextPosition(e),C.debug("Trying new position",e),!!c&&C.set.position(e,t);if(!u.lastResort)return C.debug("Popup could not find a position to display",c),C.error(h.cannotPlace,x),C.remove.attempts(),C.remove.invisible(),C.reset(),u.onUnplaceable.call(c,x),!1;C.debug("No position found, showing with last position")}return C.debug("Position is on stage",e),C.remove.attempts(),C.remove.invisible(),u.setFluidWidth&&C.is.fluid()&&C.set.fluidWidth(t),!0}C.error(h.notFound)},fluidWidth:function(e){e=e||C.get.calculations(),C.debug("Automatically setting element width to parent width",e.parent.width),c.css("width",e.container.width)},loading:function(){c.addClass(d.loading)},invisible:function(){c.addClass(d.invisible)},variation:function(e){(e=e||C.get.variation())&&C.has.popup()&&(C.verbose("Adding variation to popup",e),c.addClass(e))},visible:function(){f.addClass(d.visible)}},remove:{loading:function(){c.removeClass(d.loading)},invisible:function(){c.removeClass(d.invisible)},variation:function(e){(e=e||C.get.variation())&&(C.verbose("Removing variation",e),c.removeClass(e))},visible:function(){f.removeClass(d.visible)},attempts:function(){C.verbose("Resetting all searched positions"),_=0,y=!1}},bind:{events:function(){C.debug("Binding popup events to module"),"click"===u.on&&f.on(P+o,C.toggle),"hover"===u.on&&f.on("touchstart"+o,C.event.touchstart),C.get.startEvent()&&f.on(C.get.startEvent()+o,C.event.start).on(C.get.endEvent()+o,C.event.end),u.target&&C.debug("Target set to element",v),E.on("resize"+t,C.event.resize)},popup:function(){C.verbose("Allowing hover events on popup to prevent closing"),c&&C.has.popup()&&c.on("mouseenter"+o,C.event.start).on("mouseleave"+o,C.event.end)},close:function(){(!0===u.hideOnScroll||"auto"===u.hideOnScroll&&"click"!==u.on)&&C.bind.closeOnScroll(),C.is.closable()?C.bind.clickaway():"hover"===u.on&&b&&C.bind.touchClose()},closeOnScroll:function(){C.verbose("Binding scroll close event to document"),m.one(C.get.scrollEvent()+t,C.event.hideGracefully)},touchClose:function(){C.verbose("Binding popup touchclose event to document"),k.on("touchstart"+t,function(e){C.verbose("Touched away from popup"),C.event.hideGracefully.call(x,e)})},clickaway:function(){C.verbose("Binding popup close event to document"),k.on(P+t,function(e){C.verbose("Clicked away from popup"),C.event.hideGracefully.call(x,e)})}},unbind:{events:function(){E.off(t),f.off(o)},close:function(){k.off(t),m.off(t)}},can:{useElement:function(e){return void 0!==O.fn[e]||(C.error(h.noElement.replace("{element}",e)),!1)}},has:{popup:function(){return c&&0<c.length}},should:{centerArrow:function(e){return!C.is.basic()&&e.target.width<=2*u.arrowPixelsFromEdge}},is:{closable:function(){return"auto"===u.closable?"hover"!==u.on:u.closable},offstage:function(e,i){var n=[];return O.each(e,function(e,t){t<-u.jitter&&(C.debug("Position exceeds allowable distance from edge",e,t,i),n.push(e))}),0<n.length},svg:function(e){return C.supports.svg()&&e instanceof SVGGraphicsElement},basic:function(){return f.hasClass(d.basic)},active:function(){return f.hasClass(d.active)},animating:function(){return void 0!==c&&c.hasClass(d.animating)},fluid:function(){return void 0!==c&&c.hasClass(d.fluid)},visible:function(){return void 0!==c&&c.hasClass(d.popupVisible)},dropdown:function(){return f.hasClass(d.dropdown)},hidden:function(){return!C.is.visible()},rtl:function(){return"rtl"===f.attr("dir")||"rtl"===f.css("direction")||"rtl"===A.attr("dir")||"rtl"===A.css("direction")||"rtl"===l.attr("dir")||"rtl"===l.css("direction")}},reset:function(){C.remove.visible(),u.preserve?void 0!==O.fn.transition&&c.transition("remove transition"):C.removePopup()},setting:function(e,t){if(O.isPlainObject(e))O.extend(!0,u,e);else{if(void 0===t)return u[e];u[e]=t}},internal:function(e,t){if(O.isPlainObject(e))O.extend(!0,C,e);else{if(void 0===t)return C[e];C[e]=t}},debug:function(){!u.silent&&u.debug&&(u.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,u.name+":"),C.debug.apply(console,arguments)))},verbose:function(){!u.silent&&u.verbose&&u.debug&&(u.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),C.verbose.apply(console,arguments)))},error:function(){u.silent||(C.error=Function.prototype.bind.call(console.error,console,u.name+":"),C.error.apply(console,arguments))},performance:{log:function(e){var t,i;u.performance&&(i=(t=Date.now())-(M||t),M=t,I.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:x,"Execution Time":i})),clearTimeout(C.performance.timer),C.performance.timer=setTimeout(function(){C.performance.display()},500)},display:function(){var e=u.name+":",i=0;M=!1,clearTimeout(C.performance.timer),O.each(I,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<I.length&&(console.groupCollapsed(e),console.table?console.table(I):O.each(I,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),I=[]}},invoke:function(n,e,t){var r,o,i,a=w;return e=e||z,t=t||x,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,O.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!O.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):O.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:C.error(h.method,n),!1);a=a[i]})),N(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(S)?S.push(i):void 0!==S?S=[S,i]:void 0!==i&&(S=i),o}};L?(void 0===w&&C.initialize(),C.invoke(D)):(void 0!==w&&w.invoke("destroy"),C.initialize())}),void 0!==S?S:this},O.fn.popup.settings={name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:B,addTouchEvents:!0,position:"top left",forcePosition:!1,variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:B,prefer:"opposite",lastResort:!1,arrowPixelsFromEdge:20,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noElement:"This module requires ui {element}",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",basic:"basic",animating:"animating",dropdown:"dropdown",invisible:"invisible",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible",popupVisible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(e){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/["&'<>`]/.test(e)?(e=e.replace(/&(?![\d#a-z]{1,12};)/gi,"&amp;")).replace(/["'<>`]/g,function(e){return t[e]}):e},popup:function(e){var t="",i=O.fn.popup.settings.templates.escape;return void 0!==e&&(e.title&&(e.title=i(e.title),t+='<div class="header">'+e.title+"</div>"),e.content)&&(e.content=i(e.content),t+='<div class="content">'+e.content+"</div>"),t}}}})(jQuery,window,document),((C,e,T)=>{void 0!==e&&e.Math===Math||globalThis,C.fn.progress=function(g){var v,e=C(this),_=Date.now(),y=[],b=g,x="string"==typeof b,w=[].slice.call(arguments,1);return e.each(function(){var a=C.isPlainObject(g)?C.extend(!0,{},C.fn.progress.settings,g):C.extend({},C.fn.progress.settings),i=a.className,t=a.metadata,e=a.namespace,n=a.selector,s=a.error,r="."+e,o="module-"+e,c=C(this),u=C(this).find(n.bar),l=C(this).find(n.progress),d=C(this).find(n.label),h=this,p=c.data(o),f=!1,m={helper:{sum:function(e){return Array.isArray(e)?e.reduce(function(e,t){return e+Number(t)},0):0},derivePrecision:function(e,t){for(var i=0,n=1,r=e/t;i<10&&!(1<(r*=n));)n=Math.pow(10,i++);return n},forceArray:function(e){return Array.isArray(e)?e:isNaN(e)?"string"==typeof e?e.split(","):[]:[e]}},initialize:function(){m.set.duration(),m.debug(h),m.read.metadata(),m.read.settings(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of progress",m),p=m,c.data(o,m)},destroy:function(){m.verbose("Destroying previous progress for",c),clearInterval(p.interval),m.remove.state(),c.removeData(o),p=void 0},reset:function(){m.remove.nextValue(),m.update.progress(0)},complete:function(e){(void 0===m.percent||m.percent<100)&&(m.remove.progressPoll(),!0!==e)&&m.set.percent(100)},read:{metadata:function(){var e={percent:m.helper.forceArray(c.data(t.percent)),total:c.data(t.total),value:m.helper.forceArray(c.data(t.value))};void 0!==e.total&&(m.debug("Total value set from metadata",e.total),m.set.total(e.total)),0<e.value.length&&(m.debug("Current value set from metadata",e.value),m.set.value(e.value),m.set.progress(e.value)),0<e.percent.length&&(m.debug("Current percent value set from metadata",e.percent),m.set.percent(e.percent))},settings:function(){!1!==a.total&&(m.debug("Current total set in settings",a.total),m.set.total(a.total)),!1!==a.value&&(m.debug("Current value set in settings",a.value),m.set.value(a.value),m.set.progress(m.value)),!1!==a.percent&&(m.debug("Current percent set in settings",a.percent),m.set.percent(a.percent))}},bind:{transitionEnd:function(t){u.one("transitionend"+r,function(e){clearTimeout(m.failSafeTimer),t.call(this,e)}),m.failSafeTimer=setTimeout(function(){u.triggerHandler("transitionend")},a.duration+a.failSafeDelay),m.verbose("Adding fail safe timer",m.timer)}},increment:function(e){var t;e=m.has.total()?(t=m.get.value(),e||1):(t=m.get.percent(),e||m.get.randomValue()),m.debug("Incrementing percentage by",t,t+=e,e),t=m.get.normalizedValue(t),m.set.progress(t)},decrement:function(e){var t,i;m.get.total()?(i=(t=m.get.value())-(e=e||1),m.debug("Decrementing value by",e,t)):(i=(t=m.get.percent())-(e=e||m.get.randomValue()),m.debug("Decrementing percentage by",e,t)),i=m.get.normalizedValue(i),m.set.progress(i)},has:{progressPoll:function(){return m.progressPoll},total:function(){return!1!==m.get.total()}},get:{text:function(e,t){var i=m.get.value(t=t||0),n=m.get.total(),r=f?m.get.displayPercent(t):m.get.percent(t),o=!1!==n?Math.max(0,n-i):100-r;return e=(e=e||"").replace("{value}",i).replace("{total}",n||0).replace("{left}",o).replace("{percent}",r).replace("{bar}",a.text.bars[t]||""),m.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return m.debug("Value cannot decrement below 0"),0;if(m.has.total()){if(e>m.total)return m.debug("Value cannot increment above total",m.total),m.total}else if(100<e)return m.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return"auto"===a.updateInterval?a.duration:a.updateInterval},randomValue:function(){return m.debug("Generating random increment percentage"),Math.floor(Math.random()*a.random.max+a.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},displayPercent:function(e){var t=(e=C(u[e])).width(),i=c.width(),e=parseInt(e.css("min-width"),10)<t?t/i*100:m.percent;return 0<a.precision?Math.round(e*(10*a.precision))/(10*a.precision):Math.round(e)},percent:function(e){return m.percent&&m.percent[e||0]||0},value:function(e){return m.nextValue||m.value&&m.value[e||0]||0},total:function(){return void 0!==m.total&&m.total}},create:{progressPoll:function(){m.progressPoll=setTimeout(function(){m.update.toNextValue(),m.remove.progressPoll()},m.get.updateInterval())}},is:{complete:function(){return m.is.success()||m.is.warning()||m.is.error()},success:function(){return c.hasClass(i.success)},warning:function(){return c.hasClass(i.warning)},error:function(){return c.hasClass(i.error)},active:function(){return c.hasClass(i.active)},visible:function(){return c.is(":visible")}},remove:{progressPoll:function(){m.verbose("Removing progress poll timer"),m.progressPoll&&(clearTimeout(m.progressPoll),delete m.progressPoll)},nextValue:function(){m.verbose("Removing progress value stored for next update"),delete m.nextValue},state:function(){m.verbose("Removing stored state"),delete m.total,delete m.percent,delete m.value},active:function(){m.verbose("Removing active state"),c.removeClass(i.active)},success:function(){m.verbose("Removing success state"),c.removeClass(i.success)},warning:function(){m.verbose("Removing warning state"),c.removeClass(i.warning)},error:function(){m.verbose("Removing error state"),c.removeClass(i.error)}},set:{barWidth:function(e){m.debug("set bar width with ",e),e=m.helper.forceArray(e);var r=-1,o=-1,a=m.helper.sum(e),s=u.length,l=1<s,t=e.map(function(e,t){var i=t===s-1&&0===a,n=C(u[t]);return 0===e&&l&&!i?n.css("display","none"):(l&&i&&n.css("background","transparent"),-1===r&&(r=t),o=t,n.css({display:"block",width:e+"%"})),parseFloat(e)});e.forEach(function(e,t){C(u[t]).css({borderTopLeftRadius:t===r?"":"0",borderBottomLeftRadius:t===r?"":"0",borderTopRightRadius:t===o?"":"0",borderBottomRightRadius:t===o?"":"0"})}),c.attr("data-percent",t)},duration:function(e){e=e||a.duration,m.verbose("Setting progress bar transition duration",e="number"==typeof e?e+"ms":e),u.css({"transition-duration":e})},percent:function(e){e=m.helper.forceArray(e).map(function(e){return e="string"==typeof e?+e.replace("%",""):e,a.limitValues?Math.max(0,Math.min(100,e)):e});var t,i=m.has.total(),n=m.helper.sum(e),r=1<e.length&&i,o=m.helper.sum(m.helper.forceArray(m.value));r&&o>m.total?m.error(s.sumExceedsTotal,o,m.total):!r&&100<n?m.error(s.tooHigh,n):n<0?m.error(s.tooLow,n):(t=0<a.precision?a.precision:r?m.helper.derivePrecision(Math.min.apply(null,m.value),m.total):0,o=e.map(function(e){return 0<t?Math.round(e*(10*t))/(10*t):Math.round(e)}),m.percent=o,i&&(m.value=e.map(function(e){return 0<t?Math.round(e/100*m.total*(10*t))/(10*t):Math.round(e/100*m.total*10)/10})),m.set.barWidth(e),m.set.labelInterval()),a.onChange.call(h,e,m.value,m.total)},labelInterval:function(){clearInterval(m.interval),m.bind.transitionEnd(function(){m.verbose("Bar finished animating, removing continuous label updates"),clearInterval(m.interval),f=!1,m.set.labels()}),f=!0,m.interval=setInterval(function(){C.contains(T.documentElement,h)||(clearInterval(m.interval),f=!1),m.set.labels()},a.framerate)},labels:function(){m.verbose("Setting both bar progress and outer label text"),m.set.barLabel(),m.set.state()},label:function(e){e&&(e=m.get.text(e),m.verbose("Setting label to text",e),d.text(e))},state:function(e){100===(e=void 0!==e?e:m.helper.sum(m.percent))?a.autoSuccess&&1===u.length&&!(m.is.warning()||m.is.error()||m.is.success())?(m.set.success(),m.debug("Automatically triggering success at 100%")):(m.verbose("Reached 100% removing active state"),m.remove.active(),m.remove.progressPoll()):0<e?(m.verbose("Adjusting active progress bar label",e),m.set.active()):(m.remove.active(),m.remove.warning(),m.remove.error(),m.remove.success(),m.set.label(a.text.active))},barLabel:function(i){l.each(function(e,t){t=C(t),void 0!==i?t.text(m.get.text(i,e)):"ratio"===a.label&&m.has.total()?(m.verbose("Adding ratio to bar label"),t.text(m.get.text(a.text.ratio,e))):"percent"===a.label&&(m.verbose("Adding percentage to bar label"),t.text(m.get.text(a.text.percent,e)))})},active:function(e){e=e||a.text.active,m.debug("Setting active state"),a.showActivity&&!m.is.active()&&c.addClass(i.active),m.remove.warning(),m.remove.error(),m.remove.success(),(e=a.onLabelUpdate("active",e,m.value,m.total))&&m.set.label(e),m.bind.transitionEnd(function(){a.onActive.call(h,m.value,m.total)})},success:function(e,t){e=e||a.text.success||a.text.active,m.debug("Setting success state"),c.addClass(i.success),m.remove.active(),m.remove.warning(),m.remove.error(),m.complete(t),e=a.text.success?a.onLabelUpdate("success",e,m.value,m.total):a.onLabelUpdate("active",e,m.value,m.total),m.set.label(e),m.bind.transitionEnd(function(){a.onSuccess.call(h,m.total)})},warning:function(e,t){e=e||a.text.warning,m.debug("Setting warning state"),c.addClass(i.warning),m.remove.active(),m.remove.success(),m.remove.error(),m.complete(t),(e=a.onLabelUpdate("warning",e,m.value,m.total))&&m.set.label(e),m.bind.transitionEnd(function(){a.onWarning.call(h,m.value,m.total)})},error:function(e,t){e=e||a.text.error,m.debug("Setting error state"),c.addClass(i.error),m.remove.active(),m.remove.success(),m.remove.warning(),m.complete(t),(e=a.onLabelUpdate("error",e,m.value,m.total))&&m.set.label(e),m.bind.transitionEnd(function(){a.onError.call(h,m.value,m.total)})},total:function(e){m.total=e},value:function(e){m.value=m.helper.forceArray(e)},progress:function(e){m.has.progressPoll()?(m.debug("Updated within interval, setting next update to use new value",e),m.set.nextValue(e)):(m.debug("First update in progress update interval, immediately updating",e),m.update.progress(e),m.create.progressPoll())},nextValue:function(e){m.nextValue=e}},update:{toNextValue:function(){var e=m.nextValue;e&&(m.debug("Update interval complete using last updated value",e),m.update.progress(e),m.remove.nextValue())},progress:function(e){var i=m.has.total(),e=(i&&m.set.value(e),m.helper.forceArray(e).map(function(e){var t;return!1===(e=m.get.numericValue(e))&&m.error(s.nonNumeric,e),e=m.get.normalizedValue(e),i?(t=0<m.total?e/m.total*100:100,m.debug("Calculating percent complete from total",t)):(t=e,m.debug("Setting value to exact percentage value",t)),t}));m.set.percent(e)}},setting:function(e,t){if(m.debug("Changing setting",e,t),C.isPlainObject(e))C.extend(!0,a,e);else{if(void 0===t)return a[e];C.isPlainObject(a[e])?C.extend(!0,a[e],t):a[e]=t}},internal:function(e,t){if(C.isPlainObject(e))C.extend(!0,m,e);else{if(void 0===t)return m[e];m[e]=t}},debug:function(){!a.silent&&a.debug&&(a.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,a.name+":"),m.debug.apply(console,arguments)))},verbose:function(){!a.silent&&a.verbose&&a.debug&&(a.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),m.verbose.apply(console,arguments)))},error:function(){a.silent||(m.error=Function.prototype.bind.call(console.error,console,a.name+":"),m.error.apply(console,arguments))},performance:{log:function(e){var t,i;a.performance&&(i=(t=Date.now())-(_||t),_=t,y.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:h,"Execution Time":i})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(function(){m.performance.display()},500)},display:function(){var e=a.name+":",i=0;_=!1,clearTimeout(m.performance.timer),C.each(y,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<y.length&&(console.groupCollapsed(e),console.table?console.table(y):C.each(y,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),y=[]}},invoke:function(n,e,t){var r,o,i,a=p;return e=e||w,t=t||h,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,C.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!C.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):C.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:m.error(s.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(v)?v.push(i):void 0!==v?v=[v,i]:void 0!==i&&(v=i),o}};x?(void 0===p&&m.initialize(),m.invoke(b)):(void 0!==p&&p.invoke("destroy"),m.initialize())}),void 0!==v?v:this},C.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t,i,n){return t},onChange:function(e,t,i){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%",sumExceedsTotal:"Sum of multiple values exceed total"},regExp:{variable:/{\$*[\da-z]+}/gi},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}",bars:[""]},className:{active:"active",error:"error",success:"success",warning:"warning"}}})(jQuery,window,document),((U,t,i)=>{t=void 0!==t&&t.Math===Math?t:globalThis,U.fn.slider=function(I){var D,e=U(this),L=U(i),z=U(t),R=Date.now(),O=[],B=I,F="string"==typeof B,N=[].slice.call(arguments,1),j=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],V=0;return e.each(function(){var c,a,s,l,e,u,d,t,h,p,f,m,r,g,o,v,_=U.isPlainObject(I)?U.extend(!0,{},U.fn.slider.settings,I):U.extend({},U.fn.slider.settings),i=_.className,n=_.metadata,y=_.namespace,b=_.error,x=_.keys,w=_.interpretLabel,C=!1,T="."+y,S="module-"+y,k=U(this),E=this,A=k.data(S),P=1,M={initialize:function(){M.debug("Initializing slider",_),v=!0,t=V+=1,M.setup.layout(),M.setup.labels(),M.bind.events(),M.read.metadata(),M.read.settings(),v=!1,M.instantiate()},instantiate:function(){M.verbose("Storing instance of slider",M),A=M,k.data(S,M)},destroy:function(){M.verbose("Destroying previous slider for",k),clearInterval(A.interval),M.unbind.events(),M.unbind.slidingEvents(),k.removeData(S),A=void 0},setup:{layout:function(){void 0===k.attr("tabindex")&&k.attr("tabindex",0),0===k.find(".inner").length&&k.append('<div class="inner"><div class="track"></div><div class="track-fill"></div><div class="thumb"></div></div>'),r=M.get.precision(),s=k.find(".thumb:not(.second)"),_.showThumbTooltip&&s.attr("data-position",_.tooltipConfig.position).attr("data-variation",_.tooltipConfig.variation),c=s,M.is.range()&&(0===k.find(".thumb.second").length&&k.find(".inner").append('<div class="thumb second"></div>'),l=k.find(".thumb.second"),_.showThumbTooltip)&&l.attr("data-position",_.tooltipConfig.position).attr("data-variation",_.tooltipConfig.variation),e=k.find(".track"),u=k.find(".track-fill"),m=s.width()/2},labels:function(){M.is.labeled()&&(0<(d=k.find(".labels:not(.auto)")).length?M.setup.customLabel():M.setup.autoLabel(),_.showLabelTicks)&&k.addClass(i.ticked)},customLabel:function(){var i,e=d.find(".label"),n=e.length,r=M.get.min(),o=M.get.max();e.each(function(e){var t=U(this).attr("data-value");i=t?((o<t?o:t<r?r:t)-r)/(o-r):(e+1)/(n+1),M.update.labelPosition(i,U(this))})},autoLabel:function(){0<(d=k.find(".labels")).length?d.empty():d=k.append('<ul class="auto labels"></ul>').find(".labels");for(var e=0,t=M.get.numLabels();e<=t;e++){var i=M.get.label(e),n=0===_.restrictedLabels.length||0<=_.restrictedLabels.indexOf(i);(n=""===i||!n&&"always"!==_.showLabelTicks?null:e%M.get.gapRatio()?U('<li class="halftick label"></li>'):U('<li class="label">'+(n?i:"")+"</li>"))&&(M.update.labelPosition(e/t,n),d.append(n))}}},bind:{events:function(){M.bind.globalKeyboardEvents(),M.bind.keyboardEvents(),M.bind.mouseEvents(),_.autoAdjustLabels&&M.bind.windowEvents()},keyboardEvents:function(){M.verbose("Binding keyboard events"),k.on("keydown"+T,M.event.keydown)},globalKeyboardEvents:function(){L.on("keydown"+T+t,M.event.activateFocus)},mouseEvents:function(){M.verbose("Binding mouse and touch events"),k.find(".track, .thumb, .inner").on("mousedown"+T,function(e){e.stopImmediatePropagation(),e.preventDefault(),M.event.down(e)}),k.on("mousedown"+T,M.event.down),k.on("mouseenter"+T,function(e){C=!0}),k.on("mouseleave"+T,function(e){C=!1}),k.find(".thumb").on("touchstart"+T,M.event.touchDown).on("touchmove"+T,M.event.move).on("touchend"+T,M.event.up).on("touchcancel"+T,M.event.touchCancel)},slidingEvents:function(){M.verbose("Binding page wide events while handle is being draged"),L.on("mousemove"+T,M.event.move),L.on("mouseup"+T,M.event.up)},windowEvents:function(){z.on("resize"+T,M.event.resize)}},unbind:{events:function(){k.find(".track, .thumb, .inner").off("mousedown"+T),k.off("mousedown"+T),k.off("mouseenter"+T),k.off("mouseleave"+T),k.find(".thumb").off("touchstart"+T).off("touchmove"+T).off("touchend"+T).off("touchcancel"+T),k.off("keydown"+T),k.off("focusout"+T),L.off("keydown"+T+t,M.event.activateFocus),z.off("resize"+T)},slidingEvents:function(){L.off("mousemove"+T),L.off("mouseup"+T)}},event:{down:function(e){e.preventDefault(),M.is.range()?(e=M.determine.eventPos(e),e=M.determine.pos(e),c=_.preventCrossover&&M.is.range()&&M.thumbVal===M.secondThumbVal?void(o=e):M.determine.closestThumb(e),void 0===g&&(g=M.get.currentThumbValue())):void 0===g&&(g=M.get.value()),M.is.disabled()||M.bind.slidingEvents()},touchDown:function(e){e.preventDefault(),e.stopImmediatePropagation(),void 0===a&&(c=U(e.target),e=e.touches?e:e.originalEvent,a=e.targetTouches[0].identifier,void 0===g)&&(g=M.get.currentThumbValue())},move:function(e){if("mousemove"===e.type&&e.preventDefault(),!M.is.disabled()){var t=M.determine.valueFromEvent(e);if("mousemove"===e.type&&void 0===c&&(i=M.determine.eventPos(e),i=M.determine.pos(i),c=i<o?s:l),M.is.range()&&(_.minRange||_.maxRange)){var i=M.get.currentRangeDiff(t),n=c.hasClass("second");if(_.minRange&&i<_.minRange||_.maxRange&&i>_.maxRange||_.preventCrossover&&!n&&t>M.secondThumbVal||_.preventCrossover&&n&&t<M.thumbVal)return}0===M.get.step()||M.is.smooth()?(i=M.thumbVal,n=M.secondThumbVal,e=M.determine.smoothValueFromEvent(e),c.hasClass("second")?(_.preventCrossover&&M.is.range()&&(t=Math.max(i,t),e=Math.max(i,e)),n=t):(_.preventCrossover&&M.is.range()&&(t=Math.min(n,t),e=Math.min(n,e)),i=t),t=Math.abs(i-(n||0)),M.update.position(e),_.onMove.call(E,t,i,n)):M.update.value(t,function(e,t,i){_.onMove.call(E,e,t,i)})}},up:function(e){var t;e.preventDefault(),M.is.disabled()||(e=M.determine.valueFromEvent(e),M.is.range()&&(_.minRange||_.maxRange)&&(void 0===c&&(c=e<=M.get.currentThumbValue()?s:l),t=M.get.currentRangeDiff(e),_.minRange&&t<_.minRange?e=M.get.edgeValue(e,_.minRange):_.maxRange&&t>_.maxRange&&(e=M.get.edgeValue(e,_.maxRange))),M.set.value(e),M.unbind.slidingEvents(),(a=void 0)!==g&&(g=void 0))},touchCancel:function(e){e.preventDefault(),(a=void 0)!==g&&(M.update.value(g),g=void 0)},keydown:function(e,t){if(!M.is.disabled()&&(_.preventCrossover&&M.is.range()&&M.thumbVal===M.secondThumbVal&&(c=void 0),M.is.focused()&&L.trigger(e),t||M.is.focused())&&0!==(t=M.determine.keyMovement(e)))switch(e.preventDefault(),t){case 1:M.takeStep();break;case 2:M.takeStep(M.get.multiplier());break;case-1:M.backStep();break;case-2:M.backStep(M.get.multiplier())}},activateFocus:function(e){M.is.disabled()||M.is.focused()||!M.is.hover()||0===M.determine.keyMovement(e)||(e.preventDefault(),M.event.keydown(e,!0),k.trigger("focus"))},resize:function(e){P!==M.get.gapRatio()&&(M.setup.labels(),P=M.get.gapRatio())}},resync:function(){M.verbose("Resyncing thumb position based on value"),M.is.range()&&M.update.position(M.secondThumbVal,l),M.update.position(M.thumbVal,s),M.setup.labels()},takeStep:function(e){e=e||1;var t=M.get.step(),i=M.get.currentThumbValue();M.verbose("Taking a step"),0<t?M.set.value(i+t*e):0===t&&(t=M.get.precision(),M.set.value(Math.round((i+e/t)*t)/t))},backStep:function(e){e=e||1;var t=M.get.step(),i=M.get.currentThumbValue();M.verbose("Going back a step"),0<t?M.set.value(i-t*e):0===t&&(t=M.get.precision(),M.set.value(Math.round((i-e/t)*t)/t))},is:{range:function(){var e=k.hasClass(i.range);return e||!_.minRange&&!_.maxRange||(k.addClass(i.range),e=!0),e},hover:function(){return C},focused:function(){return k.is(":focus")},disabled:function(){return k.hasClass(i.disabled)},labeled:function(){var e=k.hasClass(i.labeled);return!e&&(0<_.restrictedLabels.length||!1!==_.showLabelTicks)&&(k.addClass(i.labeled),e=!0),e},reversed:function(){return k.hasClass(i.reversed)},vertical:function(){return k.hasClass(i.vertical)},smooth:function(){return _.smooth||k.hasClass(i.smooth)}},get:{currentRangeDiff:function(e){return e=c.hasClass("second")?M.thumbVal<e?e-M.thumbVal:M.thumbVal-e:M.secondThumbVal>e?M.secondThumbVal-e:e-M.secondThumbVal},edgeValue:function(e,t){return c.hasClass("second")?M.thumbVal<e?M.thumbVal+t:M.thumbVal-t:M.secondThumbVal<e?M.secondThumbVal+t:M.secondThumbVal-t},trackOffset:function(){return M.is.vertical()?e.offset().top:e.offset().left},trackLength:function(){return M.is.vertical()?e.height():e.width()},trackLeft:function(){return M.is.vertical()?e.position().top:e.position().left},trackStartPos:function(){return M.is.reversed()?M.get.trackLeft()+M.get.trackLength():M.get.trackLeft()},trackEndPos:function(){return M.is.reversed()?M.get.trackLeft():M.get.trackLeft()+M.get.trackLength()},trackStartMargin:function(){return(M.is.vertical()?M.is.reversed()?k.css("padding-bottom"):k.css("padding-top"):M.is.reversed()?k.css("padding-right"):k.css("padding-left"))||"0px"},trackEndMargin:function(){return(M.is.vertical()?M.is.reversed()?k.css("padding-top"):k.css("padding-bottom"):M.is.reversed()?k.css("padding-left"):k.css("padding-right"))||"0px"},precision:function(){e=0!==(e=M.get.step())?2===(e=String(e).split(".")).length?e[1].length:0:_.decimalPlaces;var e=Math.pow(10,e);return M.debug("Precision determined",e),e},min:function(){return _.min},max:function(){var e=M.get.step(),t=M.get.min(),i=M.get.precision(),i=0===e?0:Math.floor(Math.round((_.max-t)/e*i)/i);return 0==(0===e?0:(_.max-t)%e)?_.max:t+i*e},step:function(){return _.step},numLabels:function(){var e=M.get.step(),t=M.get.precision(),e=Math.round((M.get.max()-M.get.min())/(0===e?1:e)*t)/t;return M.debug("Determined that there should be "+e+" labels"),e},labelType:function(){return _.labelType},label:function(e){if(w)return w(e);switch(_.labelType){case _.labelTypes.number:var t=M.get.step();return Math.round((e*(0===t?1:t)+M.get.min())*r)/r;case _.labelTypes.letter:return j[e%26];default:return e}},value:function(){return h},currentThumbValue:function(){return void 0!==c&&c.hasClass("second")?M.secondThumbVal:M.thumbVal},thumbValue:function(e){return"second"!==e?M.thumbVal:M.is.range()?M.secondThumbVal:void M.error(b.notrange)},multiplier:function(){return _.pageMultiplier},thumbPosition:function(e){return"second"!==e?p:M.is.range()?f:void M.error(b.notrange)},gapRatio:function(){var e=1;if(_.autoAdjustLabels){var t=M.get.numLabels(),i=M.get.trackLength(),n=1;if(0<i)for(;i/t*n<_.labelDistance;)t%n||(e=n),n+=1}return e}},determine:{pos:function(e){return M.is.reversed()?M.get.trackStartPos()-e+M.get.trackOffset():e-M.get.trackOffset()-M.get.trackStartPos()},closestThumb:function(e){var t=parseFloat(M.determine.thumbPos(s)),t=Math.abs(e-t),i=parseFloat(M.determine.thumbPos(l));return(t!==(e=Math.abs(e-i))||M.get.thumbValue()!==M.get.min())&&t<=e?s:l},closestThumbPos:function(e){var t=parseFloat(M.determine.thumbPos(s)),i=Math.abs(e-t),n=parseFloat(M.determine.thumbPos(l));return i<=Math.abs(e-n)?t:n},thumbPos:function(e){return M.is.vertical()?M.is.reversed()?e.css("bottom"):e.css("top"):M.is.reversed()?e.css("right"):e.css("left")},positionFromValue:function(e){var t=M.get.min(),e=(n=M.get.max())<e?n:e<t?t:e,i=M.get.trackLength(),n=Math.round((e-t)/(n-t)*i);return M.verbose("Determined position: "+n+" from value: "+e),n},positionFromRatio:function(e){var t=M.get.trackLength(),i=M.get.step(),t=Math.round(e*t),i=0===i?t:Math.round(t/i)*i;return M.verbose("Determined position: "+t+" from ratio: "+e),i},valueFromEvent:function(e){var e=M.determine.eventPos(e),t=M.determine.pos(e);return e=e<M.get.trackOffset()?M.is.reversed()?M.get.max():M.get.min():e>M.get.trackOffset()+M.get.trackLength()?M.is.reversed()?M.get.min():M.get.max():M.determine.value(t)},smoothValueFromEvent:function(e){var t=M.get.min(),i=M.get.max(),n=M.get.trackLength(),e=((e=M.determine.eventPos(e)-M.get.trackOffset())<0?0:n<e?n:e)/n;return(e=M.is.reversed()?1-e:e)*(i-t)+t},eventPos:function(e){if("touchmove"===e.type||"touchend"===e.type){for(var t=e.touches?e:e.originalEvent,i=t.changedTouches[0],n=0;n<t.touches.length;n++)if(t.touches[n].identifier===a){i=t.touches[n];break}var r=i.pageY,o=i.pageX}else r=e.pageY||e.originalEvent.pageY,o=e.pageX||e.originalEvent.pageX;return M.is.vertical()?r:o},value:function(e){var t=(e-(t=M.is.reversed()?M.get.trackEndPos():M.get.trackStartPos()))/((M.is.reversed()?M.get.trackStartPos():M.get.trackEndPos())-t),i=M.get.max()-M.get.min(),n=M.get.step(),t=t*i,i=0===n?t:Math.round(t/n)*n;return M.verbose("Determined value based upon position: "+e+" as: "+t),t!=i&&M.verbose("Rounding value to closest step: "+i),M.verbose("Cutting off additional decimal places"),Math.round((i+M.get.min())*r)/r},keyMovement:function(e){var e=e.which,t=!M.is.vertical()||M.is.reversed()?x.downArrow:x.upArrow,i=!M.is.vertical()||M.is.reversed()?x.upArrow:x.downArrow,n=!M.is.vertical()&&M.is.reversed()?x.rightArrow:x.leftArrow,r=!M.is.vertical()&&M.is.reversed()?x.leftArrow:x.rightArrow;return e===t||e===n?-1:e===i||e===r?1:e===x.pageDown?-2:e===x.pageUp?2:0}},handleNewValuePosition:function(e){var t=M.get.min(),i=M.get.max();return e<=t?e=t:i<=e&&(e=i),M.determine.positionFromValue(e)},set:{value:function(n,r){r=!1!==r;var o=void 0===g;g=void 0===g?M.get.value():g,M.update.value(n,function(e,t,i){v&&!_.fireOnInit||!r||(n!==g&&_.onChange.call(E,e,t,i),_.onMove.call(E,e,t,i)),o&&(g=void 0)})},rangeValue:function(e,t,i){var n,r,o;i=!1!==i,M.is.range()?(n=M.get.min(),r=M.get.max(),g=(o=void 0===g)?M.get.value():g,e<=n?e=n:r<=e&&(e=r),t<=n?t=n:r<=t&&(t=r),M.thumbVal=e,M.secondThumbVal=t,h=Math.abs(M.thumbVal-M.secondThumbVal),M.update.position(M.thumbVal,s),M.update.position(M.secondThumbVal,l),v&&!_.fireOnInit||!i||(h!==g&&_.onChange.call(E,h,M.thumbVal,M.secondThumbVal),_.onMove.call(E,h,M.thumbVal,M.secondThumbVal)),o&&(g=void 0)):M.error(b.notrange)},position:function(e,t){e=M.determine.value(e),"second"===t?(M.secondThumbVal=e,M.update.position(e,l)):(M.thumbVal=e,M.update.position(e,s)),h=Math.abs(M.thumbVal-(M.secondThumbVal||0)),M.set.value(h)}},update:{value:function(e,t){var i=M.get.min(),n=M.get.max();e<=i?e=i:n<=e&&(e=n),M.is.range()?((c=void 0===c?e<=M.get.currentThumbValue()?s:l:c).hasClass("second")?(_.preventCrossover&&M.is.range()&&(e=Math.max(M.thumbVal+(_.minRange||0),e)),M.secondThumbVal=e):(_.preventCrossover&&M.is.range()&&(e=Math.min(M.secondThumbVal-(_.minRange||0),e)),M.thumbVal=e),h=Math.abs(M.thumbVal-M.secondThumbVal)):(h=e,M.thumbVal=h),M.update.position(e),M.debug("Setting slider value to "+h),"function"==typeof t&&t(h,M.thumbVal,M.secondThumbVal)},position:function(e,t){var i=M.handleNewValuePosition(e),t=t||c,n=M.thumbVal||M.get.min(),r=M.secondThumbVal||M.get.min();_.showThumbTooltip&&(a=M.get.precision(),t.attr("data-tooltip",Math.round(e*a)/a)),M.is.range()&&t.hasClass("second")?(f=i,r=e):(p=i,n=e);var o,a=M.get.min(),s=M.get.max(),e=(e-a)/(s-a)*100,l=(Math.min(n,r)-a)/(s-a)*100,n=100*(1-(Math.max(n,r)-a)/(s-a)),r=M.is.vertical()?M.is.reversed()?(o={bottom:"calc("+e+"% - "+m+"px)",top:"auto"},{bottom:l+"%",top:n+"%"}):(o={top:"calc("+e+"% - "+m+"px)",bottom:"auto"},{top:l+"%",bottom:n+"%"}):M.is.reversed()?(o={right:"calc("+e+"% - "+m+"px)",left:"auto"},{right:l+"%",left:n+"%"}):(o={left:"calc("+e+"% - "+m+"px)",right:"auto"},{left:l+"%",right:n+"%"});t.css(o),u.css(r),M.debug("Setting slider position to "+i)},labelPosition:function(e,t){var i=M.get.trackStartMargin(),n=M.get.trackEndMargin(),r=M.is.vertical()?M.is.reversed()?"bottom":"top":M.is.reversed()?"right":"left",o=M.is.reversed()&&!M.is.vertical()?" - ":" + ";t.css(r,"calc((100% - "+i+" - "+n+") * "+e+o+i+")")}},goto:{max:function(){M.set.value(M.get.max())},min:function(){M.set.value(M.get.min())}},read:{metadata:function(){var e={thumbVal:k.data(n.thumbVal),secondThumbVal:k.data(n.secondThumbVal)};e.thumbVal&&(M.is.range()&&e.secondThumbVal?(M.debug("Current value set from metadata",e.thumbVal,e.secondThumbVal),M.set.rangeValue(e.thumbVal,e.secondThumbVal)):(M.debug("Current value set from metadata",e.thumbVal),M.set.value(e.thumbVal)))},settings:function(){var e;!1!==_.start&&(M.is.range()?(((e=_.end-_.start)<0||_.minRange&&e<_.minRange||_.maxRange&&e>_.maxRange||_.minRange&&_.maxRange&&_.minRange>_.maxRange)&&M.error(b.invalidRanges,_.start,_.end,_.minRange,_.maxRange),M.debug("Start position set from settings",_.start,_.end),M.set.rangeValue(_.start,_.end)):(M.debug("Start position set from settings",_.start),M.set.value(_.start)))}},setting:function(e,t){if(M.debug("Changing setting",e,t),U.isPlainObject(e))U.extend(!0,_,e);else{if(void 0===t)return _[e];U.isPlainObject(_[e])?U.extend(!0,_[e],t):_[e]=t}},internal:function(e,t){if(U.isPlainObject(e))U.extend(!0,M,e);else{if(void 0===t)return M[e];M[e]=t}},debug:function(){!_.silent&&_.debug&&(_.performance?M.performance.log(arguments):(M.debug=Function.prototype.bind.call(console.info,console,_.name+":"),M.debug.apply(console,arguments)))},verbose:function(){!_.silent&&_.verbose&&_.debug&&(_.performance?M.performance.log(arguments):(M.verbose=Function.prototype.bind.call(console.info,console,_.name+":"),M.verbose.apply(console,arguments)))},error:function(){_.silent||(M.error=Function.prototype.bind.call(console.error,console,_.name+":"),M.error.apply(console,arguments))},performance:{log:function(e){var t,i;_.performance&&(i=(t=Date.now())-(R||t),R=t,O.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:E,"Execution Time":i})),clearTimeout(M.performance.timer),M.performance.timer=setTimeout(function(){M.performance.display()},500)},display:function(){var e=_.name+":",i=0;R=!1,clearTimeout(M.performance.timer),U.each(O,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<O.length&&(console.groupCollapsed(e),console.table?console.table(O):U.each(O,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),O=[]}},invoke:function(n,e,t){var r,o,i,a=A;return e=e||N,t=t||E,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,U.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!U.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):U.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:M.error(b.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(D)?D.push(i):void 0!==D?D=[D,i]:void 0!==i&&(D=i),o}};F?(void 0===A&&M.initialize(),M.invoke(B)):(void 0!==A&&A.invoke("destroy"),M.initialize())}),void 0!==D?D:this},U.fn.slider.settings={silent:!1,debug:!1,verbose:!1,performance:!0,name:"Slider",namespace:"slider",error:{method:"The method you called is not defined.",notrange:"This slider is not a range slider",invalidRanges:"Invalid range settings (start/end/minRange/maxRange)"},metadata:{thumbVal:"thumbVal",secondThumbVal:"secondThumbVal"},min:0,max:20,step:1,start:0,end:20,minRange:!1,maxRange:!1,labelType:"number",showLabelTicks:!1,smooth:!1,autoAdjustLabels:!0,labelDistance:100,preventCrossover:!0,fireOnInit:!1,interpretLabel:!1,decimalPlaces:2,pageMultiplier:2,selector:{},className:{reversed:"reversed",disabled:"disabled",labeled:"labeled",ticked:"ticked",vertical:"vertical",range:"range",smooth:"smooth"},keys:{pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},restrictedLabels:[],showThumbTooltip:!1,tooltipConfig:{position:"top center",variation:"tiny black"},labelTypes:{number:"number",letter:"letter"},onChange:function(e,t,i){},onMove:function(e,t,i){}}})(jQuery,window,document),((C,e)=>{void 0!==e&&e.Math===Math||globalThis,C.fn.rating=function(m){var g,v=C(this),_=Date.now(),y=[],b=m,x="string"==typeof b,w=[].slice.call(arguments,1);return v.each(function(){var e,r=C.isPlainObject(m)?C.extend(!0,{},C.fn.rating.settings,m):C.extend({},C.fn.rating.settings),t=r.namespace,o=r.className,s=r.error,i=r.metadata,n=r.selector,a=r.cssVars,l="."+t,c="module-"+t,u=this,d=C(this).data(c),h=C(this),p=h.find(n.icon),f={initialize:function(){f.verbose("Initializing rating module",r),0===p.length&&f.setup.layout(),r.interactive&&!f.is.disabled()?f.enable():f.disable(),f.set.initialLoad(),f.set.rating(f.get.initialRating()),f.remove.initialLoad(),f.instantiate()},instantiate:function(){f.verbose("Instantiating module",r),d=f,h.data(c,f)},destroy:function(){f.verbose("Destroying previous instance",d),f.remove.events(),h.removeData(c)},refresh:function(){p=h.find(n.icon)},setup:{layout:function(){var e=f.get.maxRating(),t=f.get.icon(),e=C.fn.rating.settings.templates.icon(e,t);f.debug("Generating icon html dynamically"),h.html(e),f.refresh()}},event:{mouseenter:function(){var e=C(this);e.nextAll().removeClass(o.selected),h.addClass(o.selected),e.addClass(o.selected).prevAll().addClass(o.selected)},mouseleave:function(){h.removeClass(o.selected),p.removeClass(o.selected)},click:function(){var e=C(this),t=f.get.rating(),e=p.index(e)+1;("auto"===r.clearable?1===p.length:r.clearable)&&t===e?f.clearRating():f.set.rating(e)}},clearRating:function(){f.debug("Clearing current rating"),f.set.rating(0)},bind:{events:function(){f.verbose("Binding events"),h.on("mouseenter"+l,n.icon,f.event.mouseenter).on("mouseleave"+l,n.icon,f.event.mouseleave).on("click"+l,n.icon,f.event.click)}},remove:{events:function(){f.verbose("Removing events"),h.off(l)},initialLoad:function(){e=!1}},enable:function(){f.debug("Setting rating to interactive mode"),f.bind.events(),h.removeClass(o.disabled)},disable:function(){f.debug("Setting rating to read-only mode"),f.remove.events(),h.addClass(o.disabled)},is:{initialLoad:function(){return e},disabled:function(){return h.hasClass(o.disabled)}},get:{icon:function(){var e=h.data(i.icon);return e&&h.removeData(i.icon),e||r.icon},initialRating:function(){return void 0!==h.data(i.rating)?(h.removeData(i.rating),h.data(i.rating)):r.initialRating},maxRating:function(){return void 0!==h.data(i.maxRating)?(h.removeData(i.maxRating),h.data(i.maxRating)):r.maxRating},rating:function(){var e=p.filter("."+o.active).length;return f.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=Math.floor(0<=e-1?e-1:0),t=p.eq(t),i=e<=1?t:t.next(),n=e%1*100;h.removeClass(o.selected),p.removeClass(o.selected).removeClass(o.active).removeClass(o.partiallyActive),0<e&&(f.verbose("Setting current rating to",e),t.prevAll().addBack().addClass(o.active),t.next())&&e%1!=0&&(i.addClass(o.partiallyActive).addClass(o.active),i.css(a.filledCustomPropName,n+"%"),"transparent"===i.css("backgroundColor"))&&i.removeClass(o.partiallyActive).removeClass(o.active),f.is.initialLoad()||r.onRate.call(u,e)},initialLoad:function(){e=!0}},setting:function(e,t){if(f.debug("Changing setting",e,t),C.isPlainObject(e))C.extend(!0,r,e);else{if(void 0===t)return r[e];C.isPlainObject(r[e])?C.extend(!0,r[e],t):r[e]=t}},internal:function(e,t){if(C.isPlainObject(e))C.extend(!0,f,e);else{if(void 0===t)return f[e];f[e]=t}},debug:function(){!r.silent&&r.debug&&(r.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,r.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!r.silent&&r.verbose&&r.debug&&(r.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,r.name+":"),f.verbose.apply(console,arguments)))},error:function(){r.silent||(f.error=Function.prototype.bind.call(console.error,console,r.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,i;r.performance&&(i=(t=Date.now())-(_||t),_=t,y.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:u,"Execution Time":i})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(function(){f.performance.display()},500)},display:function(){var e=r.name+":",i=0;_=!1,clearTimeout(f.performance.timer),C.each(y,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",1<v.length&&(e+=" ("+v.length+")"),0<y.length&&(console.groupCollapsed(e),console.table?console.table(y):C.each(y,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),y=[]}},invoke:function(n,e,t){var r,o,i,a=d;return e=e||w,t=t||u,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,C.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!C.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):C.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:f.error(s.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(g)?g.push(i):void 0!==g?g=[g,i]:void 0!==i&&(g=i),o}};x?(void 0===d&&f.initialize(),f.invoke(b)):(void 0!==d&&d.invoke("destroy"),f.initialize())}),void 0!==g?g:this},C.fn.rating.settings={name:"Rating",namespace:"rating",icon:"star",silent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined"},metadata:{rating:"rating",maxRating:"maxRating",icon:"icon"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading",partiallyActive:"partial"},cssVars:{filledCustomPropName:"--full"},selector:{icon:".icon"},templates:{deQuote:function(e,t){return String(e).replace(/"/g,t?"&quot;":"")},icon:function(e,t){for(var i=1,n="",r=C.fn.rating.settings.templates.deQuote;i<=e;)n+='<i class="'+r(t)+' icon"></i>',i++;return n}}}})(jQuery,window,document),((A,P,M)=>{function I(e){return"function"==typeof e&&"number"!=typeof e.nodeType}P=void 0!==P&&P.Math===Math?P:globalThis,A.fn.search=function(b){var x,w=A(this),C=Date.now(),T=[],S=b,k="string"==typeof S,E=[].slice.call(arguments,1);return w.each(function(){var d=A.isPlainObject(b)?A.extend(!0,{},A.fn.search.settings,b):A.extend({},A.fn.search.settings),l=d.className,c=d.metadata,n=d.regExp,o=d.fields,u=d.selector,h=d.error,e=d.namespace,i="."+e,t=e+"-module",p=A(this),f=p.find(u.prompt),r=p.find(u.searchButton),a=p.find(u.results),s=p.find(u.result),m=(p.find(u.category),this),g=p.data(t),v=!1,_=!1,y={initialize:function(){y.verbose("Initializing module"),y.get.settings(),y.determine.searchFields(),y.bind.events(),y.set.type(),y.create.results(),y.instantiate()},instantiate:function(){y.verbose("Storing instance of module",y),g=y,p.data(t,y)},destroy:function(){y.verbose("Destroying instance"),p.off(i).removeData(t)},refresh:function(){y.debug("Refreshing selector cache"),f=p.find(u.prompt),r=p.find(u.searchButton),p.find(u.category),a=p.find(u.results),s=p.find(u.result)},refreshResults:function(){a=p.find(u.results),s=p.find(u.result)},bind:{events:function(){y.verbose("Binding events to search"),d.automatic&&(p.on(y.get.inputEvent()+i,u.prompt,y.event.input),f.attr("autocomplete",y.is.chrome()?"fomantic-search":"off")),p.on("focus"+i,u.prompt,y.event.focus).on("blur"+i,u.prompt,y.event.blur).on("keydown"+i,u.prompt,y.handleKeyboard).on("click"+i,u.searchButton,y.query).on("mousedown"+i,u.results,y.event.result.mousedown).on("mouseup"+i,u.results,y.event.result.mouseup).on("click"+i,u.result,y.event.result.click)}},determine:{searchFields:function(){b&&void 0!==b.searchFields&&(d.searchFields=b.searchFields)}},event:{input:function(){d.searchDelay?(clearTimeout(y.timer),y.timer=setTimeout(function(){y.is.focused()&&y.query()},d.searchDelay)):y.query()},focus:function(){y.set.focus(),d.searchOnFocus&&y.has.minimumCharacters()&&y.query(function(){y.can.show()&&y.showResults()})},blur:function(e){function t(){y.cancel.query(),y.remove.focus(),y.timer=setTimeout(function(){y.hideResults()},d.hideDelay)}M.activeElement!==this&&(_=!1,y.resultsClicked?(y.debug("Determining if user action caused search to close"),p.one("click.close"+i,u.results,function(e){y.is.inMessage(e)||v?f.trigger("focus"):(v=!1,y.is.animating()||y.is.hidden()||t())})):(y.debug("Input blurred without user action, closing results"),t()))},result:{mousedown:function(){y.resultsClicked=!0},mouseup:function(){y.resultsClicked=!1},click:function(e){y.debug("Search result selected");var t=(a=A(this)).find(u.title).eq(0),i=a.is("a[href]")?a:a.find("a[href]").eq(0),n=i.attr("href")||!1,r=i.attr("target")||!1,t=0<t.length&&t.text(),o=y.get.results(),a=a.data(c.result)||y.get.result(t,o),s=y.get.value();I(d.onSelect)&&!1===d.onSelect.call(m,a,o)?(y.debug("Custom onSelect callback cancelled default select action"),v=!0):(y.hideResults(),t&&y.get.value()===s&&y.set.value(t),n&&(e.preventDefault(),y.verbose("Opening search link found in result",i),"_blank"===r||e.ctrlKey?P.open(n):P.location.href=n))}}},ensureVisible:function(e){var t,i,n;0!==e.length&&(e=(t=e.position().top)+e.outerHeight(!0),i=a.scrollTop(),n=a.height(),t<0?a.scrollTop(i+t):n<e&&a.scrollTop(i+(e-n)))},handleKeyboard:function(e){var t,i=p.find(u.result),n=p.find(u.category),r=i.filter("."+l.active),o=i.index(r),a=i.length,r=0<r.length,s=e.which;if(27===s&&(y.is.visible()?y.hideResults():(y.verbose("Escape key pressed, blurring search field"),f.trigger("blur")),e.stopPropagation(),_=!0),y.is.visible())if(13===s){if(y.verbose("Enter key pressed, selecting active result"),0<i.filter("."+l.active).length)return y.event.result.click.call(i.filter("."+l.active),e),e.preventDefault(),!1}else 38===s&&r?(y.verbose("Up key pressed, changing active result"),t=o-1<0?o:o-1,n.removeClass(l.active),i.removeClass(l.active).eq(t).addClass(l.active).closest(n).addClass(l.active),y.ensureVisible(i.eq(t)),e.preventDefault()):40===s&&(y.verbose("Down key pressed, changing active result"),t=a<=o+1?o:o+1,n.removeClass(l.active),i.removeClass(l.active).eq(t).addClass(l.active).closest(n).addClass(l.active),y.ensureVisible(i.eq(t)),e.preventDefault());else 13===s&&(y.verbose("Enter key pressed, executing query"),y.query(),y.set.buttonPressed(),f.one("keyup",y.remove.buttonFocus))},setup:{api:function(n,r){var e={debug:d.debug,on:!1,cache:d.cache,action:"search",urlData:{query:n}};A.extend(!0,e,d.apiSettings,{onSuccess:function(e,t,i){y.parse.response.call(m,e,n),r(),d.apiSettings&&"function"==typeof d.apiSettings.onSuccess&&d.apiSettings.onSuccess.call(this,e,t,i)},onFailure:function(e,t,i){y.displayMessage(h.serverError),r(),d.apiSettings&&"function"==typeof d.apiSettings.onFailure&&d.apiSettings.onFailure.call(this,e,t,i)},onAbort:function(e,t,i){d.apiSettings&&"function"==typeof d.apiSettings.onAbort&&d.apiSettings.onAbort.call(this,e,t,i)},onError:function(e,t,i){y.error(),d.apiSettings&&"function"==typeof d.apiSettings.onError&&d.apiSettings.onError.call(this,e,t,i)}}),y.verbose("Setting up API request",e),p.api(e)}},can:{useAPI:function(){return void 0!==A.fn.api},show:function(){return y.is.focused()&&!y.is.visible()&&!y.is.empty()},transition:function(){return d.transition&&void 0!==A.fn.transition}},is:{animating:function(){return a.hasClass(l.animating)},chrome:function(){return!!P.chrome&&!P.StyleMedia},hidden:function(){return a.hasClass(l.hidden)},inMessage:function(e){var t;if(e.target)return t=A(e.target),A.contains(M.documentElement,e.target)&&0<t.closest(u.message).length},empty:function(){return""===a.html()},visible:function(){return 0<a.filter(":visible").length},focused:function(){return 0<f.filter(":focus").length}},get:{settings:function(){A.isPlainObject(b)&&b.searchFullText&&(d.fullTextSearch=b.searchFullText,y.error(d.error.oldSearchSyntax,m)),d.ignoreDiacritics&&!String.prototype.normalize&&(d.ignoreDiacritics=!1,y.error(h.noNormalize,m))},inputEvent:function(){var e=f[0];return void 0!==e&&void 0!==e.oninput?"input":void 0!==e&&void 0!==e.onpropertychange?"propertychange":"keyup"},value:function(){return f.val()},results:function(){return p.data(c.results)},result:function(i,e){var n=!1;return i=void 0!==i?i:y.get.value(),e=void 0!==e?e:y.get.results(),"category"===d.type?(y.debug("Finding result that matches",i),A.each(e,function(e,t){if(Array.isArray(t.results)&&(n=y.search.object(i,t.results)[0]))return!1})):(y.debug("Finding result in results object",i),n=y.search.object(i,e)[0]),n||!1}},select:{firstResult:function(){y.verbose("Selecting first result"),s.first().addClass(l.active)}},set:{focus:function(){p.addClass(l.focus)},loading:function(){p.addClass(l.loading)},value:function(e){y.verbose("Setting search input value",e),f.val(e)},type:function(e){e=e||d.type,l[e]&&p.addClass(l[e])},buttonPressed:function(){r.addClass(l.pressed)}},remove:{loading:function(){p.removeClass(l.loading)},focus:function(){p.removeClass(l.focus)},buttonPressed:function(){r.removeClass(l.pressed)},diacritics:function(e){return d.ignoreDiacritics?e.normalize("NFD").replace(/[\u0300-\u036F]/g,""):e}},query:function(e){e=I(e)?e:function(){};var t=y.get.value(),i=y.read.cache(t);e=e||function(){},y.has.minimumCharacters()?(i?(y.debug("Reading result from cache",t),y.save.results(i.results),d.onResults.call(m,i.results,!0),y.addResults(i.html),y.inject.id(i.results),e()):(y.debug("Querying for",t),A.isPlainObject(d.source)||Array.isArray(d.source)?(y.search.local(t),e()):y.can.useAPI()?y.search.remote(t,e):(y.error(h.source),e())),d.onSearchQuery.call(m,t)):y.hideResults()},search:{local:function(e){var t,i=y.search.object(e,d.source);y.set.loading(),y.save.results(i),y.debug("Returned full local search results",i),0<d.maxResults&&(y.debug("Using specified max results",i),i=i.slice(0,d.maxResults)),"category"===d.type&&(i=y.create.categoryResults(i)),t=y.generateResults({results:i}),y.remove.loading(),y.addResults(t),y.inject.id(i),y.write.cache(e,{html:t,results:i})},remote:function(e,t){t=I(t)?t:function(){},p.api("is loading")&&p.api("abort"),y.setup.api(e,t),p.api("query")},object:function(r,e,t){function o(e,t){var i=-1===A.inArray(t,s),n=-1===A.inArray(t,c),r=-1===A.inArray(t,l);i&&n&&r&&e.push(t)}r=y.remove.diacritics(String(r));var a,s=[],l=[],c=[],i=r.replace(n.escape,"\\$&"),u=new RegExp(n.beginsWith+i,"i");return e=e||d.source,t=void 0!==t?t:d.searchFields,Array.isArray(t)||(t=[t]),void 0===e||!1===e?(y.error(h.source),[]):(a=t.length-1,A.each(e,function(e,i){var n=[];A.each(t,function(e,t){if("string"==typeof i[t]||"number"==typeof i[t]){if(t="string"==typeof i[t]?y.remove.diacritics(i[t]):i[t].toString(),"all"===d.fullTextSearch){if(n.push(t),e<a)return!0;t=n.join(" ")}"all"!==d.fullTextSearch&&-1!==t.search(u)?o(s,i):"exact"===d.fullTextSearch&&y.exactSearch(r,t)||"some"===d.fullTextSearch&&y.wordSearch(r,t)||"all"===d.fullTextSearch&&y.wordSearch(r,t,!0)?o(l,i):!0===d.fullTextSearch&&y.fuzzySearch(r,t)&&o(c,i)}})}),A.merge(l,c),A.merge(s,l),s)}},exactSearch:function(e,t){return e=e.toLowerCase(),-1<(t=t.toLowerCase()).indexOf(e)},wordSearch:function(e,t,i){for(var n=e.split(/\s+/),r=n.length,o=!1,a=0;a<r&&!(!(o=y.exactSearch(n[a],t))&&i||o&&!i);a++);return o},fuzzySearch:function(e,t){var i=t.length,n=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),i<n)return!1;if(n===i)return e===t;for(var r=0,o=0;r<n;r++){for(var a=!1,s=e.charCodeAt(r);o<i;)if(t.charCodeAt(o++)===s){a=!0;break}if(!a)return!1}return!0},parse:{response:function(e,t){Array.isArray(e)&&((i={})[o.results]=e,e=i);var i=y.generateResults(e);y.verbose("Parsing server response",e),void 0!==e&&void 0!==t&&void 0!==e[o.results]&&(y.addResults(i),y.inject.id(e[o.results]),y.write.cache(t,{html:i,results:e[o.results]}),y.save.results(e[o.results]))}},cancel:{query:function(){y.can.useAPI()&&p.api("abort")}},has:{minimumCharacters:function(){return y.get.value().length>=d.minCharacters},results:function(){return 0!==a.length&&""!==a.html()}},clear:{cache:function(e){var t=p.data(c.cache);e?t&&t[e]&&(y.debug("Removing value from cache",e),delete t[e],p.data(c.cache,t)):(y.debug("Clearing cache",e),p.removeData(c.cache))}},read:{cache:function(e){var t=p.data(c.cache);return!!d.cache&&(y.verbose("Checking cache for generated html for query",e),"object"==typeof t)&&void 0!==t[e]&&t[e]}},create:{categoryResults:function(e){var i={};return A.each(e,function(e,t){t.category&&(void 0===i[t.category]?(y.verbose("Creating new category of results",t.category),i[t.category]={name:t.category,results:[t]}):i[t.category].results.push(t))}),i},id:function(e,t){var i,e=e+1;return void 0!==t?(t=String.fromCharCode(97+t),y.verbose("Creating category result id",i=t+e)):y.verbose("Creating result id",i=e),i},results:function(){0===a.length&&(a=A("<div />").addClass(l.results).appendTo(p))}},inject:{result:function(e,t,i){y.verbose("Injecting result into results"),i=(void 0!==i?a.children().eq(i).children(u.results).first():a).children(u.result).eq(t),y.verbose("Injecting results metadata",i),i.data(c.result,e)},id:function(e){y.debug("Injecting unique ids into results");var i=0,n=0;return"category"===d.type?A.each(e,function(e,t){0<t.results.length&&(n=0,A.each(t.results,function(e,t){void 0===t.id&&(t.id=y.create.id(n,i)),y.inject.result(t,n,i),n++}),i++)}):A.each(e,function(e,t){void 0===t.id&&(t.id=y.create.id(n)),y.inject.result(t,n),n++}),e}},save:{results:function(e){y.verbose("Saving current search results to metadata",e),p.data(c.results,e)}},write:{cache:function(e,t){var i=void 0!==p.data(c.cache)?p.data(c.cache):{};d.cache&&(y.verbose("Writing generated html to cache",e,t),i[e]=t,p.data(c.cache,i))}},addResults:function(e){if(I(d.onResultsAdd)&&!1===d.onResultsAdd.call(a,e))return y.debug("onResultsAdd callback cancelled default action"),!1;e?(a.html(e),y.refreshResults(),d.selectFirstResult&&y.select.firstResult(),y.showResults()):y.hideResults(function(){a.empty()})},showResults:function(e){e=I(e)?e:function(){},_||!y.is.visible()&&y.has.results()&&(y.can.transition()?(y.debug("Showing results with css animations"),a.transition({animation:d.transition+" in",debug:d.debug,verbose:d.verbose,silent:d.silent,duration:d.duration,onShow:function(){var e=p.find(u.result).eq(0);y.ensureVisible(e)},onComplete:function(){e()},queue:!0})):(y.debug("Showing results with javascript"),a.stop().fadeIn(d.duration,d.easing)),d.onResultsOpen.call(a))},hideResults:function(e){e=I(e)?e:function(){},y.is.visible()&&(y.can.transition()?(y.debug("Hiding results with css animations"),a.transition({animation:d.transition+" out",debug:d.debug,verbose:d.verbose,silent:d.silent,duration:d.duration,onComplete:function(){e()},queue:!0})):(y.debug("Hiding results with javascript"),a.stop().fadeOut(d.duration,d.easing)),d.onResultsClose.call(a))},generateResults:function(e){y.debug("Generating html from response",e);var t=d.templates[d.type],i=A.isPlainObject(e[o.results])&&!A.isEmptyObject(e[o.results]),n=Array.isArray(e[o.results])&&0<e[o.results].length,r="";return i||n?(0<d.maxResults&&(i?"standard"===d.type&&y.error(h.maxResults):e[o.results]=e[o.results].slice(0,d.maxResults)),I(t)?r=t(e,o,d.preserveHTML):y.error(h.noTemplate,!1)):d.showNoResults&&(r=y.displayMessage(h.noResults,"empty",h.noResultsHeader)),d.onResults.call(m,e),r},displayMessage:function(e,t,i){return y.debug("Displaying message",e,t=t||"standard",i),y.addResults(d.templates.message(e,t,i)),d.templates.message(e,t,i)},setting:function(e,t){if(A.isPlainObject(e))A.extend(!0,d,e);else{if(void 0===t)return d[e];d[e]=t}},internal:function(e,t){if(A.isPlainObject(e))A.extend(!0,y,e);else{if(void 0===t)return y[e];y[e]=t}},debug:function(){!d.silent&&d.debug&&(d.performance?y.performance.log(arguments):(y.debug=Function.prototype.bind.call(console.info,console,d.name+":"),y.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?y.performance.log(arguments):(y.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),y.verbose.apply(console,arguments)))},error:function(){d.silent||(y.error=Function.prototype.bind.call(console.error,console,d.name+":"),y.error.apply(console,arguments))},performance:{log:function(e){var t,i;d.performance&&(i=(t=Date.now())-(C||t),C=t,T.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:m,"Execution Time":i})),clearTimeout(y.performance.timer),y.performance.timer=setTimeout(function(){y.performance.display()},500)},display:function(){var e=d.name+":",i=0;C=!1,clearTimeout(y.performance.timer),A.each(T,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",1<w.length&&(e+=" ("+w.length+")"),0<T.length&&(console.groupCollapsed(e),console.table?console.table(T):A.each(T,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),T=[]}},invoke:function(n,e,t){var r,o,i,a=g;return e=e||E,t=t||m,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,A.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!A.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):A.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:y.error(h.method,n),!1);a=a[i]})),I(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(x)?x.push(i):void 0!==x?x=[x,i]:void 0!==i&&(x=i),o}};k?(void 0===g&&y.initialize(),y.invoke(S)):(void 0!==g&&g.invoke("destroy"),y.initialize())}),void 0!==x?x:this},A.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchOnFocus:!0,searchFields:["id","title","description"],displayField:"",fullTextSearch:"exact",ignoreDiacritics:!1,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,preserveHTML:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e,t){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",category:"category",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Fomantic API module was not included",noResultsHeader:"No Results",noResults:"Your search returned no results",noTemplate:"A valid template name was not specified.",oldSearchSyntax:"searchFullText setting has been renamed fullTextSearch for consistency, please adjust your settings.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined.",noNormalize:'"ignoreDiacritics" setting will be ignored. Browser does not support String().normalize(). You may consider including <https://cdn.jsdelivr.net/npm/unorm@1.4.1/lib/unorm.min.js> as a polyfill.'},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[$()*+./?[\\\]^{|}-]/g,beginsWith:"(?:\\s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e,t){var i;return!t&&(i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},/["&'<>`]/.test(e))?(e=e.replace(/&(?![\d#a-z]{1,12};)/gi,"&amp;")).replace(/["'<>`]/g,function(e){return i[e]}):e},message:function(e,t,i){var n="";return void 0!==e&&void 0!==t&&(n+='<div class="message '+t+'">',i&&(n+='<div class="header">'+i+"</div>"),n=n+' <div class="description">'+e+"</div></div>"),n},category:function(e,i,n){var r="",o=A.fn.search.settings.templates.escape;return void 0!==e[i.categoryResults]&&(A.each(e[i.categoryResults],function(e,t){void 0!==t[i.results]&&0<t.results.length&&(r+='<div class="category">',void 0!==t[i.categoryName]&&(r+='<div class="name">'+o(t[i.categoryName],n)+"</div>"),r+='<div class="results">',A.each(t.results,function(e,t){r+=t[i.url]?'<a class="result" href="'+t[i.url].replace(/"/g,"")+'">':'<a class="result">',void 0!==t[i.image]&&(r+='<div class="image"> <img src="'+t[i.image].replace(/"/g,"")+'"></div>'),r+='<div class="content">',void 0!==t[i.price]&&(r+='<div class="price">'+o(t[i.price],n)+"</div>"),void 0!==t[i.title]&&(r+='<div class="title">'+o(t[i.title],n)+"</div>"),void 0!==t[i.description]&&(r+='<div class="description">'+o(t[i.description],n)+"</div>"),r+="</div></a>"}),r+="</div></div>")}),e[i.action]&&(r+=!1===i.actionURL?'<div class="action">'+o(e[i.action][i.actionText],n)+"</div>":'<a href="'+e[i.action][i.actionURL].replace(/"/g,"")+'" class="action">'+o(e[i.action][i.actionText],n)+"</a>"),r)},standard:function(e,i,n){var r="",o=A.fn.search.settings.templates.escape;return void 0!==e[i.results]&&(A.each(e[i.results],function(e,t){r+=t[i.url]?'<a class="result" href="'+t[i.url].replace(/"/g,"")+'">':'<a class="result">',void 0!==t[i.image]&&(r+='<div class="image"> <img src="'+t[i.image].replace(/"/g,"")+'"></div>'),r+='<div class="content">',void 0!==t[i.price]&&(r+='<div class="price">'+o(t[i.price],n)+"</div>"),void 0!==t[i.title]&&(r+='<div class="title">'+o(t[i.title],n)+"</div>"),void 0!==t[i.description]&&(r+='<div class="description">'+o(t[i.description],n)+"</div>"),r+="</div></a>"}),e[i.action]&&(r+=!1===i.actionURL?'<div class="action">'+o(e[i.action][i.actionText],n)+"</div>":'<a href="'+e[i.action][i.actionURL].replace(/"/g,"")+'" class="action">'+o(e[i.action][i.actionText],n)+"</a>"),r)}}},A.extend(A.easing,{easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)}})})(jQuery,window,document),((T,e,S)=>{void 0!==e&&e.Math===Math||globalThis,T.fn.shape=function(g){var v,_=T(this),y=Date.now(),b=[],x=g,w="string"==typeof x,C=[].slice.call(arguments,1);return _.each(function(){var i,n,o=T.isPlainObject(g)?T.extend(!0,{},T.fn.shape.settings,g):T.extend({},T.fn.shape.settings),e=o.namespace,a=o.selector,s=o.error,l=o.className,t="."+e,r="module-"+e,c=T(this),u=c.find(">"+a.sides),d=u.find(">"+a.side),h=!1,p=this,f=c.data(r),m={initialize:function(){m.verbose("Initializing module for",p),m.set.defaultSide(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),f=m,c.data(r,f)},destroy:function(){m.verbose("Destroying previous module for",p),c.removeData(r).off(t)},refresh:function(){m.verbose("Refreshing selector cache for",p),c=T(p),u=T(this).find(a.sides),d=T(this).find(a.side)},repaint:function(){m.verbose("Forcing repaint event"),(u[0]||S.createElement("div")).offsetWidth},animate:function(e,t){m.verbose("Animating box with properties",e),t=t||function(e){m.verbose("Executing animation callback"),void 0!==e&&e.stopPropagation(),m.reset(),m.set.active()},o.onBeforeChange.call(n[0]),m.verbose("Starting CSS animation"),c.addClass(l.animating),u.css(e).one("transitionend",t),m.set.duration(o.duration),requestAnimationFrame(function(){c.addClass(l.animating),i.addClass(l.hidden)})},queue:function(e){m.debug("Queueing animation of",e),u.one("transitionend",function(){m.debug("Executing queued animation"),setTimeout(function(){c.shape(e)},0)})},reset:function(){m.verbose("Animating states reset"),c.removeClass(l.animating).attr("style","").removeAttr("style"),u.attr("style","").removeAttr("style"),d.attr("style","").removeAttr("style").removeClass(l.hidden),n.removeClass(l.animating).attr("style","").removeAttr("style")},is:{complete:function(){return d.filter("."+l.active)[0]===n[0]},animating:function(){return c.hasClass(l.animating)},hidden:function(){return 0<c.closest(":hidden").length}},set:{defaultSide:function(){i=d.filter("."+o.className.active),n=0<i.next(a.side).length?i.next(a.side):d.first(),h=!1,m.verbose("Active side set to",i),m.verbose("Next side set to",n)},duration:function(e){e=e||o.duration,m.verbose("Setting animation duration",e="number"==typeof e?e+"ms":e),!o.duration&&0!==o.duration||u.add(d).css({"transition-duration":e})},currentStageSize:function(){var e=(t=d.filter("."+o.className.active)).outerWidth(!0),t=t.outerHeight(!0);c.css({width:e,height:t})},stageSize:function(){var e=c.clone().addClass(l.loading),t=(i=e.find(">"+a.sides+">"+a.side)).filter("."+o.className.active),i=h?i.eq(h):0<t.next(a.side).length?t.next(a.side):i.first(),n="next"===o.width?i.outerWidth(!0):"initial"===o.width?c.width():o.width,r="next"===o.height?i.outerHeight(!0):"initial"===o.height?c.height():o.height;t.removeClass(l.active),i.addClass(l.active),e.insertAfter(c),e.remove(),"auto"!==o.width&&(c.css("width",n+o.jitter),m.verbose("Specifying width during animation",n)),"auto"!==o.height&&(c.css("height",r+o.jitter),m.verbose("Specifying height during animation",r))},nextSide:function(e){h=e,n=d.filter(e),h=d.index(n),0===n.length&&(m.set.defaultSide(),m.error(s.side)),m.verbose("Next side manually set to",n)},active:function(){m.verbose("Setting new side to active",n),d.removeClass(l.active),n.addClass(l.active),o.onChange.call(n[0]),m.set.defaultSide()}},flip:{to:function(e,t){var i;m.is.hidden()?m.debug("Module not visible",n):!m.is.complete()||m.is.animating()||o.allowRepeats?(i=m.get.transform[e](),m.is.animating()?m.queue("flip "+e):(m.debug("Flipping "+e,n),m.set.stageSize(),m.stage[t](),m.animate(i))):m.debug("Side already visible",n)},up:function(){m.flip.to("up","above")},down:function(){m.flip.to("down","below")},left:function(){m.flip.to("left","left")},right:function(){m.flip.to("right","right")},over:function(){m.flip.to("over","behind")},back:function(){m.flip.to("back","behind")}},get:{transform:{up:function(){var e=i.outerHeight(!0)/2;return{transform:"translateY("+(n.outerHeight(!0)-e)+"px) translateZ(-"+e+"px) rotateX(-90deg)"}},down:function(){var e=i.outerHeight(!0)/2;return{transform:"translateY(-"+e+"px) translateZ(-"+e+"px) rotateX(90deg)"}},left:function(){var e=i.outerWidth(!0)/2;return{transform:"translateX("+(n.outerWidth(!0)-e)+"px) translateZ(-"+e+"px) rotateY(90deg)"}},right:function(){var e=i.outerWidth(!0)/2;return{transform:"translateX(-"+e+"px) translateZ(-"+e+"px) rotateY(-90deg)"}},over:function(){return{transform:"translateX("+-(i.outerWidth(!0)-n.outerWidth(!0))/2+"px) rotateY(180deg)"}},back:function(){return{transform:"translateX("+-(i.outerWidth(!0)-n.outerWidth(!0))/2+"px) rotateY(-180deg)"}}},nextSide:function(){return 0<i.next(a.side).length?i.next(a.side):d.first()}},stage:{above:function(){var e={origin:(i.outerHeight(!0)-n.outerHeight(!0))/2,depth:{active:n.outerHeight(!0)/2,next:i.outerHeight(!0)/2}};m.verbose("Setting the initial animation position as above",n,e),i.css({transform:"rotateX(0deg)"}),n.addClass(l.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px) translateY(-"+e.depth.active+"px)"})},below:function(){var e={origin:(i.outerHeight(!0)-n.outerHeight(!0))/2,depth:{active:n.outerHeight(!0)/2,next:i.outerHeight(!0)/2}};m.verbose("Setting the initial animation position as below",n,e),i.css({transform:"rotateX(0deg)"}),n.addClass(l.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px) translateY("+e.depth.active+"px)"})},left:function(){var e=i.outerWidth(!0),t=n.outerWidth(!0);m.verbose("Setting the initial animation position as left",n,t={origin:(e-t)/2,depth:{active:t/2,next:e/2}}),i.css({transform:"rotateY(0deg)"}),n.addClass(l.animating).css({left:t.origin+"px",transform:"rotateY(-90deg) translateZ("+t.depth.next+"px) translateX(-"+t.depth.active+"px)"})},right:function(){var e=i.outerWidth(!0),t=n.outerWidth(!0);m.verbose("Setting the initial animation position as right",n,t={origin:(e-t)/2,depth:{active:t/2,next:e/2}}),i.css({transform:"rotateY(0deg)"}),n.addClass(l.animating).css({left:t.origin+"px",transform:"rotateY(90deg) translateZ("+t.depth.next+"px) translateX("+t.depth.active+"px)"})},behind:function(){var e=i.outerWidth(!0),t=n.outerWidth(!0);m.verbose("Setting the initial animation position as behind",n,t={origin:(e-t)/2,depth:{active:t/2,next:e/2}}),i.css({transform:"rotateY(0deg)"}),n.addClass(l.animating).css({left:t.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(e,t){if(m.debug("Changing setting",e,t),T.isPlainObject(e))T.extend(!0,o,e);else{if(void 0===t)return o[e];T.isPlainObject(o[e])?T.extend(!0,o[e],t):o[e]=t}},internal:function(e,t){if(T.isPlainObject(e))T.extend(!0,m,e);else{if(void 0===t)return m[e];m[e]=t}},debug:function(){!o.silent&&o.debug&&(o.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,o.name+":"),m.debug.apply(console,arguments)))},verbose:function(){!o.silent&&o.verbose&&o.debug&&(o.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),m.verbose.apply(console,arguments)))},error:function(){o.silent||(m.error=Function.prototype.bind.call(console.error,console,o.name+":"),m.error.apply(console,arguments))},performance:{log:function(e){var t,i;o.performance&&(i=(t=Date.now())-(y||t),y=t,b.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:p,"Execution Time":i})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(function(){m.performance.display()},500)},display:function(){var e=o.name+":",i=0;y=!1,clearTimeout(m.performance.timer),T.each(b,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",1<_.length&&(e+=" ("+_.length+")"),0<b.length&&(console.groupCollapsed(e),console.table?console.table(b):T.each(b,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(n,e,t){var r,o,i,a=f;return e=e||C,t=t||p,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,T.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!T.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):T.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:m.error(s.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(v)?v.push(i):void 0!==v?v=[v,i]:void 0!==i&&(v=i),o}};w?(void 0===f&&m.initialize(),0<(e=c.find("input")).length?(e.trigger("blur"),setTimeout(function(){m.invoke(x)},150)):m.invoke(x)):(void 0!==f&&f.invoke("destroy"),m.initialize())}),void 0!==v?v:this},T.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",onBeforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}})(jQuery,window,document),((R,O,B)=>{function F(e){return"function"==typeof e&&"number"!=typeof e.nodeType}O=void 0!==O&&O.Math===Math?O:globalThis,R.fn.sidebar=function(C){var T,e=R(this),S=R(O),k=R(B),E=R("body"),A=(R("html"),R("head")),P=Date.now(),M=[],I=C,D="string"==typeof I,L=[].slice.call(arguments,1),z=function(e,t){var i;return 0<=[O,B].indexOf(e)?i=E:0===(i=R(t.document).find(e)).length&&(i=t.frameElement?z(e,t.parent):E),i};return e.each(function(){var r,o,e,a,s=R.isPlainObject(C)?R.extend(!0,{},R.fn.sidebar.settings,C):R.extend({},R.fn.sidebar.settings),t=s.selector,l=s.className,i=s.namespace,n=s.regExp,c=s.error,u="."+i,d="module-"+i,h=R(this),p=z(s.context,O),f=p[0]===E[0],m=h.children(t.sidebar),g=(p.children(t.fixed),p.children(t.pusher)),v=this,_=h.data(d),y="",b="",x=!1,w={initialize:function(){w.debug("Initializing sidebar",C),w.create.id(),s.delaySetup?requestAnimationFrame(w.setup.layout):w.setup.layout(),requestAnimationFrame(function(){w.setup.cache()}),w.instantiate()},instantiate:function(){w.verbose("Storing instance of module",w),_=w,h.data(d,w)},create:{id:function(){e=(Math.random().toString(16)+"000000000").slice(2,10),o="."+e,w.verbose("Creating unique id for element",e)}},destroy:function(){w.verbose("Destroying previous module for",h),h.off(u).removeData(d),p.off(o),S.off(o),k.off(o)},event:{clickaway:function(e){var t;s.closable&&(t=0<g.find(e.target).length||g.is(e.target),e=p.is(e.target),t&&(w.verbose("User clicked on dimmed page"),w.hide()),e)&&(w.verbose("User clicked on dimmable context (scaled out page)"),w.hide())},touch:function(e){},containScroll:function(e){v.scrollTop<=0&&(v.scrollTop=1),v.scrollTop+v.offsetHeight>=v.scrollHeight&&(v.scrollTop=v.scrollHeight-v.offsetHeight-1)},scroll:function(e){0===R(e.target).closest(t.sidebar).length&&e.preventDefault()}},bind:{clickaway:function(){w.verbose("Adding clickaway events to context",p),p.on("click"+o,w.event.clickaway).on("touchend"+o,w.event.clickaway)},scrollLock:function(){s.scrollLock&&(w.debug("Disabling page scroll"),(x=w.has.scrollbar())&&(w.save.bodyMargin(),w.set.bodyMargin()),p.addClass(l.locked)),w.verbose("Adding events to contain sidebar scroll"),k.on("touchmove"+o,w.event.touch),h.on("scroll"+u,w.event.containScroll)}},unbind:{clickaway:function(){w.verbose("Removing clickaway events from context",p),p.off(o)},scrollLock:function(){w.verbose("Removing scroll lock from page"),x&&w.restore.bodyMargin(),p.removeClass(l.locked),k.off(o),h.off("scroll"+u)}},add:{inlineCSS:function(){var e=w.cache.width||h.outerWidth(),t=w.cache.height||h.outerHeight(),i=w.is.rtl(),n=w.get.direction(),t={left:e,right:-e,top:t,bottom:-t};i&&(w.verbose("RTL detected, flipping widths"),t.left=-e,t.right=e),i="<style>","left"===n||"right"===n?(w.debug("Adding CSS rules for animation distance",e),i+=" .ui.visible."+n+".sidebar ~ .fixed, .ui.visible."+n+".sidebar ~ .pusher {           transform: translate3d("+t[n]+"px, 0, 0); }"):"top"!==n&&"bottom"!==n||(i+=" .ui.visible."+n+".sidebar ~ .fixed, .ui.visible."+n+".sidebar ~ .pusher {           transform: translate3d(0, "+t[n]+"px, 0); }"),w.is.ie()&&("left"===n||"right"===n?(w.debug("Adding CSS rules for animation distance",e),i+=" body.pushable > .ui.visible."+n+".sidebar ~ .pusher::after {           transform: translate3d("+t[n]+"px, 0, 0); }"):"top"!==n&&"bottom"!==n||(i+=" body.pushable > .ui.visible."+n+".sidebar ~ .pusher::after {           transform: translate3d(0, "+t[n]+"px, 0); }"),i+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher::after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher::after {           transform: translate3d(0, 0, 0); }"),r=R(i+="</style>").appendTo(A),w.debug("Adding sizing css to head",r)}},refresh:function(){w.verbose("Refreshing selector cache"),p=z(s.context,O),w.refreshSidebars(),g=p.children(t.pusher),p.children(t.fixed),w.clear.cache()},refreshSidebars:function(){w.verbose("Refreshing other sidebars"),m=p.children(t.sidebar)},repaint:function(){w.verbose("Forcing repaint event"),v.style.display="none",v.offsetHeight,v.scrollTop=v.scrollTop,v.style.display=""},setup:{cache:function(){w.cache={width:h.outerWidth(),height:h.outerHeight()}},layout:function(){0===p.children(t.pusher).length&&(w.debug("Adding wrapper element for sidebar"),w.error(c.pusher),g=R('<div class="pusher" />'),p.children().not(t.omitted).not(m).wrapAll(g),w.refresh()),0!==h.nextAll(t.pusher).length&&h.nextAll(t.pusher)[0]===g[0]||(w.debug("Moved sidebar to correct parent element"),w.error(c.movedSidebar,v),h.detach().prependTo(p),w.refresh()),w.clear.cache(),w.set.pushable(),w.set.direction()}},attachEvents:function(e,t){var i=R(e);t=F(w[t])?w[t]:w.toggle,0<i.length?(w.debug("Attaching sidebar events to element",e,t),i.on("click"+u,t)):w.error(c.notFound,e)},can:{leftBodyScrollbar:function(){return void 0===w.cache.leftBodyScrollbar&&(w.cache.leftBodyScrollbar=w.is.rtl()&&(w.is.iframe&&!w.is.firefox()||w.is.safari()||w.is.edge()||w.is.ie())),w.cache.leftBodyScrollbar}},save:{bodyMargin:function(){y=p.css((f?"margin-":"padding-")+(w.can.leftBodyScrollbar()?"left":"right"));var e=parseInt(y.replace(/[^\d.]/g,""),10),t=f?O.innerWidth-B.documentElement.clientWidth:p[0].offsetWidth-p[0].clientWidth;b=e+t}},show:function(e){if(e=F(e)?e:function(){},w.is.hidden())if(!1===s.onShow.call(v))w.verbose("Show callback returned false cancelling show");else{if(s.overlay&&(w.error(c.overlay),s.transition="overlay"),w.refresh(),w.othersActive())if(w.debug("Other sidebars currently visible"),s.exclusive){if("overlay"!==s.transition)return void w.hideOthers(w.show);w.hideOthers()}else s.transition="overlay";w.set.dimmerStyles(),w.pushPage(function(){e.call(v),s.onVisible.call(v)}),s.onChange.call(v)}else w.debug("Sidebar is already visible")},hide:function(e){e=F(e)?e:function(){},(w.is.visible()||w.is.animating())&&!1!==s.onHide.call(v)&&(w.debug("Hiding sidebar",e),w.refreshSidebars(),w.pullPage(function(){e.call(v),s.onHidden.call(v)}),s.onChange.call(v))},othersAnimating:function(){return 0<m.not(h).filter("."+l.animating).length},othersVisible:function(){return 0<m.not(h).filter("."+l.visible).length},othersActive:function(){return w.othersVisible()||w.othersAnimating()},hideOthers:function(e){var t=m.not(h).filter("."+l.visible),i=t.length,n=0;e=e||function(){},t.sidebar("hide",function(){++n===i&&e()})},toggle:function(){w.verbose("Determining toggled direction"),w.is.hidden()?w.show():w.hide()},pushPage:function(t){var e,i,n=w.get.transition(),r="overlay"===n||w.othersActive()?h:g;t=F(t)?t:function(){},s.returnScroll&&(a=(f?S:p).scrollTop()),"scale down"===s.transition&&w.scrollToTop(),w.bind.scrollLock(),w.set.transition(n),w.repaint(),n=function(){w.bind.clickaway(),w.add.inlineCSS(),w.set.animating(),w.set.visible()},e=function(){w.set.dimmed()},i=function(e){e.target===r[0]&&(r.off("transitionend"+o,i),w.remove.animating(),t.call(v))},r.off("transitionend"+o),r.on("transitionend"+o,i),requestAnimationFrame(n),s.dimPage&&!w.othersVisible()&&requestAnimationFrame(e)},pullPage:function(t){var e,i,n=w.get.transition(),r="overlay"===n||w.othersActive()?h:g;t=F(t)?t:function(){},w.verbose("Removing context push state",w.get.direction()),w.unbind.clickaway(),w.unbind.scrollLock(),e=function(){w.set.transition(n),w.set.animating(),s.dimPage&&!w.othersVisible()&&w.set.closing(),w.remove.visible()},i=function(e){e.target===r[0]&&(r.off("transitionend"+o,i),w.remove.animating(),w.remove.closing(),w.remove.transition(),w.remove.inlineCSS(),"scale down"!==n&&!s.returnScroll||w.scrollBack(),s.dimPage&&!w.othersVisible()&&g.removeClass(l.dimmed),t.call(v))},r.off("transitionend"+o),r.on("transitionend"+o,i),requestAnimationFrame(e)},scrollToTop:function(){w.verbose("Scrolling to top of page to avoid animation issues"),h.scrollTop(0),(f?S:p)[0].scrollTo(0,0)},scrollBack:function(){w.verbose("Scrolling back to original page position"),(f?S:p)[0].scrollTo(0,a)},clear:{cache:function(){w.verbose("Clearing cached dimensions"),w.cache={}}},set:{bodyMargin:function(){var i=w.can.leftBodyScrollbar()?"left":"right";p.css((f?"margin-":"padding-")+i,b+"px"),p.find(t.bodyFixed.replace("right",i)).each(function(){var e=R(this),t="fixed"===e.css("position")?"padding-"+i:i;e.css(t,"calc("+e.css(t)+" + "+b+"px)")})},dimmerStyles:function(){s.blurring?g.addClass(l.blurring):g.removeClass(l.blurring)},pushed:function(){p.addClass(l.pushed)},pushable:function(){p.addClass(l.pushable)},dimmed:function(){g.addClass(l.dimmed)},active:function(){h.addClass(l.active)},animating:function(){h.addClass(l.animating)},closing:function(){g.addClass(l.closing)},transition:function(e){e=e||w.get.transition(),h.addClass(e)},direction:function(e){e=e||w.get.direction(),h.addClass(l[e])},visible:function(){h.addClass(l.visible)},overlay:function(){h.addClass(l.overlay)}},remove:{inlineCSS:function(){w.debug("Removing inline css styles",r),r&&0<r.length&&r.remove()},pushed:function(){p.removeClass(l.pushed)},pushable:function(){p.removeClass(l.pushable)},active:function(){h.removeClass(l.active)},animating:function(){h.removeClass(l.animating)},closing:function(){g.removeClass(l.closing)},transition:function(e){e=e||w.get.transition(),h.removeClass(e)},direction:function(e){e=e||w.get.direction(),h.removeClass(l[e])},visible:function(){h.removeClass(l.visible)},overlay:function(){h.removeClass(l.overlay)}},restore:{bodyMargin:function(){var i=w.can.leftBodyScrollbar()?"left":"right";p.css((f?"margin-":"padding-")+i,y),p.find(t.bodyFixed.replace("right",i)).each(function(){var e=R(this),t="fixed"===e.css("position")?"padding-"+i:i;e.css(t,"")})}},get:{direction:function(){return h.hasClass(l.top)?l.top:h.hasClass(l.right)?l.right:h.hasClass(l.bottom)?l.bottom:l.left},transition:function(){var e=w.get.direction(),e=w.is.mobile()?"auto"===s.mobileTransition?s.defaultTransition.mobile[e]:s.mobileTransition:"auto"===s.transition?s.defaultTransition.computer[e]:s.transition;return w.verbose("Determined transition",e),e}},has:{scrollbar:function(){return f||"hidden"!==p.css("overflow-y")}},is:{safari:function(){return void 0===w.cache.isSafari&&(w.cache.isSafari=/constructor/i.test(O.HTMLElement)||!!O.ApplePaySession),w.cache.isSafari},edge:function(){return void 0===w.cache.isEdge&&(w.cache.isEdge=!!O.setImmediate&&!w.is.ie()),w.cache.isEdge},firefox:function(){return void 0===w.cache.isFirefox&&(w.cache.isFirefox=!!O.InstallTrigger),w.cache.isFirefox},iframe:function(){return!(self===top)},ie:function(){var e,t;return void 0===w.cache.isIE&&(e=!O.ActiveXObject&&"ActiveXObject"in O,t="ActiveXObject"in O,w.cache.isIE=e||t),w.cache.isIE},mobile:function(){var e=navigator.userAgent;return e.match(n.mobile)?(w.verbose("Browser was found to be mobile",e),!0):(w.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!w.is.visible()},visible:function(){return h.hasClass(l.visible)},open:function(){return w.is.visible()},closed:function(){return w.is.hidden()},vertical:function(){return h.hasClass(l.top)},animating:function(){return p.hasClass(l.animating)},rtl:function(){return void 0===w.cache.isRTL&&(w.cache.isRTL="rtl"===h.attr("dir")||"rtl"===h.css("direction")||"rtl"===E.attr("dir")||"rtl"===E.css("direction")||"rtl"===p.attr("dir")||"rtl"===p.css("direction")),w.cache.isRTL}},setting:function(e,t){if(w.debug("Changing setting",e,t),R.isPlainObject(e))R.extend(!0,s,e);else{if(void 0===t)return s[e];R.isPlainObject(s[e])?R.extend(!0,s[e],t):s[e]=t}},internal:function(e,t){if(R.isPlainObject(e))R.extend(!0,w,e);else{if(void 0===t)return w[e];w[e]=t}},debug:function(){!s.silent&&s.debug&&(s.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,s.name+":"),w.debug.apply(console,arguments)))},verbose:function(){!s.silent&&s.verbose&&s.debug&&(s.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),w.verbose.apply(console,arguments)))},error:function(){s.silent||(w.error=Function.prototype.bind.call(console.error,console,s.name+":"),w.error.apply(console,arguments))},performance:{log:function(e){var t,i;s.performance&&(i=(t=Date.now())-(P||t),P=t,M.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:v,"Execution Time":i})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(function(){w.performance.display()},500)},display:function(){var e=s.name+":",i=0;P=!1,clearTimeout(w.performance.timer),R.each(M,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<M.length&&(console.groupCollapsed(e),console.table?console.table(M):R.each(M,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),M=[]}},invoke:function(n,e,t){var r,o,i,a=_;return e=e||L,t=t||v,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,R.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!R.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):R.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:w.error(c.method,n),!1);a=a[i]})),F(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(T)?T.push(i):void 0!==T?T=[T,i]:void 0!==i&&(T=i),o}};D?(void 0===_&&w.initialize(),w.invoke(I)):(void 0!==_&&w.invoke("destroy"),w.initialize())}),void 0!==T?T:this},R.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",blurring:"blurring",closing:"closing",dimmed:"dimmed",locked:"locked",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{bodyFixed:"> .ui.fixed.menu, > .ui.right.toast-container, > .ui.right.sidebar, > .ui.fixed.nag, > .ui.fixed.nag > .close",fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}})(jQuery,window,document),((T,S,k)=>{S=void 0!==S&&S.Math===Math?S:globalThis,T.fn.sticky=function(g){var v,e=T(this),_=(T(k),Date.now()),y=[],b=g,x="string"==typeof b,w=[].slice.call(arguments,1),C=function(e,t){var i;return 0<=[S,k].indexOf(e)?i=T(e):0===(i=T(t.document).find(e)).length&&(i=t.frameElement?C(e,t.parent):S),i};return e.each(function(){var t,n,e,i,s=T.isPlainObject(g)?T.extend(!0,{},T.fn.sticky.settings,g):T.extend({},T.fn.sticky.settings),r=s.className,o=s.namespace,l=s.error,a="."+o,c="module-"+o,u=T(this),d=T(S),h=C(s.scrollContext,S),p=u.data(c),f=this,m={initialize:function(){m.determineContainer(),m.determineContext(),m.verbose("Initializing sticky",s,t),m.save.positions(),m.checkErrors(),m.bind.events(),s.observeChanges&&m.observeChanges(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),p=m,u.data(c,m)},destroy:function(){m.verbose("Destroying previous instance"),m.reset(),e&&e.disconnect(),i&&i.disconnect(),d.off("load"+a,m.event.load).off("resize"+a,m.event.resize),h.off("scrollchange"+a,m.event.scrollchange),u.removeData(c)},observeChanges:function(){"MutationObserver"in S&&(e=new MutationObserver(m.event.documentChanged),i=new MutationObserver(m.event.changed),e.observe(k,{childList:!0,subtree:!0}),i.observe(f,{childList:!0,subtree:!0}),i.observe(n[0],{childList:!0,subtree:!0}),m.debug("Setting up mutation observer",i))},determineContainer:function(){t=s.container?C(s.container,S):u.offsetParent()},determineContext:function(){0===(n=s.context?C(s.context,S):t).length&&m.error(l.invalidContext,s.context,u)},checkErrors:function(){m.is.hidden()&&m.error(l.visible,u),m.cache.element.height>m.cache.context.height&&(m.reset(),m.error(l.elementSize,u))},bind:{events:function(){d.on("load"+a,m.event.load).on("resize"+a,m.event.resize),h.off("scroll"+a).on("scroll"+a,m.event.scroll).on("scrollchange"+a,m.event.scrollchange)}},event:{changed:function(e){clearTimeout(m.timer),m.timer=setTimeout(function(){m.verbose("DOM tree modified, updating sticky menu",e),m.refresh()},100)},documentChanged:function(e){[].forEach.call(e,function(e){e.removedNodes&&[].forEach.call(e.removedNodes,function(e){(e===f||0<T(e).find(f).length)&&(m.debug("Element removed from DOM, tearing down events"),m.destroy())})})},load:function(){m.verbose("Page contents finished loading"),requestAnimationFrame(m.refresh)},resize:function(){m.verbose("Window resized"),requestAnimationFrame(m.refresh)},scroll:function(){requestAnimationFrame(function(){h.triggerHandler("scrollchange"+a,h.scrollTop())})},scrollchange:function(e,t){m.stick(t),s.onScroll.call(f)}},refresh:function(e){m.reset(),s.context||m.determineContext(),e&&m.determineContainer(),m.save.positions(),m.stick(),s.onReposition.call(f)},supports:{sticky:function(){var e=T("<div/>");return e.addClass(r.supported),e.css("position").match("sticky")}},save:{lastScroll:function(e){m.lastScroll=e},elementScroll:function(e){m.elementScroll=e},positions:function(){var e={height:h.height()},t={margin:{top:parseInt(u.css("margin-top"),10),bottom:parseInt(u.css("margin-bottom"),10)},offset:u.offset(),width:u.outerWidth(),height:u.outerHeight()},i={offset:n.offset(),height:n.outerHeight()};m.is.standardScroll()||(m.debug("Non-standard scroll. Removing scroll offset from element offset"),e.top=h.scrollTop(),e.left=h.scrollLeft(),t.offset.top+=e.top,i.offset.top+=e.top,t.offset.left+=e.left,i.offset.left+=e.left),m.cache={fits:t.height+s.offset<=e.height,sameHeight:t.height===i.height,scrollContext:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:i.offset.top,height:i.height,bottom:i.offset.top+i.height}},m.set.containerSize(),m.stick(),m.debug("Caching element positions",m.cache)}},get:{direction:function(e){return e=e||h.scrollTop(),m.lastScroll&&m.lastScroll>e?"up":"down"},scrollChange:function(e){return e=e||h.scrollTop(),m.lastScroll?e-m.lastScroll:0},currentElementScroll:function(){return m.elementScroll||(m.is.top()?Math.abs(parseInt(u.css("top"),10))||0:Math.abs(parseInt(u.css("bottom"),10))||0)},elementScroll:function(e){e=e||h.scrollTop();var t=m.cache.element,i=m.cache.scrollContext,e=m.get.scrollChange(e),t=t.height-i.height+s.offset,e=(i=m.get.currentElementScroll())+e;return m.cache.fits||e<0?0:t<e?t:e}},remove:{lastScroll:function(){delete m.lastScroll},elementScroll:function(){delete m.elementScroll},minimumSize:function(){t.css("min-height","")},offset:function(){u.css("margin-top","")}},set:{offset:function(){m.verbose("Setting offset on element",s.offset),u.css("margin-top",s.offset)},containerSize:function(){var e=t[0].tagName;"HTML"===e||"body"===e?m.determineContainer():((e=Math.max(m.cache.context.height,m.cache.element.height))-t.outerHeight()>s.jitter?(m.debug("Context is taller than container. Specifying exact height for container",m.cache.context.height),t.css({height:e})):t.css({height:""}),Math.abs(t.outerHeight()-m.cache.context.height)>s.jitter&&(m.debug("Context has padding, specifying exact height for container",m.cache.context.height),t.css({height:m.cache.context.height})))},minimumSize:function(){var e=m.cache.element;t.css("min-height",e.height)},scroll:function(e){m.debug("Setting scroll on element",e),m.elementScroll!==e&&(m.is.top()&&u.css("bottom","").css("top",-e+"px"),m.is.bottom())&&u.css("top","").css("bottom",e+"px")},size:function(){0!==m.cache.element.height&&0!==m.cache.element.width&&(f.style.setProperty("width",m.cache.element.width+"px","important"),f.style.setProperty("height",m.cache.element.height+"px","important"))}},is:{standardScroll:function(){return h[0]===S},top:function(){return u.hasClass(r.top)},bottom:function(){return u.hasClass(r.bottom)},initialPosition:function(){return!m.is.fixed()&&!m.is.bound()},hidden:function(){return!u.is(":visible")},bound:function(){return u.hasClass(r.bound)},fixed:function(){return u.hasClass(r.fixed)}},stick:function(e){var e=e||h.scrollTop(),t=(o=m.cache).fits,i=o.sameHeight,n=o.element,r=o.scrollContext,o=o.context,e={top:e+(a=m.is.bottom()&&s.pushing?s.bottomOffset:s.offset),bottom:e+a+r.height},a=t?0:m.get.elementScroll(e.top),r=!t;0===n.height||i||(m.is.initialPosition()?e.top>=o.bottom?(m.debug("Initial element position is bottom of container"),m.bindBottom()):e.top>n.top&&(n.height+e.top-a>=o.bottom&&n.height<o.height?(m.debug("Initial element position is bottom of container"),m.bindBottom()):(m.debug("Initial element position is fixed"),m.fixTop())):m.is.fixed()?m.is.top()?e.top<=n.top?(m.debug("Fixed element reached top of container"),m.setInitialPosition()):n.height+e.top-a>=o.bottom?(m.debug("Fixed element reached bottom of container"),m.bindBottom()):r&&(m.set.scroll(a),m.save.lastScroll(e.top),m.save.elementScroll(a)):m.is.bottom()&&(e.bottom-n.height<=n.top?(m.debug("Bottom fixed rail has reached top of container"),m.setInitialPosition()):e.bottom>=o.bottom?(m.debug("Bottom fixed rail has reached bottom of container"),m.bindBottom()):r&&(m.set.scroll(a),m.save.lastScroll(e.top),m.save.elementScroll(a))):m.is.bottom()&&(e.top<=n.top?(m.debug("Jumped from bottom fixed to top fixed, most likely used home/end button"),m.setInitialPosition()):s.pushing?m.is.bound()&&e.bottom<=o.bottom&&(m.debug("Fixing bottom attached element to bottom of browser."),m.fixBottom()):m.is.bound()&&e.top<=o.bottom-n.height&&(m.debug("Fixing bottom attached element to top of browser."),m.fixTop())))},bindTop:function(){m.debug("Binding element to top of parent container"),m.remove.offset(),s.setSize&&m.set.size(),u.css({left:"",top:"",marginBottom:""}).removeClass(r.fixed).removeClass(r.bottom).addClass(r.bound).addClass(r.top),s.onTop.call(f),s.onUnstick.call(f)},bindBottom:function(){m.debug("Binding element to bottom of parent container"),m.remove.offset(),s.setSize&&m.set.size(),u.css({left:"",top:""}).removeClass(r.fixed).removeClass(r.top).addClass(r.bound).addClass(r.bottom),s.onBottom.call(f),s.onUnstick.call(f)},setInitialPosition:function(){m.debug("Returning to initial position"),m.unfix(),m.unbind()},fixTop:function(){m.debug("Fixing element to top of page"),s.setSize&&m.set.size(),m.set.minimumSize(),m.set.offset(),u.css({left:m.cache.element.left,bottom:"",marginBottom:""}).removeClass(r.bound).removeClass(r.bottom).addClass(r.fixed).addClass(r.top),s.onStick.call(f)},fixBottom:function(){m.debug("Sticking element to bottom of page"),s.setSize&&m.set.size(),m.set.minimumSize(),m.set.offset(),u.css({left:m.cache.element.left,bottom:"",marginBottom:""}).removeClass(r.bound).removeClass(r.top).addClass(r.fixed).addClass(r.bottom),s.onStick.call(f)},unbind:function(){m.is.bound()&&(m.debug("Removing container bound position on element"),m.remove.offset(),u.removeClass(r.bound).removeClass(r.top).removeClass(r.bottom))},unfix:function(){m.is.fixed()&&(m.debug("Removing fixed position on element"),m.remove.minimumSize(),m.remove.offset(),u.removeClass(r.fixed).removeClass(r.top).removeClass(r.bottom),s.onUnstick.call(f))},reset:function(){m.debug("Resetting elements position"),m.unbind(),m.unfix(),m.resetCSS(),m.remove.offset(),m.remove.lastScroll()},resetCSS:function(){u.css({width:"",height:""}),t.css({height:""})},setting:function(e,t){if(T.isPlainObject(e))T.extend(!0,s,e);else{if(void 0===t)return s[e];s[e]=t}},internal:function(e,t){if(T.isPlainObject(e))T.extend(!0,m,e);else{if(void 0===t)return m[e];m[e]=t}},debug:function(){!s.silent&&s.debug&&(s.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,s.name+":"),m.debug.apply(console,arguments)))},verbose:function(){!s.silent&&s.verbose&&s.debug&&(s.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),m.verbose.apply(console,arguments)))},error:function(){s.silent||(m.error=Function.prototype.bind.call(console.error,console,s.name+":"),m.error.apply(console,arguments))},performance:{log:function(e){var t,i;s.performance&&(i=(t=Date.now())-(_||t),_=t,y.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:f,"Execution Time":i})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(function(){m.performance.display()},0)},display:function(){var e=s.name+":",i=0;_=!1,clearTimeout(m.performance.timer),T.each(y,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<y.length&&(console.groupCollapsed(e),console.table?console.table(y):T.each(y,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),y=[]}},invoke:function(n,e,t){var r,o,i,a=p;return e=e||w,t=t||f,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,T.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!T.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):T.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:m.error(l.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(v)?v.push(i):void 0!==v?v=[v,i]:void 0!==i&&(v=i),o}};x?(void 0===p&&m.initialize(),m.invoke(b)):(void 0!==p&&p.invoke("destroy"),m.initialize())}),void 0!==v?v:this},T.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:!1,debug:!1,verbose:!0,performance:!0,pushing:!1,context:!1,container:!1,scrollContext:S,offset:0,bottomOffset:0,jitter:5,setSize:!0,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to suppress this warning in production.",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}})(jQuery,window,document),((I,D,n)=>{function L(e){return"function"==typeof e&&"number"!=typeof e.nodeType}D=void 0!==D&&D.Math===Math?D:globalThis,I.fn.tab=function(l){var c,u=L(this)?I(D):I(this),d=I(n),h=Date.now(),S=[],k=l,E="string"==typeof k,A=[].slice.call(arguments,1),P=function(e,t){var i;return 0<=[D,n].indexOf(e)?i=I(e):0===(i=I(t.document).find(e)).length&&(i=t.frameElement?P(e,t.parent):D),i},M=!1;return u.each(function(){var p,r,f,m,g,v=I.isPlainObject(l)?I.extend(!0,{},I.fn.tab.settings,l):I.extend({},I.fn.tab.settings),_=v.className,y=v.metadata,t=v.selector,b=v.error,i=v.regExp,e="."+v.namespace,n="module-"+v.namespace,x=I(this),o={},w=!0,a=0,C=this,s=x.data(n),T={initialize:function(){T.debug("Initializing tab menu item",x),T.determineTabs(),T.debug("Determining tabs",v.context,r),v.auto&&T.set.auto(),T.bind.events(),v.history&&!M&&(v.history=T.initializeHistory(),M=!0);var e,t=T.determine.activeTab();v.autoTabActivation&&void 0===s&&null===t&&(t=!0===v.autoTabActivation?T.get.initialPath():v.autoTabActivation,T.debug("No active tab detected, setting tab active",t),T.changeTab(t)),null!==t&&v.history&&"state"===v.historyType&&(e=I.address.autoUpdate(),I.address.autoUpdate(!1),I.address.value(t),I.address.autoUpdate(e)),T.instantiate()},instantiate:function(){T.verbose("Storing instance of module",T),s=T,x.data(n,T)},destroy:function(){T.debug("Destroying tabs",x),x.removeData(n).off(e)},bind:{events:function(){null!==C&&C===C.window||(T.debug("Attaching tab activation events to element",x),x.on("click"+e,T.event.click))}},determineTabs:function(){var e;"parent"===v.context?(0<x.closest(t.ui).length?(e=x.closest(t.ui),T.verbose("Using closest UI element as parent",e)):e=x,p=e.parent(),T.verbose("Determined parent element for creating context",p)):v.context?(p=P(v.context,D),T.verbose("Using selector for tab context",v.context,p)):p=I("body"),v.childrenOnly?(r=p.children(t.tabs),T.debug("Searching tab context children for tabs",p,r)):(r=p.find(t.tabs),T.debug("Searching tab context for tabs",p,r))},initializeHistory:function(){if(T.debug("Initializing page state"),void 0===I.address)return T.error(b.state),!1;if("state"===v.historyType){if(T.debug("Using HTML5 to manage state"),!1===v.path)return T.error(b.path),!1;I.address.history(!0).state(v.path),I(D).trigger("popstate")}return I.address.bind("change",T.event.history.change),!0},event:{click:function(e){var t=I(this).data(y.tab);void 0!==t?(v.history?(T.verbose("Updating page state",e),I.address.value(t)):(T.verbose("Changing tab",e),T.changeTab(t)),e.preventDefault()):T.debug("No tab specified")},history:{change:function(e){var t=e.pathNames.join("/")||T.get.initialPath(),i=v.templates.determineTitle(t)||!1;T.performance.display(),T.debug("History change event",t,e),g=e,void 0!==t&&T.changeTab(t),i&&I.address.title(i)}}},refresh:function(){f&&(T.debug("Refreshing tab",f),T.changeTab(f))},cache:{read:function(e){return void 0!==e&&o[e]},add:function(e,t){e=e||f,T.debug("Adding cached content for",e),o[e]=t},remove:function(e){e=e||f,T.debug("Removing cached content for",e),delete o[e]}},escape:{string:function(e){return(e=String(e)).replace(i.escape,"\\$&")}},set:{auto:function(){var e="string"==typeof v.path?v.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";T.verbose("Setting up automatic tab retrieval from server",e),I.isPlainObject(v.apiSettings)?v.apiSettings.url=e:v.apiSettings={url:e}},loading:function(e){var t=T.get.tabElement(e);t.hasClass(_.loading)||(T.verbose("Setting loading state for",t),t.addClass(_.loading).siblings(r).removeClass(_.active+" "+_.loading),0<t.length&&v.onRequest.call(t[0],e))},state:function(e){I.address.value(e)}},changeTab:function(c){var u=D.history&&D.history.pushState&&v.ignoreFirstLoad&&w,d=v.auto||I.isPlainObject(v.apiSettings),h=d&&!u?T.utilities.pathToArray(c):T.get.defaultPathArray(c);c=T.utilities.arrayToPath(h),I.each(h,function(e,t){var i,n,r=h.slice(0,e+1),o=T.utilities.arrayToPath(r),a=T.is.tab(o),s=e+1===h.length,l=T.get.tabElement(o);return T.verbose("Looking for tab",t),a?(T.verbose("Tab was found",t),f=o,m=T.utilities.filterArray(h,r),s?n=!0:(a=h.slice(0,e+2),t=T.utilities.arrayToPath(a),(n=!T.is.tab(t))&&T.verbose("Tab parameters found",a)),!1===v.onBeforeChange.call(C,o)?(T.debug("onBeforeChange returned false, cancelling tab change",l),!1):n&&d?(u?(T.debug("Ignoring remote content on first tab load",o),w=!1,T.cache.add(c,l.html()),T.activate.all(o),v.onFirstLoad.call(l[0],o,m,g),v.onLoad.call(l[0],o,m,g)):(T.activate.navigation(o),T.fetch.content(o,c)),!1):(T.debug("Opened local tab",o),T.activate.all(o),T.cache.read(o)||(T.cache.add(o,!0),T.debug("First time tab loaded calling tab init"),v.onFirstLoad.call(l[0],o,m,g)),void v.onLoad.call(l[0],o,m,g))):-1!==c.search("/")||""===c?(T.error(b.missingTab,x,p,o),!1):(c=T.escape.string(c),o=(i=I("#"+c+', a[name="'+c+'"]')).closest("[data-tab]").data(y.tab),l=T.get.tabElement(o),i&&0<i.length&&o?(T.debug("Anchor link used, opening parent tab",l,i),!1===v.onBeforeChange.call(C,o)?T.debug("onBeforeChange returned false, cancelling tab change",l):(l.hasClass(_.active)||setTimeout(function(){T.scrollTo(i)},0),T.activate.all(o),T.cache.read(o)||(T.cache.add(o,!0),T.debug("First time tab loaded calling tab init"),v.onFirstLoad.call(l[0],o,m,g)),v.onLoad.call(l[0],o,m,g)),!1):void 0)})},scrollTo:function(e){var t=!!(e&&0<e.length)&&e.offset().top;!1!==t&&(T.debug("Forcing scroll to an in-page link in a hidden tab",t,e),d.scrollTop(t))},update:{content:function(e,t,i){var n=T.get.tabElement(e),r=n[0];i=void 0!==i?i:v.evaluateScripts,"string"==typeof v.cacheType&&"dom"===v.cacheType.toLowerCase()&&"string"!=typeof t?n.empty().append(I(t).clone(!0)):i?(T.debug("Updating HTML and evaluating inline scripts",e,t),n.html(t)):(T.debug("Updating HTML",e,t),r.innerHTML=t)}},fetch:{content:function(t,i){var e,n=T.get.tabElement(t),r={dataType:"html",encodeParameters:!1,on:"now",cache:v.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){"response"===v.cacheType&&T.cache.add(i,e),T.update.content(t,e),t==f?(T.debug("Content loaded",t),T.activate.tab(t)):T.debug("Content loaded in background",t),v.onFirstLoad.call(n[0],t,m,g),v.onLoad.call(n[0],t,m,g),v.loadOnce?T.cache.add(i,!0):"string"==typeof v.cacheType&&"dom"===v.cacheType.toLowerCase()&&0<n.children().length?setTimeout(function(){var e=(e=n.children().clone(!0)).not("script");T.cache.add(i,e)},0):T.cache.add(i,n.html())},urlData:{tab:i}},o=(o=n.api("get request")||!1)&&"pending"===o.state();i=i||t,e=T.cache.read(i),v.cache&&e?(T.activate.tab(t),T.debug("Adding cached content",i),v.loadOnce||("once"===v.evaluateScripts?T.update.content(t,e,!1):T.update.content(t,e)),v.onLoad.call(n[0],t,m,g)):o?(T.set.loading(t),T.debug("Content is already loading",i)):void 0!==I.api?(e=I.extend(!0,{},v.apiSettings,r),T.debug("Retrieving remote content",i,e),T.set.loading(t),n.api(e)):T.error(b.api)}},activate:{all:function(e){T.activate.tab(e),T.activate.navigation(e)},tab:function(e){var t=T.get.tabElement(e),i="siblings"===v.deactivate?t.siblings(r):r.not(t),n=t.hasClass(_.active);T.verbose("Showing tab content for",t),n||(t.addClass(_.active),i.removeClass(_.active+" "+_.loading),0<t.length&&v.onVisible.call(t[0],e))},navigation:function(e){var t=T.get.navElement(e),i="siblings"===v.deactivate?t.siblings(u):u.not(t),n=t.hasClass(_.active);T.verbose("Activating tab navigation for",t,e),n||(t.addClass(_.active),i.removeClass(_.active+" "+_.loading))}},deactivate:{all:function(){T.deactivate.navigation(),T.deactivate.tabs()},navigation:function(){u.removeClass(_.active)},tabs:function(){r.removeClass(_.active+" "+_.loading)}},is:{tab:function(e){return void 0!==e&&0<T.get.tabElement(e).length}},get:{initialPath:function(){return u.eq(0).data(y.tab)||r.eq(0).data(y.tab)},path:function(){return I.address.value()},defaultPathArray:function(e){return T.utilities.pathToArray(T.get.defaultPath(e))},defaultPath:function(e){var t=u.filter("[data-"+y.tab+'^="'+T.escape.string(e)+'/"]').eq(0).data(y.tab)||!1;if(t){if(T.debug("Found default tab",t),a<v.maxDepth)return a++,T.get.defaultPath(t);T.error(b.recursion)}else T.debug("No default tabs found for",e,r);return a=0,e},navElement:function(e){return e=e||f,u.filter("[data-"+y.tab+'="'+T.escape.string(e)+'"]')},tabElement:function(e){var t;return e=e||f,t=T.utilities.pathToArray(e),t=T.utilities.last(t),e=r.filter("[data-"+y.tab+'="'+T.escape.string(e)+'"]'),t=r.filter("[data-"+y.tab+'="'+T.escape.string(t)+'"]'),0<e.length?e:t},tab:function(){return f}},determine:{activeTab:function(){var i=null;return r.each(function(e,t){I(t).hasClass(_.active)&&(t=I(this).data(y.tab),u.filter("[data-"+y.tab+'="'+T.escape.string(t)+'"]').hasClass(_.active))&&(i=t)}),i}},utilities:{filterArray:function(e,t){return I.grep(e,function(e){return-1===I.inArray(e,t)})},last:function(e){return!!Array.isArray(e)&&e[e.length-1]},pathToArray:function(e){return"string"==typeof(e=void 0===e?f:e)?e.split("/"):[e]},arrayToPath:function(e){return!!Array.isArray(e)&&e.join("/")}},setting:function(e,t){if(T.debug("Changing setting",e,t),I.isPlainObject(e))I.extend(!0,v,e);else{if(void 0===t)return v[e];I.isPlainObject(v[e])?I.extend(!0,v[e],t):v[e]=t}},internal:function(e,t){if(I.isPlainObject(e))I.extend(!0,T,e);else{if(void 0===t)return T[e];T[e]=t}},debug:function(){!v.silent&&v.debug&&(v.performance?T.performance.log(arguments):(T.debug=Function.prototype.bind.call(console.info,console,v.name+":"),T.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?T.performance.log(arguments):(T.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),T.verbose.apply(console,arguments)))},error:function(){v.silent||(T.error=Function.prototype.bind.call(console.error,console,v.name+":"),T.error.apply(console,arguments))},performance:{log:function(e){var t,i;v.performance&&(i=(t=Date.now())-(h||t),h=t,S.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":i})),clearTimeout(T.performance.timer),T.performance.timer=setTimeout(function(){T.performance.display()},500)},display:function(){var e=v.name+":",i=0;h=!1,clearTimeout(T.performance.timer),I.each(S,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<S.length&&(console.groupCollapsed(e),console.table?console.table(S):I.each(S,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),S=[]}},invoke:function(n,e,t){var r,o,i,a=s;return e=e||A,t=t||C,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,I.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!I.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):I.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:T.error(b.method,n),!1);a=a[i]})),L(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(c)?c.push(i):void 0!==c?c=[c,i]:void 0!==i&&(c=i),o}};E?(void 0===s&&T.initialize(),T.invoke(k)):(void 0!==s&&s.invoke("destroy"),T.initialize())}),void 0!==c?c:this},I.tab=function(){I(D).tab.apply(this,arguments)},I.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,loadOnce:!1,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",autoTabActivation:!0,onFirstLoad:function(e,t,i){},onLoad:function(e,t,i){},onVisible:function(e,t,i){},onRequest:function(e,t,i){},onBeforeChange:function(e){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},regExp:{escape:/[\s#$()*+,.:=?@[\\\]^{|}-]/g},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}})(jQuery,window,document),((I,D,n)=>{function L(e){return"function"==typeof e&&"number"!=typeof e.nodeType}D=void 0!==D&&D.Math===Math?D:globalThis,I.fn.toast=function(w){var C,e=I(this),T=I("body"),S=Date.now(),k=[],E=w,A="string"==typeof E,P=[].slice.call(arguments,1),M=function(e,t){var i;return 0<=[D,n].indexOf(e)?i=I(e):0===(i=I(t.document).find(e)).length&&(i=t.frameElement?M(e,t.parent):T),i};return e.each(function(){var i,n,o,r,a,s,l,e,c=I.isPlainObject(w)?I.extend(!0,{},I.fn.toast.settings,w):I.extend({},I.fn.toast.settings),u=c.className,d=c.selector,h=c.error,t=c.namespace,p=c.fields,f="."+t,m=t+"-module",g=I(this),v=c.context?M(c.context,D):T,_=g.hasClass("toast")||g.hasClass("message")||g.hasClass("card"),y=this,b=_?g.data(m):void 0,x={initialize:function(){x.verbose("Initializing element"),x.create.id(),x.has.container()||x.create.container(),(_||""!==c.message||""!==c.title||""!==x.get.iconClass()||c.showImage||x.has.configActions())&&("string"==typeof c.showProgress&&-1!==[u.top,u.bottom].indexOf(c.showProgress)||(c.showProgress=!1),x.create.toast(),c.closeOnClick&&(c.closeIcon||0<I(n).find(d.input).length||x.has.configActions())&&(c.closeOnClick=!1),c.closeOnClick||i.addClass(u.unclickable),x.bind.events()),x.instantiate(),i&&x.show()},instantiate:function(){x.verbose("Storing instance of toast"),b=x,g.data(m,b)},destroy:function(){i&&(x.debug("Removing toast",i),x.unbind.events(),c.onRemove.call(i,y),i.remove(),l=a=r=s=n=i=void 0),g.removeData(m)},show:function(e){!1===c.onShow.call(i,y)?x.debug("onShow callback returned false, cancelling toast animation"):(e=e||function(){},x.debug("Showing toast"),x.animate.show(e))},close:function(e){!1===c.onHide.call(i,y)?x.debug("onHide callback returned false, cancelling toast animation"):(e=e||function(){},x.debug("Closing toast"),x.remove.visible(),x.unbind.events(),x.animate.close(e))},create:{container:function(){x.verbose("Creating container"),v.append(I("<div/>",{class:c.position+" "+u.container+" "+(c.horizontal?u.horizontal:"")+" "+(c.context&&"body"!==c.context?u.absolute:"")}))},id:function(){e=(Math.random().toString(16)+"000000000").slice(2,10),x.verbose("Creating unique id for element",e)},toast:function(){i=I("<div/>",{class:u.box});var e,t=x.get.iconClass();_?(n=c.cloneModule?g.clone().removeAttr("id"):g,l=n.find("> i"+x.helpers.toClass(u.close)),c.closeIcon=0<l.length,""!==t&&n.find(d.icon).attr("class",t+" "+u.icon),c.showImage&&n.find(d.image).attr("src",c.showImage),""!==c.title&&n.find(d.title).html(x.helpers.escape(c.title,c.preserveHTML)),""!==c.message&&n.find(d.message).html(x.helpers.escape(c.message,c.preserveHTML))):(x.verbose("Creating toast"),n=I("<div/>",{role:"alert"}),e=I("<div/>",{class:u.content}),""!==t&&n.append(I("<i/>",{class:t+" "+u.icon})),c.showImage&&n.append(I("<img>",{class:u.image+" "+c.classImage,src:c.showImage})),""!==c.title&&(t="_"+x.get.id()+"title",n.attr("aria-labelledby",t),e.append(I("<div/>",{class:u.title,id:t,html:x.helpers.escape(c.title,c.preserveHTML)}))),t="_"+x.get.id()+"desc",n.attr("aria-describedby",t),e.append(I("<div/>",{class:u.message,id:t,html:x.helpers.escape(c.message,c.preserveHTML)})),n.addClass(c.class+" "+u.toast).append(e),n.css("opacity",String(c.opacity)),c.closeIcon&&((l=I("<i/>",{class:u.close+" "+("string"==typeof c.closeIcon?c.closeIcon:""),role:"button",tabindex:0,"aria-label":c.text.close})).hasClass(u.left)?n.prepend(l):n.append(l))),n.hasClass(u.compact)&&(c.compact=!0),n.hasClass("card")&&(c.compact=!1),o=n.find(".actions"),x.has.configActions()&&(0===o.length&&(o=I("<div/>",{class:u.actions+" "+(c.classActions||"")}).appendTo(n)),n.hasClass("card")&&!o.hasClass(u.attached)&&(o.addClass(u.extraContent),o.hasClass(u.vertical))&&(o.removeClass(u.vertical),x.error(h.verticalCard)),c.actions.forEach(function(e){var t=e[p.icon]?"<i "+(e[p.text]?'aria-hidden="true"':"")+' class="'+x.helpers.deQuote(e[p.icon])+' icon"></i>':"",i=x.helpers.escape(e[p.text]||"",c.preserveHTML),n=x.helpers.deQuote(e[p.class]||""),r=e[p.click]&&L(e[p.click])?e[p.click]:function(){};o.append(I("<button/>",{html:t+i,"aria-label":(e[p.text]||e[p.icon]||"").replace(/<[^>]+(>|$)/g,""),class:u.button+" "+n,on:{click:function(){var e=I(this);e.is(d.approve)||e.is(d.deny)||!1===r.call(y,g)||x.close()}}}))})),o&&o.hasClass(u.vertical)&&n.addClass(u.vertical),0<o.length&&!o.hasClass(u.attached)&&(!o||o.hasClass(u.basic)&&!o.hasClass(u.left)||n.addClass(u.actions)),"auto"===c.displayTime&&(c.displayTime=Math.max(c.minDisplayTime,n.text().split(" ").length/c.wordsPerMinute*6e4)),i.append(n),0<o.length&&o.hasClass(u.attached)&&(o.addClass(u.buttons),o.detach(),n.addClass(u.attached),o.hasClass(u.vertical)?(n.wrap(I("<div/>",{class:u.vertical+" "+u.attached+" "+(c.compact?u.compact:"")})),o.hasClass(u.left)?n.addClass(u.left).parent().addClass(u.left).prepend(o):n.parent().append(o)):o.hasClass(u.top)?(i.prepend(o),n.addClass(u.bottom)):(i.append(o),n.addClass(u.top))),g!==n&&(y=(g=n)[0]),0<c.displayTime&&(t=u.progressing+" "+(c.pauseOnHover?u.pausable:""),c.showProgress&&(r=I("<div/>",{class:u.progress+" "+(c.classProgress||c.class),"data-percent":""}),c.classProgress||(n.hasClass("toast")&&!n.hasClass(u.inverted)?r.addClass(u.inverted):r.removeClass(u.inverted)),a=I("<div/>",{class:"bar "+(c.progressUp?"up ":"down ")+t}),r.addClass(c.showProgress).append(a),r.hasClass(u.top)?i.prepend(r):i.append(r),a.css("animation-duration",c.displayTime/1e3+"s")),(s=I("<span/>",{class:"wait "+t})).css("animation-duration",c.displayTime/1e3+"s"),s.appendTo(n)),c.compact&&(i.addClass(u.compact),n.addClass(u.compact),r)&&r.addClass(u.compact),c.newestOnTop?i.prependTo(x.get.container()):i.appendTo(x.get.container())}},bind:{events:function(){x.debug("Binding events to toast"),c.closeIcon&&l.on("click"+f,x.event.close),n.on("click"+f,x.event.click),s&&s.on("animationend"+f,x.event.close),i.on("click"+f,d.approve,x.event.approve).on("click"+f,d.deny,x.event.deny)}},unbind:{events:function(){x.debug("Unbinding events to toast"),c.closeIcon&&l.off("click"+f),n.off("click"+f),s&&s.off("animationend"+f),i.off("click"+f)}},animate:{show:function(e){e=L(e)?e:function(){},c.transition&&x.can.useElement("transition")&&(x.set.visible(),i.transition({animation:c.transition.showMethod+" in",queue:!1,debug:c.debug,verbose:c.verbose,silent:c.silent,duration:c.transition.showDuration,onComplete:function(){e.call(i,y),c.onVisible.call(i,y)}}))},close:function(e){e=L(e)?e:function(){},c.transition&&void 0!==I.fn.transition?i.transition({animation:c.transition.hideMethod+" out",queue:!1,duration:c.transition.hideDuration,debug:c.debug,verbose:c.verbose,silent:c.silent,interval:50,onBeforeHide:function(e){e=L(e)?e:function(){},""!==c.transition.closeEasing?i&&(i.css("opacity","0"),i.wrap("<div/>").parent().hide(c.transition.closeDuration,c.transition.closeEasing,function(){i&&(i.parent().remove(),e.call(i))})):e.call(i)},onComplete:function(){e.call(i,y),c.onHidden.call(i,y),x.destroy()}}):x.error(h.noTransition)},pause:function(){s.css("animationPlayState","paused"),a&&a.css("animationPlayState","paused")},continue:function(){s.css("animationPlayState","running"),a&&a.css("animationPlayState","running")}},has:{container:function(){return x.verbose("Determining if there is already a container"),0<x.get.containers().length},toast:function(){return!!x.get.toast()},toasts:function(){return 0<x.get.toasts().length},configActions:function(){return Array.isArray(c.actions)&&0<c.actions.length}},get:{id:function(){return e},containers:function(){return v.children(x.helpers.toClass(c.position)+d.container+(c.horizontal?x.helpers.toClass(u.horizontal):":not("+x.helpers.toClass(u.horizontal)+")")+(c.context&&"body"!==c.context?x.helpers.toClass(u.absolute):":not("+x.helpers.toClass(u.absolute)+")"))},container:function(){return x.get.containers()[0]},toastBox:function(){return i||null},toast:function(){return n||null},toasts:function(){return I(x.get.container()).find(d.box)},iconClass:function(){return"string"==typeof c.showIcon?c.showIcon:c.showIcon&&c.icons[c.class]?c.icons[c.class]:""},remainingTime:function(){return s?s.css("opacity")*c.displayTime:0}},set:{visible:function(){n.addClass(u.visible)}},remove:{visible:function(){n.removeClass(u.visible)}},event:{close:function(){x.close()},click:function(e){0===I(e.target).closest(d.clickable).length&&(!1!==c.onClick.call(i,y)&&c.closeOnClick?x.close():x.verbose("Click callback returned false or close denied by setting cancelling close"))},approve:function(){!1===c.onApprove.call(y,g)?x.verbose("Approve callback returned false cancelling close"):x.close()},deny:function(){!1===c.onDeny.call(y,g)?x.verbose("Deny callback returned false cancelling close"):x.close()}},helpers:{toClass:function(e){var e=e.trim().split(/\s+/),t="";return e.forEach(function(e){t+="."+e}),t},deQuote:function(e){return String(e).replace(/"/g,"")},escape:function(e,t){var i;return!t&&(i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},/["&'<>`]/.test(e))?(e=e.replace(/&(?![\d#a-z]{1,12};)/gi,"&amp;")).replace(/["'<>`]/g,function(e){return i[e]}):e}},can:{useElement:function(e){return void 0!==I.fn[e]||(x.error(h.noElement.replace("{element}",e)),!1)}},setting:function(e,t){if(x.debug("Changing setting",e,t),I.isPlainObject(e))I.extend(!0,c,e);else{if(void 0===t)return c[e];I.isPlainObject(c[e])?I.extend(!0,c[e],t):c[e]=t}},internal:function(e,t){if(I.isPlainObject(e))I.extend(!0,x,e);else{if(void 0===t)return x[e];x[e]=t}},debug:function(){!c.silent&&c.debug&&(c.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,c.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!c.silent&&c.verbose&&c.debug&&(c.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,c.name+":"),x.verbose.apply(console,arguments)))},error:function(){c.silent||(x.error=Function.prototype.bind.call(console.error,console,c.name+":"),x.error.apply(console,arguments))},performance:{log:function(e){var t,i;c.performance&&(i=(t=Date.now())-(S||t),S=t,k.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":i})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(function(){x.performance.display()},500)},display:function(){var e=c.name+":",i=0;S=!1,clearTimeout(x.performance.timer),I.each(k,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<k.length&&(console.groupCollapsed(e),console.table?console.table(k):I.each(k,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),k=[]}},invoke:function(n,e,t){var r,o,i,a=b;return e=e||P,t=t||y,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,I.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!I.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):I.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:x.error(h.method,n),!1);a=a[i]})),L(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(C)?C.push(i):void 0!==C?C=[C,i]:void 0!==i&&(C=i),o}};A?(void 0===b&&x.initialize(),x.invoke(E)):(void 0!==b&&b.invoke("destroy"),x.initialize(),C=g)}),void 0!==C?C:this},I.toast=I.fn.toast,I.fn.toast.settings={name:"Toast",namespace:"toast",silent:!1,debug:!1,verbose:!1,performance:!0,context:"body",position:"top right",horizontal:!1,class:"neutral",classProgress:!1,classActions:!1,classImage:"mini",title:"",message:"",displayTime:3e3,minDisplayTime:1e3,wordsPerMinute:120,showIcon:!1,newestOnTop:!1,showProgress:!1,pauseOnHover:!0,progressUp:!1,opacity:1,compact:!0,closeIcon:!1,closeOnClick:!0,cloneModule:!0,actions:!1,preserveHTML:!0,showImage:!1,transition:{showMethod:"scale",showDuration:500,hideMethod:"scale",hideDuration:500,closeEasing:"easeOutCubic",closeDuration:500},error:{method:"The method you called is not defined.",noElement:"This module requires ui {element}",verticalCard:"Vertical but not attached actions are not supported for card layout"},className:{container:"ui toast-container",absolute:"absolute",box:"floating toast-box",progress:"ui attached active progress",toast:"ui toast",icon:"centered icon",visible:"visible",content:"content",title:"ui header",message:"message",actions:"actions",extraContent:"extra content",button:"ui button",buttons:"ui buttons",close:"close icon",image:"ui image",vertical:"vertical",horizontal:"horizontal",attached:"attached",inverted:"inverted",compact:"compact",pausable:"pausable",progressing:"progressing",top:"top",bottom:"bottom",left:"left",basic:"basic",unclickable:"unclickable"},text:{close:"Close"},icons:{info:"info",success:"checkmark",warning:"warning",error:"times"},selector:{container:".ui.toast-container",box:".toast-box",toast:".ui.toast",title:".header",message:".message:not(.ui)",image:"> img.image, > .image > img",icon:"> i.icon",input:'input:not([type="hidden"]), textarea, select, button, .ui.button, ui.dropdown',clickable:"a, details, .ui.accordion",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel"},fields:{class:"class",text:"text",icon:"icon",click:"click"},onShow:function(){},onVisible:function(){},onClick:function(){},onHide:function(){},onHidden:function(){},onRemove:function(){},onApprove:function(){},onDeny:function(){}},I.extend(I.easing,{easeOutBounce:function(e){var t=7.5625;return e<1/2.75?t*e*e:e<2/2.75?t*(e-=1.5/2.75)*e+.75:e<2.5/2.75?t*(e-=2.25/2.75)*e+.9375:t*(e-=2.625/2.75)*e+.984375},easeOutCubic:function(e){return--e*e*e+1}})})(jQuery,window,document),((y,e)=>{void 0!==e&&e.Math===Math||globalThis,y.fn.transition=function(){var p,o=y(this),a=Date.now(),f=[],m=arguments,g=m[0],v=[].slice.call(arguments,1),_="string"==typeof g;return o.each(function(i){var l,s,t,c,n,e,r,u=y(this),d=this,h={initialize:function(){l=h.get.settings.apply(d,m),c=l.className,t=l.error,n=l.metadata,r="."+l.namespace,e="module-"+l.namespace,s=u.data(e)||h,!1===(_=_&&h.invoke(g))&&(h.verbose("Converted arguments into settings object",l),l.interval?h.delay(l.interval):h.animate(),h.instantiate())},instantiate:function(){h.verbose("Storing instance of module",h),s=h,u.data(e,s)},destroy:function(){h.verbose("Destroying previous module for",d),u.removeData(e)},refresh:function(){h.verbose("Refreshing display type on next animation"),delete h.displayType},forceRepaint:function(){h.verbose("Forcing element repaint");var e=u.parent(),t=u.next();0===t.length?u.detach().appendTo(e):u.detach().insertBefore(t)},repaint:function(){h.verbose("Repainting element"),d.offsetWidth},delay:function(e){var t=h.get.animationDirection()||(h.can.transition()?h.get.direction():"static");e=void 0!==e?e:l.interval,t="auto"===l.reverse&&t===c.outward||!0===l.reverse?(o.length-i)*e:i*e,h.debug("Delaying animation by",t),setTimeout(function(){h.animate()},t)},animate:function(e){if(l=e||l,h.debug("Preparing animation",l.animation),h.is.animating()){if(l.queue)return!l.allowRepeats&&h.has.direction()&&h.is.occurring()&&!0!==h.queuing?h.debug("Animation is currently occurring, preventing queueing same animation",l.animation):h.queue(l.animation),!1;if(!l.allowRepeats&&h.is.occurring())return h.debug("Animation is already occurring, will not execute repeated animation",l.animation),!1;h.debug("New animation started, completing previous early",l.animation),s.complete()}h.can.animate()?h.set.animating(l.animation):h.error(t.noAnimation,l.animation,d)},reset:function(){h.debug("Resetting animation to beginning conditions"),h.remove.animationCallbacks(),h.restore.conditions(),h.remove.animating()},queue:function(e){h.debug("Queueing animation of",e),h.queuing=!0,u.one("animationend.queue"+r,function(){h.queuing=!1,h.repaint(),h.animate.apply(this,l)})},complete:function(e){e&&e.target===d&&e.stopPropagation(),h.debug("Animation complete",l.animation),h.remove.completeCallback(),h.remove.failSafe(),h.is.looping()||(h.is.outward()?(h.verbose("Animation is outward, hiding element"),h.restore.conditions(),h.hide()):h.is.inward()?(h.verbose("Animation is inward, showing element"),h.restore.conditions(),h.show()):(h.verbose("Static animation completed"),h.restore.conditions(),l.onComplete.call(d)))},force:{visible:function(){var e=u.attr("style"),e=h.get.userStyle(e),t=h.get.displayType(),e=e+"display: "+t+" !important;",i=u[0].style.display;return!t||"none"===i&&l.skipInlineHidden||u[0].tagName.match(/(script|link|style)/i)?(h.remove.transition(),!1):(h.verbose("Overriding default display to show element",t),u.attr("style",e),!0)},hidden:function(){var e=void 0===(e=u.attr("style"))||""===e;"none"===u.css("display")||h.is.hidden()?e&&u.removeAttr("style"):(h.verbose("Overriding default display to hide element"),u.css("display","none"))}},has:{direction:function(e){var i=!1;return"string"==typeof(e=e||l.animation)&&(e=e.split(" "),y.each(e,function(e,t){t!==c.inward&&t!==c.outward||(i=!0)})),i},inlineDisplay:function(){var e=u.attr("style")||"";return Array.isArray(e.match(/display.*?;/,""))}},set:{animating:function(e){h.remove.completeCallback(),e=e||l.animation,e=h.get.animationClass(e),h.save.animation(e),h.force.visible()&&(h.remove.hidden(),h.remove.direction(),h.start.animation(e))},duration:function(e,t){!(t="number"==typeof(t=t||l.duration)?t+"ms":t)&&0!==t||(h.verbose("Setting animation duration",t),u.css({"animation-duration":t}))},direction:function(e){(e=e||h.get.direction())===c.inward?h.set.inward():h.set.outward()},looping:function(){h.debug("Transition set to loop"),u.addClass(c.looping)},hidden:function(){u.addClass(c.transition).addClass(c.hidden)},inward:function(){h.debug("Setting direction to inward"),u.removeClass(c.outward).addClass(c.inward)},outward:function(){h.debug("Setting direction to outward"),u.removeClass(c.inward).addClass(c.outward)},visible:function(){u.addClass(c.transition).addClass(c.visible)}},start:{animation:function(e){e=e||h.get.animationClass(),h.debug("Starting tween",e),u.addClass(e).one("animationend.complete"+r,h.complete),l.useFailSafe&&h.add.failSafe(),h.set.duration(l.duration),l.onStart.call(d)}},save:{animation:function(e){h.cache||(h.cache={}),h.cache.animation=e},displayType:function(e){"none"!==e&&u.data(n.displayType,e)},transitionExists:function(e,t){y.fn.transition.exists[e]=t,h.verbose("Saving existence of transition",e,t)}},restore:{conditions:function(){var e=h.get.currentAnimation();e&&(u.removeClass(e),h.verbose("Removing animation class",h.cache)),h.remove.duration()}},add:{failSafe:function(){var e=h.get.duration();h.timer=setTimeout(function(){u.triggerHandler("animationend")},e+l.failSafeDelay),h.verbose("Adding fail safe timer",h.timer)}},remove:{animating:function(){u.removeClass(c.animating)},animationCallbacks:function(){h.remove.queueCallback(),h.remove.completeCallback()},queueCallback:function(){u.off(".queue"+r)},completeCallback:function(){u.off(".complete"+r)},display:function(){u.css("display","")},direction:function(){u.removeClass(c.inward).removeClass(c.outward)},duration:function(){u.css("animation-duration","")},failSafe:function(){h.verbose("Removing fail safe timer",h.timer),h.timer&&clearTimeout(h.timer)},hidden:function(){u.removeClass(c.hidden)},visible:function(){u.removeClass(c.visible)},looping:function(){h.debug("Transitions are no longer looping"),h.is.looping()&&(h.reset(),u.removeClass(c.looping))},transition:function(){u.removeClass(c.transition).removeClass(c.visible).removeClass(c.hidden)}},get:{settings:function(e,t,i){return"object"==typeof e?y.extend(!0,{},y.fn.transition.settings,e):"function"==typeof i?y.extend({},y.fn.transition.settings,{animation:e,onComplete:i,duration:t}):"string"==typeof t||"number"==typeof t?y.extend({},y.fn.transition.settings,{animation:e,duration:t}):"object"==typeof t?y.extend({},y.fn.transition.settings,t,{animation:e}):"function"==typeof t?y.extend({},y.fn.transition.settings,{animation:e,onComplete:t}):y.extend({},y.fn.transition.settings,{animation:e})},animationClass:function(e){var e=e||l.animation,t=h.can.transition()&&!h.has.direction()?h.get.direction()+" ":"";return c.animating+" "+c.transition+" "+t+e},currentAnimation:function(){return!(!h.cache||void 0===h.cache.animation)&&h.cache.animation},currentDirection:function(){return h.is.inward()?c.inward:c.outward},direction:function(){return h.is.hidden()||!h.is.visible()?c.inward:c.outward},animationDirection:function(e){var i;return"string"==typeof(e=e||l.animation)&&(e=e.split(" "),y.each(e,function(e,t){t===c.inward?i=c.inward:t===c.outward&&(i=c.outward)})),i||!1},duration:function(e){return"string"==typeof(e=!1===(e=e||l.duration)?u.css("animation-duration")||0:e)?-1<e.indexOf("ms")?parseFloat(e):1e3*parseFloat(e):e},displayType:function(e){return l.displayType||((e=void 0===e||e)&&void 0===u.data(n.displayType)&&(""===(e=u.css("display"))||"none"===e?h.can.transition(!0):h.save.displayType(e)),u.data(n.displayType))},userStyle:function(e){return(e=e||u.attr("style")||"").replace(/display.*?;/,"")},transitionExists:function(e){return y.fn.transition.exists[e]}},can:{transition:function(e){var t,i,n,r,o=l.animation,a=h.get.transitionExists(o),s=h.get.displayType(!1);if(void 0===a||e){if(h.verbose("Determining whether animation exists"),e=u.attr("class"),t=u.prop("tagName"),i=(t=y("<"+t+" />").addClass(e).insertAfter(u)).addClass(o).removeClass(c.inward).removeClass(c.outward).addClass(c.animating).addClass(c.transition).css("animationName"),t.detach().insertAfter(u),n=t.addClass(c.inward).css("animationName"),s||(t.detach().insertAfter(u),s=t.attr("class",e).removeAttr("style").removeClass(c.hidden).removeClass(c.visible).show().css("display"),h.verbose("Determining final display state",s),h.save.displayType(s)),t.remove(),i!==n)h.debug("Direction exists for animation",o),r=!0;else{if("none"===i||!i)return void h.debug("No animation defined in css",o);h.debug("Static animation found",o,s),r=!1}h.save.transitionExists(o,r)}return void 0!==a?a:r},animate:function(){return void 0!==h.can.transition()}},is:{animating:function(){return u.hasClass(c.animating)},inward:function(){return u.hasClass(c.inward)},outward:function(){return u.hasClass(c.outward)},looping:function(){return u.hasClass(c.looping)},occurring:function(e){return e="."+(e=e||l.animation).replace(" ","."),0<u.filter(e).length},visible:function(){return u.is(":visible")},hidden:function(){return"hidden"===u.css("visibility")},supported:function(){return!0}},hide:function(){if(!1===l.onHide.call(d))return h.verbose("Hide callback returned false cancelling hide"),!1;h.verbose("Hiding element"),h.is.animating()&&h.reset(),d.blur(),h.remove.display(),h.remove.visible(),l.onBeforeHide.call(d,h.hideNow)},hideNow:function(){h.set.hidden(),h.force.hidden(),l.onHidden.call(d),l.onComplete.call(d)},show:function(e){h.force.visible()&&!1!==l.onShow.call(d)&&(h.verbose("Showing element",e),h.remove.hidden(),l.onBeforeShow.call(d,h.showNow))},showNow:function(){h.set.visible(),l.onVisible.call(d),l.onComplete.call(d)},toggle:function(){h.is.visible()?h.hide():h.show()},stop:function(){h.debug("Stopping current animation"),u.triggerHandler("animationend")},stopAll:function(){h.debug("Stopping all animation"),h.remove.queueCallback(),u.triggerHandler("animationend")},clear:{queue:function(){h.debug("Clearing animation queue"),h.remove.queueCallback()}},enable:function(){h.verbose("Starting animation"),u.removeClass(c.disabled)},disable:function(){h.debug("Stopping animation"),u.addClass(c.disabled)},setting:function(e,t){if(h.debug("Changing setting",e,t),y.isPlainObject(e))y.extend(!0,l,e);else{if(void 0===t)return l[e];y.isPlainObject(l[e])?y.extend(!0,l[e],t):l[e]=t}},internal:function(e,t){if(y.isPlainObject(e))y.extend(!0,h,e);else{if(void 0===t)return h[e];h[e]=t}},debug:function(){!l.silent&&l.debug&&(l.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,l.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!l.silent&&l.verbose&&l.debug&&(l.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),h.verbose.apply(console,arguments)))},error:function(){l.silent||(h.error=Function.prototype.bind.call(console.error,console,l.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var t,i;l.performance&&(i=(t=Date.now())-(a||t),a=t,f.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:d,"Execution Time":i})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(function(){h.performance.display()},500)},display:function(){var e=l.name+":",i=0;a=!1,clearTimeout(h.performance.timer),y.each(f,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",1<o.length&&(e+=" ("+o.length+")"),0<f.length&&(console.groupCollapsed(e),console.table?console.table(f):y.each(f,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(n,e,t){var r,o,i,a=s;return e=e||v,t=t||d,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,y.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!y.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):y.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]&&(o=a[t]),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(p)?p.push(i):void 0!==p?p=[p,i]:void 0!==i&&(p=i),void 0!==o&&o}};h.initialize()}),void 0!==p?p:this},y.fn.transition.exists={},y.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onBeforeShow:function(e){e.call(this)},onVisible:function(){},onHide:function(){},onHidden:function(){},onBeforeHide:function(e){e.call(this)},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,skipInlineHidden:!1,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to suppress this warning in production."}}})(jQuery,window,document),((M,I,n)=>{function D(e){return null!==e&&e===e.window}function L(e){return"function"==typeof e&&"number"!=typeof e.nodeType}I=void 0!==I&&I.Math===Math?I:globalThis,M.fn.api=function(w){var C,e=L(this)?M(I):M(this),T=Date.now(),S=[],k=w,E="string"==typeof k,A=[].slice.call(arguments,1),P=function(e,t){var i;return 0<=[I,n].indexOf(e)?i=M(e):0===(i=M(t.document).find(e)).length&&(i=t.frameElement?P(e,t.parent):I),i};return e.each(function(){var o,n,i,e,a,r,s=M.isPlainObject(w)?M.extend(!0,{},M.fn.api.settings,w):M.extend({},M.fn.api.settings),h=s.regExp,t=s.namespace,l=s.metadata,c=s.selector,u=s.error,d=s.className,p="."+t,f="module-"+t,m=M(this),g=m.closest(c.form),v=s.stateContext?P(s.stateContext,I):m,_=this,y=v[0],b=m.data(f),x={initialize:function(){E||(r=s.data,x.bind.events()),x.instantiate()},instantiate:function(){x.verbose("Storing instance of module",x),b=x,m.data(f,b)},destroy:function(){x.verbose("Destroying previous module for",_),m.removeData(f).off(p)},bind:{events:function(){var e=x.get.event();e?(x.verbose("Attaching API events to element",e),m.on(e+p,x.event.trigger)):"now"===s.on&&(x.debug("Querying API endpoint immediately"),x.query())}},decode:{json:function(e){if(void 0!==e&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}},read:{cachedResponse:function(e){var t;if(void 0!==I.Storage)return t=sessionStorage.getItem(e+x.get.normalizedData()),x.debug("Using cached response",e,s.data,t),x.decode.json(t);x.error(u.noStorage)}},write:{cachedResponse:function(e,t){void 0===I.Storage?x.error(u.noStorage):(M.isPlainObject(t)&&(t=JSON.stringify(t)),sessionStorage.setItem(e+x.get.normalizedData(),t),x.verbose("Storing cached response for url",e,s.data,t))}},query:function(){if(x.is.disabled())x.debug("Element is disabled API request aborted");else{if(x.is.loading()){if(!s.interruptRequests)return void x.debug("Cancelling request, previous request is still pending");x.debug("Interrupting previous request"),x.abort()}s.defaultData&&M.extend(!0,s.urlData,x.get.defaultData()),s.serializeForm&&(s.data=x.add.formData(r||s.data)),!1===(n=x.get.settings())?(x.cancelled=!0,x.error(u.beforeSend)):(x.cancelled=!1,(i=x.get.templatedURL())||x.is.mocked()?((i=x.add.urlData(i))||x.is.mocked())&&(n.url=s.base+i,o=M.extend(!0,{},s,{type:s.method||s.type,data:e,url:s.base+i,beforeSend:s.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),x.debug("Querying URL",o.url),x.verbose("Using AJAX settings",o),"local"===s.cache&&x.read.cachedResponse(i)?(x.debug("Response returned from local cache"),x.request=x.create.request(),x.request.resolveWith(y,[x.read.cachedResponse(i)])):s.throttle?s.throttleFirstRequest||x.timer?(x.debug("Throttling request",s.throttle),clearTimeout(x.timer),x.timer=setTimeout(function(){x.timer&&delete x.timer,x.debug("Sending throttled request",e,o.method),x.send.request()},s.throttle)):(x.debug("Sending request",e,o.method),x.send.request(),x.timer=setTimeout(function(){},s.throttle)):(x.debug("Sending request",e,o.method),x.send.request())):x.error(u.missingURL))}},should:{removeError:function(){return!0===s.hideError||"auto"===s.hideError&&!x.is.form()}},is:{disabled:function(){return 0<m.filter(c.disabled).length},expectingJSON:function(){return"json"===s.dataType||"jsonp"===s.dataType},form:function(){return m.is("form")||v.is("form")},mocked:function(){return s.mockResponse||s.mockResponseAsync||s.response||s.responseAsync},input:function(){return m.is("input")},loading:function(){return!!x.request&&"pending"===x.request.state()},abortedRequest:function(e){return e&&void 0!==e.readyState&&0===e.readyState?(x.verbose("XHR request determined to be aborted"),!0):(x.verbose("XHR request was not aborted"),!1)},validResponse:function(e){return x.is.expectingJSON()&&L(s.successTest)?(x.debug("Checking JSON returned success",s.successTest,e),s.successTest(e)?(x.debug("Response passed success test",e),!0):(x.debug("Response failed success test",e),!1)):(x.verbose("Response is not JSON, skipping validation",s.successTest,e),!0)}},was:{cancelled:function(){return x.cancelled||!1},successful:function(){return x.request&&"resolved"===x.request.state()},failure:function(){return x.request&&"rejected"===x.request.state()},complete:function(){return x.request&&("resolved"===x.request.state()||"rejected"===x.request.state())}},add:{urlData:function(r,o){var e,t;return r&&(e=r.match(h.required),t=r.match(h.optional),o=o||s.urlData,e&&(x.debug("Looking for required URL variables",e),M.each(e,function(e,t){var i=-1!==t.indexOf("$")?t.slice(2,-1):t.slice(1,-1),n=M.isPlainObject(o)&&void 0!==o[i]?o[i]:void 0!==m.data(i)?m.data(i):void 0!==v.data(i)?v.data(i):o[i];if(void 0===n)return x.error(u.requiredParameter,i,r),r=!1;x.verbose("Found required variable",i,n),n=s.encodeParameters?x.get.urlEncodedValue(n):n,r=r.replace(t,n)})),t)&&(x.debug("Looking for optional URL variables",e),M.each(t,function(e,t){var i=-1!==t.indexOf("$")?t.slice(3,-1):t.slice(2,-1),n=M.isPlainObject(o)&&void 0!==o[i]?o[i]:void 0!==m.data(i)?m.data(i):void 0!==v.data(i)?v.data(i):o[i];r=void 0!==n?(x.verbose("Optional variable Found",i,n),r.replace(t,n)):(x.verbose("Optional variable not found",i),-1!==r.indexOf("/"+t)?r.replace("/"+t,""):r.replace(t,""))})),r},formData:function(i){var e,n,l,c,u,d={},t="formdata"===s.serializeForm;return i=i||r||s.data,e=M.isPlainObject(i),t?(d=new FormData(g[0]),s.processData=void 0!==s.processData&&s.processData,s.contentType=void 0!==s.contentType&&s.contentType):(n=g.serializeArray(),l={},c={},u=function(e,t,i){return e[t]=i,e},M.each(M('input[type="file"]',g),function(e,i){M.each(M(i)[0].files,function(e,t){n.push({name:i.name,value:t})})}),M.each(n,function(e,t){if(h.validate.test(t.name)){var i="checkbox"===M('[name="'+t.name+'"]',g).attr("type"),n=parseFloat(t.value),r=i&&"on"===t.value||"true"===t.value||(String(n)===t.value?n:"false"!==t.value&&t.value),o=t.name.match(h.key)||[],a=t.name.replace(/\[]$/,"");a in l?Array.isArray(c[a])?c[a].push(r):c[a]=[c[a],r]:(l[a]=0,c[a]=r),-1===a.indexOf("[]")&&(r=c[a]);for(;0<o.length;){var s=o.pop();""!==s||Array.isArray(r)?h.fixed.test(s)?r=u([],s,r):h.named.test(s)&&(r=u({},s,r)):r=u([],l[a]++,r)}d=M.extend(!0,d,r)}})),i=e?(x.debug("Extending existing data with form data",i,d),t?(M.each(Object.keys(i),function(e,t){d.append(t,i[t])}),d):M.extend(!0,{},i,d)):(x.debug("Adding form data",d),d)}},send:{request:function(){x.set.loading(),x.request=x.create.request(),x.is.mocked()?x.mockedXHR=x.create.mockedXHR():x.xhr=x.create.xhr(),s.onRequest.call(y,x.request,x.xhr)}},event:{trigger:function(e){x.query(),"submit"!==e.type&&"click"!==e.type||e.preventDefault()},xhr:{always:function(){},done:function(e,t,i){var n=this,r=Date.now()-a,r=s.loadingDuration-r,o=!!L(s.onResponse)&&(x.is.expectingJSON()&&!s.rawResponse?s.onResponse.call(n,M.extend(!0,{},e)):s.onResponse.call(n,e)),r=0<r?r:0;o&&(x.debug("Modified API response in onResponse callback",s.onResponse,o,e),e=o),0<r&&x.debug("Response completed early delaying state change by",r),setTimeout(function(){x.is.validResponse(e)?x.request.resolveWith(n,[e,i]):x.request.rejectWith(n,[i,"invalid"])},r)},fail:function(e,t,i){var n=this,r=Date.now()-a;0<(r=0<(r=s.loadingDuration-r)?r:0)&&x.debug("Response completed early delaying state change by",r),setTimeout(function(){x.is.abortedRequest(e)?x.request.rejectWith(n,[e,"aborted",i]):x.request.rejectWith(n,[e,"error",t,i])},r)}},request:{done:function(e,t){x.debug("Successful API Response",e),"local"===s.cache&&i&&(x.write.cachedResponse(i,e),x.debug("Saving server response locally",x.cache)),s.onSuccess.call(y,e,m,t)},complete:function(e,t){var i,n;x.was.successful()?(n=e,i=t):n=x.get.responseFromXHR(i=e),x.remove.loading(),s.onComplete.call(y,n,m,i)},fail:function(e,t,i){var n=x.get.responseFromXHR(e),r=x.get.errorFromRequest(n,t,i);if("aborted"===t)return x.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,i),s.onAbort.call(y,t,m,e),!0;"invalid"===t?x.debug("JSON did not pass success test. A server-side error has most likely occurred",n):"error"===t&&void 0!==e&&(x.debug("XHR produced a server error",t,i),(e.status<200||300<=e.status)&&void 0!==i&&""!==i&&x.error(u.statusMessage+i,o.url),s.onError.call(y,r,m,e)),s.errorDuration&&"aborted"!==t&&(x.debug("Adding error state"),x.set.error(),x.should.removeError())&&setTimeout(function(){x.remove.error()},s.errorDuration),x.debug("API Request failed",r,e),s.onFailure.call(y,n,m,e)}}},create:{request:function(){return M.Deferred().always(x.event.request.complete).done(x.event.request.done).fail(x.event.request.fail)},mockedXHR:function(){var e=s.mockResponse||s.response,t=s.mockResponseAsync||s.responseAsync,i=M.Deferred().always(x.event.xhr.complete).done(x.event.xhr.done).fail(x.event.xhr.fail);return e?(e=L(e)?(x.debug("Using specified synchronous callback",e),e.call(y,n)):(x.debug("Using settings specified response",e),e),i.resolveWith(y,[e,!1,{responseText:e}])):L(t)&&(e=function(e){x.debug("Async callback returned response",e),e?i.resolveWith(y,[e,!1,{responseText:e}]):i.rejectWith(y,[{responseText:e},!1,!1])},x.debug("Using specified async response callback",t),t.call(y,n,e)),i},xhr:function(){var e=M.ajax(o).always(x.event.xhr.always).done(x.event.xhr.done).fail(x.event.xhr.fail);return x.verbose("Created server request",e,o),e}},set:{error:function(){x.verbose("Adding error state to element",v),v.addClass(d.error)},loading:function(){x.verbose("Adding loading state to element",v),v.addClass(d.loading),a=Date.now()}},remove:{error:function(){x.verbose("Removing error state from element",v),v.removeClass(d.error)},loading:function(){x.verbose("Removing loading state from element",v),v.removeClass(d.loading)}},get:{normalizedData:function(){return"string"==typeof s.data?s.data:JSON.stringify(s.data,Object.keys(s.data).sort())},responseFromXHR:function(e){return!!M.isPlainObject(e)&&(x.is.expectingJSON()?x.decode.json(e.responseText):e.responseText)},errorFromRequest:function(e,t,i){return M.isPlainObject(e)&&void 0!==e.error?e.error:void 0!==s.error[t]?s.error[t]:i},request:function(){return x.request||!1},xhr:function(){return x.xhr||!1},settings:function(){var e=s.beforeSend.call(m,s);return e&&(void 0!==e.success&&(x.debug("Legacy success callback detected",e),x.error(u.legacyParameters,e.success),e.onSuccess=e.success),void 0!==e.failure&&(x.debug("Legacy failure callback detected",e),x.error(u.legacyParameters,e.failure),e.onFailure=e.failure),void 0!==e.complete)&&(x.debug("Legacy complete callback detected",e),x.error(u.legacyParameters,e.complete),e.onComplete=e.complete),void 0===e&&x.error(u.noReturnedValue),!1===e?e:void 0!==e?M.extend(!0,{},e):M.extend(!0,{},s)},urlEncodedValue:function(e){var t=I.decodeURIComponent(e),i=I.encodeURIComponent(e);return t!==e?(x.debug("URL value is already encoded, avoiding double encoding",e),e):(x.verbose("Encoding value using encodeURIComponent",e,i),i)},defaultData:function(){var e={};return D(_)||(x.is.input()?e.value=m.val():x.is.form()||(e.text=m.text())),e},event:function(){return D(_)||"now"===s.on?(x.debug("API called without element, no events attached"),!1):"auto"===s.on?m.is("input")?void 0!==_.oninput?"input":void 0!==_.onpropertychange?"propertychange":"keyup":m.is("form")?"submit":"click":s.on},templatedURL:function(e){if(e=e||s.action||m.data(l.action)||!1,i=s.url||m.data(l.url)||!1)x.debug("Using specified url",i);else if(e){if(x.debug("Looking up url for action",e,s.api),void 0===s.api[e]&&!x.is.mocked())return void x.error(u.missingAction,s.action,s.api);i=s.api[e]}else x.is.form()&&(i=m.attr("action")||v.attr("action")||!1,x.debug("No url or action specified, defaulting to form action",i));return i}},abort:function(){var e=x.get.xhr();e&&"resolved"!==e.state()&&(x.debug("Cancelling API request"),e.abort())},reset:function(){x.remove.error(),x.remove.loading()},setting:function(e,t){if(x.debug("Changing setting",e,t),M.isPlainObject(e))M.extend(!0,s,e);else{if(void 0===t)return s[e];M.isPlainObject(s[e])?M.extend(!0,s[e],t):s[e]=t}},internal:function(e,t){if(M.isPlainObject(e))M.extend(!0,x,e);else{if(void 0===t)return x[e];x[e]=t}},debug:function(){!s.silent&&s.debug&&(s.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,s.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!s.silent&&s.verbose&&s.debug&&(s.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),x.verbose.apply(console,arguments)))},error:function(){s.silent||(x.error=Function.prototype.bind.call(console.error,console,s.name+":"),x.error.apply(console,arguments))},performance:{log:function(e){var t,i;s.performance&&(i=(t=Date.now())-(T||t),T=t,S.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(function(){x.performance.display()},500)},display:function(){var e=s.name+":",i=0;T=!1,clearTimeout(x.performance.timer),M.each(S,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<S.length&&(console.groupCollapsed(e),console.table?console.table(S):M.each(S,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),S=[]}},invoke:function(n,e,t){var r,o,i,a=b;return e=e||A,t=t||_,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,M.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!M.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):M.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:x.error(u.method,n),!1);a=a[i]})),L(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(C)?C.push(i):void 0!==C?C=[C,i]:void 0!==i&&(C=i),o}};E?(void 0===b&&x.initialize(),x.invoke(k)):(void 0!==b&&b.invoke("destroy"),x.initialize())}),void 0!==C?C:this},M.api=M.fn.api,M.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,rawResponse:!0,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/{\$*[\da-z]+}/gi,optional:/{\/\$*[\da-z]+}/gi,validate:/^[_a-z][\w-]*(?:\[[\w-]*])*$/i,key:/[\w-]+|(?=\[])/gi,push:/^$/,fixed:/^\d+$/,named:/^[\w-]+$/i},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}})(jQuery,window,document),((C,T,n)=>{T=void 0!==T&&T.Math===Math?T:globalThis,C.fn.state=function(f){var m,g=C(this),v=Date.now(),_=[],y=f,b="string"==typeof y,x=[].slice.call(arguments,1),w=function(e,t){var i;return 0<=[T,n].indexOf(e)?i=C(e):0===(i=C(t.document).find(e)).length&&(i=t.frameElement?w(e,t.parent):T),i};return g.each(function(){var r=C.isPlainObject(f)?C.extend(!0,{},C.fn.state.settings,f):C.extend({},C.fn.state.settings),s=r.error,i=r.metadata,t=r.className,e=r.namespace,n=r.states,o=r.text,a="."+e,l=e+"-module",c=C(this),u=r.context?w(r.context,T):c,d=this,h=c.data(l),p={initialize:function(){p.verbose("Initializing module"),r.automatic&&p.add.defaults(),u.on("mouseenter"+a,p.change.text).on("mouseleave"+a,p.reset.text).on("click"+a,p.toggle.state),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),h=p,c.data(l,p)},destroy:function(){p.verbose("Destroying previous module",h),u.off(a),c.removeData(i.storedText).removeData(l)},refresh:function(){p.verbose("Refreshing selector cache"),c=C(d)},add:{defaults:function(){var i=f&&C.isPlainObject(f.states)?f.states:{};C.each(r.defaults,function(e,t){void 0!==p.is[e]&&p.is[e]()&&(p.verbose("Adding default states",e,d),C.extend(r.states,t,i))})}},is:{active:function(){return c.hasClass(t.active)},loading:function(){return c.hasClass(t.loading)},inactive:function(){return!c.hasClass(t.active)},state:function(e){return void 0!==t[e]&&c.hasClass(t[e])},enabled:function(){return!c.is(r.filter.active)},disabled:function(){return c.is(r.filter.active)},textEnabled:function(){return!c.is(r.filter.text)},button:function(){return c.is(".button:not(a, .submit)")},input:function(){return c.is("input")},progress:function(){return c.is(".ui.progress")}},allow:function(e){p.debug("Now allowing state",e),n[e]=!0},disallow:function(e){p.debug("No longer allowing",e),n[e]=!1},allows:function(e){return n[e]||!1},enable:function(){c.removeClass(t.disabled)},disable:function(){c.addClass(t.disabled)},setState:function(e){p.allows(e)&&c.addClass(t[e])},removeState:function(e){p.allows(e)&&c.removeClass(t[e])},toggle:{state:function(){var e;if(p.allows("active")&&p.is.enabled()){if(p.refresh(),void 0!==C.fn.api)if(e=c.api("get request"),c.api("was cancelled"))p.debug("API Request cancelled by beforesend"),r.activateTest=function(){return!1},r.deactivateTest=function(){return!1};else if(e)return void p.listenTo(e);p.change.state()}}},listenTo:function(e){p.debug("API request detected, waiting for state signal",e),e&&(o.loading&&p.update.text(o.loading),C.when(e).then(function(){"resolved"===e.state()?(p.debug("API request succeeded"),r.activateTest=function(){return!0},r.deactivateTest=function(){return!0}):(p.debug("API request failed"),r.activateTest=function(){return!1},r.deactivateTest=function(){return!1}),p.change.state()}))},change:{state:function(){p.debug("Determining state change direction"),p.is.inactive()?p.activate():p.deactivate(),r.sync&&p.sync(),r.onChange.call(d)},text:function(){p.is.textEnabled()&&(p.is.disabled()?(p.verbose("Changing text to disabled text",o.hover),p.update.text(o.disabled)):p.is.active()?o.hover?(p.verbose("Changing text to hover text",o.hover),p.update.text(o.hover)):o.deactivate&&(p.verbose("Changing text to deactivating text",o.deactivate),p.update.text(o.deactivate)):o.hover?(p.verbose("Changing text to hover text",o.hover),p.update.text(o.hover)):o.activate&&(p.verbose("Changing text to activating text",o.activate),p.update.text(o.activate)))}},activate:function(){r.activateTest.call(d)&&(p.debug("Setting state to active"),c.addClass(t.active),p.update.text(o.active),r.onActivate.call(d))},deactivate:function(){r.deactivateTest.call(d)&&(p.debug("Setting state to inactive"),c.removeClass(t.active),p.update.text(o.inactive),r.onDeactivate.call(d))},sync:function(){p.verbose("Syncing other buttons to current state"),p.is.active()?g.not(c).state("activate"):g.not(c).state("deactivate")},get:{text:function(){return r.selector.text?c.find(r.selector.text).text():c.html()},textFor:function(e){return o[e]||!1}},flash:{text:function(e,t,i){var n=p.get.text();p.debug("Flashing text message",e,t),e=e||r.text.flash,t=t||r.flashDuration,i=i||function(){},p.update.text(e),setTimeout(function(){p.update.text(n),i.call(d)},t)}},reset:{text:function(){var e=o.active||c.data(i.storedText),t=o.inactive||c.data(i.storedText);p.is.textEnabled()&&(p.is.active()&&e?(p.verbose("Resetting active text",e),p.update.text(e)):t&&(p.verbose("Resetting inactive text",e),p.update.text(t)))}},update:{text:function(e){var t=p.get.text();e&&e!==t?(p.debug("Updating text",e),r.selector.text?c.data(i.storedText,e).find(r.selector.text).text(e):c.data(i.storedText,e).html(e)):p.debug("Text is already set, ignoring update",e)}},setting:function(e,t){if(p.debug("Changing setting",e,t),C.isPlainObject(e))C.extend(!0,r,e);else{if(void 0===t)return r[e];C.isPlainObject(r[e])?C.extend(!0,r[e],t):r[e]=t}},internal:function(e,t){if(C.isPlainObject(e))C.extend(!0,p,e);else{if(void 0===t)return p[e];p[e]=t}},debug:function(){!r.silent&&r.debug&&(r.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,r.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!r.silent&&r.verbose&&r.debug&&(r.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,r.name+":"),p.verbose.apply(console,arguments)))},error:function(){r.silent||(p.error=Function.prototype.bind.call(console.error,console,r.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,i;r.performance&&(i=(t=Date.now())-(v||t),v=t,_.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:d,"Execution Time":i})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(function(){p.performance.display()},500)},display:function(){var e=r.name+":",i=0;v=!1,clearTimeout(p.performance.timer),C.each(_,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<_.length&&(console.groupCollapsed(e),console.table?console.table(_):C.each(_,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),_=[]}},invoke:function(n,e,t){var r,o,i,a=h;return e=e||x,t=t||d,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,C.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!C.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):C.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:p.error(s.method,n),!1);a=a[i]})),"function"==typeof o&&"number"!=typeof o.nodeType?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(m)?m.push(i):void 0!==m?m=[m,i]:void 0!==i&&(m=i),o}};b?(void 0===h&&p.initialize(),p.invoke(y)):(void 0!==h&&h.invoke("destroy"),p.initialize())}),void 0!==m?m:this},C.fn.state.settings={name:"State",debug:!1,verbose:!1,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:1e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,inactive:!1,activate:!1,deactivate:!1}}})(jQuery,window,document),((E,A,P)=>{function M(e){return"function"==typeof e&&"number"!=typeof e.nodeType}A=void 0!==A&&A.Math===Math?A:globalThis,E.fn.visibility=function(v){var _,e=E(this),y=Date.now(),b=[],x=v,w="string"==typeof x,C=[].slice.call(arguments,1),T=function(e,t){var i;return 0<=[A,P].indexOf(e)?i=E(e):0===(i=E(t.document).find(e)).length&&(i=t.frameElement?T(e,t.parent):A),i},S=e.length,k=0;return e.each(function(){var e,t,i,r=E.isPlainObject(v)?E.extend(!0,{},E.fn.visibility.settings,v):E.extend({},E.fn.visibility.settings),n=r.className,o=r.namespace,s=r.error,a=r.metadata,l="."+o,c="module-"+o,u=E(A),d=E(this),h=T(r.context,A),p=d.data(c),f=this,m=!1,g={initialize:function(){g.debug("Initializing",r),g.setup.cache(),g.should.trackChanges()&&("image"===r.type&&g.setup.image(),"fixed"===r.type&&g.setup.fixed(),r.observeChanges&&g.observeChanges(),g.bind.events()),g.save.position(),g.is.visible()||g.error(s.visible,d),r.initialCheck&&g.checkVisibility(),g.instantiate()},instantiate:function(){g.debug("Storing instance",g),d.data(c,g),p=g},destroy:function(){g.verbose("Destroying previous module"),i&&i.disconnect(),t&&t.disconnect(),u.off("load"+l,g.event.load).off("resize"+l,g.event.resize),h.off("scroll"+l,g.event.scroll).off("scrollchange"+l,g.event.scrollchange),"fixed"===r.type&&(g.resetFixed(),g.remove.placeholder()),d.off(l).removeData(c)},observeChanges:function(){"MutationObserver"in A&&(t=new MutationObserver(g.event.contextChanged),i=new MutationObserver(g.event.changed),t.observe(P,{childList:!0,subtree:!0}),i.observe(f,{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",i))},bind:{events:function(){g.verbose("Binding visibility events to scroll and resize"),r.refreshOnLoad&&u.on("load"+l,g.event.load),u.on("resize"+l,g.event.resize),h.off("scroll"+l).on("scroll"+l,g.event.scroll).on("scrollchange"+l,g.event.scrollchange)}},event:{changed:function(e){g.verbose("DOM tree modified, updating visibility calculations"),g.timer=setTimeout(function(){g.verbose("DOM tree modified, updating sticky menu"),g.refresh()},100)},contextChanged:function(e){[].forEach.call(e,function(e){e.removedNodes&&[].forEach.call(e.removedNodes,function(e){(e===f||0<E(e).find(f).length)&&(g.debug("Element removed from DOM, tearing down events"),g.destroy())})})},resize:function(){g.debug("Window resized"),r.refreshOnResize&&requestAnimationFrame(g.refresh)},load:function(){g.debug("Page finished loading"),requestAnimationFrame(g.refresh)},scroll:function(){r.throttle?(clearTimeout(g.timer),g.timer=setTimeout(function(){h.triggerHandler("scrollchange"+l,[h.scrollTop()])},r.throttle)):requestAnimationFrame(function(){h.triggerHandler("scrollchange"+l,[h.scrollTop()])})},scrollchange:function(e,t){g.checkVisibility(t)}},precache:function(e,t){for(var i=(e=Array.isArray(e)?e:[e]).length,n=0,r=[],o=P.createElement("img"),a=function(){++n>=e.length&&M(t)&&t()};i--;)(o=P.createElement("img")).addEventListener("load",a),o.addEventListener("error",a),o.src=e[i],r.push(o)},enableCallbacks:function(){g.debug("Allowing callbacks to occur"),m=!1},disableCallbacks:function(){g.debug("Disabling all callbacks temporarily"),m=!0},should:{trackChanges:function(){return w?(g.debug("One time query, no need to bind events"),!1):(g.debug("Callbacks being attached"),!0)}},setup:{cache:function(){g.cache={occurred:{},screen:{},element:{}}},image:function(){var e=d.data(a.src);e&&(g.verbose("Lazy loading image",e),r.once=!0,r.observeChanges=!1,r.onOnScreen=function(){g.debug("Image on screen",f),g.precache(e,function(){g.set.image(e,function(){++k===S&&r.onAllLoaded.call(this),r.onLoad.call(this)})})})},fixed:function(){g.debug("Setting up fixed"),r.once=!1,r.observeChanges=!1,r.initialCheck=!0,r.refreshOnLoad=!0,v.transition||(r.transition=!1),g.create.placeholder(),g.debug("Added placeholder",e),r.onTopPassed=function(){g.debug("Element passed, adding fixed position",d),g.show.placeholder(),g.set.fixed(),r.transition&&void 0!==E.fn.transition&&d.transition(r.transition,r.duration)},r.onTopPassedReverse=function(){g.debug("Element returned to position, removing fixed",d),g.hide.placeholder(),g.remove.fixed()}}},create:{placeholder:function(){g.verbose("Creating fixed position placeholder"),e=d.clone(!1).css("display","none").addClass(n.placeholder).insertAfter(d)}},show:{placeholder:function(){g.verbose("Showing placeholder"),e.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){g.verbose("Hiding placeholder"),e.css("display","none").css("visibility","")}},set:{fixed:function(){g.verbose("Setting element to fixed position"),d.addClass(n.fixed).css({position:"fixed",top:r.offset+"px",left:"auto",zIndex:r.zIndex}),r.onFixed.call(f)},image:function(e,t){d.attr("src",e),r.transition?void 0!==E.fn.transition?d.hasClass(n.visible)?g.debug("Transition already occurred on this image, skipping animation"):d.transition(r.transition,r.duration,t):d.fadeIn(r.duration,t):d.show()}},is:{onScreen:function(){return g.get.elementCalculations().onScreen},offScreen:function(){return g.get.elementCalculations().offScreen},visible:function(){return!(!g.cache||!g.cache.element||0===g.cache.element.width&&0===g.cache.element.offset.top)},verticallyScrollableContext:function(){var e=h[0]!==A&&h.css("overflow-y");return"auto"===e||"scroll"===e},horizontallyScrollableContext:function(){var e=h[0]!==A&&h.css("overflow-x");return"auto"===e||"scroll"===e}},refresh:function(){g.debug("Refreshing constants (width/height)"),"fixed"===r.type&&g.resetFixed(),g.reset(),g.save.position(),r.checkOnRefresh&&g.checkVisibility(),r.onRefresh.call(f)},resetFixed:function(){g.remove.fixed(),g.remove.occurred()},reset:function(){g.verbose("Resetting all cached values"),E.isPlainObject(g.cache)&&(g.cache.screen={},g.cache.element={})},checkVisibility:function(e){g.verbose("Checking visibility of element",g.cache.element),!m&&g.is.visible()&&(g.save.scroll(e),g.save.calculations(),g.passed(),g.passingReverse(),g.topVisibleReverse(),g.bottomVisibleReverse(),g.topPassedReverse(),g.bottomPassedReverse(),g.onScreen(),g.offScreen(),g.passing(),g.topVisible(),g.bottomVisible(),g.topPassed(),g.bottomPassed(),r.onUpdate)&&r.onUpdate.call(f,g.get.elementCalculations())},passed:function(e,t){var i=g.get.elementCalculations();if(e&&t)r.onPassed[e]=t;else{if(void 0!==e)return g.get.pixelsPassed(e)>i.pixelsPassed;i.passing&&E.each(r.onPassed,function(e,t){i.bottomVisible||i.pixelsPassed>g.get.pixelsPassed(e)?g.execute(t,e):r.once||g.remove.occurred(t)})}},onScreen:function(e){var t=g.get.elementCalculations(),i=e||r.onOnScreen;if(e&&(g.debug("Adding callback for onScreen",e),r.onOnScreen=e),t.onScreen?g.execute(i,"onScreen"):r.once||g.remove.occurred("onScreen"),void 0!==e)return t.onOnScreen},offScreen:function(e){var t=g.get.elementCalculations(),i=e||r.onOffScreen;if(e&&(g.debug("Adding callback for offScreen",e),r.onOffScreen=e),t.offScreen?g.execute(i,"offScreen"):r.once||g.remove.occurred("offScreen"),void 0!==e)return t.onOffScreen},passing:function(e){var t=g.get.elementCalculations(),i=e||r.onPassing;if(e&&(g.debug("Adding callback for passing",e),r.onPassing=e),t.passing?g.execute(i,"passing"):r.once||g.remove.occurred("passing"),void 0!==e)return t.passing},topVisible:function(e){var t=g.get.elementCalculations(),i=e||r.onTopVisible,n="topVisible";if(e&&(g.debug("Adding callback for top visible",e),r.onTopVisible=e),t.topVisible?g.execute(i,n):r.once||g.remove.occurred(n),void 0===e)return t.topVisible},bottomVisible:function(e){var t=g.get.elementCalculations(),i=e||r.onBottomVisible,n="bottomVisible";if(e&&(g.debug("Adding callback for bottom visible",e),r.onBottomVisible=e),t.bottomVisible?g.execute(i,n):r.once||g.remove.occurred(n),void 0===e)return t.bottomVisible},topPassed:function(e){var t=g.get.elementCalculations(),i=e||r.onTopPassed;if(e&&(g.debug("Adding callback for top passed",e),r.onTopPassed=e),t.topPassed?g.execute(i,"topPassed"):r.once||g.remove.occurred("topPassed"),void 0===e)return t.topPassed},bottomPassed:function(e){var t=g.get.elementCalculations(),i=e||r.onBottomPassed,n="bottomPassed";if(e&&(g.debug("Adding callback for bottom passed",e),r.onBottomPassed=e),t.bottomPassed?g.execute(i,n):r.once||g.remove.occurred(n),void 0===e)return t.bottomPassed},passingReverse:function(e){var t=g.get.elementCalculations(),i=e||r.onPassingReverse,n="passingReverse";if(e&&(g.debug("Adding callback for passing reverse",e),r.onPassingReverse=e),t.passing?r.once||g.remove.occurred(n):g.get.occurred("passing")&&g.execute(i,n),void 0!==e)return!t.passing},topVisibleReverse:function(e){var t=g.get.elementCalculations(),i=e||r.onTopVisibleReverse,n="topVisibleReverse";if(e&&(g.debug("Adding callback for top visible reverse",e),r.onTopVisibleReverse=e),t.topVisible?r.once||g.remove.occurred(n):g.get.occurred("topVisible")&&g.execute(i,n),void 0===e)return!t.topVisible},bottomVisibleReverse:function(e){var t=g.get.elementCalculations(),i=e||r.onBottomVisibleReverse,n="bottomVisibleReverse";if(e&&(g.debug("Adding callback for bottom visible reverse",e),r.onBottomVisibleReverse=e),t.bottomVisible?r.once||g.remove.occurred(n):g.get.occurred("bottomVisible")&&g.execute(i,n),void 0===e)return!t.bottomVisible},topPassedReverse:function(e){var t=g.get.elementCalculations(),i=e||r.onTopPassedReverse,n="topPassedReverse";if(e&&(g.debug("Adding callback for top passed reverse",e),r.onTopPassedReverse=e),t.topPassed?r.once||g.remove.occurred(n):g.get.occurred("topPassed")&&g.execute(i,n),void 0===e)return!t.onTopPassed},bottomPassedReverse:function(e){var t=g.get.elementCalculations(),i=e||r.onBottomPassedReverse,n="bottomPassedReverse";if(e&&(g.debug("Adding callback for bottom passed reverse",e),r.onBottomPassedReverse=e),t.bottomPassed?r.once||g.remove.occurred(n):g.get.occurred("bottomPassed")&&g.execute(i,n),void 0===e)return!t.bottomPassed},execute:function(e,t){var i=g.get.elementCalculations(),n=g.get.screenCalculations();(e=e||!1)&&(r.continuous?(g.debug("Callback being called continuously",t,i),e.call(f,i,n)):g.get.occurred(t)||(g.debug("Conditions met",t,i),e.call(f,i,n))),g.save.occurred(t)},remove:{fixed:function(){g.debug("Removing fixed position"),d.removeClass(n.fixed).css({position:"",top:"",left:"",zIndex:""}),r.onUnfixed.call(f)},placeholder:function(){g.debug("Removing placeholder content"),e&&e.remove()},occurred:function(e){var t;e?void 0!==(t=g.cache.occurred)[e]&&!0===t[e]&&(g.debug("Callback can now be called again",e),g.cache.occurred[e]=!1):g.cache.occurred={}}},save:{calculations:function(){g.verbose("Saving all calculations necessary to determine positioning"),g.save.direction(),g.save.screenCalculations(),g.save.elementCalculations()},occurred:function(e){!e||void 0!==g.cache.occurred[e]&&!0===g.cache.occurred[e]||(g.verbose("Saving callback occurred",e),g.cache.occurred[e]=!0)},scroll:function(e){e=e+r.offset||h.scrollTop()+r.offset,g.cache.scroll=e},direction:function(){var e=g.get.scroll(),t=g.get.lastScroll();return g.cache.direction=t<e&&t?"down":e<t&&t?"up":"static",g.cache.direction},elementPosition:function(){var e=g.cache.element,t=g.get.screenSize();return g.verbose("Saving element position"),e.fits=e.height<t.height,e.offset=d.offset(),e.width=d.outerWidth(),e.height=d.outerHeight(),g.is.verticallyScrollableContext()&&(e.offset.top+=h.scrollTop()-h.offset().top),g.is.horizontallyScrollableContext()&&(e.offset.left+=h.scrollLeft()-h.offset().left),g.cache.element=e},elementCalculations:function(){var e=g.get.screenCalculations(),t=g.get.elementPosition();return r.includeMargin?(t.margin={},t.margin.top=parseInt(d.css("margin-top"),10),t.margin.bottom=parseInt(d.css("margin-bottom"),10),t.top=t.offset.top-t.margin.top,t.bottom=t.offset.top+t.height+t.margin.bottom):(t.top=t.offset.top,t.bottom=t.offset.top+t.height),t.topPassed=e.top>=t.top,t.bottomPassed=e.top>=t.bottom,t.topVisible=e.bottom>=t.top&&!t.topPassed,t.bottomVisible=e.bottom>=t.bottom&&!t.bottomPassed,t.pixelsPassed=0,t.percentagePassed=0,t.onScreen=(t.topVisible||t.passing)&&!t.bottomPassed,t.passing=t.topPassed&&!t.bottomPassed,t.offScreen=!t.onScreen,t.passing&&(t.pixelsPassed=e.top-t.top,t.percentagePassed=(e.top-t.top)/t.height),g.cache.element=t,g.verbose("Updated element calculations",t),t},screenCalculations:function(){var e=g.get.scroll();return g.save.direction(),g.cache.screen.top=e,g.cache.screen.bottom=e+g.cache.screen.height,g.cache.screen},screenSize:function(){g.verbose("Saving window position"),g.cache.screen={height:h.height()}},position:function(){g.save.screenSize(),g.save.elementPosition()}},get:{pixelsPassed:function(e){var t=g.get.elementCalculations();return-1<e.search("%")?t.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return void 0!==g.cache.occurred&&g.cache.occurred[e]||!1},direction:function(){return void 0===g.cache.direction&&g.save.direction(),g.cache.direction},elementPosition:function(){return void 0===g.cache.element&&g.save.elementPosition(),g.cache.element},elementCalculations:function(){return void 0===g.cache.element&&g.save.elementCalculations(),g.cache.element},screenCalculations:function(){return void 0===g.cache.screen&&g.save.screenCalculations(),g.cache.screen},screenSize:function(){return void 0===g.cache.screen&&g.save.screenSize(),g.cache.screen},scroll:function(){return void 0===g.cache.scroll&&g.save.scroll(),g.cache.scroll},lastScroll:function(){return void 0===g.cache.screen?(g.debug("First scroll event, no last scroll could be found"),!1):g.cache.screen.top}},setting:function(e,t){if(E.isPlainObject(e))E.extend(!0,r,e);else{if(void 0===t)return r[e];r[e]=t}},internal:function(e,t){if(E.isPlainObject(e))E.extend(!0,g,e);else{if(void 0===t)return g[e];g[e]=t}},debug:function(){!r.silent&&r.debug&&(r.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,r.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!r.silent&&r.verbose&&r.debug&&(r.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,r.name+":"),g.verbose.apply(console,arguments)))},error:function(){r.silent||(g.error=Function.prototype.bind.call(console.error,console,r.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,i;r.performance&&(i=(t=Date.now())-(y||t),y=t,b.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:f,"Execution Time":i})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(function(){g.performance.display()},500)},display:function(){var e=r.name+":",i=0;y=!1,clearTimeout(g.performance.timer),E.each(b,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",0<b.length&&(console.groupCollapsed(e),console.table?console.table(b):E.each(b,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(n,e,t){var r,o,i,a=p;return e=e||C,t=t||f,"string"==typeof n&&void 0!==a&&(n=n.split(/[ .]/),r=n.length-1,E.each(n,function(e,t){var i=e!==r?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(!E.isPlainObject(a[i])||e===r)return void 0!==a[i]?(o=a[i],!1):E.isPlainObject(a[t])&&e!==r?void(a=a[t]):(void 0!==a[t]?o=a[t]:g.error(s.method,n),!1);a=a[i]})),M(o)?i=o.apply(t,e):void 0!==o&&(i=o),Array.isArray(_)?_.push(i):void 0!==_?_=[_,i]:void 0!==i&&(_=i),o}};w?(void 0===p&&g.initialize(),p.save.scroll(),p.save.calculations(),g.invoke(x)):(void 0!==p&&p.invoke("destroy"),g.initialize())}),void 0!==_?_:this},E.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:A,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"constraint",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}})(jQuery,window,document);var Vue=function(n){function e(e,t){let i=Object.create(null),n=e.split(",");for(let e=0;e<n.length;e++)i[n[e]]=!0;return t?e=>!!i[e.toLowerCase()]:e=>!!i[e]}let o=e("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"),b=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function x(e){return!!e||""===e}function s(t){if(J(t)){var i={};for(let e=0;e<t.length;e++){var n=t[e],r=(L(n)?f:s)(n);if(r)for(let e in r)i[e]=r[e]}return i}return L(t)||ee(t)?t:void 0}let a=/;(?![^(]*\))/g,u=/:(.+)/;function f(e){let t={};return e.split(a).forEach(e=>{e&&1<(e=e.split(u)).length&&(t[e[0].trim()]=e[1].trim())}),t}function g(t){let i="";if(L(t))i=t;else if(J(t))for(let e=0;e<t.length;e++){var n=g(t[e]);n&&(i+=n+" ")}else if(ee(t))for(var e in t)t[e]&&(i+=e+" ");return i.trim()}let v=e("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot"),_=e("svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view"),y=e("area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr");function w(n,r){if(n===r)return!0;let e=U(n),t=U(r);if(e||t)return!(!e||!t)&&n.getTime()===r.getTime();if(e=$(n),t=$(r),e||t)return n===r;if(e=J(n),t=J(r),e||t)return!(!e||!t)&&function(t,i){if(t.length!==i.length)return!1;let n=!0;for(let e=0;n&&e<t.length;e++)n=w(t[e],i[e]);return n}(n,r);if(e=ee(n),t=ee(r),e||t){if(!e||!t)return!1;if(Object.keys(n).length!==Object.keys(r).length)return!1;for(let i in n){let e=n.hasOwnProperty(i),t=r.hasOwnProperty(i);if(e&&!t||!e&&t||!w(n[i],r[i]))return!1}}return String(n)===String(r)}function C(e,t){return e.findIndex(e=>w(e,t))}let I=(e,t)=>t&&t.__v_isRef?I(e,t.value):j(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,i])=>(e[t+" =>"]=i,e),{})}:V(t)?{[`Set(${t.size})`]:[...t.values()]}:!ee(t)||J(t)||Z(t)?t:String(t),W={},ue=[],X=()=>{},D=()=>!1,R=/^on[^a-z]/,O=e=>R.test(e),B=e=>e.startsWith("onUpdate:"),Y=Object.assign,F=(e,t)=>{t=e.indexOf(t);-1<t&&e.splice(t,1)},N=Object.prototype.hasOwnProperty,K=(e,t)=>N.call(e,t),J=Array.isArray,j=e=>"[object Map]"===H(e),V=e=>"[object Set]"===H(e),U=e=>"[object Date]"===H(e),Q=e=>"function"==typeof e,L=e=>"string"==typeof e,$=e=>"symbol"==typeof e,ee=e=>null!==e&&"object"==typeof e,de=e=>ee(e)&&Q(e.then)&&Q(e.catch),q=Object.prototype.toString,H=e=>q.call(e),Z=e=>"[object Object]"===H(e),G=e=>L(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,he=e(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pe=e("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),fe=t=>{let i=Object.create(null);return e=>i[e]||(i[e]=t(e))},me=/-(\w)/g,te=fe(e=>e.replace(me,(e,t)=>t?t.toUpperCase():"")),ge=/\B([A-Z])/g,ve=fe(e=>e.replace(ge,"-$1").toLowerCase()),_e=fe(e=>e.charAt(0).toUpperCase()+e.slice(1)),ye=fe(e=>e?"on"+_e(e):""),be=(e,t)=>!Object.is(e,t),xe=(t,i)=>{for(let e=0;e<t.length;e++)t[e](i)},we=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Ce=e=>{var t=parseFloat(e);return isNaN(t)?e:t},Te,i;class Se{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&i&&(this.parent=i,this.index=(i.scopes||(i.scopes=[])).push(this)-1)}run(e){if(this.active){var t=i;try{return i=this,e()}finally{i=t}}}on(){i=this}off(){i=this.parent}stop(i){if(this.active){let e,t;for(e=0,t=this.effects.length;e<t;e++)this.effects[e].stop();for(e=0,t=this.cleanups.length;e<t;e++)this.cleanups[e]();if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].stop(!0);if(this.parent&&!i){let e=this.parent.scopes.pop();e&&e!==this&&((this.parent.scopes[this.index]=e).index=this.index)}this.active=!1}}}function ke(e,t=i){t&&t.active&&t.effects.push(e)}let Ee=e=>{e=new Set(e);return e.w=0,e.n=0,e},Ae=e=>0<(e.w&De),Pe=e=>0<(e.n&De),Me=new WeakMap,Ie=0,De=1,Le,ze=Symbol(""),Re=Symbol("");class Oe{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,ke(this,i)}run(){if(!this.active)return this.fn();let e=Le,t=Fe;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Le,Le=this,Fe=!0,De=1<<++Ie,(Ie<=30?({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=De}:Be)(this),this.fn()}finally{if(Ie<=30){var i=this;var n=i["deps"];if(n.length){let t=0;for(let e=0;e<n.length;e++){var r=n[e];Ae(r)&&!Pe(r)?r.delete(i):n[t++]=r,r.w&=~De,r.n&=~De}n.length=t}}De=1<<--Ie,Le=this.parent,Fe=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Le===this?this.deferStop=!0:this.active&&(Be(this),this.onStop&&this.onStop(),this.active=!1)}}function Be(t){var i=t["deps"];if(i.length){for(let e=0;e<i.length;e++)i[e].delete(t);i.length=0}}let Fe=!0,Ne=[];function je(){Ne.push(Fe),Fe=!1}function Ve(){var e=Ne.pop();Fe=void 0===e||e}function h(i,e,n){if(Fe&&Le){let e=Me.get(i),t=(e||Me.set(i,e=new Map),e.get(n));t||e.set(n,t=Ee()),Ue(t)}}function Ue(e){let t=!1;Ie<=30?Pe(e)||(e.n|=De,t=!Ae(e)):t=!e.has(Le),t&&(e.add(Le),Le.deps.push(e))}function $e(e,t,n,r){var o=Me.get(e);if(o){let i=[];if("clear"===t)i=[...o.values()];else if("length"===n&&J(e))o.forEach((e,t)=>{("length"===t||r<=t)&&i.push(e)});else switch(void 0!==n&&i.push(o.get(n)),t){case"add":J(e)?G(n)&&i.push(o.get("length")):(i.push(o.get(ze)),j(e)&&i.push(o.get(Re)));break;case"delete":J(e)||(i.push(o.get(ze)),j(e)&&i.push(o.get(Re)));break;case"set":j(e)&&i.push(o.get(ze))}if(1===i.length)i[0]&&qe(i[0]);else{let t=[];for(let e of i)e&&t.push(...e);qe(Ee(t))}}}function qe(e){var t,i,e=J(e)?e:[...e];for(t of e)t.computed&&He(t);for(i of e)i.computed||He(i)}function He(e){e===Le&&!e.allowRecurse||(e.scheduler?e.scheduler():e.run())}let Ze=e("__proto__,__v_isRef,__isVue"),Ge=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter($)),We=Qe(),Xe=Qe(!1,!0),Ye=Qe(!0),Ke=Qe(!0,!0),Je=function(){let e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...e){var i=ie(this);for(let e=0,t=this.length;e<t;e++)h(i,0,e+"");var t=i[n](...e);return-1===t||!1===t?i[n](...e.map(ie)):t}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...e){je();e=ie(this)[t].apply(this,e);return Ve(),e}}),e}();function Qe(r=!1,o=!1){return function(e,t,i){var n;return"__v_isReactive"===t?!r:"__v_isReadonly"===t?r:"__v_isShallow"===t?o:"__v_raw"===t&&i===(r?o?Pt:At:o?Et:kt).get(e)?e:(n=J(e),!r&&n&&K(Je,t)?Reflect.get(Je,t,i):(i=Reflect.get(e,t,i),($(t)?Ge.has(t):Ze(t))||(r||h(e,0,t),o)?i:z(i)?n&&G(t)?i:i.value:ee(i)?(r?Dt:Mt)(i):i))}}function et(s=!1){return function(e,t,i,n){let r=e[t];var o,a;return!(Rt(r)&&z(r)&&!z(i))&&(s||Rt(i)||(Ot(i)||(i=ie(i),r=ie(r)),J(e))||!z(r)||z(i)?(o=J(e)&&G(t)?Number(t)<e.length:K(e,t),a=Reflect.set(e,t,i,n),e===ie(n)&&(o?be(i,r)&&$e(e,"set",t,i):$e(e,"add",t,i)),a):(r.value=i,!0))}}let tt={get:We,set:et(),deleteProperty:function(e,t){var i=K(e,t),n=Reflect.deleteProperty(e,t);return n&&i&&$e(e,"delete",t,void 0),n},has:function(e,t){var i=Reflect.has(e,t);return $(t)&&Ge.has(t)||h(e,0,t),i},ownKeys:function(e){return h(e,0,J(e)?"length":ze),Reflect.ownKeys(e)}},it={get:Ye,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},nt=Y({},tt,{get:Xe,set:et(!0)}),rt=Y({},it,{get:Ke}),ot=e=>e,at=e=>Reflect.getPrototypeOf(e);function st(e,t,i=!1,n=!1){var r=ie(e=e.__v_raw),o=ie(t),a=(i||(t!==o&&h(r,0,t),h(r,0,o)),at(r))["has"],n=n?ot:i?jt:Nt;return a.call(r,t)?n(e.get(t)):a.call(r,o)?n(e.get(o)):void(e!==r&&e.get(t))}function lt(e,t=!1){var i=this.__v_raw,n=ie(i),r=ie(e);return t||(e!==r&&h(n,0,e),h(n,0,r)),e===r?i.has(e):i.has(e)||i.has(r)}function ct(e,t=!1){return e=e.__v_raw,t||h(ie(e),0,ze),Reflect.get(e,"size",e)}function ut(e){e=ie(e);var t=ie(this);return at(t).has.call(t,e)||(t.add(e),$e(t,"add",e,e)),this}function dt(e,t){t=ie(t);var i=ie(this),{has:n,get:r}=at(i);let o=n.call(i,e);o||(e=ie(e),o=n.call(i,e));n=r.call(i,e);return i.set(e,t),o?be(t,n)&&$e(i,"set",e,t):$e(i,"add",e,t),this}function ht(e){var t=ie(this),{has:i,get:n}=at(t);let r=i.call(t,e);r||(e=ie(e),r=i.call(t,e)),n&&n.call(t,e);i=t.delete(e);return r&&$e(t,"delete",e,void 0),i}function pt(){var e=ie(this),t=0!==e.size,i=e.clear();return t&&$e(e,"clear",void 0,void 0),i}function ft(a,s){return function(i,n){let r=this,e=r.__v_raw,t=ie(e),o=s?ot:a?jt:Nt;return a||h(t,0,ze),e.forEach((e,t)=>i.call(n,o(e),o(t),r))}}function mt(l,c,u){return function(...e){let t=this.__v_raw,i=ie(t),n=j(i),r="entries"===l||l===Symbol.iterator&&n,o="keys"===l&&n,a=t[l](...e),s=u?ot:c?jt:Nt;return c||h(i,0,o?Re:ze),{next(){var{value:e,done:t}=a.next();return t?{value:e,done:t}:{value:r?[s(e[0]),s(e[1])]:s(e),done:t}},[Symbol.iterator](){return this}}}}function gt(e){return function(){return"delete"!==e&&this}}let[vt,_t,yt,bt]=function(){let t={get(e){return st(this,e)},get size(){return ct(this)},has:lt,add:ut,set:dt,delete:ht,clear:pt,forEach:ft(!1,!1)},i={get(e){return st(this,e,!1,!0)},get size(){return ct(this)},has:lt,add:ut,set:dt,delete:ht,clear:pt,forEach:ft(!1,!0)},n={get(e){return st(this,e,!0)},get size(){return ct(this,!0)},has(e){return lt.call(this,e,!0)},add:gt("add"),set:gt("set"),delete:gt("delete"),clear:gt("clear"),forEach:ft(!0,!1)},r={get(e){return st(this,e,!0,!0)},get size(){return ct(this,!0)},has(e){return lt.call(this,e,!0)},add:gt("add"),set:gt("set"),delete:gt("delete"),clear:gt("clear"),forEach:ft(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(e=>{t[e]=mt(e,!1,!1),n[e]=mt(e,!0,!1),i[e]=mt(e,!1,!0),r[e]=mt(e,!0,!0)}),[t,n,i,r]}();function xt(n,e){let r=e?n?bt:yt:n?_t:vt;return(e,t,i)=>"__v_isReactive"===t?!n:"__v_isReadonly"===t?n:"__v_raw"===t?e:Reflect.get(K(r,t)&&t in e?r:e,t,i)}let wt={get:xt(!1,!1)},Ct={get:xt(!1,!0)},Tt={get:xt(!0,!1)},St={get:xt(!0,!0)},kt=new WeakMap,Et=new WeakMap,At=new WeakMap,Pt=new WeakMap;function Mt(e){return Rt(e)?e:Lt(e,!1,tt,wt,kt)}function It(e){return Lt(e,!1,nt,Ct,Et)}function Dt(e){return Lt(e,!0,it,Tt,At)}function Lt(e,t,i,n,r){return ee(e)&&(!e.__v_raw||t&&e.__v_isReactive)?r.get(e)||(0===(t=function(e){if(e.__v_skip||!Object.isExtensible(e))return 0;switch((e=>H(e).slice(8,-1))(e)){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(e))?e:(t=new Proxy(e,2===t?n:i),r.set(e,t),t)):e}function zt(e){return Rt(e)?zt(e.__v_raw):!(!e||!e.__v_isReactive)}function Rt(e){return!(!e||!e.__v_isReadonly)}function Ot(e){return!(!e||!e.__v_isShallow)}function Bt(e){return zt(e)||Rt(e)}function ie(e){var t=e&&e.__v_raw;return t?ie(t):e}function Ft(e){return we(e,"__v_skip",!0),e}let Nt=e=>ee(e)?Mt(e):e,jt=e=>ee(e)?Dt(e):e;function Vt(e){Fe&&Le&&Ue((e=ie(e)).dep||(e.dep=Ee()))}function Ut(e){(e=ie(e)).dep&&qe(e.dep)}function z(e){return!(!e||!0!==e.__v_isRef)}function $t(e){return qt(e,!1)}function qt(e,t){return z(e)?e:new Ht(e,t)}class Ht{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ie(e),this._value=t?e:Nt(e)}get value(){return Vt(this),this._value}set value(e){e=this.__v_isShallow?e:ie(e),be(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Nt(e),Ut(this))}}function Zt(e){return z(e)?e.value:e}let Gt={get:(e,t,i)=>Zt(Reflect.get(e,t,i)),set:(e,t,i,n)=>{var r=e[t];return z(r)&&!z(i)?(r.value=i,!0):Reflect.set(e,t,i,n)}};function Wt(e){return zt(e)?e:new Proxy(e,Gt)}class Xt{constructor(e){this.dep=void 0,this.__v_isRef=!0;var{get:e,set:t}=e(()=>Vt(this),()=>Ut(this));this._get=e,this._set=t}get value(){return this._get()}set value(e){this._set(e)}}class Yt{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0}get value(){var e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Kt(e,t,i){var n=e[t];return z(n)?n:new Yt(e,t,i)}class Jt{constructor(e,t,i,n){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Oe(e,()=>{this._dirty||(this._dirty=!0,Ut(this))}),(this.effect.computed=this).effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){var e=ie(this);return Vt(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}let Qt=[];function ei(t){let i=[],e=Object.keys(t);return e.slice(0,3).forEach(e=>{i.push(...function e(t,i,n){return L(i)?(i=JSON.stringify(i),n?i:[t+"="+i]):"number"==typeof i||"boolean"==typeof i||null==i?n?i:[t+"="+i]:z(i)?(i=e(t,ie(i.value),!0),n?i:[t+"=Ref<",i,">"]):Q(i)?[t+"=fn"+(i.name?`<${i.name}>`:"")]:(i=ie(i),n?i:[t+"=",i])}(e,t[e]))}),3<e.length&&i.push(" ..."),i}function ti(e,t,i,n){let r;try{r=n?e(...n):e()}catch(e){ii(e,t,i)}return r}function ne(t,i,n,r){if(Q(t)){let e=ti(t,i,n,r);return e&&de(e)&&e.catch(e=>{ii(e,i,n)}),e}let o=[];for(let e=0;e<t.length;e++)o.push(ne(t[e],i,n,r));return o}function ii(i,t,n,e=0){if(t){let e=t.parent;for(var r=t.proxy,o=n;e;){let t=e.ec;if(t)for(let e=0;e<t.length;e++)if(!1===t[e](i,r,o))return;e=e.parent}n=t.appContext.config.errorHandler;if(n)return void ti(n,null,10,[i,r,o])}console.error(i)}let ni=!1,ri=!1,re=[],oi=0,ai=[],si=null,li=0,ci=[],ui=null,di=0,hi=Promise.resolve(),pi=null,fi=null;function mi(e){var t=pi||hi;return e?t.then(this?e.bind(this):e):t}function gi(e){re.length&&re.includes(e,ni&&e.allowRecurse?oi+1:oi)||e===fi||(null==e.id?re.push(e):re.splice(function(e){let t=oi+1,i=re.length;for(;t<i;){var n=t+i>>>1;wi(re[n])<e?t=1+n:i=n}return t}(e.id),0,e),vi())}function vi(){ni||ri||(ri=!0,pi=hi.then(Ci))}function _i(e,t,i,n){J(e)?i.push(...e):t&&t.includes(e,e.allowRecurse?n+1:n)||i.push(e),vi()}function yi(e){_i(e,ui,ci,di)}function bi(e,t=null){if(ai.length){for(fi=t,si=[...new Set(ai)],ai.length=0,li=0;li<si.length;li++)si[li]();si=null,li=0,fi=null,bi(e,t)}}function xi(){if(bi(),ci.length){let e=[...new Set(ci)];if(ci.length=0,ui)ui.push(...e);else{for((ui=e).sort((e,t)=>wi(e)-wi(t)),di=0;di<ui.length;di++)ui[di]();ui=null,di=0}}}let wi=e=>null==e.id?1/0:e.id;function Ci(e){ri=!1,ni=!0,bi(e),re.sort((e,t)=>wi(e)-wi(t));try{for(oi=0;oi<re.length;oi++){let e=re[oi];e&&!1!==e.active&&ti(e,null,14)}}finally{oi=0,re.length=0,xi(),ni=!1,pi=null,(re.length||ai.length||ci.length)&&Ci(e)}}let Ti=[];function Si(e,t){return e&&O(t)&&(t=t.slice(2).replace(/Once$/,""),K(e,t[0].toLowerCase()+t.slice(1))||K(e,ve(t))||K(e,t))}let l=null,ki=null;function Ei(e){var t=l;return l=e,ki=e&&e.type.__scopeId||null,t}function Ai(i,n=l,e){if(!n)return i;if(i._n)return i;let r=(...e)=>{r._d&&Sr(-1);var t=Ei(n),e=i(...e);return Ei(t),r._d&&Sr(1),e};return r._n=!0,r._c=!0,r._d=!0,r}function Pi(t){let{type:i,vnode:e,proxy:n,withProxy:r,props:o,propsOptions:[a],slots:s,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:p,ctx:f,inheritAttrs:m}=t,g,v;var _=Ei(t);try{if(4&e.shapeFlag){let e=r||n;g=Br(u.call(e,e,d,o,p,h,f)),v=l}else{let e=i;g=Br(e(o,1<e.length?{attrs:l,slots:s,emit:c}:null)),v=i.props?l:Mi(l)}}catch(e){xr.length=0,ii(e,t,1),g=le(se)}let y=g;if(v&&!1!==m){let e=Object.keys(v),t=y["shapeFlag"];e.length&&7&t&&(a&&e.some(B)&&(v=Ii(v,a)),y=Rr(y,v))}return e.dirs&&((y=Rr(y)).dirs=y.dirs?y.dirs.concat(e.dirs):e.dirs),e.transition&&(y.transition=e.transition),g=y,Ei(_),g}let Mi=e=>{let t;for(var i in e)"class"!==i&&"style"!==i&&!O(i)||((t=t||{})[i]=e[i]);return t},Ii=(e,t)=>{var i,n={};for(i in e)B(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function Di(t,i,n){var r=Object.keys(i);if(r.length!==Object.keys(t).length)return!0;for(let e=0;e<r.length;e++){var o=r[e];if(i[o]!==t[o]&&!Si(n,o))return!0}return!1}function Li({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}let zi=e=>e.__isSuspense,Ri={name:"Suspense",__isSuspense:!0,process(s,l,c,u,d,e,h,p,f,m){if(null==s){var t=l,g=c,v=u,_=d,y=h,b=p,x=f,w=m,{p:C,o:{createElement:T}}=w,T=T("div"),e=t.suspense=Bi(t,e,_,g,T,v,y,b,x,w);C(null,e.pendingBranch=t.ssContent,T,null,_,e,y,b),0<e.deps?(Oi(t,"onPending"),Oi(t,"onFallback"),C(null,t.ssFallback,g,v,_,null,y,b),ji(e,t.ssFallback)):e.resolve()}else{var[S,k,x,w,T,C,g,v,{p:_,um:y,o:{createElement:b}}]=[s,l,c,u,d,h,p,f,m];let i=k.suspense=S.suspense,e=((i.vnode=k).el=S.el,k.ssContent),n=k.ssFallback,{activeBranch:t,pendingBranch:r,isInFallback:o,isHydrating:a}=i;if(r)Pr(i.pendingBranch=e,r)?(_(r,e,i.hiddenContainer,null,T,i,C,g,v),i.deps<=0?i.resolve():o&&(_(t,n,x,w,T,null,C,g,v),ji(i,n))):(i.pendingId++,a?(i.isHydrating=!1,i.activeBranch=r):y(r,T,i),i.deps=0,i.effects.length=0,i.hiddenContainer=b("div"),o?(_(null,e,i.hiddenContainer,null,T,i,C,g,v),i.deps<=0?i.resolve():(_(t,n,x,w,T,null,C,g,v),ji(i,n))):t&&Pr(e,t)?(_(t,e,x,w,T,i,C,g,v),i.resolve(!0)):(_(null,e,i.hiddenContainer,null,T,i,C,g,v),i.deps<=0&&i.resolve()));else if(t&&Pr(e,t))_(t,e,x,w,T,i,C,g,v),ji(i,e);else if(Oi(k,"onPending"),i.pendingBranch=e,i.pendingId++,_(null,e,i.hiddenContainer,null,T,i,C,g,v),i.deps<=0)i.resolve();else{let{timeout:e,pendingId:t}=i;0<e?setTimeout(()=>{i.pendingId===t&&i.fallback(n)},e):0===e&&i.fallback(n)}}},hydrate:function(e,t,i,n,r,o,a,s,l){n=t.suspense=Bi(t,n,i,e.parentNode,document.createElement("div"),null,r,o,a,s,!0),r=l(e,n.pendingBranch=t.ssContent,i,n,o,a);return 0===n.deps&&n.resolve(),r},create:Bi,normalize:function(e){var{shapeFlag:t,children:i}=e,t=32&t;e.ssContent=Fi(t?i.default:i),e.ssFallback=t?Fi(i.fallback):le(se)}};function Oi(e,t){e=e.props&&e.props[t];Q(e)&&e()}function Bi(e,t,i,n,r,o,a,c,u,s,l=!1){let{p:d,m:h,um:p,n:f,o:{parentNode:m,remove:g}}=s,v=Ce(e.props&&e.props.timeout),_={vnode:e,parent:t,parentComponent:i,isSVG:a,container:n,hiddenContainer:r,anchor:o,deps:0,pendingId:0,timeout:"number"==typeof v?v:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:l,isUnmounted:!1,effects:[],resolve(e=!1){let{vnode:t,activeBranch:i,pendingBranch:n,pendingId:r,effects:o,parentComponent:a,container:s}=_;if(_.isHydrating)_.isHydrating=!1;else if(!e){let e=i&&n.transition&&"out-in"===n.transition.mode,t=(e&&(i.transition.afterLeave=()=>{r===_.pendingId&&h(n,s,t,0)}),_)["anchor"];i&&(t=f(i),p(i,a,_,!0)),e||h(n,s,t,0)}ji(_,n),_.pendingBranch=null,_.isInFallback=!1;let l=_.parent,c=!1;for(;l;){if(l.pendingBranch){l.effects.push(...o),c=!0;break}l=l.parent}c||yi(o),_.effects=[],Oi(t,"onResolve")},fallback(l){if(_.pendingBranch){let{vnode:e,activeBranch:t,parentComponent:i,container:n,isSVG:r}=_,o=(Oi(e,"onFallback"),f(t)),a=()=>{_.isInFallback&&(d(null,l,n,o,i,null,r,c,u),ji(_,l))},s=l.transition&&"out-in"===l.transition.mode;s&&(t.transition.afterLeave=a),_.isInFallback=!0,p(t,i,null,!0),s||a()}},move(e,t,i){_.activeBranch&&h(_.activeBranch,e,t,i),_.container=e},next:()=>_.activeBranch&&f(_.activeBranch),registerDep(i,n){let r=!!_.pendingBranch,o=(r&&_.deps++,i.vnode.el);i.asyncDep.catch(e=>{ii(e,i,0)}).then(e=>{var t;i.isUnmounted||_.isUnmounted||_.pendingId!==i.suspenseId||(i.asyncResolved=!0,t=i["vnode"],Yr(i,e,!1),o&&(t.el=o),e=!o&&i.subTree.el,n(i,t,m(o||i.subTree.el),o?null:f(i.subTree),_,a,u),e&&g(e),Li(i,t.el),r&&0==--_.deps&&_.resolve())})},unmount(e,t){_.isUnmounted=!0,_.activeBranch&&p(_.activeBranch,i,e,t),_.pendingBranch&&p(_.pendingBranch,i,e,t)}};return _}function Fi(t){let e;var i;if(Q(t)&&((i=Tr&&t._c)&&(t._d=!1,wr()),t=t(),i)&&(t._d=!0,e=c,Cr()),J(t)){let e=function(t){let i;for(let e=0;e<t.length;e++){var n=t[e];if(!Ar(n))return;if(n.type!==se||"v-if"===n.children){if(i)return;i=n}}return i}(t);t=e}return t=Br(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(e=>e!==t)),t}function Ni(e,t){t&&t.pendingBranch?J(e)?t.effects.push(...e):t.effects.push(e):yi(e)}function ji(e,t){e.activeBranch=t;var{vnode:e,parentComponent:i}=e,t=e.el=t.el;i&&i.subTree===e&&(i.vnode.el=t,Li(i,t))}function Vi(t,i){if(m){let e=m.provides;var n=m.parent&&m.parent.provides;(e=n===e?m.provides=Object.create(n):e)[t]=i}}function Ui(e,t,i=!1){var n,r=m||l;if(r)return(n=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides)&&e in n?n[e]:1<arguments.length?i&&Q(t)?t.call(r.proxy):t:void 0}function $i(e,t){return Zi(e,null,{flush:"post"})}let qi={};function Hi(e,t,i){return Zi(e,t,i)}function Zi(e,t,{immediate:i,deep:n,flush:r}=W){let o=m,a,s,l=!1,c=!1;if(z(e)?(a=()=>e.value,l=Ot(e)):zt(e)?(a=()=>e,n=!0):a=J(e)?(c=!0,l=e.some(e=>zt(e)||Ot(e)),()=>e.map(e=>z(e)?e.value:zt(e)?Wi(e):Q(e)?ti(e,o,2):void 0)):Q(e)?t?()=>ti(e,o,2):()=>{if(!o||!o.isUnmounted)return s&&s(),ne(e,o,3,[u])}:X,t&&n){let e=a;a=()=>Wi(e())}let u=e=>{s=f.onStop=()=>{ti(e,o,4)}},d=c?[]:qi,h=()=>{var e;f.active&&(t?(e=f.run(),(n||l||(c?e.some((e,t)=>be(e,d[t])):be(e,d)))&&(s&&s(),ne(t,o,3,[e,d===qi?void 0:d,u]),d=e)):f.run())};var p;h.allowRecurse=!!t,p="sync"===r?h:"post"===r?()=>oe(h,o&&o.suspense):()=>{_i(h,si,ai,li)};let f=new Oe(a,p);return t?i?h():d=f.run():"post"===r?oe(f.run.bind(f),o&&o.suspense):f.run(),()=>{f.stop(),o&&o.scope&&F(o.scope.effects,f)}}function Gi(e,t){let i=t.split(".");return()=>{let t=e;for(let e=0;e<i.length&&t;e++)t=t[i[e]];return t}}function Wi(t,i){if(ee(t)&&!t.__v_skip&&!(i=i||new Set).has(t))if(i.add(t),z(t))Wi(t.value,i);else if(J(t))for(let e=0;e<t.length;e++)Wi(t[e],i);else if(V(t)||j(t))t.forEach(e=>{Wi(e,i)});else if(Z(t))for(var e in t)Wi(t[e],i);return t}function Xi(){let e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return _n(()=>{e.isMounted=!0}),xn(()=>{e.isUnmounting=!0}),e}let t=[Function,Array],Yi={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:t,onEnter:t,onAfterEnter:t,onEnterCancelled:t,onBeforeLeave:t,onLeave:t,onAfterLeave:t,onLeaveCancelled:t,onBeforeAppear:t,onAppear:t,onAfterAppear:t,onAppearCancelled:t},setup(c,{slots:e}){let u=$r(),d=Xi(),h;return()=>{var o=e.default&&nn(e.default(),!0);if(o&&o.length){let t=o[0];if(1<o.length)for(let e of o)if(e.type!==se){t=e;break}var o=ie(c),a=o["mode"];if(d.isLeaving)return Qi(t);var s=en(t);if(!s)return Qi(t);let n=Ji(s,o,d,u),e=(tn(s,n),u.subTree),r=e&&en(e),i=!1;var l=s.type["getTransitionKey"];if(l){let e=l();void 0===h?h=e:e!==h&&(h=e,i=!0)}if(r&&r.type!==se&&(!Pr(s,r)||i)){let e=Ji(r,o,d,u);if(tn(r,e),"out-in"===a)return d.isLeaving=!0,e.afterLeave=()=>{d.isLeaving=!1,u.update()},Qi(t);"in-out"===a&&s.type!==se&&(e.delayLeave=(e,t,i)=>{Ki(d,r)[String(r.key)]=r,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete n.delayedLeave},n.delayedLeave=i})}return t}}}};function Ki(e,t){e=e.leavingVNodes;let i=e.get(t.type);return i||(i=Object.create(null),e.set(t.type,i)),i}function Ji(o,t,a,i){let{appear:s,mode:e,persisted:n=!1,onBeforeEnter:r,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:f,onBeforeAppear:m,onAppear:g,onAfterAppear:v,onAppearCancelled:_}=t,y=String(o.key),b=Ki(a,o),x=(e,t)=>{e&&ne(e,i,9,t)},w=(e,t)=>{var i=t[1];x(e,t),J(e)?e.every(e=>e.length<=1)&&i():e.length<=1&&i()},C={mode:e,persisted:n,beforeEnter(e){let t=r;if(!a.isMounted){if(!s)return;t=m||r}e._leaveCb&&e._leaveCb(!0);var i=b[y];i&&Pr(o,i)&&i.el._leaveCb&&i.el._leaveCb(),x(t,[e])},enter(t){let e=l,i=c,n=u;if(!a.isMounted){if(!s)return;e=g||l,i=v||c,n=_||u}let r=!1;var o=t._enterCb=e=>{r||(r=!0,x(e?n:i,[t]),C.delayedLeave&&C.delayedLeave(),t._enterCb=void 0)};e?w(e,[t,o]):o()},leave(t,i){let n=String(o.key);if(t._enterCb&&t._enterCb(!0),a.isUnmounting)return i();x(d,[t]);let r=!1;var e=t._leaveCb=e=>{r||(r=!0,i(),x(e?f:p,[t]),t._leaveCb=void 0,b[n]===o&&delete b[n])};b[n]=o,h?w(h,[t,e]):e()},clone:e=>Ji(e,t,a,i)};return C}function Qi(e){if(sn(e))return(e=Rr(e)).children=null,e}function en(e){return sn(e)?e.children?e.children[0]:void 0:e}function tn(e,t){6&e.shapeFlag&&e.component?tn(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function nn(t,i=!1,n){let r=[],o=0;for(let e=0;e<t.length;e++){var a=t[e],s=null==n?a.key:String(n)+String(null!=a.key?a.key:e);a.type===ae?(128&a.patchFlag&&o++,r=r.concat(nn(a.children,i,s))):!i&&a.type===se||r.push(null!=s?Rr(a,{key:s}):a)}if(1<o)for(let e=0;e<r.length;e++)r[e].patchFlag=-2;return r}function rn(e){return Q(e)?{setup:e,name:e.name}:e}let on=e=>!!e.type.__asyncLoader;function an(e,{vnode:{ref:t,props:i,children:n}}){e=le(e,i,n);return e.ref=t,e}let sn=e=>e.type.__isKeepAlive,ln={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(s,{slots:l}){let n=$r(),e=n.ctx,c=new Map,u=new Set,d=null,a=n.suspense,{p:h,m:p,um:t,o:{createElement:i}}=e["renderer"],r=i("div");function o(e){pn(e),t(e,n,a,!0)}function f(i){c.forEach((e,t)=>{e=io(e.type);!e||i&&i(e)||m(t)})}function m(e){var t=c.get(e);d&&t.type===d.type?d&&pn(d):o(t),c.delete(e),u.delete(e)}e.activate=(t,e,i,n,r)=>{let o=t.component;p(t,e,i,0,a),h(o.vnode,t,e,i,o,a,n,t.slotScopeIds,r),oe(()=>{o.isDeactivated=!1,o.a&&xe(o.a);var e=t.props&&t.props.onVnodeMounted;e&&ce(e,o.parent,t)},a)},e.deactivate=t=>{let i=t.component;p(t,r,null,1,a),oe(()=>{i.da&&xe(i.da);var e=t.props&&t.props.onVnodeUnmounted;e&&ce(e,i.parent,t),i.isDeactivated=!0},a)},Zi(()=>[s.include,s.exclude],([t,i])=>{t&&f(e=>cn(t,e)),i&&f(e=>!cn(i,e))},{flush:"post",deep:!0});let g=null;var v=()=>{null!=g&&c.set(g,fn(n.subTree))};return _n(v),bn(v),xn(()=>{c.forEach(e=>{var{subTree:t,suspense:i}=n,t=fn(t);if(e.type!==t.type)o(e);else{pn(t);let e=t.component.da;e&&oe(e,i)}})}),()=>{if(g=null,!l.default)return null;var e=l.default(),t=e[0];if(1<e.length)return d=null,e;if(!Ar(t)||!(4&t.shapeFlag||128&t.shapeFlag))return d=null,t;let i=fn(t);var e=i.type,n=io(on(i)?i.type.__asyncResolved||{}:e),{include:r,exclude:o,max:a}=s;return r&&(!n||!cn(r,n))||o&&n&&cn(o,n)?(d=i,t):(r=null==i.key?e:i.key,o=c.get(r),i.el&&(i=Rr(i),128&t.shapeFlag)&&(t.ssContent=i),g=r,o?(i.el=o.el,i.component=o.component,i.transition&&tn(i,i.transition),i.shapeFlag|=512,u.delete(r),u.add(r)):(u.add(r),a&&u.size>parseInt(a,10)&&m(u.values().next().value)),i.shapeFlag|=256,d=i,zi(t.type)?t:i)}}};function cn(e,t){return J(e)?e.some(e=>cn(e,t)):L(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function un(e,t){hn(e,"a",t)}function dn(e,t){hn(e,"da",t)}function hn(t,i,n=m){var r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}return t()});if(mn(i,r,n),n){let e=n.parent;for(;e&&e.parent;)sn(e.parent.vnode)&&function(e,t,i,n){let r=mn(t,e,n,!0);wn(()=>{F(n[t],r)},i)}(r,i,n,e),e=e.parent}}function pn(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function fn(e){return 128&e.shapeFlag?e.ssContent:e}function mn(t,i,n=m,e=!1){var r,o;if(n)return r=n[t]||(n[t]=[]),o=i.__weh||(i.__weh=(...e)=>{if(!n.isUnmounted)return je(),qr(n),e=ne(i,n,t,e),Hr(),Ve(),e}),e?r.unshift(o):r.push(o),o}let gn=i=>(e,t=m)=>(!Xr||"sp"===i)&&mn(i,e,t),vn=gn("bm"),_n=gn("m"),yn=gn("bu"),bn=gn("u"),xn=gn("bum"),wn=gn("um"),Cn=gn("sp"),Tn=gn("rtg"),Sn=gn("rtc");function kn(e,t=m){mn("ec",e,t)}function En(t,i,n,r){var o=t.dirs,a=i&&i.dirs;for(let e=0;e<o.length;e++){var s=o[e],l=(a&&(s.oldValue=a[e].value),s.dir[r]);l&&(je(),ne(l,n,8,[t.el,s,t,i]),Ve())}}let An="components",Pn=Symbol();function Mn(e,i,t,n=!1){var r=l||m;if(r){let t=r.type;if(e===An){let e=io(t);if(e&&(e===i||e===te(i)||e===_e(te(i))))return t}r=In(r[e]||t[e],i)||In(r.appContext[e],i);return!r&&n?t:r}}function In(e,t){return e&&(e[t]||e[te(t)]||e[_e(te(t))])}let Dn=e=>e?Zr(e)?eo(e)||e.proxy:Dn(e.parent):null,Ln=Y(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Dn(e.parent),$root:e=>Dn(e.root),$emit:e=>e.emit,$options:e=>Nn(e),$forceUpdate:e=>e.f||(e.f=()=>gi(e.update)),$nextTick:e=>e.n||(e.n=mi.bind(e.proxy)),$watch:e=>function(e,t,i){let n=this.proxy,r=L(e)?e.includes(".")?Gi(n,e):()=>n[e]:e.bind(n,n),o;return Q(t)?o=t:(o=t.handler,i=t),t=m,qr(this),i=Zi(r,o.bind(n),i),t?qr(t):Hr(),i}.bind(e)}),zn={get({_:t},i){let{ctx:n,setupState:r,data:o,props:a,accessCache:s,type:e,appContext:l}=t;if("$"!==i[0]){let e=s[i];if(void 0!==e)switch(e){case 1:return r[i];case 2:return o[i];case 4:return n[i];case 3:return a[i]}else{if(r!==W&&K(r,i))return s[i]=1,r[i];if(o!==W&&K(o,i))return s[i]=2,o[i];if((c=t.propsOptions[0])&&K(c,i))return s[i]=3,a[i];if(n!==W&&K(n,i))return s[i]=4,n[i];On&&(s[i]=0)}}var c=Ln[i];let u,d;return c?("$attrs"===i&&h(t,0,i),c(t)):(u=(u=e.__cssModules)&&u[i])||(n!==W&&K(n,i)?(s[i]=4,n[i]):(d=l.config.globalProperties,K(d,i)?d[i]:void 0))},set({_:e},t,i){var{data:n,setupState:r,ctx:o}=e;return r!==W&&K(r,t)?(r[t]=i,!0):n!==W&&K(n,t)?(n[t]=i,!0):!(K(e.props,t)||"$"===t[0]&&t.slice(1)in e||(o[t]=i,0))},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:r,propsOptions:o}},a){return!!i[a]||e!==W&&K(e,a)||t!==W&&K(t,a)||(i=o[0])&&K(i,a)||K(n,a)||K(Ln,a)||K(r.config.globalProperties,a)},defineProperty(e,t,i){return null!=i.get?e._.accessCache[t]=0:K(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},Rn=Y({},zn,{get(e,t){if(t!==Symbol.unscopables)return zn.get(e,t,e)},has:(e,t)=>"_"!==t[0]&&!o(t)}),On=!0;function Bn(t){let e=Nn(t),o=t.proxy,a=t.ctx,{data:i,computed:s,methods:n,watch:r,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:f,activated:m,deactivated:g,beforeUnmount:v,unmounted:_,render:y,renderTracked:b,renderTriggered:x,errorCaptured:w,serverPrefetch:C,expose:T,inheritAttrs:S,components:k,directives:E}=(On=!1,e.beforeCreate&&Fn(e.beforeCreate,t,"bc"),e);if(c){var[A,P,M=!1]=[c,a,t.appContext.config.unwrapInjectedRef],I;for(I in A=J(A)?$n(A):A){let e=A[I],t;z(t=ee(e)?"default"in e?Ui(e.from||I,e.default,!0):Ui(e.from||I):Ui(e))&&M?Object.defineProperty(P,I,{enumerable:!0,configurable:!0,get:()=>t.value,set:e=>t.value=e}):P[I]=t}}if(n)for(let t in n){let e=n[t];Q(e)&&(a[t]=e.bind(o))}if(i){let e=i.call(o,o);ee(e)&&(t.data=Mt(e))}if(On=!0,s)for(let r in s){let e=s[r],t=Q(e)?e.bind(o,o):Q(e.get)?e.get.bind(o,o):X,i=!Q(e)&&Q(e.set)?e.set.bind(o):X,n=ro({get:t,set:i});Object.defineProperty(a,r,{enumerable:!0,configurable:!0,get:()=>n.value,set:e=>n.value=e})}if(r)for(let e in r)!function t(i,n,r,o){let a=o.includes(".")?Gi(r,o):()=>r[o];if(L(i)){let e=n[i];Q(e)&&Hi(a,e)}else if(Q(i))Hi(a,i.bind(r));else if(ee(i))if(J(i))i.forEach(e=>t(e,n,r,o));else{let e=Q(i.handler)?i.handler.bind(r):n[i.handler];Q(e)&&Hi(a,e,i)}}(r[e],a,o,e);if(l){let t=Q(l)?l.call(o):l;Reflect.ownKeys(t).forEach(e=>{Vi(e,t[e])})}function D(t,e){J(e)?e.forEach(e=>t(e.bind(o))):e&&t(e.bind(o))}if(u&&Fn(u,t,"c"),D(vn,d),D(_n,h),D(yn,p),D(bn,f),D(un,m),D(dn,g),D(kn,w),D(Sn,b),D(Tn,x),D(xn,v),D(wn,_),D(Cn,C),J(T))if(T.length){let e=t.exposed||(t.exposed={});T.forEach(t=>{Object.defineProperty(e,t,{get:()=>o[t],set:e=>o[t]=e})})}else t.exposed||(t.exposed={});y&&t.render===X&&(t.render=y),null!=S&&(t.inheritAttrs=S),k&&(t.components=k),E&&(t.directives=E)}function Fn(e,t,i){ne(J(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,i)}function Nn(e){let t=e.type,{mixins:i,extends:n}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t),l;return s?l=s:r.length||i||n?(l={},r.length&&r.forEach(e=>jn(l,e,a,!0)),jn(l,t,a)):l=t,o.set(t,l),l}function jn(t,i,n,e=!1){var r,{mixins:o,extends:a}=i;for(r in a&&jn(t,a,n,!0),o&&o.forEach(e=>jn(t,e,n,!0)),i)if(!e||"expose"!==r){let e=Vn[r]||n&&n[r];t[r]=e?e(t[r],i[r]):i[r]}return t}let Vn={data:Un,props:qn,emits:qn,methods:qn,computed:qn,beforeCreate:r,created:r,beforeMount:r,mounted:r,beforeUpdate:r,updated:r,beforeDestroy:r,beforeUnmount:r,destroyed:r,unmounted:r,activated:r,deactivated:r,errorCaptured:r,serverPrefetch:r,components:qn,directives:qn,watch:function(e,t){if(!e)return t;if(!t)return e;var i,n=Y(Object.create(null),e);for(i in t)n[i]=r(e[i],t[i]);return n},provide:Un,inject:function(e,t){return qn($n(e),$n(t))}};function Un(e,t){return t?e?function(){return Y(Q(e)?e.call(this,this):e,Q(t)?t.call(this,this):t)}:t:e}function $n(t){if(J(t)){var i={};for(let e=0;e<t.length;e++)i[t[e]]=t[e];return i}return t}function r(e,t){return e?[...new Set([].concat(e,t))]:t}function qn(e,t){return e?Y(Y(Object.create(null),e),t):t}function Hn(r,t,o,i){var[a,s]=r.propsOptions;let l,n=!1;if(t)for(var c in t)if(!he(c)){var u=t[c];let e;a&&K(a,e=te(c))?s&&s.includes(e)?(l=l||{})[e]=u:o[e]=u:Si(r.emitsOptions,c)||c in i&&u===i[c]||(i[c]=u,n=!0)}if(s){let i=ie(o),n=l||W;for(let t=0;t<s.length;t++){let e=s[t];o[e]=Zn(a,i,e,n[e],r,!K(n,e))}}return n}function Zn(e,i,n,r,o,t){var a=e[n];if(null!=a){let e=K(a,"default");if(e&&void 0===r){let t=a.default;if(a.type!==Function&&Q(t)){let e=o["propsDefaults"];n in e?r=e[n]:(qr(o),r=e[n]=t.call(null,i),Hr())}else r=t}a[0]&&(t&&!e?r=!1:!a[1]||""!==r&&r!==ve(n)||(r=!0))}return r}function Gn(e){return"$"!==e[0]}function Wn(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function Xn(e,t){return Wn(e)===Wn(t)}function Yn(t,e){return J(e)?e.findIndex(e=>Xn(e,t)):Q(e)&&Xn(e,t)?0:-1}let Kn=e=>"_"===e[0]||"$stable"===e,Jn=e=>J(e)?e.map(Br):[Br(e)],Qn=(e,t,i)=>{return t._n?t:((i=Ai((...e)=>Jn(t(...e)),i))._c=!1,i)},er=(e,i,t)=>{var n,r=e._ctx;for(n in e)if(!Kn(n)){let t=e[n];if(Q(t))i[n]=Qn(0,t,r);else if(null!=t){let e=Jn(t);i[n]=()=>e}}},tr=(e,t)=>{let i=Jn(t);e.slots.default=()=>i};function ir(){return{app:null,config:{isNativeTag:D,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nr=0;function rr(s,l,c,u,d=!1){if(J(s))s.forEach((e,t)=>rr(e,l&&(J(l)?l[t]:l),c,u,d));else if(!on(u)||d){let i=4&u.shapeFlag?eo(u.component)||u.component.proxy:u.el,n=d?null:i,{i:e,r}=s,t=l&&l.r,o=e.refs===W?e.refs={}:e.refs,a=e.setupState;if(null!=t&&t!==r&&(L(t)?(o[t]=null,K(a,t)&&(a[t]=null)):z(t)&&(t.value=null)),Q(r))ti(r,e,12,[n,o]);else{let t=L(r),e=z(r);if(t||e){let e=()=>{var e;s.f?(e=t?o[r]:r.value,d?J(e)&&F(e,i):J(e)?e.includes(i)||e.push(i):t?(o[r]=[i],K(a,r)&&(a[r]=o[r])):(r.value=[i],s.k&&(o[s.k]=r.value))):t?(o[r]=n,K(a,r)&&(a[r]=n)):z(r)&&(r.value=n,s.k)&&(o[s.k]=n)};n?(e.id=-1,oe(e,c)):e()}}}}let or=!1,ar=e=>/svg/.test(e.namespaceURI)&&"foreignObject"!==e.tagName,sr=e=>8===e.nodeType;function lr(f){let{mt:m,p:u,o:{patchProp:h,createText:g,nextSibling:v,parentNode:_,remove:p,insert:y,createComment:s}}=f,b=(i,n,e,r,o,a=!1)=>{let s=sr(i)&&"["===i.data,t=()=>T(i,n,e,r,o,s),{type:l,ref:c,shapeFlag:u,patchFlag:d}=n,h=i.nodeType,p=(n.el=i,-2===d&&(a=!1,n.dynamicChildren=null),null);switch(l){case yr:p=3!==h?""===n.children?(y(n.el=g(""),_(i),i),i):t():(i.data!==n.children&&(or=!0,i.data=n.children),v(i));break;case se:p=8!==h||s?t():v(i);break;case br:if(1===h){p=i;let t=!n.children.length;for(let e=0;e<n.staticCount;e++)t&&(n.children+=p.outerHTML),e===n.staticCount-1&&(n.anchor=p),p=v(p);return p}p=t();break;case ae:p=s?C(i,n,e,r,o,a):t();break;default:if(1&u)p=1!==h||n.type.toLowerCase()!==i.tagName.toLowerCase()?t():x(i,n,e,r,o,a);else if(6&u){n.slotScopeIds=o;let t=_(i);if(m(n,t,null,e,r,ar(t),a),(p=(s?S:v)(i))&&sr(p)&&"teleport end"===p.data&&(p=v(p)),on(n)){let e;s?(e=le(ae)).anchor=p?p.previousSibling:t.lastChild:e=3===i.nodeType?Or(""):le("div"),e.el=i,n.component.subTree=e}}else 64&u?p=8!==h?t():n.type.hydrate(i,n,e,r,o,a,f,w):128&u&&(p=n.type.hydrate(i,n,e,r,ar(_(i)),o,a,f,b))}return null!=c&&rr(c,null,r,n),p},x=(i,n,r,o,a,s)=>{s=s||!!n.dynamicChildren;let{type:e,props:t,patchFlag:l,shapeFlag:c,dirs:u}=n,d="input"===e&&u||"option"===e;if(d||-1!==l){if(u&&En(n,null,r,"created"),t)if(d||!s||48&l)for(let e in t)(d&&e.endsWith("value")||O(e)&&!he(e))&&h(i,e,null,t[e],!1,void 0,r);else t.onClick&&h(i,"onClick",null,t.onClick,!1,void 0,r);let e;if((e=t&&t.onVnodeBeforeMount)&&ce(e,r,n),u&&En(n,null,r,"beforeMount"),((e=t&&t.onVnodeMounted)||u)&&Ni(()=>{e&&ce(e,r,n),u&&En(n,null,r,"mounted")},o),16&c&&(!t||!t.innerHTML&&!t.textContent)){let t=w(i.firstChild,n,i,r,o,a,s);for(;t;){or=!0;let e=t;t=t.nextSibling,p(e)}}else 8&c&&i.textContent!==n.children&&(or=!0,i.textContent=n.children)}return i.nextSibling},w=(i,e,n,r,o,a,s)=>{s=s||!!e.dynamicChildren;var l=e.children,c=l.length;for(let t=0;t<c;t++){let e=s?l[t]:l[t]=Br(l[t]);i?i=b(i,e,r,o,a,s):e.type===yr&&!e.children||(or=!0,u(null,e,n,null,r,o,ar(n),a))}return i},C=(e,t,i,n,r,o)=>{var a=t["slotScopeIds"],a=(a&&(r=r?r.concat(a):a),_(e)),e=w(v(e),t,a,i,n,r,o);return e&&sr(e)&&"]"===e.data?v(t.anchor=e):(or=!0,y(t.anchor=s("]"),a,e),e)},T=(i,e,t,n,r,o)=>{if(or=!0,e.el=null,o){let t=S(i);for(;;){let e=v(i);if(!e||e===t)break;p(e)}}var o=v(i),a=_(i);return p(i),u(null,e,a,o,t,n,ar(a),r),o},S=e=>{let t=0;for(;e;)if((e=v(e))&&sr(e)&&("["===e.data&&t++,"]"===e.data)){if(0===t)return v(e);t--}return e};return[(e,t)=>{t.hasChildNodes()?(or=!1,b(t.firstChild,e,null,null,null),xi(),or&&console.error("Hydration completed but contains mismatches.")):(u(null,e,t),xi())},b]}let oe=Ni;function cr(e){return dr(e)}function ur(e){return dr(e,lr)}function dr(e,t){(Te=Te||("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})).__VUE__=!0;let{insert:v,remove:l,patchProp:_,createElement:y,createText:f,createComment:r,setText:o,setElementText:b,parentNode:g,nextSibling:m,setScopeId:a=X,cloneNode:x,insertStaticContent:s}=e,T=(e,t,i,n=null,r=null,o=null,a=!1,s=null,l=!!t.dynamicChildren)=>{if(e!==t){e&&!Pr(e,t)&&(n=R(e),D(e,r,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);var{type:c,ref:u,shapeFlag:d}=t;switch(c){case yr:p(e,t,i,n);break;case se:w(e,t,i,n);break;case br:null==e&&F(t,i,n,a);break;case ae:U(e,t,i,n,r,o,a,s,l);break;default:1&d?N(e,t,i,n,r,o,a,s,l):6&d?$(e,t,i,n,r,o,a,s,l):(64&d||128&d)&&c.process(e,t,i,n,r,o,a,s,l,O)}null!=u&&r&&rr(u,e&&e.ref,o,t||e,!t)}},p=(t,i,e,n)=>{if(null==t)v(i.el=f(i.children),e,n);else{let e=i.el=t.el;i.children!==t.children&&o(e,i.children)}},w=(e,t,i,n)=>{null==e?v(t.el=r(t.children||""),i,n):t.el=e.el},F=(e,t,i,n)=>{[e.el,e.anchor]=s(e.children,t,i,n,e.el,e.anchor)},N=(e,t,i,n,r,o,a,s,l)=>{a=a||"svg"===t.type,null==e?j(t,i,n,r,o,a,s,l):V(e,t,r,o,a,s,l)},j=(t,e,i,n,r,o,a,s)=>{let l,c,{type:u,props:d,shapeFlag:h,transition:p,patchFlag:f,dirs:m}=t;if(t.el&&void 0!==x&&-1===f)l=t.el=x(t.el);else{if(l=t.el=y(t.type,o,d&&d.is,d),8&h?b(l,t.children):16&h&&S(t.children,l,null,n,r,o&&"foreignObject"!==u,a,s),m&&En(t,null,n,"created"),d){for(let e in d)"value"===e||he(e)||_(l,e,null,d[e],o,t.children,n,r,z);"value"in d&&_(l,"value",null,d.value),(c=d.onVnodeBeforeMount)&&ce(c,n,t)}C(l,t,t.scopeId,a,n)}m&&En(t,null,n,"beforeMount");let g=(!r||!r.pendingBranch)&&p&&!p.persisted;g&&p.beforeEnter(l),v(l,e,i),((c=d&&d.onVnodeMounted)||g||m)&&oe(()=>{c&&ce(c,n,t),g&&p.enter(l),m&&En(t,null,n,"mounted")},r)},C=(t,e,i,n,r)=>{if(i&&a(t,i),n)for(let e=0;e<n.length;e++)a(t,n[e]);if(r&&e===r.subTree){let e=r.vnode;C(t,e,e.scopeId,e.slotScopeIds,r.parent)}},S=(i,n,r,o,a,s,l,c,e=0)=>{for(let t=e;t<i.length;t++){let e=i[t]=(c?Fr:Br)(i[t]);T(null,e,n,r,o,a,s,l,c)}},V=(o,e,a,s,l,t,i)=>{var c=e.el=o.el;let{patchFlag:n,dynamicChildren:r,dirs:u}=e;n|=16&o.patchFlag;var d=o.props||W,h=e.props||W;let p;a&&hr(a,!1),(p=h.onVnodeBeforeUpdate)&&ce(p,a,e,o),u&&En(e,o,a,"beforeUpdate"),a&&hr(a,!0);var f=l&&"foreignObject"!==e.type;if(r?k(o.dynamicChildren,r,c,a,s,f,t):i||M(o,e,c,null,a,s,f,t,!1),0<n){if(16&n)E(c,e,d,h,a,s,l);else if(2&n&&d.class!==h.class&&_(c,"class",null,h.class,l),4&n&&_(c,"style",d.style,h.style,l),8&n){let r=e.dynamicProps;for(let n=0;n<r.length;n++){let e=r[n],t=d[e],i=h[e];i===t&&"value"!==e||_(c,e,t,i,l,o.children,a,s,z)}}1&n&&o.children!==e.children&&b(c,e.children)}else i||null!=r||E(c,e,d,h,a,s,l);((p=h.onVnodeUpdated)||u)&&oe(()=>{p&&ce(p,a,e,o),u&&En(e,o,a,"updated")},s)},k=(t,i,n,r,o,a,s)=>{for(let e=0;e<i.length;e++){var l=t[e],c=i[e],u=l.el&&(l.type===ae||!Pr(l,c)||70&l.shapeFlag)?g(l.el):n;T(l,c,u,null,r,o,a,s,!0)}},E=(e,t,i,n,r,o,a)=>{if(i!==n){for(var s in n){var l,c;he(s)||(l=n[s])!==(c=i[s])&&"value"!==s&&_(e,s,c,l,a,t.children,r,o,z)}if(i!==W)for(var u in i)he(u)||u in n||_(e,u,i[u],null,a,t.children,r,o,z);"value"in n&&_(e,"value",i.value,n.value)}},U=(e,t,i,n,r,o,a,s,l)=>{var c=t.el=e?e.el:f(""),u=t.anchor=e?e.anchor:f(""),{patchFlag:d,dynamicChildren:h,slotScopeIds:p}=t;p&&(s=s?s.concat(p):p),null==e?(v(c,i,n),v(u,i,n),S(t.children,i,u,r,o,a,s,l)):0<d&&64&d&&h&&e.dynamicChildren?(k(e.dynamicChildren,h,i,r,o,a,s),(null!=t.key||r&&t===r.subTree)&&pr(e,t,!0)):M(e,t,i,u,r,o,a,s,l)},$=(e,t,i,n,r,o,a,s,l)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?r.ctx.activate(t,i,n,a,l):c(t,i,n,r,o,a,l):q(e,t,l)},c=(e,t,i,n,r,o,a)=>{var s=e.component=(n=n,l=r,s=(u=e).type,d=(n||u).appContext||Vr,(d={uid:Ur++,vnode:u,type:s,parent:n,appContext:d,root:null,next:null,subTree:null,effect:null,update:null,scope:new Se(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(d.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:function i(t,n,r=!1){let e=n.propsCache,o=e.get(t);if(o)return o;let a=t.props,s={},l=[],c=!1;if(!Q(t)){let e=e=>{c=!0;var[e,t]=i(e,n,!0);Y(s,e),t&&l.push(...t)};!r&&n.mixins.length&&n.mixins.forEach(e),t.extends&&e(t.extends),t.mixins&&t.mixins.forEach(e)}if(!a&&!c)return e.set(t,ue),ue;if(J(a))for(let t=0;t<a.length;t++){let e=te(a[t]);Gn(e)&&(s[e]=W)}else if(a)for(var u in a){let n=te(u);if(Gn(n)){let e=a[u],i=s[n]=J(e)||Q(e)?{type:e}:e;if(i){let e=Yn(Boolean,i.type),t=Yn(String,i.type);i[0]=-1<e,i[1]=t<0||e<t,(-1<e||K(i,"default"))&&l.push(n)}}}r=[s,l];return e.set(t,r),r}(s,d),emitsOptions:function t(i,n,r=!1){let e=n.emitsCache,o=e.get(i);if(void 0!==o)return o;var a=i.emits;let s={},l=!1;if(!Q(i)){let e=e=>{(e=t(e,n,!0))&&(l=!0,Y(s,e))};!r&&n.mixins.length&&n.mixins.forEach(e),i.extends&&e(i.extends),i.mixins&&i.mixins.forEach(e)}return a||l?(J(a)?a.forEach(e=>s[e]=null):Y(s,a),e.set(i,s),s):(e.set(i,null),null)}(s,d),emit:null,emitted:null,propsDefaults:W,inheritAttrs:s.inheritAttrs,ctx:W,data:W,props:W,attrs:W,slots:W,refs:W,setupState:W,setupContext:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null}).ctx={_:d},d.root=n?n.root:d,d.emit=function(o,a,...s){if(!o.isUnmounted){var l=o.vnode.props||W;let n=s,e=a.startsWith("update:"),r=e&&a.slice(7);if(r&&r in l){let e=`${"modelValue"===r?"model":r}Modifiers`,{number:t,trim:i}=l[e]||W;i&&(n=s.map(e=>e.trim())),t&&(n=s.map(Ce))}let t,i=l[t=ye(a)]||l[t=ye(te(a))];(i=!i&&e?l[t=ye(ve(a))]:i)&&ne(i,o,6,n);s=l[t+"Once"];if(s){if(o.emitted){if(o.emitted[t])return}else o.emitted={};o.emitted[t]=!0,ne(s,o,6,n)}}}.bind(null,d),u.ce&&u.ce(d),d),l=(sn(e)&&(s.ctx.renderer=O),s);Xr=!1;var c,{props:n,children:u}=l.vnode,d=Zr(l),h=l,p=d,f={},m={};for(c in we(m,Mr,1),h.propsDefaults=Object.create(null),Hn(h,n,f,m),h.propsOptions[0])c in f||(f[c]=void 0);if(h.props=p?It(f):h.type.props?f:m,h.attrs=m,n=u,32&(p=l).vnode.shapeFlag?(h=n._)?(p.slots=ie(n),we(n,"_",h)):er(n,p.slots={}):(p.slots={},n&&tr(p,n)),we(p.slots,Mr,1),d){let e=(m=l).type;if(m.accessCache=Object.create(null),m.proxy=Ft(new Proxy(m.ctx,zn)),u=e.setup){let e=m.setupContext=1<u.length?Qr(m):null;qr(m),je();u=ti(u,m,0,[m.props,e]);Ve(),Hr(),de(u)?(u.then(Hr,Hr),m.asyncDep=u):Yr(m,u,!1)}else Jr(m,!1)}if(Xr=!1,s.asyncDep){if(r&&r.registerDep(s,A),!e.el){let e=s.subTree=le(se);w(null,e,t,i)}}else A(s,e,t,i,r,o,a)},q=(e,t,i)=>{var n=t.component=e.component;!function(e,t,i){var{props:n,children:e,component:r}=e,{props:o,children:a,patchFlag:s}=t,l=r.emitsOptions;if(t.dirs||t.transition)return 1;if(!(i&&0<=s))return!(!e&&!a||a&&a.$stable)||n!==o&&(n?!o||Di(n,o,l):o);if(1024&s)return 1;if(16&s)return n?Di(n,o,l):o;if(8&s){let i=t.dynamicProps;for(let t=0;t<i.length;t++){let e=i[t];if(o[e]!==n[e]&&!Si(l,e))return 1}}}(e,t,i)?(t.el=e.el,n.vnode=t):n.asyncDep&&!n.asyncResolved?P(n,t,i):(n.next=t,e=n.update,(e=re.indexOf(e))>oi&&re.splice(e,1),n.update())},A=(c,u,d,h,p,f,m)=>{let e=c.effect=new Oe(()=>{if(c.isMounted){let e,{next:t,bu:i,u:n,parent:r,vnode:o}=c,a=t;hr(c,!1),t?(t.el=o.el,P(c,t,m)):t=o,i&&xe(i),(e=t.props&&t.props.onVnodeBeforeUpdate)&&ce(e,r,t,o),hr(c,!0);var s=Pi(c),l=c.subTree;c.subTree=s,T(l,s,g(l.el),R(l),c,p,f),t.el=s.el,null===a&&Li(c,s.el),n&&oe(n,p),(e=t.props&&t.props.onVnodeUpdated)&&oe(()=>ce(e,r,t,o),p)}else{let t,{el:i,props:e}=u,{bm:n,m:r,parent:o}=c,a=on(u);if(hr(c,!1),n&&xe(n),!a&&(t=e&&e.onVnodeBeforeMount)&&ce(t,o,u),hr(c,!0),i&&B){let e=()=>{c.subTree=Pi(c),B(i,c.subTree,c,p,null)};a?u.type.__asyncLoader().then(()=>!c.isUnmounted&&e()):e()}else{let e=c.subTree=Pi(c);T(null,e,d,h,c,p,f),u.el=e.el}if(r&&oe(r,p),!a&&(t=e&&e.onVnodeMounted)){let e=u;oe(()=>ce(t,o,e),p)}(256&u.shapeFlag||o&&on(o.vnode)&&256&o.vnode.shapeFlag)&&c.a&&oe(c.a,p),c.isMounted=!0,u=d=h=null}},()=>gi(t),c.scope),t=c.update=()=>e.run();t.id=c.uid,hr(c,!0),t()},P=(s,l,c)=>{var u=(l.component=s).vnode.props;s.vnode=l,s.next=null;{var d=s,h=l.props,p=u;let{props:i,attrs:n,vnode:{patchFlag:e}}=d,r=ie(i),[o]=d.propsOptions,a=!1;if(!(c||0<e)||16&e){let t;Hn(d,h,i,n)&&(a=!0);for(let e in r)h&&(K(h,e)||(t=ve(e))!==e&&K(h,t))||(o?!p||void 0===p[e]&&void 0===p[t]||(i[e]=Zn(o,r,e,void 0,d,!0)):delete i[e]);if(n!==r)for(let e in n)h&&K(h,e)||(delete n[e],a=!0)}else if(8&e){let t=d.vnode.dynamicProps;for(let e=0;e<t.length;e++){var f=t[e];if(!Si(d.emitsOptions,f)){var m=h[f];if(o)if(K(n,f))m!==n[f]&&(n[f]=m,a=!0);else{let e=te(f);i[e]=Zn(o,r,e,m,d,!1)}else m!==n[f]&&(n[f]=m,a=!0)}}}a&&$e(d,"set","$attrs")}{var e=s,{vnode:c,slots:n}=(u=l.children,l=c,e);let t=!0,i=W;if(32&c.shapeFlag){let e=u._;e?l&&1===e?t=!1:(Y(n,u),l||1!==e||delete n._):(t=!u.$stable,er(u,n)),i=u}else u&&(tr(e,u),i={default:1});if(t)for(var r in n)Kn(r)||r in i||delete n[r]}je(),bi(void 0,s.update),Ve()},M=(e,t,i,n,r,o,a,s,l=!1)=>{var c=e&&e.children,e=e?e.shapeFlag:0,u=t.children,{patchFlag:t,shapeFlag:d}=t;if(0<t){if(128&t)return void h(c,u,i,n,r,o,a,s,l);if(256&t)return void H(c,u,i,n,r,o,a,s,l)}8&d?(16&e&&z(c,r,o),u!==c&&b(i,u)):16&e?16&d?h(c,u,i,n,r,o,a,s,l):z(c,r,o,!0):(8&e&&b(i,""),16&d&&S(u,i,n,r,o,a,s,l))},H=(t,i,n,e,r,o,a,s,l)=>{var c=(t=t||ue).length,u=(i=i||ue).length,d=Math.min(c,u);let h;for(h=0;h<d;h++){let e=i[h]=(l?Fr:Br)(i[h]);T(t[h],e,n,null,r,o,a,s,l)}u<c?z(t,r,o,!0,!1,d):S(i,n,e,r,o,a,s,l,d)},h=(a,s,l,c,u,d,h,p,f)=>{let m=0,g=s.length,v=a.length-1,_=g-1;for(;m<=v&&m<=_;){let e=a[m],t=s[m]=(f?Fr:Br)(s[m]);if(!Pr(e,t))break;T(e,t,l,null,u,d,h,p,f),m++}for(;m<=v&&m<=_;){let e=a[v],t=s[_]=(f?Fr:Br)(s[_]);if(!Pr(e,t))break;T(e,t,l,null,u,d,h,p,f),v--,_--}if(m>v){if(m<=_){let e=_+1,t=e<g?s[e].el:c;for(;m<=_;)T(null,s[m]=(f?Fr:Br)(s[m]),l,t,u,d,h,p,f),m++}}else if(m>_)for(;m<=v;)D(a[m],u,d,!0),m++;else{var e=m,y=m,b=new Map;for(m=y;m<=_;m++){let e=s[m]=(f?Fr:Br)(s[m]);null!=e.key&&b.set(e.key,m)}let n,i=0;var x=_-y+1;let r=!1,o=0;var w=new Array(x);for(m=0;m<x;m++)w[m]=0;for(m=e;m<=v;m++){let t=a[m];if(i>=x)D(t,u,d,!0);else{let e;if(null!=t.key)e=b.get(t.key);else for(n=y;n<=_;n++)if(0===w[n-y]&&Pr(t,s[n])){e=n;break}void 0===e?D(t,u,d,!0):(w[e-y]=m+1,e>=o?o=e:r=!0,T(t,s[e],l,null,u,d,h,p,f),i++)}}var C=r?function(t){var i=t.slice(),n=[0];let r,o,a,s,l,e=t.length;for(r=0;r<e;r++){let e=t[r];if(0!==e)if(t[o=n[n.length-1]]<e)i[r]=o,n.push(r);else{for(a=0,s=n.length-1;a<s;)t[n[l=a+s>>1]]<e?a=1+l:s=l;e<t[n[a]]&&(0<a&&(i[r]=n[a-1]),n[a]=r)}}for(a=n.length,s=n[a-1];0<a--;)s=i[n[a]=s];return n}(w):ue;for(n=C.length-1,m=x-1;0<=m;m--){let e=y+m,t=s[e],i=e+1<g?s[e+1].el:c;0===w[m]?T(null,t,l,i,u,d,h,p,f):r&&(n<0||m!==C[n]?I(t,l,i,2):n--)}}},I=(e,o,a,t,i=null)=>{let{el:s,type:n,transition:l,children:r,shapeFlag:c}=e;if(6&c)I(e.component.subTree,o,a,t);else if(128&c)e.suspense.move(o,a,t);else if(64&c)n.move(e,o,a,O);else if(n===ae){v(s,o,a);for(let e=0;e<r.length;e++)I(r[e],o,a,t);v(e.anchor,o,a)}else if(n===br){for(var u,[{el:d,anchor:h},p,f]=[e,o,a];d&&d!==h;)u=m(d),v(d,p,f),d=u;v(h,p,f)}else if(2!==t&&1&c&&l)if(0===t)l.beforeEnter(s),v(s,o,a),oe(()=>l.enter(s),i);else{let{leave:e,delayLeave:t,afterLeave:i}=l,n=()=>v(s,o,a),r=()=>{e(s,()=>{n(),i&&i()})};t?t(s,n,r):r()}else v(s,o,a)},D=(n,r,o,a=!1,s=!1)=>{var{type:l,props:c,ref:e,children:u,dynamicChildren:d,shapeFlag:h,patchFlag:p,dirs:f}=n;if(null!=e&&rr(e,null,o,n,!0),256&h)r.ctx.deactivate(n);else{let e=1&h&&f,t=!on(n),i;if(t&&(i=c&&c.onVnodeBeforeUnmount)&&ce(i,r,n),6&h)G(n.component,o,a);else{if(128&h)return void n.suspense.unmount(o,a);e&&En(n,null,r,"beforeUnmount"),64&h?n.type.remove(n,r,o,s,O,a):d&&(l!==ae||0<p&&64&p)?z(d,r,o,!1,!0):(l===ae&&384&p||!s&&16&h)&&z(u,r,o),a&&L(n)}(t&&(i=c&&c.onVnodeUnmounted)||e)&&oe(()=>{i&&ce(i,r,n),e&&En(n,null,r,"unmounted")},o)}},L=r=>{let{type:e,el:o,anchor:t,transition:a}=r;if(e===ae)Z(o,t);else if(e===br){for(var i,{el:n,anchor:s}=[r][0];n&&n!==s;)i=m(n),l(n),n=i;l(s)}else{let n=()=>{l(o),a&&!a.persisted&&a.afterLeave&&a.afterLeave()};if(1&r.shapeFlag&&a&&!a.persisted){let{leave:e,delayLeave:t}=a,i=()=>e(o,n);t?t(r.el,n,i):i()}else n()}},Z=(e,t)=>{for(var i;e!==t;)i=m(e),l(e),e=i;l(t)},G=(e,t,i)=>{var{bum:n,scope:r,update:o,subTree:a,um:s}=e;n&&xe(n),r.stop(),o&&(o.active=!1,D(a,e,t,i)),s&&oe(s,t),oe(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps)&&t.resolve()},z=(t,i,n,r=!1,o=!1,a=0)=>{for(let e=a;e<t.length;e++)D(t[e],i,n,r,o)},R=e=>6&e.shapeFlag?R(e.component.subTree):128&e.shapeFlag?e.suspense.next():m(e.anchor||e.el),i=(e,t,i)=>{null==e?t._vnode&&D(t._vnode,null,null,!0):T(t._vnode||null,e,t,null,null,null,i),xi(),t._vnode=e},O={p:T,um:D,m:I,r:L,mt:c,mc:S,pc:M,pbc:k,n:R,o:e},n,B;return t&&([n,B]=t(O)),{render:i,hydrate:n,createApp:(u=i,d=n,function(r,o=null){Q(r)||(r=Object.assign({},r)),null==o||ee(o)||(o=null);let a=ir(),i=new Set,s=!1,l=a.app={_uid:nr++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:co,get config(){return a.config},set config(e){},use:(e,...t)=>(i.has(e)||(e&&Q(e.install)?(i.add(e),e.install(l,...t)):Q(e)&&(i.add(e),e(l,...t))),l),mixin:e=>(a.mixins.includes(e)||a.mixins.push(e),l),component:(e,t)=>t?(a.components[e]=t,l):a.components[e],directive:(e,t)=>t?(a.directives[e]=t,l):a.directives[e],mount(e,t,i){var n;if(!s)return(n=le(r,o)).appContext=a,t&&d?d(n,e):u(n,e,i),s=!0,(l._container=e).__vue_app__=l,eo(n.component)||n.component.proxy},unmount(){s&&(u(null,l._container),delete l._container.__vue_app__)},provide:(e,t)=>(a.provides[e]=t,l)};return l})};var u,d}function hr({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function pr(e,t,n=!1){var r=e.children,o=t.children;if(J(r)&&J(o))for(let i=0;i<r.length;i++){let e=r[i],t=o[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&((t=o[i]=Fr(o[i])).el=e.el),n||pr(e,t))}}let fr=e=>e&&(e.disabled||""===e.disabled),mr=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,gr=(e,t)=>{e=e&&e.to;return L(e)?t?t(e):null:e};function vr(e,t,i,{o:{insert:n},m:r},o=2){0===o&&n(e.targetAnchor,t,i);var{el:e,anchor:a,shapeFlag:s,children:l,props:c}=e,o=2===o;if(o&&n(e,t,i),(!o||fr(c))&&16&s)for(let e=0;e<l.length;e++)r(l[e],t,i,2);o&&n(a,t,i)}let _r={__isTeleport:!0,process(a,s,l,o,c,u,d,h,p,f){let{mc:m,pc:g,pbc:v,o:{insert:_,querySelector:y,createText:b}}=f,x=fr(s.props),{shapeFlag:w,children:C,dynamicChildren:T}=s;if(null==a){let e=s.el=b(""),t=s.anchor=b(""),i=(_(e,l,o),_(t,l,o),s.target=gr(s.props,y)),n=s.targetAnchor=b(""),r=(i&&(_(n,i),d=d||mr(i)),(e,t)=>{16&w&&m(C,e,t,c,u,d,h,p)});x?r(l,t):i&&r(i,n)}else{s.el=a.el;let e=s.anchor=a.anchor,t=s.target=a.target,i=s.targetAnchor=a.targetAnchor,n=fr(a.props),r=n?l:t,o=n?e:i;if(d=d||mr(t),T?(v(a.dynamicChildren,T,r,c,u,d,h),pr(a,s,!0)):p||g(a,s,r,o,c,u,d,h,!1),x)n||vr(s,l,e,f,1);else if((s.props&&s.props.to)!==(a.props&&a.props.to)){let e=s.target=gr(s.props,y);e&&vr(s,e,null,f,0)}else n&&vr(s,t,i,f,1)}},remove(e,i,n,t,{um:r,o:{remove:o}},a){var{shapeFlag:e,children:s,anchor:l,targetAnchor:c,target:u,props:d}=e;if(u&&o(c),(a||!fr(d))&&(o(l),16&e))for(let t=0;t<s.length;t++){let e=s[t];r(e,i,n,!0,!!e.dynamicChildren)}},move:vr,hydrate:function(i,n,r,o,a,s,{o:{nextSibling:l,parentNode:e,querySelector:t}},c){var u=n.target=gr(n.props,t);if(u){let t=u._lpa||u.firstChild;if(16&n.shapeFlag)if(fr(n.props))n.anchor=c(l(i),n,e(i),r,o,a,s),n.targetAnchor=t;else{n.anchor=l(i);let e=t;for(;e;)if((e=l(e))&&8===e.nodeType&&"teleport anchor"===e.data){n.targetAnchor=e,u._lpa=n.targetAnchor&&l(n.targetAnchor);break}c(t,n,u,r,o,a,s)}}return n.anchor&&l(n.anchor)}},ae=Symbol(void 0),yr=Symbol(void 0),se=Symbol(void 0),br=Symbol(void 0),xr=[],c=null;function wr(e=!1){xr.push(c=e?null:[])}function Cr(){xr.pop(),c=xr[xr.length-1]||null}let Tr=1;function Sr(e){Tr+=e}function kr(e){return e.dynamicChildren=0<Tr?c||ue:null,Cr(),0<Tr&&c&&c.push(e),e}function Er(e,t,i,n,r){return kr(le(e,t,i,n,r,!0))}function Ar(e){return!!e&&!0===e.__v_isVNode}function Pr(e,t){return e.type===t.type&&e.key===t.key}let Mr="__vInternal",Ir=({key:e})=>null!=e?e:null,Dr=({ref:e,ref_key:t,ref_for:i})=>null!=e?L(e)||z(e)||Q(e)?{i:l,r:e,k:t,f:!!i}:e:null;function Lr(e,t=null,i=null,n=0,r=null,o=e===ae?0:1,a=!1,s=!1){t={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ir(t),ref:t&&Dr(t),scopeId:ki,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null};return s?(Nr(t,i),128&o&&e.normalize(t)):i&&(t.shapeFlag|=L(i)?8:16),0<Tr&&!a&&c&&(0<t.patchFlag||6&o)&&32!==t.patchFlag&&c.push(t),t}let le=function(t,i=null,n=null,e=0,r=null,o=!1){if(Ar(t=t&&t!==Pn?t:se)){let e=Rr(t,i,!0);return n&&Nr(e,n),0<Tr&&!o&&c&&(6&e.shapeFlag?c[c.indexOf(t)]=e:c.push(e)),e.patchFlag|=-2,e}var a=t;if(Q(a)&&"__vccOpts"in a&&(t=t.__vccOpts),i){let{class:e,style:t}=i=zr(i);e&&!L(e)&&(i.class=g(e)),ee(t)&&(Bt(t)&&!J(t)&&(t=Y({},t)),i.style=s(t))}a=L(t)?1:zi(t)?128:t.__isTeleport?64:ee(t)?4:Q(t)?2:0;return Lr(t,i,n,e,r,a,o,!0)};function zr(e){return e?Bt(e)||Mr in e?Y({},e):e:null}function Rr(e,t,i=!1){var{props:n,ref:r,patchFlag:o,children:a}=e,n=t?jr(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:n,key:n&&Ir(n),ref:t&&t.ref?i&&r?J(r)?r.concat(Dr(t)):[r,Dr(t)]:Dr(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ae?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Rr(e.ssContent),ssFallback:e.ssFallback&&Rr(e.ssFallback),el:e.el,anchor:e.anchor}}function Or(e=" ",t=0){return le(yr,null,e,t)}function Br(e){return null==e||"boolean"==typeof e?le(se):J(e)?le(ae,null,e.slice()):"object"==typeof e?Fr(e):le(yr,null,String(e))}function Fr(e){return null===e.el||e.memo?e:Rr(e)}function Nr(t,i){let n=0,e=t["shapeFlag"];if(null==i)i=null;else if(J(i))n=16;else if("object"==typeof i){if(65&e){let e=i.default;return e&&(e._c&&(e._d=!1),Nr(t,e()),e._c)&&(e._d=!0)}{n=32;let e=i._;e||Mr in i?3===e&&l&&(1===l.slots._?i._=1:(i._=2,t.patchFlag|=1024)):i._ctx=l}}else Q(i)?(i={default:i,_ctx:l},n=32):(i=String(i),64&e?(n=16,i=[Or(i)]):n=8);t.children=i,t.shapeFlag|=n}function jr(...t){var i={};for(let e=0;e<t.length;e++){var n,r,o=t[e];for(let e in o)"class"===e?i.class!==o.class&&(i.class=g([i.class,o.class])):"style"===e?i.style=s([i.style,o.style]):O(e)?(n=i[e],!(r=o[e])||n===r||J(n)&&n.includes(r)||(i[e]=n?[].concat(n,r):r)):""!==e&&(i[e]=o[e])}return i}function ce(e,t,i,n=null){ne(e,t,7,[i,n])}let Vr=ir(),Ur=0,m=null,$r=()=>m||l,qr=e=>{(m=e).scope.on()},Hr=()=>{m&&m.scope.off(),m=null};function Zr(e){return 4&e.vnode.shapeFlag}let Gr,Wr,Xr=!1;function Yr(e,t,i){Q(t)?e.render=t:ee(t)&&(e.setupState=Wt(t)),Jr(e,i)}function Kr(e){Gr=e,Wr=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,Rn))}}function Jr(a,e){var s=a.type;if(!a.render){if(!e&&Gr&&!s.render){let o=s.template;if(o){let{isCustomElement:e,compilerOptions:t}=a.appContext.config,{delimiters:i,compilerOptions:n}=s,r=Y(Y({isCustomElement:e,delimiters:i},t),n);s.render=Gr(o,r)}}a.render=s.render||X,Wr&&Wr(a)}qr(a),je(),Bn(a),Ve(),Hr()}function Qr(t){let e;return{get attrs(){return e=e||(i=t,new Proxy(i.attrs,{get:(e,t)=>(h(i,0,"$attrs"),e[t])}));var i},slots:t.slots,emit:t.emit,expose:e=>{t.exposed=e||{}}}}function eo(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(Wt(Ft(i.exposed)),{get:(e,t)=>t in e?e[t]:t in Ln?Ln[t](i):void 0}))}let to=/(?:^|[-_])(\w)/g;function io(e){return Q(e)&&e.displayName||e.name}function no(t,i,e=!1){let n=io(i);if(!n&&i.__file){let e=i.__file.match(/([^/\\]+)\.\w+$/);e&&(n=e[1])}if(!n&&t&&t.parent){let e=e=>{for(var t in e)if(e[t]===i)return t};n=e(t.components||t.parent.type.components)||e(t.appContext.components)}return n?n.replace(to,e=>e.toUpperCase()).replace(/[-_]/g,""):e?"App":"Anonymous"}let ro=(i,e)=>{{var[i,n=!1]=[i,Xr];let e,t;var r=Q(i);return t=r?(e=i,X):(e=i.get,i.set),new Jt(e,t,r||!t,n)}};function oo(){var e=$r();return e.setupContext||(e.setupContext=Qr(e))}function ao(e,t,i){var n=arguments.length;return 2===n?ee(t)&&!J(t)?Ar(t)?le(e,null,[t]):le(e,t):le(e,null,t):(3<n?i=Array.prototype.slice.call(arguments,2):3===n&&Ar(i)&&(i=[i]),le(e,t,i))}var so=Symbol("");function lo(e,t){var i=e.memo;if(i.length!=t.length)return!1;for(let e=0;e<i.length;e++)if(be(i[e],t[e]))return!1;return 0<Tr&&c&&c.push(e),!0}let co="3.2.36",uo="undefined"!=typeof document?document:null,ho=uo&&uo.createElement("template"),po={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{var t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{t=t?uo.createElementNS("http://www.w3.org/2000/svg",e):uo.createElement(e,i?{is:i}:void 0);return"select"===e&&n&&null!=n.multiple&&t.setAttribute("multiple",n.multiple),t},createText:e=>uo.createTextNode(e),createComment:e=>uo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>uo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){var t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,i,n,r,t,o){var a=n?n.previousSibling:i.lastChild;if(t&&(t===o||t.nextSibling))for(;i.insertBefore(t.cloneNode(!0),n),t!==o&&(t=t.nextSibling););else{ho.innerHTML=r?`<svg>${e}</svg>`:e;let t=ho.content;if(r){let e=t.firstChild;for(;e.firstChild;)t.appendChild(e.firstChild);t.removeChild(e)}i.insertBefore(t,n)}return[a?a.nextSibling:i.firstChild,n?n.previousSibling:i.lastChild]}},fo=/\s*!important$/;function mo(t,i,e){var n;J(e)?e.forEach(e=>mo(t,i,e)):(null==e&&(e=""),i.startsWith("--")?t.setProperty(i,e):(n=function(i,n){let e=vo[n];if(e)return e;var r=te(n);if("filter"!==r&&r in i)return vo[n]=r;r=_e(r);for(let t=0;t<go.length;t++){let e=go[t]+r;if(e in i)return vo[n]=e}return n}(t,i),fo.test(e)?t.setProperty(ve(n),e.replace(fo,""),"important"):t[n]=e))}let go=["Webkit","Moz","ms"],vo={},_o="http://www.w3.org/1999/xlink",[yo,bo]=(()=>{let e=Date.now,t=!1;var i;return"undefined"!=typeof window&&(Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance)),i=navigator.userAgent.match(/firefox\/(\d+)/i),t=!!(i&&Number(i[1])<=53)),[e,t]})(),xo=0,wo=Promise.resolve(),Co=()=>{xo=0};function To(e,t,i,n){e.addEventListener(t,i,n)}let So=/(?:Once|Passive|Capture)$/,ko=/^on[a-z]/;function Eo(e,t){let i=rn(e);class n extends Po{constructor(e){super(i,e,t)}}return n.def=i,n}var Ao="undefined"!=typeof HTMLElement?HTMLElement:class{};class Po extends Ao{constructor(e,t={},i){super(),this._def=e,this._props=t,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&i?i(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,mi(()=>{this._connected||(Ca(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(!this._resolved){this._resolved=!0;for(let e=0;e<this.attributes.length;e++)this._setAttr(this.attributes[e].name);new MutationObserver(e=>{for(var t of e)this._setAttr(t.attributeName)}).observe(this,{attributes:!0});var e=e=>{var t,{props:i,styles:e}=e,n=!J(i),r=i?n?Object.keys(i):i:[];let o;if(n)for(var a in this._props){let e=i[a];(e===Number||e&&e.type===Number)&&(this._props[a]=Ce(this._props[a]),(o=o||Object.create(null))[a]=!0)}this._numberProps=o;for(t of Object.keys(this))"_"!==t[0]&&this._setProp(t,this[t],!0,!1);for(let t of r.map(te))Object.defineProperty(this,t,{get(){return this._getProp(t)},set(e){this._setProp(t,e)}});this._applyStyles(e),this._update()},t=this._def.__asyncLoader;t?t().then(e):e(this._def)}}_setAttr(e){let t=this.getAttribute(e);this._numberProps&&this._numberProps[e]&&(t=Ce(t)),this._setProp(te(e),t,!1)}_getProp(e){return this._props[e]}_setProp(e,t,i=!0,n=!0){t!==this._props[e]&&(this._props[e]=t,n&&this._instance&&this._update(),i)&&(!0===t?this.setAttribute(ve(e),""):"string"==typeof t||"number"==typeof t?this.setAttribute(ve(e),t+""):t||this.removeAttribute(ve(e)))}_update(){Ca(this._createVNode(),this.shadowRoot)}_createVNode(){var e=le(this._def,Y({},this._props));return this._instance||(e.ce=e=>{(this._instance=e).isCE=!0,e.emit=(e,...t)=>{this.dispatchEvent(new CustomEvent(e,{detail:t}))};let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof Po){e.parent=t._instance;break}}),e}_applyStyles(e){e&&e.forEach(e=>{var t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)})}}function Mo(e,t){if(1===e.nodeType){var i=e.style;for(let e in t)i.setProperty("--"+e,t[e])}}let Io="transition",Do="animation",Lo=(e,{slots:t})=>ao(Yi,Fo(e),t),zo=(Lo.displayName="Transition",{name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String}),Ro=Lo.props=Y({},Yi.props,zo),Oo=(e,t=[])=>{J(e)?e.forEach(e=>e(...t)):e&&e(...t)},Bo=e=>!!e&&(J(e)?e.some(e=>1<e.length):1<e.length);function Fo(t){var e,i={};for(let e in t)e in zo||(i[e]=t[e]);if(!1===t.css)return i;let{name:n="v",type:o,duration:r,enterFromClass:a=n+"-enter-from",enterActiveClass:s=n+"-enter-active",enterToClass:l=n+"-enter-to",appearFromClass:c=a,appearActiveClass:u=s,appearToClass:d=l,leaveFromClass:h=n+"-leave-from",leaveActiveClass:p=n+"-leave-active",leaveToClass:f=n+"-leave-to"}=t,m=null==(e=r)?null:ee(e)?[No(e.enter),No(e.leave)]:[e=No(e),e],g=m&&m[0],v=m&&m[1],{onBeforeEnter:_,onEnter:y,onEnterCancelled:b,onLeave:x,onLeaveCancelled:w,onBeforeAppear:C=_,onAppear:T=y,onAppearCancelled:S=b}=i,k=(e,t,i)=>{Vo(e,t?d:l),Vo(e,t?u:s),i&&i()},E=(e,t)=>{e._isLeaving=!1,Vo(e,h),Vo(e,f),Vo(e,p),t&&t()},A=r=>(e,t)=>{let i=r?T:y,n=()=>k(e,r,t);Oo(i,[e,n]),Uo(()=>{Vo(e,r?c:a),jo(e,r?d:l),Bo(i)||qo(e,o,g,n)})};return Y(i,{onBeforeEnter(e){Oo(_,[e]),jo(e,a),jo(e,s)},onBeforeAppear(e){Oo(C,[e]),jo(e,c),jo(e,u)},onEnter:A(!1),onAppear:A(!0),onLeave(e,t){e._isLeaving=!0;let i=()=>E(e,t);jo(e,h),Wo(),jo(e,p),Uo(()=>{e._isLeaving&&(Vo(e,h),jo(e,f),Bo(x)||qo(e,o,v,i))}),Oo(x,[e,i])},onEnterCancelled(e){k(e,!1),Oo(b,[e])},onAppearCancelled(e){k(e,!0),Oo(S,[e])},onLeaveCancelled(e){E(e),Oo(w,[e])}})}function No(e){return Ce(e)}function jo(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(e)}function Vo(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.remove(e));var i=t["_vtc"];i&&(i.delete(e),i.size||(t._vtc=void 0))}function Uo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let $o=0;function qo(t,e,i,n){let r=t._endId=++$o,o=()=>{r===t._endId&&n()};if(i)return setTimeout(o,i);let{type:a,timeout:s,propCount:l}=Ho(t,e);if(!a)return n();let c=a+"end",u=0,d=()=>{t.removeEventListener(c,h),o()},h=e=>{e.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},s+1),t.addEventListener(c,h)}function Ho(e,t){let i=window.getComputedStyle(e),n=e=>(i[e]||"").split(", "),r=n("transitionDelay"),o=n("transitionDuration"),a=Zo(r,o),s=n("animationDelay"),l=n("animationDuration"),c=Zo(s,l),u=null,d=0,h=0;return t===Io?0<a&&(u=Io,d=a,h=o.length):t===Do?0<c&&(u=Do,d=c,h=l.length):(d=Math.max(a,c),u=0<d?c<a?Io:Do:null,h=u?(u===Io?o:l).length:0),{type:u,timeout:d,propCount:h,hasTransform:u===Io&&/\b(transform|all)(,|$)/.test(i.transitionProperty)}}function Zo(i,e){for(;i.length<e.length;)i=i.concat(i);return Math.max(...e.map((e,t)=>Go(e)+Go(i[t])))}function Go(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Wo(){document.body.offsetHeight}let Xo=new WeakMap,Yo=new WeakMap,Ko={name:"TransitionGroup",props:Y({},Ro,{tag:String,moveClass:String}),setup(t,{slots:n}){let o=$r(),r=Xi(),a,s;return bn(()=>{if(a.length){let r=t.moveClass||`${t.name||"v"}-move`;var e;!function(e,t,i){let n=e.cloneNode();e._vtc&&e._vtc.forEach(e=>{e.split(/\s+/).forEach(e=>e&&n.classList.remove(e))}),i.split(/\s+/).forEach(e=>e&&n.classList.add(e)),n.style.display="none";e=1===t.nodeType?t:t.parentNode,e.appendChild(n),i=Ho(n).hasTransform;return e.removeChild(n),i}(a[0].el,o.vnode.el,r)||(a.forEach(Jo),a.forEach(Qo),e=a.filter(ea),Wo(),e.forEach(e=>{let t=e.el,i=t.style,n=(jo(t,r),i.transform=i.webkitTransform=i.transitionDuration="",t._moveCb=e=>{e&&e.target!==t||e&&!/transform$/.test(e.propertyName)||(t.removeEventListener("transitionend",n),t._moveCb=null,Vo(t,r))});t.addEventListener("transitionend",n)}))}}),()=>{var e=ie(t),i=Fo(e),e=e.tag||ae;a=s,s=n.default?nn(n.default()):[];for(let t=0;t<s.length;t++){let e=s[t];null!=e.key&&tn(e,Ji(e,i,r,o))}if(a)for(let t=0;t<a.length;t++){let e=a[t];tn(e,Ji(e,i,r,o)),Xo.set(e,e.el.getBoundingClientRect())}return le(e,null,s)}}};function Jo(e){e=e.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function Qo(e){Yo.set(e,e.el.getBoundingClientRect())}function ea(t){let e=Xo.get(t),i=Yo.get(t),n=e.left-i.left,r=e.top-i.top;if(n||r){let e=t.el.style;return e.transform=e.webkitTransform=`translate(${n}px,${r}px)`,e.transitionDuration="0s",t}}let ta=e=>{let t=e.props["onUpdate:modelValue"]||!1;return J(t)?e=>xe(t,e):t};function ia(e){e.target.composing=!0}function na(e){e=e.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}let ra={created(t,{modifiers:{lazy:e,trim:i,number:n}},r){t._assign=ta(r);let o=n||r.props&&"number"===r.props.type;To(t,e?"change":"input",e=>{if(!e.target.composing){let e=t.value;i&&(e=e.trim()),o&&(e=Ce(e)),t._assign(e)}}),i&&To(t,"change",()=>{t.value=t.value.trim()}),e||(To(t,"compositionstart",ia),To(t,"compositionend",na),To(t,"change",na))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:n,number:r}},o){if(e._assign=ta(o),!e.composing){if(document.activeElement===e&&"range"!==e.type){if(i)return;if(n&&e.value.trim()===t)return;if((r||"number"===e.type)&&Ce(e.value)===t)return}o=null==t?"":t;e.value!==o&&(e.value=o)}}},oa={deep:!0,created(e,t,i){e._assign=ta(i),To(e,"change",()=>{let i=e._modelValue,n=ua(e),r=e.checked,o=e._assign;if(J(i)){let t=C(i,n),e=-1!==t;if(r&&!e)o(i.concat(n));else if(!r&&e){let e=[...i];e.splice(t,1),o(e)}}else if(V(i)){let e=new Set(i);r?e.add(n):e.delete(n),o(e)}else o(da(e,r))})},mounted:aa,beforeUpdate(e,t,i){e._assign=ta(i),aa(e,t,i)}};function aa(e,{value:t,oldValue:i},n){e._modelValue=t,J(t)?e.checked=-1<C(t,n.props.value):V(t)?e.checked=t.has(n.props.value):t!==i&&(e.checked=w(t,da(e,!0)))}let sa={created(e,{value:t},i){e.checked=w(t,i.props.value),e._assign=ta(i),To(e,"change",()=>{e._assign(ua(e))})},beforeUpdate(e,{value:t,oldValue:i},n){e._assign=ta(n),t!==i&&(e.checked=w(t,n.props.value))}},la={deep:!0,created(t,{value:e,modifiers:{number:i}},n){let r=V(e);To(t,"change",()=>{var e=Array.prototype.filter.call(t.options,e=>e.selected).map(e=>i?Ce(ua(e)):ua(e));t._assign(t.multiple?r?new Set(e):e:e[0])}),t._assign=ta(n)},mounted(e,{value:t}){ca(e,t)},beforeUpdate(e,t,i){e._assign=ta(i)},updated(e,{value:t}){ca(e,t)}};function ca(i,n){var r=i.multiple;if(!r||J(n)||V(n)){for(let e=0,t=i.options.length;e<t;e++){var o=i.options[e],a=ua(o);if(r)o.selected=J(n)?-1<C(n,a):n.has(a);else if(w(ua(o),n))return i.selectedIndex!==e&&(i.selectedIndex=e)}r||-1===i.selectedIndex||(i.selectedIndex=-1)}}function ua(e){return"_value"in e?e._value:e.value}function da(e,t){var i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}Ao={created(e,t,i){ha(e,t,i,null,"created")},mounted(e,t,i){ha(e,t,i,null,"mounted")},beforeUpdate(e,t,i,n){ha(e,t,i,n,"beforeUpdate")},updated(e,t,i,n){ha(e,t,i,n,"updated")}};function ha(e,t,i,n,r){r=function(e,t){switch(e){case"SELECT":return la;case"TEXTAREA":return ra;default:switch(t){case"checkbox":return oa;case"radio":return sa;default:return ra}}}(e.tagName,i.props&&i.props.type)[r];r&&r(e,t,i,n)}let pa=["ctrl","shift","alt","meta"],fa={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(t,i)=>pa.some(e=>t[e+"Key"]&&!i.includes(e))},ma={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ga={beforeMount(e,{value:t},{transition:i}){e._vod="none"===e.style.display?"":e.style.display,i&&t?i.beforeEnter(e):va(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:n}){!t!=!i&&(n?t?(n.beforeEnter(e),va(e,!0),n.enter(e)):n.leave(e,()=>{va(e,!1)}):va(e,t))},beforeUnmount(e,{value:t}){va(e,t)}};function va(e,t){e.style.display=t?e._vod:"none"}let _a=Y({patchProp:(t,i,r,o,e=!1,n,a,s,l)=>{if("class"===i)p=o,h=e,y=(_=t)._vtc,null==(p=y?(p?[p,...y]:[...y]).join(" "):p)?_.removeAttribute("class"):h?_.setAttribute("class",p):_.className=p;else if("style"===i){var c=t,u=(y=r,o),d=c.style,h=L(u);if(u&&!h){for(let e in u)mo(d,e,u[e]);if(y&&!L(y))for(let e in y)null==u[e]&&mo(d,e,"")}else{_=d.display;h?y!==u&&(d.cssText=u):y&&c.removeAttribute("style"),"_vod"in c&&(d.display=_)}}else if(O(i)){if(!B(i)){var[p,r,f,c=null]=[t,i,o,a];let n=p._vei||(p._vei={}),e=n[r];if(f&&e)e.value=f;else{let[t,i]=function(e){let t;var i;if(So.test(e))for(t={};i=e.match(So);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0;return[ve(e.slice(2)),t]}(r);if(f){let e=n[r]=function(i){let n=e=>{var t=e.timeStamp||yo();(bo||t>=n.attached-1)&&ne(function(t,i){if(J(i)){let e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},i.map(t=>e=>!e._stopped&&t&&t(e))}return i}(e,n.value),i,5,[e])};return n.value=f,n.attached=xo||(wo.then(Co),xo=yo()),n}(c);To(p,t,e,i)}else e&&(c=t,g=e,p.removeEventListener(c,g,i),n[r]=void 0)}}}else if("."===i[0]?(i=i.slice(1),1):"^"===i[0]?(i=i.slice(1),0):(g=t,r=i,v=o,e?"innerHTML"===r||"textContent"===r||r in g&&ko.test(r)&&Q(v):"spellcheck"!==r&&"draggable"!==r&&"translate"!==r&&"form"!==r&&("list"!==r||"INPUT"!==g.tagName)&&!("type"===r&&"TEXTAREA"===g.tagName||ko.test(r)&&L(v))&&r in g))(function(t,i,n,e){if("innerHTML"===i||"textContent"===i)return e&&l(e,a,s),t[i]=null==n?"":n;if("value"===i&&"PROGRESS"!==t.tagName&&!t.tagName.includes("-")){let e=null==(t._value=n)?"":n;return t.value===e&&"OPTION"!==t.tagName||(t.value=e),null==n&&t.removeAttribute(i)}let r=!1;if(""===n||null==n){let e=typeof t[i];"boolean"==e?n=x(n):null==n&&"string"==e?(n="",r=!0):"number"==e&&(n=0,r=!0)}try{t[i]=n}catch(e){}r&&t.removeAttribute(i)})(t,i,o,n);else{"true-value"===i?t._trueValue=o:"false-value"===i&&(t._falseValue=o),v=t,r=i,n=o;var m=e;if(m&&r.startsWith("xlink:"))null==n?v.removeAttributeNS(_o,r.slice(6,r.length)):v.setAttributeNS(_o,r,n);else{let e=b(r);null==n||e&&!x(n)?v.removeAttribute(r):v.setAttribute(r,e?"":n)}}var g,v,_,h,y}},po),ya,ba=!1;function xa(){return ya=ya||cr(_a)}function wa(){return ya=ba?ya:ur(_a),ba=!0,ya}let Ca=(...e)=>{xa().render(...e)},Ta=(...e)=>{wa().hydrate(...e)};function Sa(e){return L(e)?document.querySelector(e):e}var ka,Ea=X;function Aa(e){throw e}function Pa(e){}function Ma(e,t){var i=new SyntaxError(String(e));return i.code=e,i.loc=t,i}let Ia=Symbol(""),Da=Symbol(""),La=Symbol(""),za=Symbol(""),Ra=Symbol(""),Oa=Symbol(""),Ba=Symbol(""),Fa=Symbol(""),Na=Symbol(""),ja=Symbol(""),Va=Symbol(""),Ua=Symbol(""),$a=Symbol(""),qa=Symbol(""),Ha=Symbol(""),Za=Symbol(""),Ga=Symbol(""),Wa=Symbol(""),Xa=Symbol(""),Ya=Symbol(""),Ka=Symbol(""),Ja=Symbol(""),Qa=Symbol(""),es=Symbol(""),ts=Symbol(""),is=Symbol(""),ns=Symbol(""),rs=Symbol(""),os=Symbol(""),as=Symbol(""),ss=Symbol(""),ls=Symbol(""),cs=Symbol(""),us=Symbol(""),ds=Symbol(""),hs=Symbol(""),ps=Symbol(""),fs=Symbol(""),ms=Symbol(""),gs={[Ia]:"Fragment",[Da]:"Teleport",[La]:"Suspense",[za]:"KeepAlive",[Ra]:"BaseTransition",[Oa]:"openBlock",[Ba]:"createBlock",[Fa]:"createElementBlock",[Na]:"createVNode",[ja]:"createElementVNode",[Va]:"createCommentVNode",[Ua]:"createTextVNode",[$a]:"createStaticVNode",[qa]:"resolveComponent",[Ha]:"resolveDynamicComponent",[Za]:"resolveDirective",[Ga]:"resolveFilter",[Wa]:"withDirectives",[Xa]:"renderList",[Ya]:"renderSlot",[Ka]:"createSlots",[Ja]:"toDisplayString",[Qa]:"mergeProps",[es]:"normalizeClass",[ts]:"normalizeStyle",[is]:"normalizeProps",[ns]:"guardReactiveProps",[rs]:"toHandlers",[os]:"camelize",[as]:"capitalize",[ss]:"toHandlerKey",[ls]:"setBlockTracking",[cs]:"pushScopeId",[us]:"popScopeId",[ds]:"withCtx",[hs]:"unref",[ps]:"isRef",[fs]:"withMemo",[ms]:"isMemoSame"},T={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function vs(e,t,i,n,r,o,a,s=!1,l=!1,c=!1,u=T){return e&&(s?(e.helper(Oa),e.helper(Us(e.inSSR,c))):e.helper(Vs(e.inSSR,c)),a)&&e.helper(Wa),{type:13,tag:t,props:i,children:n,patchFlag:r,dynamicProps:o,directives:a,isBlock:s,disableTracking:l,isComponent:c,loc:u}}function _s(e,t=T){return{type:17,loc:t,elements:e}}function ys(e,t=T){return{type:15,loc:t,properties:e}}function S(e,t){return{type:16,loc:T,key:L(e)?k(e,!0):e,value:t}}function k(e,t=!1,i=T,n=0){return{type:4,loc:i,content:e,isStatic:t,constType:t?3:n}}function bs(e,t=T){return{type:8,loc:t,children:e}}function E(e,t=[],i=T){return{type:14,loc:i,callee:e,arguments:t}}function xs(e,t,i=!1,n=!1,r=T){return{type:18,params:e,returns:t,newline:i,isSlot:n,loc:r}}function ws(e,t,i,n=!0){return{type:19,test:e,consequent:t,alternate:i,newline:n,loc:T}}let A=e=>4===e.type&&e.isStatic,Cs=(e,t)=>e===t||e===ve(t);function Ts(e){return Cs(e,"Teleport")?Da:Cs(e,"Suspense")?La:Cs(e,"KeepAlive")?za:Cs(e,"BaseTransition")?Ra:void 0}let Ss=/^\d|[^\$\w]/,ks=e=>!Ss.test(e),Es=/[A-Za-z_$\xA0-\uFFFF]/,As=/[\.\?\w$\xA0-\uFFFF]/,Ps=/\s+[.[]\s*|\s*[.[]\s+/g,Ms=t=>{t=t.trim().replace(Ps,e=>e.trim());let i=0,n=[],r=0,o=0,a=null;for(let e=0;e<t.length;e++){var s=t.charAt(e);switch(i){case 0:if("["===s)n.push(i),i=1,r++;else if("("===s)n.push(i),i=2,o++;else if(!(0===e?Es:As).test(s))return!1;break;case 1:"'"===s||'"'===s||"`"===s?(n.push(i),i=3,a=s):"["===s?r++:"]"!==s||--r||(i=n.pop());break;case 2:if("'"===s||'"'===s||"`"===s)n.push(i),i=3,a=s;else if("("===s)o++;else if(")"===s){if(e===t.length-1)return!1;--o||(i=n.pop())}break;case 3:s===a&&(i=n.pop(),a=null)}}return!r&&!o};function Is(e,t,i){var n={source:e.source.slice(t,t+i),start:Ds(e.start,e.source,t),end:e.end};return null!=i&&(n.end=Ds(e.start,e.source,t+i)),n}function Ds(e,t,i=t.length){return Ls(Y({},e),t,i)}function Ls(e,t,i=t.length){let n=0,r=-1;for(let e=0;e<i;e++)10===t.charCodeAt(e)&&(n++,r=e);return e.offset+=i,e.line+=n,e.column=-1===r?e.column+i:i-r,e}function zs(t,i,n=!1){for(let e=0;e<t.props.length;e++){var r=t.props[e];if(7===r.type&&(n||r.exp)&&(L(i)?r.name===i:i.test(r.name)))return r}}function Rs(t,i,n=!1,r=!1){for(let e=0;e<t.props.length;e++){var o=t.props[e];if(6===o.type){if(!n&&o.name===i&&(o.value||r))return o}else if("bind"===o.name&&(o.exp||r)&&Os(o.arg,i))return o}}function Os(e,t){return e&&A(e)&&e.content===t}function Bs(e){return 5===e.type||2===e.type}function Fs(e){return 7===e.type&&"slot"===e.name}function Ns(e){return 1===e.type&&3===e.tagType}function js(e){return 1===e.type&&2===e.tagType}function Vs(e,t){return e||t?Na:ja}function Us(e,t){return e||t?Ba:Fa}let $s=new Set([is,ns]);function qs(e,i,t){let n,r,o=13===e.type?e.props:e.arguments[2],a=[];if(o&&!L(o)&&14===o.type){let e=function e(t,i=[]){if(t&&!L(t)&&14===t.type){var n=t.callee;if(!L(n)&&$s.has(n))return e(t.arguments[0],i.concat(t))}return[t,i]}(o);o=e[0],a=e[1],r=a[a.length-1]}if(null==o||L(o))n=ys([i]);else if(14===o.type){let e=o.arguments[0];L(e)||15!==e.type?o.callee===rs?n=E(t.helper(Qa),[ys([i]),o]):o.arguments.unshift(ys([i])):e.properties.unshift(i),n=n||o}else if(15===o.type){let e=!1;if(4===i.key.type){let t=i.key.content;e=o.properties.some(e=>4===e.key.type&&e.key.content===t)}e||o.properties.unshift(i),n=o}else n=E(t.helper(Qa),[ys([i]),o]),r&&r.callee===ns&&(r=a[a.length-2]);13===e.type?r?r.arguments[0]=n:e.props=n:r?r.arguments[0]=n:e.arguments[2]=n}function Hs(i,e){return`_${e}_`+i.replace(/[^\w]/g,(e,t)=>"-"===e?"_":i.charCodeAt(t).toString())}function Zs(e,{helper:t,removeHelper:i,inSSR:n}){e.isBlock||(e.isBlock=!0,i(Vs(n,e.isComponent)),t(Oa),t(Us(n,e.isComponent)))}let Gs=/&(gt|lt|amp|apos|quot);/g,Ws={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},Xs={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:D,isPreTag:D,isCustomElement:D,decodeEntities:e=>e.replace(Gs,(e,t)=>Ws[t]),onError:Aa,onWarn:Pa,comments:!1};function Ys(o,i,n){let a=ol(n),r=a?a.ns:0,s=[];for(;!function(e,t,i){var n=e.source;switch(t){case 0:if(d(n,"</"))for(let e=i.length-1;0<=e;--e)if(ll(n,i[e].tag))return 1;break;case 1:case 2:{let e=ol(i);if(e&&ll(n,e.tag))return 1;break}case 3:if(d(n,"]]>"))return 1}return!n}(o,i,n);){let e=o.source,t;if(0===i||1===i)if(!o.inVPre&&d(e,o.options.delimiters[0]))t=function(e,t){var[i,n]=e.options.delimiters,r=e.source.indexOf(n,i.length);var o,a,s,l,c;if(-1!==r)return o=nl(e),p(e,i.length),a=nl(e),s=nl(e),r=r-i.length,i=e.source.slice(0,r),t=il(e,r,t),l=t.trim(),0<(c=t.indexOf(l))&&Ls(a,i,c),Ls(s,i,r-(t.length-l.length-c)),p(e,n.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:l,loc:rl(e,a,s)},loc:rl(e,o)}}(o,i);else if(0===i&&"<"===e[0]&&1!==e.length)if("!"===e[1])t=d(e,"\x3c!--")?function(n){let e=nl(n),r,o=/--(\!)?>/.exec(n.source);if(o){r=n.source.slice(4,o.index);let e=n.source.slice(0,o.index),t=1,i=0;for(;-1!==(i=e.indexOf("\x3c!--",t));)p(n,i-t+1),t=i+1;p(n,o.index+o[0].length-t+1)}else r=n.source.slice(4),p(n,n.source.length);return{type:3,content:r,loc:rl(n,e)}}(o):!d(e,"<!DOCTYPE")&&d(e,"<![CDATA[")&&0!==r?function(e,t){p(e,9);t=Ys(e,3,t);return 0!==e.source.length&&p(e,3),t}(o,n):Js(o);else if("/"===e[1]){if(2!==e.length){if(">"===e[2]){p(o,3);continue}if(/[a-z]/i.test(e[2])){el(o,1,a);continue}t=Js(o)}}else/[a-z]/i.test(e[1])?t=function(e,t){var i=e.inPre,n=e.inVPre,r=ol(t),o=el(e,0,r),i=e.inPre&&!i,n=e.inVPre&&!n;if(!o.isSelfClosing&&!e.options.isVoidTag(o.tag)){t.push(o);var a=e.options.getTextMode(o,r),a=Ys(e,a,t);if(t.pop(),o.children=a,ll(e.source,o.tag))el(e,1,r);else if(0===e.source.length&&"script"===o.tag.toLowerCase()){let e=a[0];e&&d(e.loc.source,"\x3c!--")}o.loc=rl(e,o.loc.start)}return i&&(e.inPre=!1),n&&(e.inVPre=!1),o}(o,n):"?"===e[1]&&(t=Js(o));if(t=t||function(i,e){let n=3===e?["]]>"]:["<",i.options.delimiters[0]],r=i.source.length;for(let t=0;t<n.length;t++){let e=i.source.indexOf(n[t],1);-1!==e&&r>e&&(r=e)}var t=nl(i);return{type:2,content:il(i,r,e),loc:rl(i,t)}}(o,i),J(t))for(let e=0;e<t.length;e++)Ks(s,t[e]);else Ks(s,t)}let l=!1;if(2!==i&&1!==i){let r="preserve"!==o.options.whitespace;for(let n=0;n<s.length;n++){let i=s[n];if(o.inPre||2!==i.type)3!==i.type||o.options.comments||(l=!0,s[n]=null);else if(/[^\t\r\n\f ]/.test(i.content))r&&(i.content=i.content.replace(/[\t\r\n\f ]+/g," "));else{let e=s[n-1],t=s[n+1];!e||!t||r&&(3===e.type||3===t.type||1===e.type&&1===t.type&&/[\r\n]/.test(i.content))?(l=!0,s[n]=null):i.content=" "}}if(o.inPre&&a&&o.options.isPreTag(a.tag)){let e=s[0];e&&2===e.type&&(e.content=e.content.replace(/^\r?\n/,""))}}return l?s.filter(Boolean):s}function Ks(e,t){if(2===t.type){var i=ol(e);if(i&&2===i.type&&i.loc.end.offset===t.loc.start.offset)return i.content+=t.content,i.loc.end=t.loc.end,i.loc.source+=t.loc.source}e.push(t)}function Js(e){var t=nl(e),i="?"===e.source[1]?1:2;let n;var r=e.source.indexOf(">");return-1===r?(n=e.source.slice(i),p(e,e.source.length)):(n=e.source.slice(i,r),p(e,r+1)),{type:3,content:n,loc:rl(e,t)}}let Qs=e("if,else,else-if,for,slot");function el(n,e,t){var i=nl(n),r=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(n.source),o=r[1],t=n.options.getNamespace(o,t),r=(p(n,r[0].length),al(n),nl(n)),a=n.source;n.options.isPreTag(o)&&(n.inPre=!0);let s=tl(n,e),l=(0===e&&!n.inVPre&&s.some(e=>7===e.type&&"pre"===e.name)&&(n.inVPre=!0,Y(n,r),n.source=a,s=tl(n,e).filter(e=>"v-pre"!==e.name)),!1);if(0!==n.source.length&&(l=d(n.source,"/>"),p(n,l?2:1)),1!==e){let e=0;return n.inVPre||("slot"===o?e=2:"template"===o?s.some(e=>7===e.type&&Qs(e.name))&&(e=3):function(e,i){var t=n.options;if(!t.isCustomElement(e)){if("component"===e||/^[A-Z]/.test(e)||Ts(e)||t.isBuiltInComponent&&t.isBuiltInComponent(e)||t.isNativeTag&&!t.isNativeTag(e))return 1;for(let t=0;t<i.length;t++){let e=i[t];if(6===e.type){if("is"===e.name&&e.value&&e.value.content.startsWith("vue:"))return 1}else{if("is"===e.name)return 1;"bind"===e.name&&Os(e.arg,"is")}}}}(o,s)&&(e=1)),{type:1,ns:t,tag:o,tagType:e,props:s,isSelfClosing:l,children:[],loc:rl(n,i),codegenNode:void 0}}}function tl(e,t){for(var i,n=[],r=new Set;0<e.source.length&&!d(e.source,">")&&!d(e.source,"/>");)d(e.source,"/")?p(e,1):(6===(i=function(l,e){var c=nl(l),u=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(l.source)[0];e.has(u),e.add(u);{let e=/["'<]/g;for(;e.exec(u););}let t;p(l,u.length),/^[\t\r\n\f ]*=/.test(l.source)&&(al(l),p(l,1),al(l),t=function(i){let e=nl(i),n,t=i.source[0],r='"'===t||"'"===t;if(r){p(i,1);let e=i.source.indexOf(t);-1===e?n=il(i,i.source.length,4):(n=il(i,e,4),p(i,1))}else{let e=/^[^\t\r\n\f >]+/.exec(i.source);if(!e)return;let t=/["'<=`]/g;for(;t.exec(e[0]););n=il(i,e[0].length,4)}return{content:n,isQuoted:r,loc:rl(i,e)}}(l));let i=rl(l,c);if(l.inVPre||!/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(u))return l.inVPre||d(u,"v-"),{type:6,name:u,value:t&&{type:2,content:t.content,loc:t.loc},loc:i};{let o=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(u),a,e=d(u,"."),s=o[1]||(e||d(u,":")?"bind":d(u,"@")?"on":"slot");if(o[2]){let e="slot"===s,t=u.lastIndexOf(o[2]),i=rl(l,sl(l,c,t),sl(l,c,t+o[2].length+(e&&o[3]||"").length)),n=o[2],r=!0;n.startsWith("[")?(r=!1,n=n.endsWith("]")?n.slice(1,n.length-1):n.slice(1)):e&&(n+=o[3]||""),a={type:4,content:n,isStatic:r,constType:r?3:0,loc:i}}if(t&&t.isQuoted){let e=t.loc;e.start.offset++,e.start.column++,e.end=Ds(e.start,t.content),e.source=e.source.slice(1,-1)}l=o[3]?o[3].slice(1).split("."):[];return e&&l.push("prop"),{type:7,name:s,exp:t&&{type:4,content:t.content,isStatic:!1,constType:0,loc:t.loc},arg:a,modifiers:l,loc:i}}}(e,r)).type&&i.value&&"class"===i.name&&(i.value.content=i.value.content.replace(/\s+/g," ").trim()),0===t&&n.push(i),/^[^\t\r\n\f />]/.test(e.source)),al(e);return n}function il(e,t,i){var n=e.source.slice(0,t);return p(e,t),2!==i&&3!==i&&n.includes("&")?e.options.decodeEntities(n,4===i):n}function nl(e){var{column:e,line:t,offset:i}=e;return{column:e,line:t,offset:i}}function rl(e,t,i){return{start:t,end:i=i||nl(e),source:e.originalSource.slice(t.offset,i.offset)}}function ol(e){return e[e.length-1]}function d(e,t){return e.startsWith(t)}function p(e,t){var i=e["source"];Ls(e,i,t),e.source=i.slice(t)}function al(e){var t=/^[\t\r\n\f ]+/.exec(e.source);t&&p(e,t[0].length)}function sl(e,t,i){return Ds(t,e.originalSource.slice(t.offset,i),i)}function ll(e,t){return d(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function cl(e,t){!function t(e,n,r=!1){let o=e["children"],i=o.length;let a=0;for(let e=0;e<o.length;e++){let i=o[e];if(1===i.type&&0===i.tagType){let e=r?0:P(i,n);if(0<e){if(2<=e){i.codegenNode.patchFlag="-1",i.codegenNode=n.hoist(i.codegenNode),a++;continue}}else{let t=i.codegenNode;if(13===t.type){let e=fl(t);if((!e||512===e||1===e)&&2<=hl(i,n)){let e=pl(i);e&&(t.props=n.hoist(e))}t.dynamicProps&&(t.dynamicProps=n.hoist(t.dynamicProps))}}}else 12===i.type&&2<=P(i.content,n)&&(i.codegenNode=n.hoist(i.codegenNode),a++);if(1===i.type){let e=1===i.tagType;e&&n.scopes.vSlot++,t(i,n),e&&n.scopes.vSlot--}else if(11===i.type)t(i,n,1===i.children.length);else if(9===i.type)for(let e=0;e<i.branches.length;e++)t(i.branches[e],n,1===i.branches[e].children.length)}a&&n.transformHoist&&n.transformHoist(o,n,e),a&&a===i&&1===e.type&&0===e.tagType&&e.codegenNode&&13===e.codegenNode.type&&J(e.codegenNode.children)&&(e.codegenNode.children=n.hoist(_s(e.codegenNode.children)))}(e,t,ul(e,e.children[0]))}function ul(e,t){e=e.children;return 1===e.length&&1===t.type&&!js(t)}function P(i,n){var r=n["constantCache"];switch(i.type){case 1:if(0!==i.tagType)return 0;var e=r.get(i);if(void 0!==e)return e;e=i.codegenNode;if(13!==e.type)return 0;if(e.isBlock&&"svg"!==i.tag&&"foreignObject"!==i.tag)return 0;if(fl(e))return r.set(i,0),0;{let t=3;var o=hl(i,n);if(0===o)return r.set(i,0),0;o<t&&(t=o);for(let e=0;e<i.children.length;e++){var a=P(i.children[e],n);if(0===a)return r.set(i,0),0;a<t&&(t=a)}if(1<t)for(let e=0;e<i.props.length;e++){var s=i.props[e];if(7===s.type&&"bind"===s.name&&s.exp){s=P(s.exp,n);if(0===s)return r.set(i,0),0;s<t&&(t=s)}}if(e.isBlock){for(let e=0;e<i.props.length;e++)if(7===i.props[e].type)return r.set(i,0),0;n.removeHelper(Oa),n.removeHelper(Us(n.inSSR,e.isComponent)),e.isBlock=!1,n.helper(Vs(n.inSSR,e.isComponent))}return r.set(i,t),t}case 2:case 3:return 3;case 9:case 11:case 10:default:return 0;case 5:case 12:return P(i.content,n);case 4:return i.constType;case 8:let t=3;for(let e=0;e<i.children.length;e++){var l=i.children[e];if(!L(l)&&!$(l)){l=P(l,n);if(0===l)return 0;l<t&&(t=l)}}return t}}let dl=new Set([es,ts,is,ns]);function hl(e,i){let n=3;var r=pl(e);if(r&&15===r.type){let t=r["properties"];for(let e=0;e<t.length;e++){var{key:o,value:a}=t[e],o=P(o,i);if(0===o)return o;if(o<n&&(n=o),0===(o=4===a.type?P(a,i):14===a.type?function e(t,i){if(14===t.type&&!L(t.callee)&&dl.has(t.callee)){if(4===(t=t.arguments[0]).type)return P(t,i);if(14===t.type)return e(t,i)}return 0}(a,i):0))return o;o<n&&(n=o)}}return n}function pl(e){e=e.codegenNode;if(13===e.type)return e.props}function fl(e){e=e.patchFlag;return e?parseInt(e,10):void 0}function ml(e,{filename:t="",prefixIdentifiers:i=!1,hoistStatic:n=!1,cacheHandlers:r=!1,nodeTransforms:o=[],directiveTransforms:a={},transformHoist:s=null,isBuiltInComponent:l=X,isCustomElement:c=X,expressionPlugins:u=[],scopeId:d=null,slotted:h=!0,ssr:p=!1,inSSR:f=!1,ssrCssVars:m="",bindingMetadata:g=W,inline:v=!1,isTS:_=!1,onError:y=Aa,onWarn:b=Pa,compatConfig:x}){let w=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),C={selfName:w&&_e(te(w[1])),prefixIdentifiers:i,hoistStatic:n,cacheHandlers:r,nodeTransforms:o,directiveTransforms:a,transformHoist:s,isBuiltInComponent:l,isCustomElement:c,expressionPlugins:u,scopeId:d,slotted:h,ssr:p,inSSR:f,ssrCssVars:m,bindingMetadata:g,inline:v,isTS:_,onError:y,onWarn:b,compatConfig:x,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(e){var t=C.helpers.get(e)||0;return C.helpers.set(e,t+1),e},removeHelper(e){var t=C.helpers.get(e);t&&((t=t-1)?C.helpers.set(e,t):C.helpers.delete(e))},helperString:e=>"_"+gs[C.helper(e)],replaceNode(e){C.parent.children[C.childIndex]=C.currentNode=e},removeNode(e){var t=e?C.parent.children.indexOf(e):C.currentNode?C.childIndex:-1;e&&e!==C.currentNode?C.childIndex>t&&(C.childIndex--,C.onNodeRemoved()):(C.currentNode=null,C.onNodeRemoved()),C.parent.children.splice(t,1)},onNodeRemoved:()=>{},addIdentifiers(e){},removeIdentifiers(e){},hoist(e){L(e)&&(e=k(e)),C.hoists.push(e);var t=k("_hoisted_"+C.hoists.length,!1,e.loc,2);return t.hoisted=e,t},cache:(e,t=!1)=>{return[t,i=!1]=[C.cached++,t],{type:20,index:t,value:e,isVNode:i,loc:T};var i}};return C}function gl(i,n){n.currentNode=i;var r=n["nodeTransforms"],o=[];for(let t=0;t<r.length;t++){let e=r[t](i,n);if(e&&(J(e)?o.push(...e):o.push(e)),!n.currentNode)return;i=n.currentNode}switch(i.type){case 3:n.ssr||n.helper(Va);break;case 5:n.ssr||n.helper(Ja);break;case 9:for(let e=0;e<i.branches.length;e++)gl(i.branches[e],n);break;case 10:case 11:case 1:case 0:{var t=i;var a=n;let e=0;for(var s=()=>{e--};e<t.children.length;e++){var l=t.children[e];L(l)||(a.parent=t,a.childIndex=e,a.onNodeRemoved=s,gl(l,a))}}}n.currentNode=i;let e=o.length;for(;e--;)o[e]()}function vl(t,s){let e=L(t)?e=>e===t:e=>t.test(e);return(i,n)=>{if(1===i.type){var r=i["props"];if(3!==i.tagType||!r.some(Fs)){var o=[];for(let t=0;t<r.length;t++){var a=r[t];if(7===a.type&&e(a.name)){r.splice(t,1),t--;let e=s(i,a,n);e&&o.push(e)}}return o}}}}let _l="/*#__PURE__*/",yl=e=>gs[e]+": _"+gs[e];function bl(t,e={}){var i=function(e,{mode:t="function",prefixIdentifiers:i="module"===t,sourceMap:n=!1,filename:r="template.vue.html",scopeId:o=null,optimizeImports:a=!1,runtimeGlobalName:s="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:c="vue/server-renderer",ssr:u=!1,isTS:d=!1,inSSR:h=!1}){let p={mode:t,prefixIdentifiers:i,sourceMap:n,filename:r,scopeId:o,optimizeImports:a,runtimeGlobalName:s,runtimeModuleName:l,ssrRuntimeModuleName:c,ssr:u,isTS:d,inSSR:h,source:e.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper:e=>"_"+gs[e],push(e,t){p.code+=e},indent(){f(++p.indentLevel)},deindent(e=!1){e?--p.indentLevel:f(--p.indentLevel)},newline(){f(p.indentLevel)}};function f(e){p.push("\n"+"  ".repeat(e))}return p}(t,e),{mode:e,push:n,prefixIdentifiers:r,indent:o,deindent:a,newline:s,ssr:l}=(e.onContextCreated&&e.onContextCreated(i),i),c=0<t.helpers.length,r=!r&&"module"!==e,u=t,e=i,{push:d,newline:h,runtimeGlobalName:p}=e,f=(0<u.helpers.length&&(d(`const _Vue = ${p}
`),u.hoists.length)&&d(`const { ${[Na,ja,Va,Ua,$a].filter(e=>u.helpers.includes(e)).map(yl).join(", ")} } = _Vue
`),u.hoists),m=e;if(f.length){m.pure=!0;var{push:g,newline:v}=m;v();for(let e=0;e<f.length;e++){var _=f[e];_&&(g(`const _hoisted_${e+1} = `),M(_,m),v())}m.pure=!1}if(h(),d("return "),n(`function ${l?"ssrRender":"render"}(${(l?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ")}) {`),o(),r&&(n("with (_ctx) {"),o(),c)&&(n(`const { ${t.helpers.map(yl).join(", ")} } = _Vue`),n("\n"),s()),t.components.length&&(xl(t.components,"component",i),t.directives.length||0<t.temps)&&s(),t.directives.length&&(xl(t.directives,"directive",i),0<t.temps)&&s(),0<t.temps){n("let ");for(let e=0;e<t.temps;e++)n(`${0<e?", ":""}_temp`+e)}return(t.components.length||t.directives.length||t.temps)&&(n("\n"),s()),l||n("return "),t.codegenNode?M(t.codegenNode,i):n("null"),r&&(a(),n("}")),a(),n("}"),{ast:t,code:i.code,preamble:"",map:i.map?i.map.toJSON():void 0}}function xl(i,n,{helper:e,push:r,newline:o,isTS:a}){var s=e("component"===n?qa:Za);for(let t=0;t<i.length;t++){let e=i[t];var l=e.endsWith("__self");r(`const ${Hs(e=l?e.slice(0,-6):e,n)} = ${s}(${JSON.stringify(e)}${l?", true":""})`+(a?"!":"")),t<i.length-1&&o()}}function wl(e,t){var i=3<e.length||!1;t.push("["),i&&t.indent(),Cl(e,t,i),i&&t.deindent(),t.push("]")}function Cl(t,i,n=!1,r=!0){var{push:o,newline:a}=i;for(let e=0;e<t.length;e++){var s=t[e];L(s)?o(s):(J(s)?wl:M)(s,i),e<t.length-1&&(n?(r&&o(","),a()):r&&o(", "))}}function M(e,t){if(L(e))t.push(e);else if($(e))t.push(t.helper(e));else switch(e.type){case 1:case 9:case 11:case 12:M(e.codegenNode,t);break;case 2:i=e,t.push(JSON.stringify(i.content),i);break;case 4:Tl(e,t);break;case 5:var i=e,n=t,{push:r,helper:o,pure:a}=n;a&&r(_l),r(o(Ja)+"("),M(i.content,n),r(")");break;case 8:Sl(e,t);break;case 3:var a=e,{push:o,helper:n,pure:r}=t;r&&o(_l),o(`${n(Va)}(${JSON.stringify(a.content)})`,a);break;case 13:var s=e,l=t,{push:c,helper:u,pure:d}=l,{tag:h,props:p,children:f,patchFlag:m,dynamicProps:g,directives:v,isBlock:_,disableTracking:y,isComponent:b}=s,y=(v&&c(u(Wa)+"("),_&&c(`(${u(Oa)}(${y?"true":""}), `),d&&c(_l),(_?Us:Vs)(l.inSSR,b));c(u(y)+"(",s),Cl(function(e){let t=e.length;for(;t--&&null==e[t];);return e.slice(0,t+1).map(e=>e||"null")}([h,p,f,m,g]),l),c(")"),_&&c(")"),v&&(c(", "),M(v,l),c(")"));break;case 14:var d=e,b=t,{push:u,helper:y,pure:s}=b,y=L(d.callee)?d.callee:y(d.callee);s&&u(_l),u(y+"(",d),Cl(d.arguments,b),u(")");break;case 15:!function(e,n){let{push:r,indent:t,deindent:i,newline:o}=n,a=e["properties"];if(!a.length)return r("{}",e);var s,l,c,e=1<a.length||!1;r(e?"{":"{ "),e&&t();for(let i=0;i<a.length;i++){let{key:e,value:t}=a[i];s=e,c=void 0,c=(l=n).push,8===s.type?(c("["),Sl(s,l),c("]")):s.isStatic?c(ks(s.content)?s.content:JSON.stringify(s.content),s):c(`[${s.content}]`,s),r(": "),M(t,n),i<a.length-1&&(r(","),o())}e&&i(),r(e?"}":" }")}(e,t);break;case 17:wl(e.elements,t);break;case 18:var h=e,p=t,{push:f,indent:m,deindent:g}=p,{params:_,returns:v,body:l,newline:c,isSlot:x}=h;x&&f(`_${gs[ds]}(`),f("(",h),J(_)?Cl(_,p):_&&M(_,p),f(") => "),(c||l)&&(f("{"),m()),v?(c&&f("return "),(J(v)?wl:M)(v,p)):l&&M(l,p),(c||l)&&(g(),f("}")),x&&f(")");break;case 19:var w=e,x=t,{test:C,consequent:w,alternate:T,newline:S}=w,{push:k,indent:E,deindent:A,newline:P}=x;if(4===C.type){let e=!ks(C.content);e&&k("("),Tl(C,x),e&&k(")")}else k("("),M(C,x),k(")");S&&E(),x.indentLevel++,S||k(" "),k("? "),M(w,x),x.indentLevel--,S&&P(),S||k(" "),k(": "),(C=19===T.type)||x.indentLevel++,M(T,x),C||x.indentLevel--,S&&A(!0);break;case 20:var E=e,w=t,{push:P,helper:k,indent:T,deindent:C,newline:S}=w;P(`_cache[${E.index}] || (`),E.isVNode&&(T(),P(k(ls)+"(-1),"),S()),P(`_cache[${E.index}] = `),M(E.value,w),E.isVNode&&(P(","),S(),P(k(ls)+"(1),"),S(),P(`_cache[${E.index}]`),C()),P(")");break;case 21:Cl(e.body,t,!0,!1)}var i}function Tl(e,t){var{content:i,isStatic:n}=e;t.push(n?JSON.stringify(i):i,e)}function Sl(t,i){for(let e=0;e<t.children.length;e++){var n=t.children[e];L(n)?i.push(n):M(n,i)}}let kl=vl(/^(if|else|else-if)$/,(e,t,a)=>{var i=e,n=t,r=a,o=(t,i,e)=>{var n=a.parent.children;let r=n.indexOf(t),o=0;for(;0<=r--;){let e=n[r];e&&9===e.type&&(o+=e.branches.length)}return()=>{if(e)t.codegenNode=Al(i,o,a);else{let e=function(e){for(;;)if(19===e.type){if(19!==e.alternate.type)return e;e=e.alternate}else 20===e.type&&(e=e.value)}(t.codegenNode);e.alternate=Al(i,o+t.branches.length-1,a)}}};if("else"===n.name||n.exp&&n.exp.content.trim()||(n.exp=k("true",!1,(n.exp||i).loc)),"if"===n.name)return e=El(i,n),t={type:9,loc:i.loc,branches:[e]},r.replaceNode(t),o(t,e,!0);{var s=r.parent.children;let e=s.indexOf(i);for(;-1<=e--;){var l,c,u=s[e];if(!u||2!==u.type||u.content.trim().length){u&&9===u.type&&(r.removeNode(),l=El(i,n),u.branches.push(l),c=o(u,l,!1),gl(l,r),c&&c(),r.currentNode=null);break}r.removeNode(u)}}});function El(e,t){var i=3===e.tagType;return{type:10,loc:e.loc,condition:"else"===t.name?void 0:t.exp,children:i&&!zs(e,"for")?e.children:[e],userKey:Rs(e,"key"),isTemplateIf:i}}function Al(e,t,i){return e.condition?ws(e.condition,Pl(e,t,i),E(i.helper(Va),['""',"true"])):Pl(e,t,i)}function Pl(e,t,i){var n=i["helper"],r=S("key",k(""+t,!1,T,2)),t=e["children"],o=t[0];if(1!==t.length||1!==o.type){if(1===t.length&&11===o.type){let e=o.codegenNode;return qs(e,r,i),e}return vs(i,n(Ia),ys([r]),t,"64",void 0,void 0,!0,!1,!1,e.loc)}{let e=o.codegenNode,t=14===(n=e).type&&n.callee===fs?n.arguments[1].returns:n;return 13===t.type&&Zs(t,i),qs(t,r,i),e}}let Ml=vl("for",(d,s,h)=>{let{helper:p,removeHelper:f}=h;var l=d,c=h,u=r=>{let o=E(p(Xa),[r.source]),a=Ns(d),s=zs(d,"memo"),e=Rs(d,"key"),l=e&&(6===e.type?k(e.value.content,!0):e.exp),c=e?S("key",l):null,u=4===r.source.type&&0<r.source.constType,t=u?64:e?128:256;return r.codegenNode=vs(h,p(Ia),void 0,o,t+"",void 0,void 0,!0,!u,!1,d.loc),()=>{let t;var e=r["children"],i=1!==e.length||1!==e[0].type,n=js(d)?d:a&&1===d.children.length&&js(d.children[0])?d.children[0]:null;if(n?(t=n.codegenNode,a&&c&&qs(t,c,h)):i?t=vs(h,p(Ia),c?ys([c]):void 0,d.children,"64",void 0,void 0,!0,void 0,!1):(t=e[0].codegenNode,a&&c&&qs(t,c,h),t.isBlock!==!u&&(t.isBlock?(f(Oa),f(Us(h.inSSR,t.isComponent))):f(Vs(h.inSSR,t.isComponent))),t.isBlock=!u,t.isBlock?(p(Oa),p(Us(h.inSSR,t.isComponent))):p(Vs(h.inSSR,t.isComponent))),s){let e=xs(Ol(r.parseResult,[k("_cached")]));e.body={type:21,body:[bs(["const _memo = (",s.exp,")"]),bs(["if (_cached",...l?[" && _cached.key === ",l]:[],` && ${h.helperString(ms)}(_cached, _memo)) return _cached`]),bs(["const _item = ",t]),k("_item.memo = _memo"),k("return _item")],loc:T},o.arguments.push(e,k("_cache"),k(String(h.cached++)))}else o.arguments.push(xs(Ol(r.parseResult),t,!0))}};if(s.exp){var m=zl(s.exp);if(m){let e=c["scopes"],{source:t,value:i,key:n,index:r}=m,o={type:11,loc:s.loc,source:t,valueAlias:i,keyAlias:n,objectIndexAlias:r,parseResult:m,children:Ns(l)?l.children:[l]},a=(c.replaceNode(o),e.vFor++,u(o));return()=>{e.vFor--,a&&a()}}}}),Il=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Dl=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Ll=/^\(|\)$/g;function zl(e){let r=e.loc,o=e.content,t=o.match(Il);if(t){var[,e,a]=t,a={source:Rl(r,a.trim(),o.indexOf(a,e.length)),value:void 0,key:void 0,index:void 0};let n=e.trim().replace(Ll,"").trim();var s=e.indexOf(n),l=n.match(Dl);if(l){n=n.replace(Dl,"").trim();let t=l[1].trim(),i;if(t&&(i=o.indexOf(t,s+n.length),a.key=Rl(r,t,i)),l[2]){let e=l[2].trim();e&&(a.index=Rl(r,e,o.indexOf(e,a.key?i+t.length:s+n.length)))}}return n&&(a.value=Rl(r,n,s)),a}}function Rl(e,t,i){return k(t,!1,Is(e,i,t.length))}function Ol({value:t,key:i,index:n},r=[]){{var o=[t,i,n,...r];let e=o.length;for(;e--&&!o[e];);return o.slice(0,e+1).map((e,t)=>e||k("_".repeat(t+1),!1))}}let Bl=k("undefined",!1),Fl=(e,t)=>{if(1===e.type&&(1===e.tagType||3===e.tagType)&&zs(e,"slot"))return t.scopes.vSlot++,()=>{t.scopes.vSlot--}},Nl=(e,t,i)=>xs(e,t,!1,!0,t.length?t[0].loc:i);function jl(e,l,c=Nl){l.helper(ds);let{children:u,loc:i}=e,d=[],h=[],p=0<l.scopes.vSlot||0<l.scopes.vFor;var f=zs(e,"slot",!0);if(f){let{arg:e,exp:t}=f;e&&!A(e)&&(p=!0),d.push(S(e||k("default",!0),c(t,u,i)))}let m=!1,g=!1;var v=[],_=new Set;for(let s=0;s<u.length;s++){let e=u[s],t;if(!Ns(e)||!(t=zs(e,"slot",!0))){3!==e.type&&v.push(e);continue}if(f)break;m=!0;let{children:i,loc:n}=e,{arg:r=k("default",!0),exp:o}=t,a;A(r)?a=r?r.content:"default":p=!0;var y,b=c(o,i,n);if(y=zs(e,"if"))p=!0,h.push(ws(y.exp,Vl(r,b),Bl));else if(y=zs(e,/^else(-if)?$/,!0)){let e,t=s;for(;t--&&3===(e=u[t]).type;);if(e&&Ns(e)&&zs(e,"if")){u.splice(s,1),s--;let e=h[h.length-1];for(;19===e.alternate.type;)e=e.alternate;e.alternate=y.exp?ws(y.exp,Vl(r,b),Bl):Vl(r,b)}}else if(y=zs(e,"for")){p=!0;let e=y.parseResult||zl(y.exp);e&&h.push(E(l.helper(Xa),[e.source,xs(Ol(e),Vl(r,b),!0)]))}else{if(a){if(_.has(a))continue;_.add(a),"default"===a&&(g=!0)}d.push(S(r,b))}}if(!f){let e=(e,t)=>S("default",c(e,t,i));m?v.length&&v.some(e=>function e(t){return 2!==t.type&&12!==t.type||(2===t.type?!!t.content.trim():e(t.content))}(e))&&(g||d.push(e(void 0,v))):d.push(e(void 0,u))}let t=p?2:function i(n){for(let t=0;t<n.length;t++){let e=n[t];switch(e.type){case 1:if(2===e.tagType||i(e.children))return!0;break;case 9:if(i(e.branches))return!0;break;case 10:case 11:if(i(e.children))return!0}}return!1}(e.children)?3:1,n=ys(d.concat(S("_",k(t+"",!1))),i);return{slots:n=h.length?E(l.helper(Ka),[n,_s(h)]):n,hasDynamicSlots:p}}function Vl(e,t){return ys([S("name",e),S("fn",t)])}let Ul=new WeakMap,$l=(p,f)=>function(){if(1===(p=f.currentNode).type&&(0===p.tagType||1===p.tagType)){let{tag:e,props:t}=p,i=1===p.tagType;var d=i?function(e,t){let i=e["tag"];var n=Zl(i),r=Rs(e,"is");if(r)if(n){let e=6===r.type?r.value&&k(r.value.content,!0):r.exp;if(e)return E(t.helper(Ha),[e])}else 6===r.type&&r.value.content.startsWith("vue:")&&(i=r.value.content.slice(4));r=!n&&zs(e,"is");return r&&r.exp?E(t.helper(Ha),[r.exp]):(n=Ts(i)||t.isBuiltInComponent(i))?(t.helper(n),n):(t.helper(qa),t.components.add(i),Hs(i,"component"))}(p,f):`"${e}"`,h=ee(d)&&d.callee===Ha;let n,r,o,a,s,l,c=0,u=h||d===Da||d===La||!i&&("svg"===e||"foreignObject"===e);if(0<t.length){let e=ql(p,f,void 0,i,h),t=(n=e.props,c=e.patchFlag,s=e.dynamicPropNames,e.directives);l=t&&t.length?_s(t.map(e=>{var t=f,i=[],n=((n=Ul.get(e))?i.push(t.helperString(n)):(t.helper(Za),t.directives.add(e.name),i.push(Hs(e.name,"directive"))),e.loc);if(e.exp&&i.push(e.exp),e.arg&&(e.exp||i.push("void 0"),i.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||i.push("void 0"),i.push("void 0"));let t=k("true",!1,n);i.push(ys(e.modifiers.map(e=>S(e,t)),n))}return _s(i,e.loc)})):void 0,e.shouldUseBlock&&(u=!0)}if(0<p.children.length)if(d===za&&(u=!0,c|=1024),i&&d!==Da&&d!==za){let{slots:e,hasDynamicSlots:t}=jl(p,f);r=e,t&&(c|=1024)}else if(1===p.children.length&&d!==Da){let e=p.children[0],t=e.type,i=5===t||8===t;i&&0===P(e,f)&&(c|=1),r=i||2===t?e:p.children}else r=p.children;0!==c&&(o=String(c),s)&&s.length&&(a=function(i){let n="[";for(let e=0,t=i.length;e<t;e++)n+=JSON.stringify(i[e]),e<t-1&&(n+=", ");return n+"]"}(s)),p.codegenNode=vs(f,d,n,r,o,a,l,!!u,!1,i,p.loc)}};function ql(s,l,t=s.props,n,r,c=!1){let{tag:u,loc:d,children:e}=s,h=[];var p=[],f=[],m=0<e.length;let g=!1,i=0,o=!1,a=!1,v=!1,_=!1,y=!1,b=!1,x=[],w=({key:e,value:t})=>{var i;A(e)?(e=e.content,!(i=O(e))||n&&!r||"onclick"===e.toLowerCase()||"onUpdate:modelValue"===e||he(e)||(_=!0),i&&he(e)&&(b=!0),20===t.type||(4===t.type||8===t.type)&&0<P(t,l)||("ref"===e?o=!0:"class"===e?a=!0:"style"===e?v=!0:"key"===e||x.includes(e)||x.push(e),!n)||"class"!==e&&"style"!==e||x.includes(e)||x.push(e)):y=!0};for(let e=0;e<t.length;e++){let a=t[e];if(6===a.type){let{loc:e,name:t,value:i}=a;"ref"===t&&(o=!0,0<l.scopes.vFor)&&h.push(S(k("ref_for",!0),k("true"))),"is"===t&&(Zl(u)||i&&i.content.startsWith("vue:"))||h.push(S(k(t,!0,Is(e,0,t.length)),k(i?i.content:"",!0,i?i.loc:e)))}else{let{name:e,arg:t,exp:i,loc:n}=a,r="bind"===e,o="on"===e;if("slot"!==e&&("once"!==e&&"memo"!==e&&!("is"===e||r&&Os(t,"is")&&Zl(u)||o&&c)))if((r&&Os(t,"key")||o&&m&&Os(t,"vue:before-update"))&&(g=!0),r&&Os(t,"ref")&&0<l.scopes.vFor&&h.push(S(k("ref_for",!0),k("true"))),t||!r&&!o){let i=l.directiveTransforms[e];if(i){let{props:e,needRuntime:t}=i(a,s,l);c||e.forEach(w),h.push(...e),t&&(f.push(a),$(t))&&Ul.set(a,t)}else pe(e)||(f.push(a),m&&(g=!0))}else y=!0,i&&(h.length&&(p.push(ys(Hl(h),d)),h=[]),p.push(r?i:{type:14,loc:n,callee:l.helper(rs),arguments:[i]}))}}let C;if(p.length?(h.length&&p.push(ys(Hl(h),d)),C=1<p.length?E(l.helper(Qa),p,d):p[0]):h.length&&(C=ys(Hl(h),d)),y?i|=16:(a&&!n&&(i|=2),v&&!n&&(i|=4),x.length&&(i|=8),_&&(i|=32)),g||0!==i&&32!==i||!(o||b||0<f.length)||(i|=512),!l.inSSR&&C)switch(C.type){case 15:let i=-1,n=-1,r=!1;for(let t=0;t<C.properties.length;t++){let e=C.properties[t].key;A(e)?"class"===e.content?i=t:"style"===e.content&&(n=t):e.isHandlerKey||(r=!0)}let e=C.properties[i],t=C.properties[n];r?C=E(l.helper(is),[C]):(e&&!A(e.value)&&(e.value=E(l.helper(es),[e.value])),t&&(v||4===t.value.type&&"["===t.value.content.trim()[0]||17===t.value.type)&&(t.value=E(l.helper(ts),[t.value])));break;case 14:break;default:C=E(l.helper(is),[E(l.helper(ns),[C])])}return{props:C,directives:f,patchFlag:i,dynamicPropNames:x,shouldUseBlock:g}}function Hl(t){var i,n=new Map,r=[];for(let e=0;e<t.length;e++){var o,a,s=t[e];8!==s.key.type&&s.key.isStatic?(o=s.key.content,(a=n.get(o))?"style"!==o&&"class"!==o&&!O(o)||(i=s,17===(a=a).value.type?a.value.elements.push(i.value):a.value=_s([a.value,i.value],a.loc)):(n.set(o,s),r.push(s))):r.push(s)}return r}function Zl(e){return"component"===e||"Component"===e}let Gl=(t,i)=>{if(js(t)){var{children:n,loc:r}=t,{slotName:o,slotProps:a}=function(i,t){let n,r='"default"';var o=[];for(let t=0;t<i.props.length;t++){let e=i.props[t];6===e.type?e.value&&("name"===e.name?r=JSON.stringify(e.value.content):(e.name=te(e.name),o.push(e))):"bind"===e.name&&Os(e.arg,"name")?e.exp&&(r=e.exp):("bind"===e.name&&e.arg&&A(e.arg)&&(e.arg.content=te(e.arg.content)),o.push(e))}if(0<o.length){let e=ql(i,t,o,!1,!1)["props"];n=e}return{slotName:r,slotProps:n}}(t,i),o=[i.prefixIdentifiers?"_ctx.$slots":"$slots",o,"{}","undefined","true"];let e=2;a&&(o[2]=a,e=3),n.length&&(o[3]=xs([],n,!1,!1,r),e=4),i.scopeId&&!i.slotted&&(e=5),o.splice(e),t.codegenNode=E(i.helper(Ya),o,r)}},Wl=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,Xl=(e,t,i,n)=>{var{loc:r,arg:o}=e;let a;if(4===o.type)if(o.isStatic){let e=o.content;e.startsWith("vue:")&&(e="vnode-"+e.slice(4)),a=k(ye(te(e)),!0,o.loc)}else a=bs([i.helperString(ss)+"(",o,")"]);else(a=o).children.unshift(i.helperString(ss)+"("),a.children.push(")");let s=e.exp;s&&!s.content.trim()&&(s=void 0);o=i.cacheHandlers&&!s&&!i.inVOnce;if(s){let e=Ms(s.content),t=!(e||Wl.test(s.content)),i=s.content.includes(";");(t||o&&e)&&(s=bs([`${t?"$event":"(...args)"} => `+(i?"{":"("),s,i?"}":")"]))}let l={props:[S(a,s||k("() => {}",!1,r))]};return n&&(l=n(l)),o&&(l.props[0].value=i.cache(l.props[0].value)),l.props.forEach(e=>e.key.isHandlerKey=!0),l},Yl=(e,t,i)=>{var{exp:n,modifiers:r,loc:o}=e,e=e.arg;return 4!==e.type?(e.children.unshift("("),e.children.push(') || ""')):e.isStatic||(e.content=e.content+' || ""'),r.includes("camel")&&(4===e.type?e.content=e.isStatic?te(e.content):`${i.helperString(os)}(${e.content})`:(e.children.unshift(i.helperString(os)+"("),e.children.push(")"))),i.inSSR||(r.includes("prop")&&Kl(e,"."),r.includes("attr")&&Kl(e,"^")),!n||4===n.type&&!n.content.trim()?{props:[S(e,k("",!0,o))]}:{props:[S(e,n)]}},Kl=(e,t)=>{4===e.type?e.content=e.isStatic?t+e.content:`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},Jl=(t,a)=>{if(0===t.type||1===t.type||11===t.type||10===t.type)return()=>{var n=t.children;let r,e=!1;for(let i=0;i<n.length;i++){let t=n[i];if(Bs(t)){e=!0;for(let e=i+1;e<n.length;e++){var o=n[e];if(!Bs(o)){r=void 0;break}(r=r||(n[i]=bs([t],t.loc))).children.push(" + ",o),n.splice(e,1),e--}}}if(e&&(1!==n.length||0!==t.type&&(1!==t.type||0!==t.tagType||t.props.find(e=>7===e.type&&!a.directiveTransforms[e.name]))))for(let i=0;i<n.length;i++){let t=n[i];if(Bs(t)||8===t.type){let e=[];2===t.type&&" "===t.content||e.push(t),a.ssr||0!==P(t,a)||e.push("1"),n[i]={type:12,content:t,loc:t.loc,codegenNode:E(a.helper(Ua),e)}}}}},Ql=new WeakSet,ec=(e,t)=>{if(1===e.type&&zs(e,"once",!0)&&!Ql.has(e)&&!t.inVOnce)return Ql.add(e),t.inVOnce=!0,t.helper(ls),()=>{t.inVOnce=!1;var e=t.currentNode;e.codegenNode&&(e.codegenNode=t.cache(e.codegenNode,!0))}},tc=(i,e,t)=>{var{exp:n,arg:r}=i;if(!n)return ic();var o=n.loc.source,o=4===n.type?n.content:o;if(!o.trim()||!Ms(o))return ic();var o=r||k("modelValue",!0),a=r?A(r)?"onUpdate:"+r.content:bs(['"onUpdate:" + ',r]):"onUpdate:modelValue",t=bs([`${t.isTS?"($event: any)":"$event"} => ((`,n,") = $event)"]),n=[S(o,i.exp),S(a,t)];if(i.modifiers.length&&1===e.tagType){let e=i.modifiers.map(e=>(ks(e)?e:JSON.stringify(e))+": true").join(", "),t=r?A(r)?r.content+"Modifiers":bs([r,' + "Modifiers"']):"modelModifiers";n.push(S(t,k(`{ ${e} }`,!1,i.loc,2)))}return ic(n)};function ic(e=[]){return{props:e}}let nc=new WeakSet,rc=(i,n)=>{if(1===i.type){let t=zs(i,"memo");if(t&&!nc.has(i))return nc.add(i),()=>{var e=i.codegenNode||n.currentNode.codegenNode;e&&13===e.type&&(1!==i.tagType&&Zs(e,n),i.codegenNode=E(n.helper(fs),[t.exp,xs(void 0,e),"_cache",String(n.cached++)]))}}};function oc(t,e={}){var n=e.onError||Aa,i="module"===e.mode,i=(!0===e.prefixIdentifiers?n(Ma(46)):i&&n(Ma(47)),e.cacheHandlers&&n(Ma(48)),e.scopeId&&!i&&n(Ma(49)),L(t)?([i,n={}]=[t,e],n=nl(i=function(e,t){var i=Y({},Xs);let n;for(n in t)i[n]=(void 0===t[n]?Xs:t)[n];return{options:i,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:i.onWarn}}(i,n)),[i,n=T]=[Ys(i,0,[]),rl(i,n)],{type:0,children:i,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:n}):t),[n,t]=[[ec,kl,rc,Ml,Gl,$l,Fl,Jl],{on:Xl,bind:Yl,model:tc}],r=i,n=Y({},e,{prefixIdentifiers:!1,nodeTransforms:[...n,...e.nodeTransforms||[]],directiveTransforms:Y({},t,e.directiveTransforms||{})}),t=ml(r,n);if(gl(r,t),n.hoistStatic&&cl(r,t),!n.ssr){n=r;var o=t;let e=o["helper"],i=n["children"];if(1===i.length){let t=i[0];if(ul(n,t)&&t.codegenNode){let e=t.codegenNode;13===e.type&&Zs(e,o),n.codegenNode=e}else n.codegenNode=t}else 1<i.length&&(n.codegenNode=vs(o,e(Ia),void 0,n.children,"64",void 0,void 0,!0,void 0,!1))}return r.helpers=[...t.helpers.keys()],r.components=[...t.components],r.directives=[...t.directives],r.imports=t.imports,r.hoists=t.hoists,r.temps=t.temps,r.cached=t.cached,bl(i,Y({},e,{prefixIdentifiers:!1}))}let ac=Symbol(""),sc=Symbol(""),lc=Symbol(""),cc=Symbol(""),uc=Symbol(""),dc=Symbol(""),hc=Symbol(""),pc=Symbol(""),fc=Symbol(""),mc=Symbol(""),gc,vc=(ka={[ac]:"vModelRadio",[sc]:"vModelCheckbox",[lc]:"vModelText",[cc]:"vModelSelect",[uc]:"vModelDynamic",[dc]:"withModifiers",[hc]:"withKeys",[pc]:"vShow",[fc]:"Transition",[mc]:"TransitionGroup"},Object.getOwnPropertySymbols(ka).forEach(e=>{gs[e]=ka[e]}),e("style,iframe,script,noscript",!0)),_c={isVoidTag:y,isNativeTag:e=>v(e)||_(e),isPreTag:e=>"pre"===e,decodeEntities:function(e,t=!1){return gc=gc||document.createElement("div"),t?(gc.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,gc.children[0].getAttribute("foo")):(gc.innerHTML=e,gc.textContent)},isBuiltInComponent:e=>Cs(e,"Transition")?fc:Cs(e,"TransitionGroup")?mc:void 0,getNamespace(e,t){let i=t?t.ns:0;if(t&&2===i)if("annotation-xml"===t.tag){if("svg"===e)return 1;t.props.some(e=>6===e.type&&"encoding"===e.name&&null!=e.value&&("text/html"===e.value.content||"application/xhtml+xml"===e.value.content))&&(i=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&"mglyph"!==e&&"malignmark"!==e&&(i=0);else!t||1!==i||"foreignObject"!==t.tag&&"desc"!==t.tag&&"title"!==t.tag||(i=0);if(0===i){if("svg"===e)return 1;if("math"===e)return 2}return i},getTextMode({tag:e,ns:t}){if(0===t){if("textarea"===e||"title"===e)return 1;if(vc(e))return 2}return 0}},yc=e("passive,once,capture"),bc=e("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),xc=e("left,right"),wc=e("onkeyup,onkeydown,onkeypress",!0),Cc=(e,t)=>A(e)&&"onclick"===e.content.toLowerCase()?k(t,!0):4!==e.type?bs(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,Tc=(e,t)=>{1!==e.type||0!==e.tagType||"script"!==e.tag&&"style"!==e.tag||t.removeNode()},Sc=[i=>{1===i.type&&i.props.forEach((e,t)=>{6===e.type&&"style"===e.name&&e.value&&(i.props[t]={type:7,name:"bind",arg:k("style",!0,e.loc),exp:((e,t)=>{e=f(e);return k(JSON.stringify(e),!1,t,3)})(e.value.content,e.loc),modifiers:[],loc:e.loc})})}],kc={cloak:()=>({props:[]}),html:(e,t,i)=>{var{exp:e,loc:n}=e;return t.children.length&&(t.children.length=0),{props:[S(k("innerHTML",!0,n),e||k("",!0))]}},text:(e,t,i)=>{var{exp:e,loc:n}=e;return t.children.length&&(t.children.length=0),{props:[S(k("textContent",!0),e?0<P(e,i)?e:E(i.helperString(Ja),[e],n):k("",!0))]}},model:(e,n,r)=>{e=tc(e,n,r);if(e.props.length&&1!==n.tagType){var o=n["tag"],a=r.isCustomElement(o);if("input"===o||"textarea"===o||"select"===o||a){let t=lc,i=!1;if("input"===o||a){let e=Rs(n,"type");if(e){if(7===e.type)t=uc;else if(e.value)switch(e.value.content){case"radio":t=ac;break;case"checkbox":t=sc;break;case"file":i=!0}}else n.props.some(e=>!(7!==e.type||"bind"!==e.name||e.arg&&4===e.arg.type&&e.arg.isStatic))&&(t=uc)}else"select"===o&&(t=cc);i||(e.needRuntime=r.helper(t))}e.props=e.props.filter(e=>!(4===e.key.type&&"modelValue"===e.key.content))}return e},on:(o,e,a)=>Xl(o,0,a,e=>{var t=o["modifiers"];if(!t.length)return e;let{key:i,value:n}=e.props[0];var{keyModifiers:e,nonKeyModifiers:t,eventOptionModifiers:r}=((i,n)=>{var r=[],o=[],a=[];for(let t=0;t<n.length;t++){let e=n[t];(yc(e)?a:xc(e)?A(i)?wc(i.content)?r:o:(r.push(e),o):bc(e)?o:r).push(e)}return{keyModifiers:r,nonKeyModifiers:o,eventOptionModifiers:a}})(i,t);if(t.includes("right")&&(i=Cc(i,"onContextmenu")),t.includes("middle")&&(i=Cc(i,"onMouseup")),t.length&&(n=E(a.helper(dc),[n,JSON.stringify(t)])),!e.length||A(i)&&!wc(i.content)||(n=E(a.helper(hc),[n,JSON.stringify(e)])),r.length){let e=r.map(_e).join("");i=A(i)?k(""+i.content+e,!0):bs(["(",i,`) + "${e}"`])}return{props:[S(i,n)]}}),show:(e,t,i)=>({props:[],needRuntime:i.helper(pc)})},Ec=Object.create(null);function Ac(t,e){if(!L(t)){if(!t.nodeType)return X;t=t.innerHTML}var i=t,n=Ec[i];if(n)return n;if("#"===t[0]){let e=document.querySelector(t);t=e?e.innerHTML:""}[n,t={}]=[t,Y({hoistStatic:!0,onError:void 0,onWarn:X},e)],e=oc(n,Y({},_c,t,{nodeTransforms:[Tc,...Sc,...t.nodeTransforms||[]],directiveTransforms:Y({},kc,t.directiveTransforms||{}),transformHoist:null})).code,n=new Function(e)();return n._rc=!0,Ec[i]=n}return Kr(Ac),n.BaseTransition=Yi,n.Comment=se,n.EffectScope=Se,n.Fragment=ae,n.KeepAlive=ln,n.ReactiveEffect=Oe,n.Static=br,n.Suspense=Ri,n.Teleport=_r,n.Text=yr,n.Transition=Lo,n.TransitionGroup=Ko,n.VueElement=Po,n.callWithAsyncErrorHandling=ne,n.callWithErrorHandling=ti,n.camelize=te,n.capitalize=_e,n.cloneVNode=Rr,n.compatUtils=null,n.compile=Ac,n.computed=ro,n.createApp=(...e)=>{let i=xa().createApp(...e),n=i["mount"];return i.mount=e=>{var t,e=Sa(e);if(e)return t=i._component,Q(t)||t.render||t.template||(t.template=e.innerHTML),e.innerHTML="",t=n(e,!1,e instanceof SVGElement),e instanceof Element&&(e.removeAttribute("v-cloak"),e.setAttribute("data-v-app","")),t},i},n.createBlock=Er,n.createCommentVNode=function(e="",t=!1){return(t?(wr(),Er):le)(se,null,e)},n.createElementBlock=function(e,t,i,n,r,o){return kr(Lr(e,t,i,n,r,o,!0))},n.createElementVNode=Lr,n.createHydrationRenderer=ur,n.createPropsRestProxy=function(t,i){var n={};for(let e in t)i.includes(e)||Object.defineProperty(n,e,{enumerable:!0,get:()=>t[e]});return n},n.createRenderer=cr,n.createSSRApp=(...e)=>{let t=wa().createApp(...e),i=t["mount"];return t.mount=e=>{e=Sa(e);if(e)return i(e,!0,e instanceof SVGElement)},t},n.createSlots=function(t,i){for(let e=0;e<i.length;e++){var n=i[e];if(J(n))for(let e=0;e<n.length;e++)t[n[e].name]=n[e].fn;else n&&(t[n.name]=n.fn)}return t},n.createStaticVNode=function(e,t){e=le(br,null,e);return e.staticCount=t,e},n.createTextVNode=Or,n.createVNode=le,n.customRef=function(e){return new Xt(e)},n.defineAsyncComponent=function(e){let{loader:i,loadingComponent:o,errorComponent:a,delay:s=200,timeout:l,suspensible:c=!0,onError:n}=e=Q(e)?{loader:e}:e,u,d=null,r=0,h=()=>{let t;return d||(t=d=i().catch(i=>{if(i=i instanceof Error?i:new Error(String(i)),n)return new Promise((e,t)=>{n(i,()=>e((r++,d=null,h())),()=>t(i),r+1)});throw i}).then(e=>t!==d&&d?d:(e&&(e.__esModule||"Module"===e[Symbol.toStringTag])&&(e=e.default),u=e)))};return rn({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return u},setup(){let t=m;if(u)return()=>an(u,t);let i=e=>{d=null,ii(e,t,13,!a)};if(c&&t.suspense)return h().then(e=>()=>an(e,t)).catch(e=>(i(e),()=>a?le(a,{error:e}):null));let n=$t(!1),r=$t(),e=$t(!!s);return s&&setTimeout(()=>{e.value=!1},s),null!=l&&setTimeout(()=>{var e;n.value||r.value||(e=new Error(`Async component timed out after ${l}ms.`),i(e),r.value=e)},l),h().then(()=>{n.value=!0,t.parent&&sn(t.parent.vnode)&&gi(t.parent.update)}).catch(e=>{i(e),r.value=e}),()=>n.value&&u?an(u,t):r.value&&a?le(a,{error:r.value}):o&&!e.value?le(o):void 0}})},n.defineComponent=rn,n.defineCustomElement=Eo,n.defineEmits=function(){return null},n.defineExpose=function(e){},n.defineProps=function(){return null},n.defineSSRCustomElement=e=>Eo(e,Ta),n.effect=function(e,t){e.effect&&(e=e.effect.fn);e=new Oe(e),t&&(Y(e,t),t.scope)&&ke(e,t.scope),t&&t.lazy||e.run(),t=e.run.bind(e);return t.effect=e,t},n.effectScope=function(e){return new Se(e)},n.getCurrentInstance=$r,n.getCurrentScope=function(){return i},n.getTransitionRawChildren=nn,n.guardReactiveProps=zr,n.h=ao,n.handleError=ii,n.hydrate=Ta,n.initCustomFormatter=function(){},n.initDirectivesForSSR=Ea,n.inject=Ui,n.isMemoSame=lo,n.isProxy=Bt,n.isReactive=zt,n.isReadonly=Rt,n.isRef=z,n.isRuntimeOnly=()=>!Gr,n.isShallow=Ot,n.isVNode=Ar,n.markRaw=Ft,n.mergeDefaults=function(e,t){var i,n=J(e)?e.reduce((e,t)=>(e[t]={},e),{}):e;for(i in t){let e=n[i];e?J(e)||Q(e)?n[i]={type:e,default:t[i]}:e.default=t[i]:null===e&&(n[i]={default:t[i]})}return n},n.mergeProps=jr,n.nextTick=mi,n.normalizeClass=g,n.normalizeProps=function(e){var t,i;return e?({class:t,style:i}=e,t&&!L(t)&&(e.class=g(t)),i&&(e.style=s(i)),e):null},n.normalizeStyle=s,n.onActivated=un,n.onBeforeMount=vn,n.onBeforeUnmount=xn,n.onBeforeUpdate=yn,n.onDeactivated=dn,n.onErrorCaptured=kn,n.onMounted=_n,n.onRenderTracked=Sn,n.onRenderTriggered=Tn,n.onScopeDispose=function(e){i&&i.cleanups.push(e)},n.onServerPrefetch=Cn,n.onUnmounted=wn,n.onUpdated=bn,n.openBlock=wr,n.popScopeId=function(){ki=null},n.provide=Vi,n.proxyRefs=Wt,n.pushScopeId=function(e){ki=e},n.queuePostFlushCb=yi,n.reactive=Mt,n.readonly=Dt,n.ref=$t,n.registerRuntimeCompiler=Kr,n.render=Ca,n.renderList=function(n,r,e,t){let o,a=e&&e[t];if(J(n)||L(n)){o=new Array(n.length);for(let e=0,t=n.length;e<t;e++)o[e]=r(n[e],e,void 0,a&&a[e])}else if("number"==typeof n){o=new Array(n);for(let e=0;e<n;e++)o[e]=r(e+1,e,void 0,a&&a[e])}else if(ee(n))if(n[Symbol.iterator])o=Array.from(n,(e,t)=>r(e,t,void 0,a&&a[t]));else{let i=Object.keys(n);o=new Array(i.length);for(let e=0,t=i.length;e<t;e++){var s=i[e];o[e]=r(n[s],s,e,a&&a[e])}}else o=[];return e&&(e[t]=o),o},n.renderSlot=function(e,t,i={},n,r){var o,a;return l.isCE||l.parent&&on(l.parent)&&l.parent.isCE?le("slot","default"===t?null:{name:t},n&&n()):((o=e[t])&&o._c&&(o._d=!1),wr(),a=o&&function t(e){return e.some(e=>!Ar(e)||e.type!==se&&!(e.type===ae&&!t(e.children)))?e:null}(o(i)),i=Er(ae,{key:i.key||"_"+t},a||(n?n():[]),a&&1===e._?64:-2),!r&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),o&&o._c&&(o._d=!0),i)},n.resolveComponent=function(e,t){return Mn(An,e,0,t)||e},n.resolveDirective=function(e){return Mn("directives",e)},n.resolveDynamicComponent=function(e){return L(e)?Mn(An,e)||e:e||Pn},n.resolveFilter=null,n.resolveTransitionHooks=Ji,n.setBlockTracking=Sr,n.setDevtoolsHook=function t(e,i){n.devtools=e,n.devtools?(n.devtools.enabled=!0,Ti.forEach(({event:e,args:t})=>n.devtools.emit(e,...t)),Ti=[]):"undefined"==typeof window||!window.HTMLElement||null!=(e=null==(e=window.navigator)?void 0:e.userAgent)&&e.includes("jsdom")?Ti=[]:((i.__VUE_DEVTOOLS_HOOK_REPLAY__=i.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(e=>{t(e,i)}),setTimeout(()=>{n.devtools||(i.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Ti=[])},3e3))},n.setTransitionHooks=tn,n.shallowReactive=It,n.shallowReadonly=function(e){return Lt(e,!0,rt,St,Pt)},n.shallowRef=function(e){return qt(e,!0)},n.ssrContextKey=so,n.ssrUtils=null,n.stop=function(e){e.effect.stop()},n.toDisplayString=e=>L(e)?e:null==e?"":J(e)||ee(e)&&(e.toString===q||!Q(e.toString))?JSON.stringify(e,I,2):String(e),n.toHandlerKey=ye,n.toHandlers=function(e){var t,i={};for(t in e)i[ye(t)]=e[t];return i},n.toRaw=ie,n.toRef=Kt,n.toRefs=function(e){var t,i=J(e)?new Array(e.length):{};for(t in e)i[t]=Kt(e,t);return i},n.transformVNodeArgs=function(e){},n.triggerRef=function(e){Ut(e)},n.unref=Zt,n.useAttrs=function(){return oo().attrs},n.useCssModule=function(e=0){return W},n.useCssVars=function(e){let i=$r();if(i){let t=()=>function t(i,n){if(128&i.shapeFlag){let e=i.suspense;i=e.activeBranch,e.pendingBranch&&!e.isHydrating&&e.effects.push(()=>{t(e.activeBranch,n)})}for(;i.component;)i=i.component.subTree;if(1&i.shapeFlag&&i.el)Mo(i.el,n);else if(i.type===ae)i.children.forEach(e=>t(e,n));else if(i.type===br){let{el:e,anchor:t}=i;for(;e&&(Mo(e,n),e!==t);)e=e.nextSibling}}(i.subTree,e(i.proxy));$i(t),_n(()=>{let e=new MutationObserver(t);e.observe(i.subTree.el.parentNode,{childList:!0}),wn(()=>e.disconnect())})}},n.useSSRContext=()=>{},n.useSlots=function(){return oo().slots},n.useTransitionState=Xi,n.vModelCheckbox=oa,n.vModelDynamic=Ao,n.vModelRadio=sa,n.vModelSelect=la,n.vModelText=ra,n.vShow=ga,n.version=co,n.warn=function(t,...i){je();let n=Qt.length?Qt[Qt.length-1].component:null,e=n&&n.appContext.config.warnHandler,r=function(){let e=Qt[Qt.length-1];if(!e)return[];for(var t=[];e;){var i=t[0],i=(i&&i.vnode===e?i.recurseCount++:t.push({vnode:e,recurseCount:0}),e.component&&e.component.parent);e=i&&i.vnode}return t}();if(e)ti(e,n,11,[t+i.join(""),n&&n.proxy,r.map(({vnode:e})=>`at <${no(n,e.type)}>`).join("\n"),r]);else{let e=["[Vue warn]: "+t,...i];r.length&&e.push("\n",...function(){let n=[];return r.forEach((e,t)=>{var i;n.push(...0===t?[]:["\n"],...({vnode:t,recurseCount:e}=[e][0],e=0<e?`... (${e} recursive calls)`:"",i=" at <"+no(t.component,t.type,!!t.component&&null==t.component.parent),e=">"+e,t.props?[i,...ei(t.props),e]:[i+e]))}),n}()),console.warn(...e)}Ve()},n.watch=Hi,n.watchEffect=function(e,t){return Zi(e,null,t)},n.watchPostEffect=$i,n.watchSyncEffect=function(e,t){return Zi(e,null,{flush:"sync"})},n.withAsyncContext=function(e){let t=$r(),i=e();return Hr(),[i=de(i)?i.catch(e=>{throw qr(t),e}):i,()=>qr(t)]},n.withCtx=Ai,n.withDefaults=function(e,t){return null},n.withDirectives=function(e,o){var t=l;if(null!==t){var a=eo(t)||t.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<o.length;r++){let[e,t,i,n=W]=o[r];(e=Q(e)?{mounted:e,updated:e}:e).deep&&Wi(t),s.push({dir:e,instance:a,value:t,oldValue:void 0,arg:i,modifiers:n})}}return e},n.withKeys=(i,n)=>e=>{if("key"in e){let t=ve(e.key);return n.some(e=>e===t||ma[e]===t)?i(e):void 0}},n.withMemo=function(e,t,i,n){var r=i[n];return r&&lo(r,e)?r:((r=t()).memo=e.slice(),i[n]=r)},n.withModifiers=(t,n)=>(i,...e)=>{for(let t=0;t<n.length;t++){let e=fa[n[t]];if(e&&e(i,n))return}return t(i,...e)},n.withScopeId=e=>Ai,Object.defineProperty(n,"__esModule",{value:!0}),n}({});function getUserAgent(){return navigator.userAgentData?JSON.stringify(navigator.userAgentData.brands).replace(/[\[\]\{\}"]/g,""):navigator.userAgent}function isMobile(){var e,t;return navigator.userAgentData?navigator.userAgentData.mobile:(e=!1,t=navigator.userAgent||navigator.vendor||window.opera,!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))||e)}function isAndroid(){return navigator.userAgentData?"Android"===navigator.userAgentData.platform:/android/i.test(navigator.userAgent)}function isChrome(){return navigator.userAgentData?/chrome|chromium/i.test(getUserAgent()):/chrome|chromium/i.test(navigator.userAgent)}function isSafari(){return navigator.userAgentData?/safari/i.test(getUserAgent()):/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function isIos(){return navigator.userAgentData?/iphone|ipod|ipad/i.test(getUserAgent()):/iphone|ipod|ipad/i.test(navigator.userAgent)}function isIpad(){return isIos()}function isWinPhon(){return navigator.userAgentData?/Windows Phone/i.test(getUserAgent()):/Windows Phone/i.test(navigator.userAgent)}!function(h){h.tablesort=function(e,t){var i=this;this.$table=e,this.$thead=this.$table.find("thead"),this.settings=h.extend({},h.tablesort.defaults,t),this.$sortCells=(0<this.$thead.length?this.$thead:this.$table).find("th:not(.no-sort)"),this.$sortCells.on("click.tablesort",function(){i.sort(h(this))}),this.index=null,this.$th=null,this.direction=null},h.tablesort.prototype={sort:function(i,n){var r=new Date,o=this,e=this.$table,a=0<e.find("tbody").length?e.find("tbody"):e,s=a.find("tr").has("td, th"),l=s.find(":nth-child("+(i.index()+1)+")").filter("td, th"),c=i.data().sortBy,u=[],d=l.map(function(e,t){return c?"function"==typeof c?c(h(i),h(t),o):c:null!=h(this).data().sortValue?h(this).data().sortValue:h(this).text()});0!==d.length&&(this.index!==i.index()?(this.direction="asc",this.index=i.index()):this.direction="asc"!==n&&"desc"!==n?"asc"===this.direction?"desc":"asc":n,n="asc"==this.direction?1:-1,o.$table.trigger("tablesort:start",[o]),o.log("Sorting by "+this.index+" "+this.direction),o.$table.css("display"),setTimeout(function(){o.$sortCells.removeClass(o.settings.asc+" "+o.settings.desc);for(var e=0,t=d.length;e<t;e++)u.push({index:e,cell:l[e],row:s[e],value:d[e]});u.sort(function(e,t){return o.settings.compare(e.value,t.value)*n}),h.each(u,function(e,t){a.append(t.row)}),i.addClass(o.settings[o.direction]),o.log("Sort finished in "+((new Date).getTime()-r.getTime())+"ms"),o.$table.trigger("tablesort:complete",[o]),o.$table.css("display")},2e3<d.length?200:10))},log:function(e){(h.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+e)},destroy:function(){return this.$sortCells.off("click.tablesort"),this.$table.data("tablesort",null),null}},h.tablesort.DEBUG=!1,h.tablesort.defaults={debug:h.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending",compare:function(e,t){return t<e?1:e<t?-1:0}},h.fn.tablesort=function(e){var t,i;return this.each(function(){t=h(this),(i=t.data("tablesort"))&&i.destroy(),t.data("tablesort",new h.tablesort(t,e))})}}(window.Zepto||window.jQuery),window.jscolor||(window.jscolor=function(){var i,r,e,f={register:function(){f.attachDOMReadyEvent(f.init),f.attachEvent(document,"mousedown",f.onDocumentMouseDown),f.attachEvent(document,"touchstart",f.onDocumentTouchStart),f.attachEvent(window,"resize",f.onWindowResize)},init:function(){f.jscolor.lookupClass&&f.jscolor.installByClassName(f.jscolor.lookupClass)},tryInstallOnElements:function(e,t){for(var i,n=new RegExp("(^|\\s)("+t+")(\\s*(\\{[^}]*\\})|\\s|$)","i"),r=0;r<e.length;r+=1)if((void 0===e[r].type||"color"!=e[r].type.toLowerCase()||!f.isColorAttrSupported)&&!e[r].jscolor&&e[r].className&&(i=e[r].className.match(n))){var o=e[r],a=null,s=f.getDataAttr(o,"jscolor"),s=(null!==s?a=s:i[4]&&(a=i[4]),{});if(a)try{s=new Function("return ("+a+")")()}catch(e){f.warn("Error parsing jscolor options: "+e+":\n"+a)}o.jscolor=new f.jscolor(o,s)}},isColorAttrSupported:!(!(e=document.createElement("input")).setAttribute||(e.setAttribute("type","color"),"color"!=e.type.toLowerCase())),isCanvasSupported:!!(e=document.createElement("canvas")).getContext&&!!e.getContext("2d"),fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},isElementType:function(e,t){return e.nodeName.toLowerCase()===t.toLowerCase()},getDataAttr:function(e,t){e=e.getAttribute("data-"+t);return null!==e?e:null},attachEvent:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},detachEvent:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i)},_attachedGroupEvents:{},attachGroupEvent:function(e,t,i,n){f._attachedGroupEvents.hasOwnProperty(e)||(f._attachedGroupEvents[e]=[]),f._attachedGroupEvents[e].push([t,i,n]),f.attachEvent(t,i,n)},detachGroupEvents:function(e){if(f._attachedGroupEvents.hasOwnProperty(e)){for(var t=0;t<f._attachedGroupEvents[e].length;t+=1){var i=f._attachedGroupEvents[e][t];f.detachEvent(i[0],i[1],i[2])}delete f._attachedGroupEvents[e]}},attachDOMReadyEvent:function(e){function t(){n||(n=!0,e())}var i,n=!1;"complete"===document.readyState?setTimeout(t,1):document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),t())}),window.attachEvent("onload",t),document.documentElement.doScroll)&&window==window.top&&(i=function(){if(document.body)try{document.documentElement.doScroll("left"),t()}catch(e){setTimeout(i,1)}})()},warn:function(e){window.console&&window.console.warn&&window.console.warn(e)},preventDefault:function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1},captureTarget:function(e){e.setCapture&&(f._capturedTarget=e,f._capturedTarget.setCapture())},releaseTarget:function(){f._capturedTarget&&(f._capturedTarget.releaseCapture(),f._capturedTarget=null)},fireEvent:function(e,t){var i;e&&(document.createEvent?((i=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(i)):document.createEventObject?(i=document.createEventObject(),e.fireEvent("on"+t,i)):e["on"+t]&&e["on"+t]())},classNameToList:function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s+/)},hasClass:function(e,t){return!!t&&-1!=(" "+e.className.replace(/\s+/g," ")+" ").indexOf(" "+t+" ")},setClass:function(e,t){for(var i=f.classNameToList(t),n=0;n<i.length;n+=1)f.hasClass(e,i[n])||(e.className+=(e.className?" ":"")+i[n])},unsetClass:function(e,t){for(var i=f.classNameToList(t),n=0;n<i.length;n+=1){var r=new RegExp("^\\s*"+i[n]+"\\s*|\\s*"+i[n]+"\\s*$|\\s+"+i[n]+"(\\s+)","g");e.className=e.className.replace(r,"$1")}},getStyle:function(e){return window.getComputedStyle?window.getComputedStyle(e):e.currentStyle},setStyle:(i=document.createElement("div"),function(e,t,i){var n;"opacity"===t.toLowerCase()?(n=Math.round(100*parseFloat(i)),e.style.opacity=i,e.style.filter="alpha(opacity="+n+")"):e.style[r[t]]=i}),setBorderRadius:function(e,t){f.setStyle(e,"borderRadius",t||"0")},setBoxShadow:function(e,t){f.setStyle(e,"boxShadow",t||"none")},getElementPos:function(e,t){var i=0,n=0,e=e.getBoundingClientRect(),i=e.left,n=e.top;return t||(i+=(e=f.getViewPos())[0],n+=e[1]),[i,n]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getAbsPointerPos:function(e){var t=0,i=0;return void 0!==(e=e||window.event).changedTouches&&e.changedTouches.length?(t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):"number"==typeof e.clientX&&(t=e.clientX,i=e.clientY),{x:t,y:i}},getRelPointerPos:function(e){var t=((e=e||window.event).target||e.srcElement).getBoundingClientRect(),i=0,n=0;return void 0!==e.changedTouches&&e.changedTouches.length?(i=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY):"number"==typeof e.clientX&&(i=e.clientX,n=e.clientY),{x:i-t.left,y:n-t.top}},getViewPos:function(){var e=document.documentElement;return[(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),(window.pageYOffset||e.scrollTop)-(e.clientTop||0)]},getViewSize:function(){var e=document.documentElement;return[window.innerWidth||e.clientWidth,window.innerHeight||e.clientHeight]},redrawPosition:function(){if(f.picker&&f.picker.owner){var e,t,i,n,r=f.picker.owner,o=r.fixed?(e=f.getElementPos(r.targetElement,!0),[0,0]):(e=f.getElementPos(r.targetElement),f.getViewPos()),a=f.getElementSize(r.targetElement),s=f.getViewSize(),l=f.getPickerOuterDims(r);switch(r.position.toLowerCase()){case"left":i=0,n=-(t=1);break;case"right":i=0,n=t=1;break;case"top":t=0,n=-(i=1);break;default:t=0,n=i=1}var c=(a[i]+l[i])/2,s=(o=r.smartPosition?[-o[t]+e[t]+l[t]>s[t]&&-o[t]+e[t]+a[t]/2>s[t]/2&&0<=e[t]+a[t]-l[t]?e[t]+a[t]-l[t]:e[t],-o[i]+e[i]+a[i]+l[i]-c+c*n>s[i]?-o[i]+e[i]+a[i]/2>s[i]/2&&0<=e[i]+a[i]-c-c*n?e[i]+a[i]-c-c*n:e[i]+a[i]-c+c*n:0<=e[i]+a[i]-c+c*n?e[i]+a[i]-c+c*n:e[i]+a[i]-c-c*n]:[e[t],e[i]+a[i]-c+c*n])[t],c=o[i],u=r.fixed?"fixed":"absolute",o=(o[0]+l[0]>e[0]||o[0]<e[0]+a[0])&&o[1]+l[1]<e[1]+a[1];f._drawPosition(r,s,c,u,o)}},_drawPosition:function(e,t,i,n,r){r=r?0:e.shadowBlur;f.picker.wrap.style.position=n,f.picker.wrap.style.left=t+"px",f.picker.wrap.style.top=i+"px",f.setBoxShadow(f.picker.boxS,e.shadow?new f.BoxShadow(0,r,e.shadowBlur,0,e.shadowColor):null)},getPickerDims:function(e){var t=!!f.getSliderComponent(e);return[2*e.insetWidth+2*e.padding+e.width+(t?2*e.insetWidth+f.getPadToSliderPadding(e)+e.sliderSize:0),2*e.insetWidth+2*e.padding+e.height+(e.closable?2*e.insetWidth+e.padding+e.buttonHeight:0)]},getPickerOuterDims:function(e){var t=f.getPickerDims(e);return[t[0]+2*e.borderWidth,t[1]+2*e.borderWidth]},getPadToSliderPadding:function(e){return Math.max(e.padding,1.5*(2*e.pointerBorderWidth+e.pointerThickness))},getPadYComponent:function(e){return"v"===e.mode.charAt(1).toLowerCase()?"v":"s"},getSliderComponent:function(e){if(2<e.mode.length)switch(e.mode.charAt(2).toLowerCase()){case"s":return"s";case"v":return"v"}return null},onDocumentMouseDown:function(e){var t=(e=e||window.event).target||e.srcElement;t._jscLinkedInstance?t._jscLinkedInstance.showOnClick&&t._jscLinkedInstance.show():t._jscControlName?f.onControlPointerStart(e,t,t._jscControlName,"mouse"):f.picker&&f.picker.owner&&f.picker.owner.hide()},onDocumentTouchStart:function(e){var t=(e=e||window.event).target||e.srcElement;t._jscLinkedInstance?t._jscLinkedInstance.showOnClick&&t._jscLinkedInstance.show():t._jscControlName?f.onControlPointerStart(e,t,t._jscControlName,"touch"):f.picker&&f.picker.owner&&f.picker.owner.hide()},onWindowResize:function(e){f.redrawPosition()},onParentScroll:function(e){f.picker&&f.picker.owner&&f.picker.owner.hide()},_pointerMoveEvent:{mouse:"mousemove",touch:"touchmove"},_pointerEndEvent:{mouse:"mouseup",touch:"touchend"},_pointerOrigin:null,_capturedTarget:null,onControlPointerStart:function(i,n,r,o){function e(e,t){f.attachGroupEvent("drag",e,f._pointerMoveEvent[o],f.onDocumentPointerMove(i,n,r,o,t)),f.attachGroupEvent("drag",e,f._pointerEndEvent[o],f.onDocumentPointerEnd(i,n,r,o))}var t=n._jscInstance,a=(f.preventDefault(i),f.captureTarget(n),e(document,[0,0]),window.parent&&window.frameElement&&(a=[-(a=window.frameElement.getBoundingClientRect()).left,-a.top],e(window.parent.window.document,a)),f.getAbsPointerPos(i)),s=f.getRelPointerPos(i);switch(f._pointerOrigin={x:a.x-s.x,y:a.y-s.y},r){case"pad":switch(f.getSliderComponent(t)){case"s":0===t.hsv[1]&&t.fromHSV(null,100,null);break;case"v":0===t.hsv[2]&&t.fromHSV(null,null,100)}f.setPad(t,i,0,0);break;case"sld":f.setSld(t,i,0)}f.dispatchFineChange(t)},onDocumentPointerMove:function(e,i,n,t,r){return function(e){var t=i._jscInstance;switch(n){case"pad":e=e||window.event,f.setPad(t,e,r[0],r[1]),f.dispatchFineChange(t);break;case"sld":e=e||window.event,f.setSld(t,e,r[1]),f.dispatchFineChange(t)}}},onDocumentPointerEnd:function(e,i,t,n){return function(e){var t=i._jscInstance;f.detachGroupEvents("drag"),f.releaseTarget(),f.dispatchChange(t)}},dispatchChange:function(e){e.valueElement&&f.isElementType(e.valueElement,"input")&&f.fireEvent(e.valueElement,"change")},dispatchFineChange:function(e){e.onFineChange&&("string"==typeof e.onFineChange?new Function(e.onFineChange):e.onFineChange).call(e)},setPad:function(e,t,i,n){var t=f.getAbsPointerPos(t),i=i+t.x-f._pointerOrigin.x-e.padding-e.insetWidth,n=n+t.y-f._pointerOrigin.y-e.padding-e.insetWidth,r=i*(360/(e.width-1)),o=100-n*(100/(e.height-1));switch(f.getPadYComponent(e)){case"s":e.fromHSV(r,o,null,f.leaveSld);break;case"v":e.fromHSV(r,null,o,f.leaveSld)}},setSld:function(e,t,i){var n=100-(i+f.getAbsPointerPos(t).y-f._pointerOrigin.y-e.padding-e.insetWidth)*(100/(e.height-1));switch(f.getSliderComponent(e)){case"s":e.fromHSV(null,n,null,f.leavePad);break;case"v":e.fromHSV(null,null,n,f.leavePad)}},_vmlNS:"jsc_vml_",_vmlCSS:"jsc_vml_css_",_vmlReady:!(r={borderRadius:n(["borderRadius","MozBorderRadius","webkitBorderRadius"]),boxShadow:n(["boxShadow","MozBoxShadow","webkitBoxShadow"])}),initVML:function(){if(!f._vmlReady){var e=document;if(e.namespaces[f._vmlNS]||e.namespaces.add(f._vmlNS,"urn:schemas-microsoft-com:vml"),!e.styleSheets[f._vmlCSS]){var t=["shape","shapetype","group","background","path","formulas","handles","fill","stroke","shadow","textbox","textpath","imagedata","line","polyline","curve","rect","roundrect","oval","arc","image"],i=e.createStyleSheet();i.owningElement.id=f._vmlCSS;for(var n=0;n<t.length;n+=1)i.addRule(f._vmlNS+"\\:"+t[n],"behavior:url(#default#VML);")}f._vmlReady=!0}},createPalette:function(){var r,o,n,a,s,l,c,e,t={elm:null,draw:null};return f.isCanvasSupported?(r=document.createElement("canvas"),o=r.getContext("2d"),e=function(e,t,i){r.width=e,r.height=t,o.clearRect(0,0,r.width,r.height);var e=o.createLinearGradient(0,0,r.width,0),n=(e.addColorStop(0,"#F00"),e.addColorStop(1/6,"#FF0"),e.addColorStop(2/6,"#0F0"),e.addColorStop(.5,"#0FF"),e.addColorStop(4/6,"#00F"),e.addColorStop(5/6,"#F0F"),e.addColorStop(1,"#F00"),o.fillStyle=e,o.fillRect(0,0,r.width,r.height),o.createLinearGradient(0,0,0,r.height));switch(i.toLowerCase()){case"s":n.addColorStop(0,"rgba(255,255,255,0)"),n.addColorStop(1,"rgba(255,255,255,1)");break;case"v":n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)")}o.fillStyle=n,o.fillRect(0,0,r.width,r.height)},t.elm=r):(f.initVML(),(n=document.createElement("div")).style.position="relative",n.style.overflow="hidden",(a=document.createElement(f._vmlNS+":fill")).type="gradient",a.method="linear",a.angle="90",a.colors="16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0",(s=document.createElement(f._vmlNS+":rect")).style.position="absolute",s.style.left="-1px",s.style.top="-1px",s.stroked=!1,s.appendChild(a),n.appendChild(s),(l=document.createElement(f._vmlNS+":fill")).type="gradient",l.method="linear",l.angle="180",l.opacity="0",(c=document.createElement(f._vmlNS+":rect")).style.position="absolute",c.style.left="-1px",c.style.top="-1px",c.stroked=!1,c.appendChild(l),n.appendChild(c),e=function(e,t,i){switch(n.style.width=e+"px",n.style.height=t+"px",s.style.width=c.style.width=e+1+"px",s.style.height=c.style.height=t+1+"px",a.color="#F00",a.color2="#F00",i.toLowerCase()){case"s":l.color=l.color2="#FFF";break;case"v":l.color=l.color2="#000"}},t.elm=n),t.draw=e,t},createSliderGradient:function(){var r,o,a,s,l,e,t={elm:null,draw:null};return f.isCanvasSupported?(r=document.createElement("canvas"),o=r.getContext("2d"),e=function(e,t,i,n){r.width=e,r.height=t,o.clearRect(0,0,r.width,r.height);e=o.createLinearGradient(0,0,0,r.height);e.addColorStop(0,i),e.addColorStop(1,n),o.fillStyle=e,o.fillRect(0,0,r.width,r.height)},t.elm=r):(f.initVML(),(a=document.createElement("div")).style.position="relative",a.style.overflow="hidden",(s=document.createElement(f._vmlNS+":fill")).type="gradient",s.method="linear",s.angle="180",(l=document.createElement(f._vmlNS+":rect")).style.position="absolute",l.style.left="-1px",l.style.top="-1px",l.stroked=!1,l.appendChild(s),a.appendChild(l),e=function(e,t,i,n){a.style.width=e+"px",a.style.height=t+"px",l.style.width=e+1+"px",l.style.height=t+1+"px",s.color=i,s.color2=n},t.elm=a),t.draw=e,t},leaveValue:1,leaveStyle:2,leavePad:4,leaveSld:8,BoxShadow:(t.prototype.toString=function(){var e=[Math.round(this.hShadow)+"px",Math.round(this.vShadow)+"px",Math.round(this.blur)+"px",Math.round(this.spread)+"px",this.color];return this.inset&&e.push("inset"),e.join(" ")},t),jscolor:function(e,t){function s(e,t,i){var n=i/100*255;if(null===e)return[n,n,n];e/=60,t/=100;var i=Math.floor(e),r=n*(1-t),o=n*(1-t*(i%2?e-i:1-(e-i)));switch(i){case 6:case 0:return[n,o,r];case 1:return[o,n,r];case 2:return[r,n,o];case 3:return[r,o,n];case 4:return[o,r,n];case 5:return[n,r,o]}}function i(){c._processParentElementsInDOM(),f.picker||(f.picker={owner:null,wrap:document.createElement("div"),box:document.createElement("div"),boxS:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),padPal:f.createPalette(),cross:document.createElement("div"),crossBY:document.createElement("div"),crossBX:document.createElement("div"),crossLY:document.createElement("div"),crossLX:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),sldGrad:f.createSliderGradient(),sldPtrS:document.createElement("div"),sldPtrIB:document.createElement("div"),sldPtrMB:document.createElement("div"),sldPtrOB:document.createElement("div"),btn:document.createElement("div"),btnT:document.createElement("span")},f.picker.pad.appendChild(f.picker.padPal.elm),f.picker.padB.appendChild(f.picker.pad),f.picker.cross.appendChild(f.picker.crossBY),f.picker.cross.appendChild(f.picker.crossBX),f.picker.cross.appendChild(f.picker.crossLY),f.picker.cross.appendChild(f.picker.crossLX),f.picker.padB.appendChild(f.picker.cross),f.picker.box.appendChild(f.picker.padB),f.picker.box.appendChild(f.picker.padM),f.picker.sld.appendChild(f.picker.sldGrad.elm),f.picker.sldB.appendChild(f.picker.sld),f.picker.sldB.appendChild(f.picker.sldPtrOB),f.picker.sldPtrOB.appendChild(f.picker.sldPtrMB),f.picker.sldPtrMB.appendChild(f.picker.sldPtrIB),f.picker.sldPtrIB.appendChild(f.picker.sldPtrS),f.picker.box.appendChild(f.picker.sldB),f.picker.box.appendChild(f.picker.sldM),f.picker.btn.appendChild(f.picker.btnT),f.picker.box.appendChild(f.picker.btn),f.picker.boxB.appendChild(f.picker.box),f.picker.wrap.appendChild(f.picker.boxS),f.picker.wrap.appendChild(f.picker.boxB));var t=f.picker,e=!!f.getSliderComponent(c),i=f.getPickerDims(c),n=2*c.pointerBorderWidth+c.pointerThickness+2*c.crossSize,r=f.getPadToSliderPadding(c),o=Math.min(c.borderRadius,Math.round(c.padding*Math.PI));t.wrap.style.clear="both",t.wrap.style.width=i[0]+2*c.borderWidth+"px",t.wrap.style.height=i[1]+2*c.borderWidth+"px",t.wrap.style.zIndex=c.zIndex,t.box.style.width=i[0]+"px",t.box.style.height=i[1]+"px",t.boxS.style.position="absolute",t.boxS.style.left="0",t.boxS.style.top="0",t.boxS.style.width="100%",t.boxS.style.height="100%",f.setBorderRadius(t.boxS,o+"px"),t.boxB.style.position="relative",t.boxB.style.border=c.borderWidth+"px solid",t.boxB.style.borderColor=c.borderColor,t.boxB.style.background=c.backgroundColor,f.setBorderRadius(t.boxB,o+"px"),t.padM.style.background=t.sldM.style.background="#FFF",f.setStyle(t.padM,"opacity","0"),f.setStyle(t.sldM,"opacity","0"),t.pad.style.position="relative",t.pad.style.width=c.width+"px",t.pad.style.height=c.height+"px",t.padPal.draw(c.width,c.height,f.getPadYComponent(c)),t.padB.style.position="absolute",t.padB.style.left=c.padding+"px",t.padB.style.top=c.padding+"px",t.padB.style.border=c.insetWidth+"px solid",t.padB.style.borderColor=c.insetColor,t.padM._jscInstance=c,t.padM._jscControlName="pad",t.padM.style.position="absolute",t.padM.style.left="0",t.padM.style.top="0",t.padM.style.width=c.padding+2*c.insetWidth+c.width+r/2+"px",t.padM.style.height=i[1]+"px",t.padM.style.cursor="crosshair",t.cross.style.position="absolute",t.cross.style.left=t.cross.style.top="0",t.cross.style.width=t.cross.style.height=n+"px",t.crossBY.style.position=t.crossBX.style.position="absolute",t.crossBY.style.background=t.crossBX.style.background=c.pointerBorderColor,t.crossBY.style.width=t.crossBX.style.height=2*c.pointerBorderWidth+c.pointerThickness+"px",t.crossBY.style.height=t.crossBX.style.width=n+"px",t.crossBY.style.left=t.crossBX.style.top=Math.floor(n/2)-Math.floor(c.pointerThickness/2)-c.pointerBorderWidth+"px",t.crossBY.style.top=t.crossBX.style.left="0",t.crossLY.style.position=t.crossLX.style.position="absolute",t.crossLY.style.background=t.crossLX.style.background=c.pointerColor,t.crossLY.style.height=t.crossLX.style.width=n-2*c.pointerBorderWidth+"px",t.crossLY.style.width=t.crossLX.style.height=c.pointerThickness+"px",t.crossLY.style.left=t.crossLX.style.top=Math.floor(n/2)-Math.floor(c.pointerThickness/2)+"px",t.crossLY.style.top=t.crossLX.style.left=c.pointerBorderWidth+"px",t.sld.style.overflow="hidden",t.sld.style.width=c.sliderSize+"px",t.sld.style.height=c.height+"px",t.sldGrad.draw(c.sliderSize,c.height,"#000","#000"),t.sldB.style.display=e?"block":"none",t.sldB.style.position="absolute",t.sldB.style.right=c.padding+"px",t.sldB.style.top=c.padding+"px",t.sldB.style.border=c.insetWidth+"px solid",t.sldB.style.borderColor=c.insetColor,t.sldM._jscInstance=c,t.sldM._jscControlName="sld",t.sldM.style.display=e?"block":"none",t.sldM.style.position="absolute",t.sldM.style.right="0",t.sldM.style.top="0",t.sldM.style.width=c.sliderSize+r/2+c.padding+2*c.insetWidth+"px",t.sldM.style.height=i[1]+"px",t.sldM.style.cursor="default",t.sldPtrIB.style.border=t.sldPtrOB.style.border=c.pointerBorderWidth+"px solid "+c.pointerBorderColor,t.sldPtrOB.style.position="absolute",t.sldPtrOB.style.left=-(2*c.pointerBorderWidth+c.pointerThickness)+"px",t.sldPtrOB.style.top="0",t.sldPtrMB.style.border=c.pointerThickness+"px solid "+c.pointerColor,t.sldPtrS.style.width=c.sliderSize+"px",t.sldPtrS.style.height=d+"px",t.btn.style.display=c.closable?"block":"none",t.btn.style.position="absolute",t.btn.style.left=c.padding+"px",t.btn.style.bottom=c.padding+"px",t.btn.style.padding="0 15px",t.btn.style.height=c.buttonHeight+"px",t.btn.style.border=c.insetWidth+"px solid",o=(o=c.insetColor.split(/\s+/)).length<2?o[0]:o[1]+" "+o[0]+" "+o[0]+" "+o[1],t.btn.style.borderColor=o,t.btn.style.color=c.buttonColor,t.btn.style.font="12px sans-serif",t.btn.style.textAlign="center";try{t.btn.style.cursor="pointer"}catch(e){t.btn.style.cursor="hand"}t.btn.onmousedown=function(){c.hide()},t.btnT.style.lineHeight=c.buttonHeight+"px",t.btnT.innerHTML="",t.btnT.appendChild(document.createTextNode(c.closeText)),a(),l(),f.picker.owner&&f.picker.owner!==c&&f.unsetClass(f.picker.owner.targetElement,c.activeClass),f.picker.owner=c,f.isElementType(u,"body")?f.redrawPosition():f._drawPosition(c,0,0,"relative",!1),t.wrap.parentNode!=u&&u.appendChild(t.wrap),f.setClass(c.targetElement,c.activeClass)}function a(){switch(f.getPadYComponent(c)){case"s":var e=1;break;case"v":e=2}var t=Math.round(c.hsv[0]/360*(c.width-1)),i=Math.round((1-c.hsv[e]/100)*(c.height-1)),n=2*c.pointerBorderWidth+c.pointerThickness+2*c.crossSize,n=-Math.floor(n/2);switch(f.picker.cross.style.left=t+n+"px",f.picker.cross.style.top=i+n+"px",f.getSliderComponent(c)){case"s":var r=s(c.hsv[0],100,c.hsv[2]),o=s(c.hsv[0],0,c.hsv[2]),r="rgb("+Math.round(r[0])+","+Math.round(r[1])+","+Math.round(r[2])+")",o="rgb("+Math.round(o[0])+","+Math.round(o[1])+","+Math.round(o[2])+")";f.picker.sldGrad.draw(c.sliderSize,c.height,r,o);break;case"v":var a=s(c.hsv[0],c.hsv[1],100),r="rgb("+Math.round(a[0])+","+Math.round(a[1])+","+Math.round(a[2])+")",o="#000";f.picker.sldGrad.draw(c.sliderSize,c.height,r,o)}}function l(){var e=f.getSliderComponent(c);if(e){switch(e){case"s":var t=1;break;case"v":t=2}e=Math.round((1-c.hsv[t]/100)*(c.height-1));f.picker.sldPtrOB.style.top=e-(2*c.pointerBorderWidth+c.pointerThickness)-Math.floor(d/2)+"px"}}function n(){return f.picker&&f.picker.owner===c}for(var r in this.value=null,this.valueElement=e,this.styleElement=e,this.required=!0,this.refine=!0,this.hash=!1,this.uppercase=!0,this.onFineChange=null,this.activeClass="jscolor-active",this.minS=0,this.maxS=100,this.minV=0,this.maxV=100,this.hsv=[0,0,100],this.rgb=[255,255,255],this.width=181,this.height=101,this.showOnClick=!0,this.mode="HSV",this.position="bottom",this.smartPosition=!0,this.sliderSize=16,this.crossSize=8,this.closable=!1,this.closeText="Close",this.buttonColor="#000000",this.buttonHeight=18,this.padding=12,this.backgroundColor="#FFFFFF",this.borderWidth=1,this.borderColor="#BBBBBB",this.borderRadius=8,this.insetWidth=1,this.insetColor="#BBBBBB",this.shadow=!0,this.shadowBlur=15,this.shadowColor="rgba(0,0,0,0.2)",this.pointerColor="#4C4C4C",this.pointerBorderColor="#FFFFFF",this.pointerBorderWidth=1,this.pointerThickness=2,this.zIndex=1e3,this.container=null,t)t.hasOwnProperty(r)&&(this[r]=t[r]);var o,c,u,d,h,p;this.hide=function(){n()&&(f.unsetClass(c.targetElement,c.activeClass),f.picker.wrap.parentNode.removeChild(f.picker.wrap),delete f.picker.owner)},this.show=function(){i()},this.redraw=function(){n()&&i()},this.importColor=function(){this.valueElement&&f.isElementType(this.valueElement,"input")?this.refine?!this.required&&/^\s*$/.test(this.valueElement.value)?(this.valueElement.value="",this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(f.leaveValue|f.leaveStyle)):this.fromString(this.valueElement.value)||this.exportColor():this.fromString(this.valueElement.value,f.leaveValue)||(this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(f.leaveValue|f.leaveStyle)):this.exportColor()},this.exportColor=function(e){var t;e&f.leaveValue||!this.valueElement||(t=this.toString(),this.uppercase&&(t=t.toUpperCase()),this.hash&&(t="#"+t),f.isElementType(this.valueElement,"input")?this.valueElement.value=t:this.valueElement.innerHTML=t),e&f.leaveStyle||this.styleElement&&(this.styleElement.style.backgroundImage="none",this.styleElement.style.backgroundColor="#"+this.toString(),this.styleElement.style.color=this.isLight()?"#000":"#FFF"),e&f.leavePad||!n()||a(),e&f.leaveSld||!n()||l()},this.fromHSV=function(e,t,i,n){if(null!==e){if(isNaN(e))return!1;e=Math.max(0,Math.min(360,e))}if(null!==t){if(isNaN(t))return!1;t=Math.max(0,Math.min(100,this.maxS,t),this.minS)}if(null!==i){if(isNaN(i))return!1;i=Math.max(0,Math.min(100,this.maxV,i),this.minV)}this.rgb=s(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===i?this.hsv[2]:this.hsv[2]=i),this.exportColor(n)},this.fromRGB=function(e,t,i,n){if(null!==e){if(isNaN(e))return!1;e=Math.max(0,Math.min(255,e))}if(null!==t){if(isNaN(t))return!1;t=Math.max(0,Math.min(255,t))}if(null!==i){if(isNaN(i))return!1;i=Math.max(0,Math.min(255,i))}e=null===e?this.rgb[0]:e,t=null===t?this.rgb[1]:t,i=null===i?this.rgb[2]:i,e/=255,t/=255,i/=255,r=Math.min(Math.min(e,t),i),o=Math.max(Math.max(e,t),i);var r,o,a,i=0==(a=o-r)?[null,0,100*o]:[60*(6==(r=e===r?3+(i-t)/a:t===r?5+(e-i)/a:1+(t-e)/a)?0:r),a/o*100,100*o],t=(null!==i[0]&&(this.hsv[0]=Math.max(0,Math.min(360,i[0]))),0!==i[2]&&(this.hsv[1]=null===i[1]?null:Math.max(0,this.minS,Math.min(100,this.maxS,i[1]))),this.hsv[2]=null===i[2]?null:Math.max(0,this.minV,Math.min(100,this.maxV,i[2])),s(this.hsv[0],this.hsv[1],this.hsv[2]));this.rgb[0]=t[0],this.rgb[1]=t[1],this.rgb[2]=t[2],this.exportColor(n)},this.fromString=function(e,t){if(r=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i))return 6===r[1].length?this.fromRGB(parseInt(r[1].substr(0,2),16),parseInt(r[1].substr(2,2),16),parseInt(r[1].substr(4,2),16),t):this.fromRGB(parseInt(r[1].charAt(0)+r[1].charAt(0),16),parseInt(r[1].charAt(1)+r[1].charAt(1),16),parseInt(r[1].charAt(2)+r[1].charAt(2),16),t),!0;if(r=e.match(/^\W*rgba?\(([^)]*)\)\W*$/i)){var i,n,e=r[1].split(","),r=/^\s*(\d*)(\.\d+)?\s*$/;if(3<=e.length&&(i=e[0].match(r))&&(n=e[1].match(r))&&(e=e[2].match(r)))return r=parseFloat((i[1]||"0")+(i[2]||"")),i=parseFloat((n[1]||"0")+(n[2]||"")),n=parseFloat((e[1]||"0")+(e[2]||"")),this.fromRGB(r,i,n,t),!0}return!1},this.toString=function(){return(256|Math.round(this.rgb[0])).toString(16).substr(1)+(256|Math.round(this.rgb[1])).toString(16).substr(1)+(256|Math.round(this.rgb[2])).toString(16).substr(1)},this.toHEXString=function(){return"#"+this.toString().toUpperCase()},this.toRGBString=function(){return"rgb("+Math.round(this.rgb[0])+","+Math.round(this.rgb[1])+","+Math.round(this.rgb[2])+")"},this.isLight=function(){return 127.5<.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]},this._processParentElementsInDOM=function(){if(!this._linkedElementsProcessed){this._linkedElementsProcessed=!0;var e=this.targetElement;do{var t=f.getStyle(e)}while(t&&"fixed"===t.position.toLowerCase()&&(this.fixed=!0),e===this.targetElement||e._jscEventsAttached||(f.attachEvent(e,"scroll",f.onParentScroll),e._jscEventsAttached=!0),(e=e.parentNode)&&!f.isElementType(e,"body"))}},"string"==typeof e?(o=e,(p=document.getElementById(o))?this.targetElement=p:f.warn("Could not find target element with ID '"+o+"'")):e?this.targetElement=e:f.warn("Invalid target element: '"+e+"'"),this.targetElement._jscLinkedInstance?f.warn("Cannot link jscolor twice to the same element. Skipping."):((this.targetElement._jscLinkedInstance=this).valueElement=f.fetchElement(this.valueElement),this.styleElement=f.fetchElement(this.styleElement),u=(c=this).container?f.fetchElement(this.container):document.getElementsByTagName("body")[0],d=3,f.isElementType(this.targetElement,"button")&&(this.targetElement.onclick?(h=this.targetElement.onclick,this.targetElement.onclick=function(e){return h.call(this,e),!1}):this.targetElement.onclick=function(){return!1}),this.valueElement&&f.isElementType(this.valueElement,"input")&&(f.attachEvent(this.valueElement,"keyup",p=function(){c.fromString(c.valueElement.value,f.leaveValue),f.dispatchFineChange(c)}),f.attachEvent(this.valueElement,"input",p),f.attachEvent(this.valueElement,"blur",function(){c.importColor()}),this.valueElement.setAttribute("autocomplete","off")),this.styleElement&&(this.styleElement._jscOrigStyle={backgroundImage:this.styleElement.style.backgroundImage,backgroundColor:this.styleElement.style.backgroundColor,color:this.styleElement.style.color}),this.value?this.fromString(this.value)||this.exportColor():this.importColor())}};function t(e,t,i,n,r,o){this.hShadow=e,this.vShadow=t,this.blur=i,this.spread=n,this.color=r,this.inset=!!o}function n(e){for(var t=0;t<e.length;t+=1)if(e[t]in i.style)return e[t]}return f.jscolor.lookupClass="jscolor",f.jscolor.installByClassName=function(e){var t=document.getElementsByTagName("input"),i=document.getElementsByTagName("button");f.tryInstallOnElements(t,e),f.tryInstallOnElements(i,e)},f.register(),f.jscolor}()),!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(r,e,t,i){function o(){return a.length?a[a.length-1]:null}function n(){for(var e=!1,t=a.length-1;0<=t;t--)a[t].$blocker&&(a[t].$blocker.toggleClass("current",!e).toggleClass("behind",e),e=!0)}var a=[];r.modal=function(i,e){var n;if(this.$body=r("body"),this.options=r.extend({},r.modal.defaults,e),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),this.$blocker=null,this.options.closeExisting)for(;r.modal.isActive();)r.modal.close();if(a.push(this),i.is("a"))if(e=i.attr("href"),this.anchor=i,/^#/.test(e)){if(this.$elm=r(e),1!==this.$elm.length)return null;this.$body.append(this.$elm),this.open()}else this.$elm=r("<div>"),this.$body.append(this.$elm),n=function(e,t){t.elm.remove()},this.showSpinner(),i.trigger(r.modal.AJAX_SEND),r.get(e).done(function(e){var t;r.modal.isActive()&&(i.trigger(r.modal.AJAX_SUCCESS),(t=o()).$elm.empty().append(e).on(r.modal.CLOSE,n),t.hideSpinner(),t.open(),i.trigger(r.modal.AJAX_COMPLETE))}).fail(function(){i.trigger(r.modal.AJAX_FAIL),o().hideSpinner(),a.pop(),i.trigger(r.modal.AJAX_COMPLETE)});else this.$elm=i,this.anchor=i,this.$body.append(this.$elm),this.open()},r.modal.prototype={constructor:r.modal,open:function(){var e=this;this.block(),this.anchor.blur(),this.options.doFade?setTimeout(function(){e.show()},this.options.fadeDuration*this.options.fadeDelay):this.show(),r(t).off("keydown.modal").on("keydown.modal",function(e){var t=o();27===e.which&&t.options.escapeClose&&t.close()}),this.options.clickClose&&this.$blocker.click(function(e){e.target===this&&r.modal.close()})},close:function(){a.pop(),this.unblock(),this.hide(),r.modal.isActive()||r(t).off("keydown.modal")},block:function(){this.$elm.trigger(r.modal.BEFORE_BLOCK,[this._ctx()]),this.$body.css("overflow","hidden"),this.$blocker=r('<div class="'+this.options.blockerClass+' blocker current"></div>').appendTo(this.$body),n(),this.options.doFade&&this.$blocker.css("opacity",0).animate({opacity:1},this.options.fadeDuration),this.$elm.trigger(r.modal.BLOCK,[this._ctx()])},unblock:function(e){!e&&this.options.doFade?this.$blocker.fadeOut(this.options.fadeDuration,this.unblock.bind(this,!0)):(this.$blocker.children().appendTo(this.$body),this.$blocker.remove(),this.$blocker=null,n(),r.modal.isActive()||this.$body.css("overflow",""))},show:function(){this.$elm.trigger(r.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=r('<a href="#close-modal" rel="modal:close" class="close-modal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass).appendTo(this.$blocker),this.options.doFade?this.$elm.css({opacity:0,display:"inline-block"}).animate({opacity:1},this.options.fadeDuration):this.$elm.css("display","inline-block"),this.$elm.trigger(r.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(r.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove();var e=this;this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration,function(){e.$elm.trigger(r.modal.AFTER_CLOSE,[e._ctx()])}):this.$elm.hide(0,function(){e.$elm.trigger(r.modal.AFTER_CLOSE,[e._ctx()])}),this.$elm.trigger(r.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||r('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},_ctx:function(){return{elm:this.$elm,$elm:this.$elm,$blocker:this.$blocker,options:this.options,$anchor:this.anchor}}},r.modal.close=function(e){if(r.modal.isActive())return e&&e.preventDefault(),(e=o()).close(),e.$elm},r.modal.isActive=function(){return 0<a.length},r.modal.getCurrent=o,r.modal.defaults={closeExisting:!0,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",modalClass:"modal",blockerClass:"jquery-modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1},r.modal.BEFORE_BLOCK="modal:before-block",r.modal.BLOCK="modal:block",r.modal.BEFORE_OPEN="modal:before-open",r.modal.OPEN="modal:open",r.modal.BEFORE_CLOSE="modal:before-close",r.modal.CLOSE="modal:close",r.modal.AFTER_CLOSE="modal:after-close",r.modal.AJAX_SEND="modal:ajax:send",r.modal.AJAX_SUCCESS="modal:ajax:success",r.modal.AJAX_FAIL="modal:ajax:fail",r.modal.AJAX_COMPLETE="modal:ajax:complete",r.fn.modal=function(e){return 1===this.length&&new r.modal(this,e),this},r(t).on("click.modal",'a[rel~="modal:close"]',r.modal.close),r(t).on("click.modal",'a[rel~="modal:open"]',function(e){e.preventDefault(),r(this).modal()})});var test_latlng=null,autoupdate="",autoupdate_force=0,BUS_ID="",STOP_IDS=[],STOP_IDS_SUBS=[],STOP_DESTINATION_IDS=[],NEAREST_STOPS=[],BUS_SIDE_IMG="/static/img/side_bus_original.png",CAT_IMG="/static/img/cat-male.png",CAT_SYM="fa-user",CAT_IMG_OLD,CAT_SYM_OLD,BUS_VOICE_ANOUNCE=("cosmonautics"==holiday_flag?CAT_SYM="fa-rocket":"joke"==holiday_flag?CAT_SYM="fa-hand-spock-o":"bitcoin"==holiday_flag&&(CAT_SYM="fa-btc"),0),VOICE_QUEUE=[],VOICE_NOW=0,TTYPE=0,refresh=3e4,ticktackt=0,ticktacktick=500,cats={},mycat,audioinited=0,socket,supportsVibrate="vibrate"in navigator,isiPad=isIpad(),isWP=isWinPhon(),isAndroid=isAndroid(),is_chrome=isChrome(),lastCheck=0,last_bdata_mode10,globus={},current_vehicle_info,current_rating_data,map_is_centered=0,usePositionWatch_last=0,speed_show_last=new Date,bus_mode10_subs,bus_mode11_subs,swidget,radio_status=0,radio_curtime=0,current_nbusstop,current_nbusstop_notified,game,radar_circle=null,schedule={0:[],1:[]},ol_map,ol_map_view,CITY_MONITOR_ONSCREEN={},NO_MORE_USE_POSITION=0,timer_minutes,PIXI,autobahn,running_light_cnt=1,express_dial="",express_dial_type=0,DB,OSM_STYLE="https://demotiles.maplibre.org/style.json",OSMURL="//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",message_queue=[],current_item=null,interval_id=null,recognition,recognition_result="",recognition_inited=0,gosnum_recognition,gosnum_recognition_result="",gosnum_recognition_inited=0,is_retina=1<window.devicePixelRatio,sound_main,sound_speed,sound_radio_in,sound_radio_out,dance_move=1,rate,speed_gauge,routes_data,routes_data_current,scroll,scroller_dir=0,counter_online=0,counter_today=0,animate_ads_shuttle_original=0,animate_ads_shuttle_step=0,THEME="modern",recorder,audio_context,ptt_stream,watch_gps_send=0,gps_send_last=null,watch_usepos=0,taxi_sound=null,taxi_maps={},busstop_click_cnt=0,current_inf_for_counters={},media_connection;function audiocontext_enable(){var e=window.AudioContext||window.webkitAudioContext;e&&(new e).resume()}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.lastIndexOf(e,0)});var standalone=window.navigator.standalone,userAgent=getUserAgent(),safari=isSafari(),is_ios=isIos();function is_touch_device(){return"ontouchstart"in window||navigator.maxTouchPoints}function sound_init(){us_sound&&(sound_main="ru"==language?new Howl({src:["/static/js/snd/bus-lq.ogg","/static/js/snd/bus-lq.mp3"],sprite:{arriving:[0,2700],one_plus:[2700,2300],one_minus:[5100,2700]},volume:.7}):"fi"==language?new Howl({src:["/static/js/snd/bus-fi.ogg","/static/js/snd/bus-fi.mp3"],sprite:{arriving:[0,2100]},volume:.7}):new Howl({src:["/static/js/snd/bus-en.ogg","/static/js/snd/bus-en.mp3"],sprite:{arriving:[0,2e3]},volume:.7}),sound_speed=us_speed_show?new Howl({src:["/static/js/snd/speed_limit.ogg","/static/js/snd/speed_limit.mp3"],volume:.7}):null,us_radio)&&(sound_radio_in=new Howl({src:["/static/js/snd/radio_in.ogg","/static/js/snd/radio_in.mp3"],volume:.2}),sound_radio_out=new Howl({src:["/static/js/snd/radio_out.ogg","/static/js/snd/radio_out.mp3"],volume:.2})),audioinited=1}function start_location_service(e=0){var t;console.log("main: Start location service"),navigator.geolocation&&(t={enableHighAccuracy:!1,maximumAge:0},(e||taxiuser&&taxiuser.gps_on)&&navigator.geolocation.getCurrentPosition(usePosition,noPosition,t),1===us_gps_send||taxiuser&&taxiuser.gps_on?(t={enableHighAccuracy:!0,maximumAge:0,timeout:1e4},watch_gps_send=navigator.geolocation.watchPosition(gps_send,noPosition,t)):watch_gps_send&&(navigator.geolocation.clearWatch(watch_gps_send),watch_gps_send=0),watch_usepos||taxiuser&&taxiuser.gps_on||us_gps_send||(t={enableHighAccuracy:!0,maximumAge:0},watch_usepos=navigator.geolocation.watchPosition(usePositionWatch,noPosition,t)))}function gps_send(e){var t=Date.now();gps_send_last&&t-gps_send_last<6e3||(gps_send_last=t,prepare_to_send(e),to_send&&to_send.timestamp&&(us_speed_show&&(speed_show(e),$(".speed_show").html("")),to_send.taxi=taxiuser&&taxiuser.driver&&taxiuser.gps_on,to_send.taxi_order=taxiuser&&taxiuser.order_id||null,socket.emit("rpc_gps_send",to_send,function(e){test_mode&&console.log("gps_send",to_send,e);var t=e.cnt,e=e.odometer,t=($(".gps_send_cnt").parent().addClass("green"),$(".gps_send_cnt").html(t).addClass("bhlight"),setTimeout(function(){$(".gps_send_cnt").removeClass("bhlight")},400),$(".speed_show_odometer").html());t&&(t=t.substr(0,t.length-3),t=parseInt(t,10)),$(".speed_show_odometer").html(e+" "+trans_text_km),t&&e!=t&&($(".speed_show_odometer").addClass("bhlight"),setTimeout(function(){$(".speed_show_odometer").removeClass("bhlight")},400))})))}function usePosition(e){prepare_to_send(e),0<NO_MORE_USE_POSITION?console.log("no more use position"):(test_mode&&console.log("usePosition",to_send),$.ajax({url:"/ajax/stops_by_gps/",type:"post",data:{lat:to_send.lat,lon:to_send.lon,accuracy:to_send.accuracy,timestamp:to_send.timestamp,bus_id:BUS_ID,bus_name:get_bname(BUS_ID),taxi_order:taxiuser&&taxiuser.order_id||null},dataType:"json",cache:!1}).done(function(e){var t,i="";if(0<e.length){stop_ids(e[0].ids),set_current_nbusstop(e[0].current_nbusstop),$("#id_stops").val(e[0].name),NEAREST_STOPS=[];for(var n=0;n<e.length;n++)NEAREST_STOPS[n]=e[n],i=i+"<button class='ui tiny compact button' onclick='nearest_click("+n+")'>"+(t=20<(t=e[n].name).length?t.substring(0,20)+"...":t)+" "+e[n].d+"</button> "}$(".stop_sug").html(i),$(".stop_sug").show()}))}function noPosition(e){switch($(".speed_show").css("background-color","#f99"),e.code){case e.PERMISSION_DENIED:$(".speed_show").html("GPS denied");break;case e.POSITION_UNAVAILABLE:$(".speed_show").html("no GPS");break;case e.TIMEOUT:$(".speed_show").html("GPS timed out");break;case e.UNKNOWN_ERROR:$(".speed_show").html("GPS error "+e.code)}}function prepare_to_send(e){let t=null;var i=Math.round((e.timestamp-(to_send.timestamp||0))/1e3);return!to_send.timestamp||e.coords.heading&&e.coords.speed||(t=distance(to_send.lat,to_send.lon,e.coords.latitude,e.coords.longitude,i)),to_send.timestamp=e.timestamp,to_send.lat=e.coords.latitude,to_send.lon=e.coords.longitude,to_send.accuracy=e.coords.accuracy,test_mode&&Cookies.get("debug")&&(to_send.lat=taxiuser.driver?56.039409:test_latlng?test_latlng.lat:56.045954,to_send.lon=taxiuser.driver?92.864565:test_latlng?test_latlng.lng:92.88846,to_send.accuracy=300),to_send.us_id=us_id,to_send.speed=e.coords.speed||(t?t.speed:0),to_send.heading=e.coords.heading||(t?t.heading:0),to_send.taxi=taxiuser&&taxiuser.driver&&taxiuser.gps_on,to_send.taxi_order=taxiuser&&taxiuser.order_id||null,window.gps_send_last=to_send,i}function nearest_click(e){NO_MORE_USE_POSITION=0,stop_ids(NEAREST_STOPS[e].ids),$("#id_stops").val(NEAREST_STOPS[e].name)}function set_current_nbusstop(e){e&&(current_nbusstop=e,$(".bhlight_border").removeClass("bhlight_border"),$("[bst_id="+current_nbusstop+"]").next().addClass("bhlight_border"))}function distance(e,t,i,n,r){var o=.0174532925,a=57.2957795131,s=e*o,l=i*o,o=n*o-t*o,c=l-s,u={distance:0,heading:0,speed:0};return e==i&&t==n||(e=Math.acos(Math.sin(s)*Math.sin(l)+Math.cos(s)*Math.cos(l)*Math.cos(o)),u.distance=Math.round(6378137*e),r&&0<r&&(0<c&&0<=o?u.heading=Math.round(Math.atan(o/c)*a):c<0&&0<=o?u.heading=180-Math.round(Math.abs(Math.atan(o/c))*a):c<0&&o<0?u.heading=180+Math.round(Math.abs(Math.atan(o/c))*a):0<c&&o<0?u.heading=360-Math.round(Math.abs(Math.atan(o/c))*a):0==c&&(0<o?u.heading=90:o<0&&(u.heading=270)),i=u.distance/r*3.6,u.speed=parseFloat(i.toFixed(10<i?0:2)))),u}function speed_show(e){e=e.coords.speed;(e=e||to_send.speed)&&(55<(e=parseInt(3.6*e,10))?(aplay("sound_speed"),$(".speed_show_warn").html("<img style='width:220px;height:234px' src='/static/img/speed_limit_mascot.png'>")):$(".speed_show_warn").html(""),speed_gauge.refresh(e))}function usePositionWatch(e){var t=new Date;0===us_gps_off&&(0===usePositionWatch_last||3e4<t.getTime()-usePositionWatch_last.getTime())&&(usePositionWatch_last=t,usePosition(e)),us_speed_show&&speed_show(e)}function peer_set(e){us_id;socket.emit("rpc_peer_set",to_send)}function speed_show_init(){speed_gauge=new JustGage({id:"speed_show_gauge",value:0,min:0,max:100,label:"/",levelColorsGradient:!1,pointer:!0,pointerOptions:{toplength:-18,bottomlength:7,bottomwidth:12,color:"#8e8e93",stroke:"#ffffff",stroke_width:2,stroke_linecap:"round"},customSectors:[{color:"#b9d409",lo:0,hi:60},{color:"#faa001",lo:60,hi:67},{color:"#fc0000",lo:67,hi:100}]})}function websconnect(){var i=(socket=io_port?io("http://127.0.0.1:"+io_port):io()).onevent;socket.onevent=function(e){var t=e.data||[];i.call(this,e),e.data=["*"].concat(t),i.call(this,e)},socket.on("connect",function(){new Date;$("#status_city_circular").removeClass("red").addClass("green"),$("#status_city_text").text("Online"),socket.emit("authentication",{username:us_id,password:"",os:"web"}),(BUS_ID?sub_bus_id:hashcheck)(),update_notify(0),socket.emit("join","ru.bustime.counters"),socket.emit("join","ru.bustime.bus_amounts__"+us_city),socket.emit("join","ru.bustime.us__"+us_id),socket.emit("join","ru.bustime.city__"+us_city),socket.emit("join","ru.bustime.taxi__"+us_city),us_live_indicator&&socket.emit("join","ru.bustime.updater__"+us_city),us_speed_show&&speed_show_init(),0===lastCheck?lastCheck=1:(console.log("time travel detected"),socket.emit("rpc_bootstrap_amounts",us_city,function(e){router(e)}))}),socket.on("*",function(e,t){router(t)}),socket.on("disconnect",function(){$("#status_city_circular").removeClass("green").addClass("red"),$("#status_city_text").text("Offline")})}function ticktack(){!socket&&autoupdate&&(ticktackt%2e3==0&&$(".downloado").html(ticktackt/2e3),0===ticktackt||15e3==ticktackt||autoupdate_force)&&(ajax_subs(),(autoupdate_force=0)<STOP_IDS.length)&&ajax_stop_ids(),0===ticktackt||ticktackt<0?ticktackt=refresh:ticktackt-=ticktacktick,setTimeout(function(){ticktack()},ticktacktick)}function osdclock(){var e=new Date,t=e.getHours(),e=e.getMinutes();e<10&&(e="0"+e),$(".osdclock").html('<div class="value"><b>'+t+":"+e),setTimeout(function(){osdclock()},6e4)}function blink_clear(){$(".disappear").removeClass("vehicle_here blink-fast-half disappear").html("").css("background","").removeAttr("vehicle_id"),$("[time_prediction]").each(function(){var e;$(this).hasClass("vehicle_here")||(e=$(this).attr("time_prediction"))&&$(this).addClass("time_prediction").html(e)})}function gosnum_format(e){return 9==us_city?e=e.replace(/(.+?) (59|81|159)$/,"$1"):5==us_city?e=e.replace(/(.+?)(78|98|178|123)$/,"$1"):16==us_city?e=e.replace(/(.+?) (63|163)$/,"$1"):22==us_city&&(e=e.replace(/(.+?) (55|56|174)$/,"$1")),e}function update_bdata_mode10(e){$(".sleep_bus").remove(),blink_clear(),$(".indicator.vehicle_here").addClass("disappear"),$.extend({},globus);for(var t,i,n={0:0,1:0},r=0;r<e.l.length;r++){var o,a=(o=e.l[r]).z;globus[o.u]=o,globus[o.u].id=BUS_ID,t=o.b,i=o.sleep,a||(i?(a="<div class='sleep_bus' onclick='vehicle_info(\""+o.u+"\",0)'><i class='fa fa-coffee'></i> <span>"+gosnum_format(o.g)+"</span></div>",$("#"+o.b).next().find(".busstop_name").after(a)):(a=sidebo(o),$("#"+t).removeClass("disappear time_prediction").addClass("vehicle_here").attr("vehicle_id",o.u).html(a),us_voice&&!BUS_VOICE_ANOUNCE&&(0==o.d&&0==n[0]&&(voice_queue_add("on_busstops/"+BUS_ID+"_0"),n[0]=1),1==o.d&&0==n[1]&&(voice_queue_add("on_busstops/"+BUS_ID+"_1"),n[1]=1),voice_queue_add("busstop/"+$("#"+t).attr("bst_id"))))),current_vehicle_info&&o.u==current_vehicle_info&&vehicle_info(o.u,1),!i&&t&&t==mycat&&(mycat=null,aplay("arriving"),vibrate(),$("body").toast({class:"error",message:trans_text_arriving,showProgress:"bottom",classProgress:"red"})),current_nbusstop&&current_nbusstop==$("#"+t).attr("bst_id")&&current_nbusstop_notified!=o.u&&(aplay("arriving"),vibrate(),current_nbusstop_notified=o.u)}BUS_VOICE_ANOUNCE=1,$("vehicle_here,img").click(indicator_click),$(".disappear").addClass("blink-fast-half"),setTimeout(blink_clear,1500),recalc_schedule(),map&&e.l&&update_bdata_mode2(e.l)}function update_bdata_mode2(e){for(var t,i,n,r,o=get_bname(BUS_ID),a=(routes_data_current!=BUS_ID&&map_draw_stops(),myCollection.clearLayers(),""),s=0;s<e.length;s++){var l=e[s];if(dbget("route",l.b,"busstop_id")&&(c=dbget("route",l.b,"busstop_id"),l.bn=dbget("nbusstop",c,"name")),!("x"in l))return;n=0===l.d?(r="color-1-2-bg","#74c0ec"):1===l.d?(r="color-2-2-bg","#5ec57c"):(r="color-3-2-bg","#c5c5c5"),l.g&&us_show_gosnum?(t="<b>"+gosnum_format(l.g)+"</b>, ",a=l.l?"["+gosnum_format(l.g)+", "+gosnum_format(l.l)+"]":"["+gosnum_format(l.g)+"]",l.bn&&(a=a+"<br/>"+l.bn.substr(0,15))):l.l&&us_show_gosnum?(t="<b>"+gosnum_format(l.l)+"</b>, ",a="["+gosnum_format(l.l)+"]",l.bn&&(a=a+"<br/>"+l.bn.substr(0,15))):(t="<b>"+l.u+"</b>, ",a=l.bn?l.bn.substr(0,15-o.length):"");var c=l.sleep?'<br/><i class="fa-coffee icon"></i> '+trans_text_sleep:l.z?'<i class="fa-hourglass-half icon"></i> ':l.away?'<i class="fa-external-link icon"></i> ':"",u='<div class="sprite sprite-'+bus_icon_chooser(dbget("bus",BUS_ID,"ttype"))+' active" map_vehicle_id="'+l.u+'" onclick=vehicle_info("'+l.u+'",0)></div>',u=L.divIcon({iconSize:[157,43],iconAnchor:[0,0],className:"MapIconDiv "+r,html:u+"<b>"+o+"</b> "+a}),u=L.marker([l.y,l.x],{icon:u,zIndexOffset:100}).addTo(myCollection);if(l.bn||(l.bn=""),u.bindTooltip(t+l.s+trans_text_kmh+" <br/>"+l.bn+c),l.px)for(var d=l.y-l.py,h=l.x-l.px,p=0;p<3;p++)i=[[l.py+d/3*p,l.px+h/3*p],[l.py+d/3*(p+1),l.px+h/3*(p+1)]],L.polyline(i,{color:n,opacity:.6+.2*p,weight:5+p}).addTo(myCollection)}}function update_bdata_mode11(e){var t,i,n;for(n in $(".multi_bus").remove(),e){for(var r="",o=0;o<e[n].length;o++)(i=e[n][o]).id!=BUS_ID&&(-1<$.inArray(i.id,busfavor)||us_multi_all)&&(t="multi_bus",i.r&&(t+=" micro_ramp",us_premium||(t+=" blue")),i.sleep&&(t+=" micro_sleep",us_premium||(t+=" grey")),us_multi_all&&-1<$.inArray(i.id,busfavor)&&(t+=" micro_favor"),r=r+"<div class='"+t+"' onclick='vehicle_info(\""+i.u+"\",0)'>",us_bigsticker&&i.g in bus_design_map&&(r=r+"<img src='"+bus_design_map[i.g]+"'>"),i.custom&&us_premium&&(r+="<i class='fa fa-upload'></i> "),r+=get_bname([i.id]),i.g&&(3!=us_city||us_premium&&"premium"==transaction_key||gps_send_enough||us_show_gosnum)&&(r=r+"<span>"+gosnum_format(i.g)+"</span>"),r+="</div>",i.u in globus?(globus[i.u].g=i.g,globus[i.u].s=i.s,globus[i.u].id=i.id):globus[i.u]={g:i.g,s:i.s,id:i.id},i.sleep)&&(globus[i.u].sleep=1);$("[bst_id="+n+"]").next().find(".busstop_name").after(r);$("[bst_id="+n+"]").next().find(".multi_bus")}$(".express_dial").hasClass("express_dial_fixed")&&$(".multi_bus").css("display","none")}function iconizer(e,t){return new L.icon({iconUrl:e,iconSize:t,iconAnchor:[t[0]/2,t[1]],popupAnchor:[0,-t[1]],shadowUrl:""})}function lonlat2latlng(e){var t,i=[];for(t in e)i.push([e[t][1],e[t][0]]);return i}function request_jam(e){var t;"undefined"==typeof JAM_LINES?((t=document.createElement("script")).src="/static/js/jamline-"+e+"-"+us_city_rev+".js",t.type="text/javascript",t.onload=function(){request_jam(e)},document.getElementsByTagName("head")[0].appendChild(t)):(t={city_id:e,bus_ids:JSON.stringify([BUS_ID])},$.ajax({type:"GET",url:"/ajax/jam/",data:t,dataType:"json",success:function(e){update_data_jam(e)},error:function(e,t,i){console.log(`bustime-main::request_jam(): ${t} `+i)}}))}function update_data_jam(e){if("undefined"!=typeof map&&"undefined"!=typeof JAM_LINES&&!$.isEmptyObject(JAM_LINES)){jamcollection?jamcollection.clearLayers():jamcollection=L.featureGroup().addTo(map);for(var t=[],i=(iconizer("/static/img/bs_26_0.png",[26,34]),0);i<e.length;i++){busstop_from=e[i].busstop_from,busstop_to=e[i].busstop_to;for(var n=0===(n=e[i].ratio)?"#10e835":1===n?"#45e72e":2===n?"#83e526":3===n?"#c1e41e":4===n?"#ffe216":5===n?"#f2b41a":6===n?"#e4821e":7===n?"#d55123":8===n?"#c82327":"#a4090d",t=JAM_LINES[busstop_from+"_"+busstop_to]||[],r=0;r<t.length;r++){var o=t[r][0];t[r][0]=t[r][1],t[r][1]=o}0<t.length&&L.polyline(t,{color:n}).addTo(jamcollection)}}}function map_draw_stops(){if(routes_data){var e,t,i;for(busstop_collection.clearLayers(),t=iconizer("/static/img/bs_26_0.png",[26,34]),i=iconizer("/static/img/bs_26_1.png",[26,34]),e=0;e<routes_data.length;e++){var n=routes_data[e],r=Object.keys(n),o=0==n[r[0]][2]?t:i,a=dbget("nbusstop",n[r[0]][1],"point_x"),s=dbget("nbusstop",n[r[0]][1],"point_y"),l=dbget("nbusstop",n[r[0]][1],"name"),c=dbget("nbusstop",[n[r[0]][1]],"slug"),o=L.marker([s,a],{icon:o}).addTo(busstop_collection);us_edit_mode?o.bindPopup(' <a target="_blank" href="/'+us_city_slug+"/stop/id/"+n[r[0]][1]+'/edit/"><i class="fa fa-pencil fa-fw"></i></a> <a target="_blank" href="/'+us_city_slug+"/stop/"+c+'"><i class="fa fa-external-link"></i></a>  '+l):test_mode?o.bindPopup('<a target="_blank" href="/'+us_city_slug+"/stop/"+c+'"><i class="fa fa-external-link"></i></a> '+l+"<br>Lat: "+s.toFixed(6)+" Lon: "+a.toFixed(6)):o.bindPopup('<a target="_blank" href="/'+us_city_slug+"/stop/"+c+'"><i class="fa fa-external-link"></i></a> '+l),o.bindTooltip(l)}routes_data_current=BUS_ID,map_is_centered||(map.fitBounds(busstop_collection.getBounds()),map_is_centered=1),$.ajax({url:"/ajax/route-line/",type:"get",data:{bus_id:BUS_ID},dataType:"json"}).done(function(e){for(var t,i=0;i<2;i++)e[i]&&(t=0===i?"#74c0ec":"#5ec57c",L.polyline(lonlat2latlng(e[i]),{color:t}).addTo(busstop_collection))})}}function update_passenger(e){for(var t in cats=e){$("#"+t).next().find(".cats").remove();for(var i=0;i<cats[t];i++)"new year"==holiday_flag?$("#"+t).next().find(".busstop_name").after('<img class="cats" src="/static/img/elochka_2016.png"/>'):"valentine"==holiday_flag?$("#"+t).next().find(".busstop_name").after('<img class="cats" src="/static/img/cat-female.png"/>'):$("#"+t).next().find(".b1").after('<i class="cats fa '+CAT_SYM+'"></i>')}}function update_time_bst(e){var t,i,n;for(n in e){var r,o,a="";a=0==e[n]?"":(r=(o=new Date(1e3*e[n])).toLocaleString("en-US",{timeZone:"Asia/Krasnoyarsk",hour:"numeric",hour12:!1}),o=o.getMinutes(),r.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")),$("#"+n).attr("time_prediction",a),$("#"+n).hasClass("vehicle_here")?(t=$(".bustable_head__bus").text(),i=$("#"+n).next().find(".busstop_name").text(),$("#"+n).find(".bcubic").find("img").attr("aria-label",t+"   "+i)):($("#"+n).addClass("time_prediction").html(a),t=$(".bustable_head__bus").text(),i=$("#"+n).next().find(".busstop_name").text(),$("#"+n).next().find(".busstop_name").attr("aria-label",t+"   "+a+"   "+i),$("#"+n).attr("aria-label",t+"   "+a+"   "+i))}}function ajax_subs(){$.ajax({url:"/ajax/bus/",type:"GET",data:{bus_id:autoupdate},dataType:"json",cache:!1}).done(function(e){router(e)})}function get_bname(e){return dbget("bus",e,"name")}function get_bslug(e){return dbget("bus",e,"slug")}function get_provider_html(e){var t,i,n="",r="<a href='/wiki/bustime/bus/"+e+"/change/'>";return dbget("bus",e,"price")&&(n='<i class="fa fa-ticket" aria-label="'+trans_text_price+'"></i> '+dbget("bus",e,"price")),n=dbget("bus",e,"provider_id")?(t=dbget("bus",e,"provider_id"),i=dbget("busprovider",t,"name"),(n=n&&r+n+"</a>, ")+"<a href='/"+us_city_slug+"/company/"+t+"/'>"+i+"</a>"):us_user?n+r+trans_text_provider_edit+"</a>":n+'<a href="/register/?next='+("/wiki/bustime/bus/"+e+"/change/")+'">'+trans_text_provider_edit+"</a>"}function bus_icon_chooser(e){var t;return"0"==e?t="bus":"1"==e?t="trolleybus":"2"==e?t="tramway":"3"==e?t="bus-taxi":"4"==e?t="ferry":"5"==e?t="2bus":"6"==e?t="train":"7"==e&&(t="metro"),t}function show_me_the_bus(e){if(us_sound&&is_ios&&0===audioinited&&sound_init(),$(".busnumber").removeClass("bus_selected"),$(".bid_"+e).addClass("bus_selected"),dbget("bus",e)){var t=dbget("bus",e,"ttype"),i=trans_ttype_name[t],t="sprite-"+bus_icon_chooser(t),t=($(".bustable_head").css("display","block"),$(".bustable_head_multi_all").css("display","block"),$("#main_bases_map").show(),$(".chat_bus_button").attr("href","/"+us_city_slug+"/chat/"+dbget("bus",e,"slug")+"/"),$(".bustable_head__icon").removeClass().addClass("bustable_head__icon sprite active").addClass(t).attr("href","/help/"+trans_ttype_slug[dbget("bus",e,"ttype")]+"/"),$(".bustable_head__bus").html(i+" "+get_bname(e)),$(".bustable_head__provider").html(get_provider_html(e)),$(".bid_"+e+":first > .busamount").html()),i=t.split(" / "),n=parseInt(i[0],10),i=parseInt(i[1],10),t=($(".bustable_head__busamount").removeClass().addClass("bustable_head__busamount busamount busamount_"+e).html(t).attr("aria-label","   "+(n+i)),$(".ui.grid.bustable").css("display","inline"),$(".welcome-text").css("display","none"),"/ajax/busfavor/?bus_id="+e),r=(socket?BUS_ID&&(socket.emit("leave","ru.bustime.bus_mode10__"+BUS_ID),socket.emit("leave","ru.bustime.bus_mode11__"+BUS_ID)):(autoupdate=e,autoupdate_force=1),BUS_ID=e,sub_bus_id(),BUS_ID&&0<=gtfs_alerts_buses.indexOf(parseInt(BUS_ID))?$("#gtfs_alerts_bus_button").css("display","inline-block"):$("#gtfs_alerts_bus_button").css("display","none"),$.ajax({url:t,type:"GET"}),map_is_centered=0,$(".reschedule_0_1, .reschedule_1_1").html(""),$(".schedule_bar_cur > a").attr("href","/"+us_city_slug+"/"+dbget("bus",e,"slug")+"/"),$("html, body").scrollTop($("#separ").offset().top),$(".edit_panel_route").removeClass("hidden"),"none"!==$(".map").css("display")&&request_jam(us_city),Object.entries(DB.route).filter(([,e])=>e&&e[0]===parseInt(BUS_ID)).map(([e,t])=>({[e]:t})));r.sort((e,t)=>Object.values(e)[0][3]-Object.values(t)[0][3]);for(var o=0,a=0,s=0;s<r.length;s++){var l=r[s],c=Object.keys(l);0===l[c[0]][2]&&o++,1===l[c[0]][2]&&a++}var n=(o/=2)<=(a/=2)?o:a,o=n=us_premium?999:n,a=n,u="",d="",h="",p="",f="";for(s=0;s<r.length;s++){var m,g=r[s],v=Object.keys(g),_="";32<(m=dbget("nbusstop",g[v[0]][1],"name")).length&&(m=m.substring(0,32)+"..."),us_edit_mode&&(f=' <a target="_blank" href="/'+us_city_slug+"/stop/id/"+g[v[0]][1]+'/edit/"><i class="fa fa-pencil fa-fw"></i></a>'),_+='<div class="indicator ',us_bigsticker&&(_+="premium"),_=_+'" id="'+v[0]+'" bst_id="'+g[v[0]][1]+'"></div><div class="inf"><div class="busstop_name">'+f+m+'<div class="b1"></div></div></div><br/>',0===g[v[0]][2]?(o<=0?d+=_:u+=_,o--):(a<=0?p+=_:h+=_,a--)}$(".htmlr.a1").html(u),$(".htmlr.a2").html(d),$(".htmlr.b1").html(h),$(".htmlr.b2").html(p),$(".busstop_name").click(busstop_click),$(".busstop_name").mouseup(busstop_click_up_down).mousedown(busstop_click_up_down),set_current_nbusstop(current_nbusstop),routes_data=r,map&&map_draw_stops()}else alert("Please wait...")}function tcard_check(){(tcard=$("#id_tcard").val()).length<10&&alert(" .    10 ."),$(".tcard_balance").html(""),$.ajax({url:"/ajax/card/"+tcard+"/",type:"GET",dataType:"json",cache:!1}).done(function(e){e.social?$(".tcard_balance").html(e.balance+" . "+e.social+" ."):$(".tcard_balance").html(e.balance+' <i class="fa fa-rub"></i>')})}function sub_bus_id(){socket&&(socket.emit("join","ru.bustime.bus_mode10__"+BUS_ID),socket.emit("join","ru.bustime.bus_mode11__"+BUS_ID),socket.emit("rpc_bdata",{bus_id:BUS_ID,mode:10,mobile:0},function(e){router(e),socket.emit("rpc_bdata",{bus_id:BUS_ID,mode:11,mobile:0},function(e){router(e)})}))}function ajax_metric(e,t){$.ajax({url:"/ajax/metric/",data:{metric:e,value:t},type:"GET",dataType:"json",cache:!1})}function upload_photo(e){var t=new FormData,i=new XMLHttpRequest;t.append("image",e),i.open("post","/ajax/photo/",!0),i.send(t)}function ajax_gvote(e){e?($("i.fa-thumbs-down").removeClass("fa-thumbs-down").addClass("fa-thumbs-o-down"),$("i.fa-thumbs-o-up").removeClass("fa-thumbs-o-up").addClass("fa-thumbs-up"),$(".gvote_comment").css("display","none")):($("i.fa-thumbs-o-down").removeClass("fa-thumbs-o-down").addClass("fa-thumbs-down"),$("i.fa-thumbs-up").removeClass("fa-thumbs-up").addClass("fa-thumbs-o-up"),$(".gvote_comment").css("display","block")),(request=$.ajax({url:"/ajax/gvote/",data:{positive:e},type:"GET",dataType:"json",cache:!1})).done(function(e){$(".gvote_down_cnt").html(e[0]),$(".gvote_up_cnt").html(e[1])})}function update_gvotes(e){var t=parseInt($(".gvote_down_cnt").html(),10),i=parseInt($(".gvote_up_cnt").html(),10);t!=e.down&&($(".gvote_down_cnt").html(e.down),$(".ui.label.gvote_down_cnt").css("background-color","#ffba16")),i!=e.up&&($(".gvote_up_cnt").html(e.up),$(".ui.label.gvote_up_cnt").css("background-color","#ffba16")),setTimeout(function(){$(".ui.label.gvote_down_cnt").css("background-color",""),$(".ui.label.gvote_up_cnt").css("background-color","")},400)}function check_wise(e){var t=!0;return t=(e=e.replace(/ /g,"")).length<5?!1:t}function ajax_gvote_comment(){var e=$("textarea").val();check_wise(e)?(request=$.ajax({url:"/ajax/gvote/comment/",data:{comment:e},type:"POST",cache:!1})).done(function(){$(".gvote_comment").css("display","none"),$(".gvote_comment").after("<br/><center>!</center>")}):alert("      ")}function settings_set_silent(e,t){$.ajax({url:"/ajax/settings/",data:{setting:e,value:t},type:"GET",cache:!1})}function update_city_rhythm(e){$(".osd_city_rhythm").html(e)}function stop_ids(e){var t,i,n;if(socket){for(;STOP_IDS_SUBS.length;)n=STOP_IDS_SUBS.pop(),socket.emit("leave",n);for(STOP_IDS=e,t=0;t<STOP_IDS.length;t++)i="ru.bustime.stop_id__"+STOP_IDS[t],socket.emit("join",i),STOP_IDS_SUBS.push(i)}else STOP_IDS=e;ajax_stop_ids()}function flash_dance(){for(var e=$(".sr_busnum").toArray(),t=0;t<e.length;t++)dance_move%2==t%2?$(e[t]).addClass("lightup"):$(e[t]).removeClass("lightup");++dance_move<0?(dance_move=1,$(".sr_busnum").removeClass("lightup")):setTimeout(function(){flash_dance()},1e3)}function ajax_stop_ids(){socket.emit("rpc_stop_ids",{ids:STOP_IDS,mobile:0},function(e){router(e)})}function matrix_inverto(){test_mode&&console.log("matrix_inverto");var e=$(".matrix").css("display");"none"==e?($(".matrix").css("display","block"),$("#show_matrix_button").html(""),settings_set_silent("matrix_show",!0),change_mode(mode_selected)):"block"==e&&($(".matrix").css("display","none"),$("#show_matrix_button").html(""),settings_set_silent("matrix_show",!1),$(".modec_"+mode_selected).removeClass("active"),$(".pointing > .item .sprite").removeClass("active"))}function indicator_click(){vehicle_info($(this).parent().parent().attr("vehicle_id"),0)}function obj_get_bid(e){for(var t=$(e).attr("class").split(/\s+/),i=0;i<t.length;i++)if(t[i].startsWith("bid_"))return t[i].substring(4)}String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},$(".take_photo").change(function(){upload_photo($(".take_photo").prop("files")[0])});var page_ready=function(){var e=new Date;window.console&&console.log(e+(": Page ready, test_mode="+test_mode)),"function"==typeof js_page_extra&&js_page_extra(),void 0===Cookies.get("cookie_policy")&&$(".cookie_policy").removeClass("hidden"),$('[name="select_language"]').change(function(){$(this).prop("name");var e=$(this).prop("value"),e=(window.location.pathname,window.location.href.replace(/\/\/(\w+)\./,"//"+e+"."));window.location.href=e})},document_ready=function(){if($(".ui.dropdown").dropdown(),$(".popup_element").popup(),!is_main_page)return page_ready();if(window.screen.width>100*us_city_transport_count)for(var e=0;e<10;e++){var t=$(".modec_"+e);t&&t.removeClass("xsfont")}Date.now();var o=setInterval(function(){if(0!==Object.keys(dbgetsafe("bus")).length&&(clearInterval(o),0!==Object.keys(dbgetsafe("bus")).length))for(var i,e,n=$(".busnumber"),r=0;r<n.length;r++)e=$(n[r]).attr("class").split(/\s+/),$.each(e,function(e,t){t.startsWith("bid_")&&((i=t.split(/_/)[1])in dbget("bus")?$(n[r]).attr("href","#"+dbget("bus",i,"slug")).removeClass("bw"):console.log("No bus key "+i+" in DB!"))})},100),i=(us_sound&&sound_init(),$(".busnumber").click(function(){show_me_the_bus(obj_get_bid($(this)))}),new Date);window.console&&console.log(i+(": Document ready, test_mode="+test_mode)),websconnect(),"function"==typeof js_page_extra&&js_page_extra(),"opera_mini"!=us_device&&(setTimeout(function(){"function"==typeof fromToInit&&fromToInit()},1e3),us_speed_show||us_gps_send?start_location_service():navigator&&navigator.permissions&&0===us_gps_off&&navigator.permissions.query({name:"geolocation"}).then(function(e){"granted"==e.state&&start_location_service(),e.onchange=function(){console.log("geolocation permission state has changed to ",this.state)}}),$("input.deletable").wrap('<span class="deleteicon" />').after($("<span/>").click(function(){$(this).prev("input").val("").focus()}))),"function"==typeof load_extra&&load_extra(),ticktack(),us_gps_send&&(i=(new Date).getSeconds(),setTimeout(function(){osdclock()},6e4-1e3*i)),$(".fa-heart").hover(function(){$(this).css("color","#fff")},function(){$(this).css("color","")}),$(".fa-heart").click(function(e){e.stopPropagation();var e=$(this).parentsUntil(".busnumber").parent(),t=obj_get_bid(e);e.remove(),$.ajax({url:"/ajax/busdefavor/",type:"GET",data:{bus_id:t}})}),isiPad||isAndroid||$(document).tooltip(),$(".show_map_button").click(function(){show_map(0),"none"!==$(".map").css("display")&&request_jam(us_city)}),us_map_show&&show_map(1),$(".show_matrix_button").click(function(){matrix_inverto()}),radar_mode&&(radar_init(),navigator.geolocation)&&(options={enableHighAccuracy:!1,maximumAge:0},navigator.geolocation.getCurrentPosition(radar_position,noPosition,options),navigator.geolocation.watchPosition(radar_watch,noPosition)),express_dial_init(),rating_init(),setTimeout(function(){low_bootstrap()},500),us_premium&&$("[name=gosnum]").keypress(function(e){13===e.keyCode&&vehicle_info_gosnum()}),us_sound&&audiocontext_enable(),$('[name="multi_all"]').change(function(){var e=$(this).prop("name"),t=$(this).prop("checked");$.ajax({url:"/ajax/ajax_settings1/",type:"GET",data:{name:e,checked:t,csrfmiddlewaretoken:"{{csrf_token}}"}}).done(function(e){window.location.reload(!0)})}),$('[name="select_language"]').change(function(){$(this).prop("name");var e=$(this).prop("value"),e=(window.location.pathname,window.location.href.replace(/\/\/(\w+)\./,"//"+e+"."));window.location.href=e}),$(document).click(function(e){e=$(e.target);e.is(".fa-question-circle-o")||e.parents(".fa-question-circle-o").length||$(".popup_descr_index").removeClass("show_descr_index")})};function descripton_settings_index(e){$("."+e).toggleClass("show_descr_index")}function rpcBdata(e,t){socket.emit("rpc_bdata",{bus_id:e,mode:t,mobile:0},function(e){router(e)})}function getRotationDegrees(e){var t,e=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform");return(e="none"!==e?(t=(e=e.split("(")[1].split(")")[0].split(","))[0],e=e[1],Math.round(Math.atan2(e,t)*(180/Math.PI))):0)<0?e+360:e}var radio_deg=0;function radio_gplay(){0===radio_status?(document.getElementById("groove").play(),$(".bustime-logo-pro").removeClass("bustime-logo-pro").addClass("bustime-logo"),$(".bustime-logo").css("transform","").addClass("logorot"),$(".fa-music").removeClass("fa-music").addClass("fa-pause"),ajax_metric("radio_play",radio_status=1),CAT_SYM_OLD=CAT_SYM,CAT_SYM="fa-volume-up",$(".cats").removeClass(CAT_SYM_OLD).addClass(CAT_SYM)):(document.getElementById("groove").pause(),radio_deg=getRotationDegrees($(".bustime-logo")),$(".bustime-logo").removeClass("logorot").css("transform","rotate("+radio_deg+"deg)"),$(".fa-pause").removeClass("fa-pause").addClass("fa-music"),radio_status=0,$(".cats").removeClass(CAT_SYM).addClass(CAT_SYM_OLD),CAT_SYM=CAT_SYM_OLD)}function vehicle_info(e,t){var i,n,r;scroll=document.documentElement.scrollTop||document.body.scrollTop,current_vehicle_info&&$(".vehicle_selected").removeClass("vehicle_selected"),current_vehicle_info==e&&0===t?vehicle_info_close():($(".vehicle_journal").attr("href","/"+us_city_slug+"/transport/"+today_date+"/"+e+"/"),$(".vehicle_here[vehicle_id="+e+"]").addClass("vehicle_selected"),(n=globus[current_vehicle_info=e])&&(1==(r=dbget("bus",n.id,null,!0).ttype)?$(".driver_ava").attr("src","/static/img/stop_n_trolleybus.png"):2==r?$(".driver_ava").attr("src","/static/img/stop_n_tramway.png"):$(".driver_ava").attr("src","/static/img/stop_n_bus.png"),$(".vehicle_info_gosnum").css("display","inline"),$(".vehicle_feedback_ts").attr("href","/"+us_city_slug+"/feedback/"+e+"/"),$(".express_fixed").css("display","none"),n.g?0===$("[name=gosnum]:focus").length&&$("[name=gosnum]").val(n.g):0===$("[name=gosnum]:focus").length&&$("[name=gosnum]").val(""),n.custom&&us_premium?$.ajax({url:"/ajax/peer_get/",type:"post",data:{us_id:n.custom_src},dataType:"json",cache:!1}).done(function(e){e.peer_id&&$(".call_button").removeClass("hiddeni")}):$(".call_button").addClass("hiddeni"),e=sidebo(n),$(".vehicle_info_img").html(e),$(".vehicle_info_name").html(trans_ttype_name[r]+" "+get_bname(n.id)),$(".vehicle_info_speed").html(n.s),337.5<=(e=n.h)||e<22.5?i="N":22.5<=e&&e<67.5?i="NE":67.5<=e&&e<112.5?i="E":112.5<=e&&e<157.5?i="SE":157.5<=e&&e<202.5?i="S":202.5<=e&&e<247.5?i="SW":247.5<=e&&e<292.5?i="W":292.5<=e&&e<337.5&&(i="NW"),$(".vehicle_info_heading_w").html(i),e-=45,$(".vehicle_info_heading").css("transform","rotate("+e+"deg)"),$(".vehicle_info_speed").css("color","red"),$(".vehicle_info_heading").css("color","red"),$(".vehicle_info_heading_w").css("color","red"),setTimeout(function(){$(".vehicle_info_speed").css("color",""),$(".vehicle_info_heading").css("color",""),$(".vehicle_info_heading_w").css("color","")},400),1!=t&&(n.g?socket.emit("rpc_rating_get",{bus_id:n.id,g:n.g},function(e){rating_fill(e.rpc_rating_get,1)}):$(".vote_comment").val("    ")),us_premium)&&$("input[name=gosnum]").focus())}function sidebo(e){var t="",i="",n=(e.g in bus_design_map&&(i=bus_design_map[e.g]),us_bigsticker&&(t+='<div class="bcubic">',i&&(t=t+'<img class="sticker" aria-label=" " src="'+i+'">'),t+="</div>"),bus_icon_chooser(dbget("bus",BUS_ID,"ttype")));return e.tface&&(n=e.tface),t=e.tcolor?t+'<div class="bcubic"><img src="/static/img/theme/'+THEME+"/"+n+"_"+e.tcolor+'.png"></div>':t+'<div class="bcubic"><img src="/static/img/theme/'+THEME+"/"+n+'.svg"></div>',t+="<div class='bcubic'>",i&&!us_bigsticker?t=t+"<div class='cubic active' aria-label=' '><img src='"+i+"'></div>":t+="<div class='cubic '></div>",e.custom?t+="<div class='cubic active' aria-label='  '><i class='fa-upload fa'></i></div>":t+="<div class='cubic '></div>",t+="<br/>",e.r?t+="<div class='cubic active' aria-label='  '><i class='fa-wheelchair-alt fa'></i></div>":e.rr?t+="<div class='cubic active' aria-label=' '><i class='fa-shopping-cart fa'></i></div>":t+="<div class='cubic'></div>",t=t+"<div class='cubic'></div>"+"</div>",e.g&&us_show_gosnum?(t=t+"<div class='gosnum'>"+gosnum_format(e.g),e.l&&(t=t+", "+gosnum_format(e.l)),t+="</div>"):e.l&&us_show_gosnum&&(t=t+"<div class='gosnum'>"+gosnum_format(e.l)),t}function vehicle_info_close(){$(".vehicle_info").css("display","none"),$(".vehicle_info_gosnum").css("display","none"),$(".express_fixed").css("display",""),rate=0,$("[name=msg]").val(""),$("[name=gosnum]").val(""),$(".vehicle_selected").removeClass("vehicle_selected"),current_vehicle_info="",is_ios&&$("html, body").delay(400).animate({scrollTop:$("#separ").offset().top},400,"linear")}function busstop_click(e){var t=$(this).parent().prev().attr("id"),t=parseInt(t,10);mycat=t,socket.emit("rpc_passenger",{what:1,bus_id:BUS_ID,r_id:mycat},function(e){}),$("#id_stops2")&&((++busstop_click_cnt%2==1?($("body").toast({title:e.target.innerText,message:trans_text_dst_change}),$("#id_stops2")):($("body").toast({title:e.target.innerText,message:trans_text_src_change}),$("#id_stops"))).val(e.target.innerText),$("#id_stops").val())&&$("#id_stops2").val()&&request_bus_trip(us_city),ajax_metric("catplace",1)}function busstop_click_up_down(e){var t=$(this).parent().prev().attr("id");parseInt(t,10);e.type}function push_to_talk_click_up_down(e){var t;"mousedown"==e.type||"touchstart"==e.type?(sound_radio_out.play(),t=1,(recorder=new Recorder({encoderPath:"/static/js/encoderWorker.min.js",encoderBitRate:16e3})).ondataavailable=function(e){e=new Blob([e],{type:"audio/ogg"});$.ajax({type:"POST",url:"/radio/say/",data:e,processData:!1,contentType:!1}).done(function(e){console.log(e)})},recorder.start()):(t=0,recorder.stop(),sound_radio_out.play()),console.log("push to talk: "+t)}function update_notify(e){0===e?$(".downloado").removeClass("downloado_down"):$(".downloado").addClass("downloado_down")}function router(e){var t;if(e.taxi&&(taxi_event(e.taxi),0),update_notify(1),e.routes&&(update_routes(e.routes,e.napr,e.ttype),0),e.bdata_mode10&&(update_bdata_mode10(e.bdata_mode10),last_bdata_mode10=e,0),e.bdata_mode11&&(update_bdata_mode11(e.bdata_mode11),0),e.busamounts&&(update_bus_amount(e.busamounts),update_counters_by_type(e.busamounts),0),e.passenger&&(update_passenger(e.passenger),0),e.time_bst&&(update_time_bst(e.time_bst),0),e.stops&&0,e.city_rhythm&&(update_city_rhythm(e.city_rhythm),0),e.first_last&&(update_schedule(e.first_last),0),e.passenger_monitor&&(update_passenger_monitor(e.passenger_monitor),0),e.us_cmd&&(update_cmd(e),0),e.reschedule&&(update_reschedule(e.reschedule),0),null!=e.counter_online_city_web&&(update_counter_online_city_web(e.counter_online_city_web),0),null!=e.counter_online_city_app&&(update_counter_online_city_app(e.counter_online_city_app),0),e.counter_today&&(update_counter_today(e.counter_today),0),e.server_date&&(server_date(e.server_date),0),e.status_counter&&(update_status_counter(e.status_counter),0),e.updater&&(update_status_log(e.updater),0),e.status_server&&(update_status_counter(e.status_server),0),e.gps_send_signal&&(gps_send_signal(e.gps_send_signal),0),e.btc_rub&&(btc_update(e.btc_rub),0),e.radio&&(radio(e.radio),0),e.rating_set){for(var i in console.log("rating_set"),e=e.rating_set,globus)if(globus[i].g==e.gosnum)break;0}e.updater&&"idle"==e.updater.state?(t=e.updater.timeout,$(".ui.progress").progress("set progress",100-10*t),t<3&&(t=trans_idle_message_load+" "+t,message_queue.push('<i class="fa fa-spinner" aria-hidden="true"></i> '+t),null===current_item)&&process_queue()):e.updater&&"update"==e.updater.state?(message_queue.push('<i class="fa fa-check" aria-hidden="true"></i> '+trans_update_message),null===current_item&&process_queue(),$(".ui.progress").progress("set progress",100)):e.updater&&"post_turbine_update"==e.updater.state?(t=trans_post_update_message_processing+" "+e.updater.events_count,message_queue.push('<i class="fa fa-refresh" aria-hidden="true"></i> '+t),null===current_item&&process_queue()):e.updater&&"post_update"==e.updater.state&&(t=trans_post_turbine_update_message_provid+" "+e.updater.provider_events_count+" "+trans_post_turbine_update_message_for+" "+e.updater.provider_delay,message_queue.push('<i class="fa fa-clock-o" aria-hidden="true" style="font-size:14px;"></i> '+t),null===current_item&&process_queue()),setTimeout(function(){update_notify(0)},300)}function onPubBus(e){router(e[0])}function update_cmd(e){var t=e.us_cmd,e=e.params;"reload"==t?"/"==location.pathname?location.reload():window.location.href="/":"msg"==t?flash_message(e.text,3e3):"gvotes"==t?update_gvotes(e):"error_update"==t?error_update(e):"weather"==t?weather_update(e):(console.log("unknown cmd: "+t+". Params: "),console.log(e))}function error_update(e){console.log("Error update! "+e.tm);var t=e.status,e=e.tm;0===t?($("i.fa-unlink").parent().parent().addClass("hiddeni").attr("title",""),$(".error_update").addClass("hidden"),aplay("sound_speed")):1==t&&($("i.fa-unlink").parent().parent().removeClass("hiddeni").attr("title",e+": "+trans_text_update_error),$(".error_update").removeClass("hidden"),aplay("sound_speed")),console.log(t)}function server_date(e){var e=new Date(e),e=e.getTime()+6e4*e.getTimezoneOffset(),t=7+us_city_timediffk;new Date(e+36e5*t).toLocaleString("ru-RU")}function weather_update(e){var t=e.temp,e=e.weather,t=(0<t&&(t="+"+t),console.log("weather update: t=",t," weather=",e),$("#weather_t").addClass("bhlight"),$("#weather_t").html(t+""),$("#weather_t").prev().closest("a.item").find("i")),i="";switch(e){case"rain":i="fa-tint";break;case"snow":case"ice":i="fa-snowflake-o";break;case"smoke":i="fa-recycle";break;case"clear":i="fa-sun-o";break;case"clouds":i="fa-mixcloud";break;case"dark_clouds":i="fa-cloud";break;case"fog":i="fa-tree";break;default:i="fa-thermometer-half"}t.attr("class","icon "+i),setTimeout(function(){$("#weather_t").removeClass("bhlight")},1500)}function btc_update(e){$(".btc_rub").addClass("bhlight"),$(".btc_rub").html('<i style="margin-right:-0.1rem" class="fa-btc icon"></i>'+e),setTimeout(function(){$(".btc_rub").removeClass("bhlight")},1e3)}function bus_amount_update(e,t){var i,n;city_monitor_mode||(i=e.substr(0,e.length-3),(i=$(".bid_"+i+" > .busamount, .busamount_"+i))&&i.length&&(n=i.html().split("/"),"d0"==e.substr(e.length-2,2)?(n[0]=t,n[1]=parseInt(n[1],10)||0):(n[0]=parseInt(n[0],10)||0,n[1]=t),i.addClass("bhlight").html(n[0]+" / "+n[1]),(e=i.parent()).removeClass("coloramount0").removeClass("coloramount1").removeClass("coloramount2"),(t=n[0]+n[1])<1?e.addClass("coloramount0"):t<3?e.addClass("coloramount1"):e.addClass("coloramount2")))}function turnoff_hl(e){$(".bid_"+e+">.busamount").removeClass("bhlight"),$(".busamount_"+e).removeClass("bhlight")}function update_bus_amount(e){var i,n,r,o,t;for(t in e){if(n=parseInt(e[t],10),o="d0"==(o=t.substring(t.length-2,t.length))?0:1,i=t.replace("_d0","").replace("_d1",""),(i=parseInt(i,10))==BUS_ID){let e="top left",t=trans_text_in_dir_forward;var a=trans_text_one_plus;o&&(t=trans_text_in_dir_reverse,e="top right"),r=(r=$(".bid_"+i).find(".busamount").html()).split(" / "),r=parseInt(r[o],10),dbget("bus",i,"ttype"),r<n?(us_plusone&&$("body").toast({title:a,message:t,position:e}),us_sound_plusone&&(o?setTimeout(function(){aplay("one_plus")},1700):aplay("one_plus"))):n<r&&(a=trans_text_one_minus,us_plusone&&$("body").toast({title:a,message:t,position:e}),us_sound_plusone)&&(o?setTimeout(function(){aplay("one_minus")},1700):aplay("one_minus"))}bus_amount_update(t,n),setTimeout(turnoff_hl,750,i)}}function hashcheck(){var e=window.location.hash;if(e){var t=e.replace("#","");if("bus"==t)change_mode(0);else if("trolleybus"==t)change_mode(1);else if("tramway"==t)change_mode(2);else if("bus-taxi"==t)change_mode(3);else if("bus-intercity"==t)change_mode(5);else if("taxi"==t)change_mode(8);else for(var i in dbget("bus")){var n=dbget("bus",i,"slug");t!=n&&"bus-"+t!=n||(change_mode(dbget("bus",i,"ttype")),show_me_the_bus(i))}}}function metric_checkt(){ajax_metric("checkt",1)}function aplay(e){us_sound&&("sound_speed"==e&&sound_speed?sound_speed.play():sound_main.play(e))}function osd_show(e){e="<img src='/static/img/"+e+"' />";$(".osd_message").html(e),$(".osd_message").slideDown("fast"),setTimeout(function(){$(".osd_message").fadeOut("fast")},1200)}function osd_splash(){$(".osd_message").css("display","inline"),setTimeout(function(){$(".osd_message").css("display","none")},500)}function flash_message(e,t){$(".flash_message").html(e),$(".flash_message").slideDown("fast"),0<t&&setTimeout(function(){$(".flash_message").fadeOut("fast")},t)}function vibrate(){supportsVibrate&&navigator.vibrate([700,300,700])}function cookie_policy_agree(){Cookies.set("cookie_policy","1",{expires:3650,domain:".bustime.loc"}),$(".cookie_policy").addClass("hidden")}function map_data_go(){last_bdata_mode10&&router(last_bdata_mode10)}function show_map(e){("on"===us_dark_theme||"auto"===us_dark_theme&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(OSM_STYLE="https://demotiles.maplibre.org/style.json");var t,i='<i class="fa-globe icon"></i> ';"none"==$(".map").css("display")?($(".map").css("display","block"),$(".show_map_button").html(i+trans_text_hide_map),map||(0==e&&settings_set_silent("map_show",!0),myCollection=L.featureGroup(),busstop_collection=L.featureGroup(),passenger_collection=L.featureGroup(),jamcollection=L.featureGroup(),setInterval(passenger_removal,1e4),e=L.maplibreGL({style:OSM_STYLE,minZoom:1,maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),(map=L.map("lmap",{scrollWheelZoom:!0,fullscreenControl:!0,layers:[e,busstop_collection,myCollection,passenger_collection,jamcollection]})).on("load",function(){"function"==typeof onMapLoaded&&onMapLoaded(map)}),(t={})[trans_text_map]=e,(e={})[trans_text_transport]=myCollection,e[trans_text_stops]=busstop_collection,e[trans_text_passenger]=passenger_collection,e[trans_text_jam]=jamcollection,L.control.layers(t,e,{hideSingleBase:!0}).addTo(map),test_mode?(t=L.Control.extend({options:{position:"bottomleft"},onAdd:function(e){var t=L.DomUtil.create("div","my-custom-control");return e.on("mousemove",function(e){t.innerHTML="Lat: "+e.latlng.lat.toFixed(6)+" Lon: "+e.latlng.lng.toFixed(6)}),t}}),map.addControl(new t),map.on("click",function(e){test_latlng=e.latlng;let t=L.circleMarker(e.latlng);t.addTo(map),setTimeout(()=>{map.removeLayer(t)},3e3)})):test_latlng=null,map.on("viewreset",function(){map.invalidateSize(!1),map_data_go()}),map_draw_stops(),map_data_go())):($(".map").css("display","none"),$(".show_map_button").html(i+trans_text_show_map),settings_set_silent("map_show",!1))}function map_mousemove(e){console.log("map_mousemove",e,div)}function radar_init(e){(map=L.map("lmap",{scrollWheelZoom:!0,fullscreenControl:!0})).on("load",function(){"function"==typeof onMapLoaded&&onMapLoaded(map)}),myCollection=L.featureGroup().addTo(map),L.maplibreGL({style:OSM_STYLE,minZoom:1,maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map),map.setView([US_CITY_POINT_Y,US_CITY_POINT_X],15),L.Icon.Default.imagePath="/static/img/",console.log("radar inited")}function city_monitor(){(map=L.map("lmap",{scrollWheelZoom:!0,fullscreenControl:!0})).on("load",function(){"function"==typeof onMapLoaded&&onMapLoaded(map)}),myCollection=L.featureGroup().addTo(map),passenger_collection=L.featureGroup().addTo(map),setInterval(passenger_removal,1e4),L.maplibreGL({style:OSM_STYLE,minZoom:1,maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map),map.setView([US_CITY_POINT_Y,US_CITY_POINT_X],12),L.Icon.Default.imagePath="/static/img/",socket.emit("join","ru.bustime.city_monitor__"+us_city),socket.emit("join","ru.bustime.status__"+us_city),socket.emit("join","ru.bustime.updater__"+us_city),socket.emit("join","ru.bustime.status_server"),console.log("City status monitor")}function recalc_schedule(){for(var e=new Date,t=0,i=0;i<schedule[0].length;i++)if(schedule[0][i]>e){$(".schedule_0_1").html(schedule[0][i].toTimeString().substr(0,5)),$(".schedule_0_1").addClass("bhlight_black"),setTimeout(function(){$(".schedule_0_1").removeClass("bhlight_black")},400),t=1;break}for(0===t&&$(".schedule_0_1").html(""),i=t=0;i<schedule[1].length;i++)if(schedule[1][i]>e){$(".schedule_1_1").html(schedule[1][i].toTimeString().substr(0,5)),$(".schedule_1_1").addClass("bhlight_black"),setTimeout(function(){$(".schedule_1_1").removeClass("bhlight_black")},400),t=1;break}0===t&&$(".schedule_1_1").html("")}function update_schedule(e){$(".schedule").css("display","block");var t,i,n=new Date;if(schedule[0]=[],schedule[1]=[],e.s0&&0<e.s0.length)for($(".schedule_0").css("display","table"),t=0;t<e.s0.length;t++)i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.s0[t][0],e.s0[t][1]),0===t&&$(".schedule_0_0").html(i.toTimeString().substr(0,5)),n<i&&schedule[0].push(i),t===e.s0.length-1&&$(".schedule_0_2").html(i.toTimeString().substr(0,5));else $(".schedule_0").css("display","none");if(e.s1&&0<e.s1.length)for($(".schedule_1").css("display","table"),t=0;t<e.s1.length;t++)i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.s1[t][0],e.s1[t][1]),0===t&&$(".schedule_1_0").html(i.toTimeString().substr(0,5)),n<i&&schedule[1].push(i),t===e.s1.length-1&&$(".schedule_1_2").html(i.toTimeString().substr(0,5));else $(".schedule_1").css("display","none");recalc_schedule()}function passenger_removal(){var e,t=new Date;for(e in CITY_MONITOR_ONSCREEN)35e3<t-CITY_MONITOR_ONSCREEN[e][0]&&(passenger_collection.removeLayer(CITY_MONITOR_ONSCREEN[e][1]),delete CITY_MONITOR_ONSCREEN[e],$(".passengers_amount").html(passenger_collection.getLayers().length))}function update_passenger_monitor(e){var t,i,n,r,o,a,s,l;map&&(t=new Date,e.time,i=e.sess,n=e.lon,l=e.lat,e.accuracy,r=e.bus_name,e.nb_id,o=e.nb_name,e=e.os,a=L.divIcon({iconSize:[24,24],iconAnchor:[12,12],className:"",html:"<img src='/static/img/person_status.svg' onmouseover='this.src=\"/static/img/person_status_red.svg\"' onmouseout='this.src=\"/static/img/person_status.svg\"'>"}),1<Math.abs(US_CITY_POINT_X-n)||1<Math.abs(US_CITY_POINT_Y-l)||(i in CITY_MONITOR_ONSCREEN?((s=CITY_MONITOR_ONSCREEN[i][1]).setLatLng([l,n]),CITY_MONITOR_ONSCREEN[i][0]=t):(s=L.marker([l,n],{icon:a}).addTo(map),l="",o&&(l=l+o+"<br/>"),"web"==e?l+="<i class='fa-globe icon'></i>":"android"==e?l+="<i class='fa-android icon'></i>":"ios"==e&&(l+="<i class='fa-apple icon'></i>"),(l=r?l+" "+r:l)&&s.bindTooltip(l),passenger_collection.addLayer(s),CITY_MONITOR_ONSCREEN[i]=[t,s],$(".passengers_amount").html(passenger_collection.getLayers().length))))}function aplayfile(e){return!!us_sound&&(new Howl({src:["/static/js/snd/"+e+".mp3","/static/js/snd/"+e+".ogg"],volume:.7}).play(),!0)}function scroller(){var e=0==scroller_dir?0:(e=$(document).height())/5*scroller_dir;2!=++scroller_dir&&4!=scroller_dir||osd_splash("bustime-splash.png"),5==scroller_dir&&(scroller_dir=0),$("html, body").animate({scrollTop:e},1e3)}function mobile_test_cases(){console.log("Mobile_test_cases started.")}function startUserMedia(e){e=audio_context.createMediaStreamSource(e);recorder=new Recorder(e,{type:"audio/ogg"}),console.log("Recorder initialised.")}function low_bootstrap(){$.fn.dropdown.settings.message.noResults=trans_text_city_not_found,$(".ui.dropdown").dropdown(),city_monitor_mode?city_monitor():(holiday_flag&&console.log(holiday_flag),"new year"==holiday_flag&&(BUS_SIDE_IMG="/static/img/santa_2016.png")),ads_show&&blockAdblockUser(),7==us_mode&&setInterval(scroller,7e3),us_radio&&(us_premium||gps_send_enough)&&socket.emit("join","ru.bustime.radio__"+us_city),null==Cookies.get("cookie_policy")&&$(".cookie_policy").removeClass("hidden"),$(".edit_title_b").click(edit_title),$("input.search").attr("type","search"),hotkeys("n",function(e,t){for(var i=$(".search .menu > a.item"),n=!1,r=0;r<i.length;r++)if($(i[r]).hasClass("active")){n=r+1,r==i.length-1&&(n=0);break}window.location.href=i[n].href})}function edit_title(){var e;$(".edit_title").hasClass("hiddeni")?($(".logo_header").addClass("hiddeni"),$(".edit_title").removeClass("hiddeni"),$(".edit_title_b").addClass("hiddeni")):(e=$(".edit_title>input").val(),$.ajax({url:"/ajax/settings/",type:"GET",data:{setting:"name",value:e}}).done(function(e){$(".logo_header").html(e)}),$(".logo_header").removeClass("hiddeni"),$(".edit_title").addClass("hiddeni"),$(".edit_title_b").removeClass("hiddeni"))}function citynews_watched(e){console.log(e);$.ajax({url:"/ajax/citynews_watched/",type:"GET",data:{cn_id:e}})}function voice_queue_add(e){VOICE_QUEUE.push(e),voice_queue()}function voice_queue(){var e;0==VOICE_QUEUE.length||VOICE_NOW||(VOICE_NOW=1,e=VOICE_QUEUE.splice(0,1),new Howl({src:["/static/sounds/ol/"+e+".ogg","/static/sounds/ol/"+e+".mp3"],volume:.7,onend:function(){VOICE_NOW=0,voice_queue()},onloaderror:function(){console.log("onloaderror: "+e),VOICE_NOW=0,voice_queue()}}).play())}function animate_ads_shuttle(){animate_ads_shuttle_original=animate_ads_shuttle_original||$(".ads_shuttle").offset().left,xnew=animate_ads_shuttle_original+Math.pow(2,animate_ads_shuttle_step),animate_ads_shuttle_step++,xnew+50>screen.width&&(animate_ads_shuttle_step=0,xnew=animate_ads_shuttle_original),$(".ads_shuttle").offset({left:xnew}),setTimeout(function(){animate_ads_shuttle()},500)}function session_timer(){(request=$.ajax({url:"/ajax/timer/",type:"GET",dataType:"json",cache:!1})).done(function(e){0===us_premium&&110<=e.minutes&&location.reload(),1===us_pro_demo&&10<=e.pro_minutes&&location.reload(),us_pro_demo?(timer_minutes=e.pro_minutes,$(".ut_minutes").html(10-timer_minutes)):(timer_minutes=e.minutes,$(".ut_minutes").html(110-timer_minutes)),$(".ut_minutes").addClass("bhlight"),setTimeout(function(){$(".ut_minutes").removeClass("bhlight")},1e3)}),setTimeout(function(){session_timer()},6e4)}function radar_center(e){map&&(map.panTo([e.coords.latitude,e.coords.longitude]),null===radar_circle?radar_circle=L.circle([e.coords.latitude,e.coords.longitude],30).addTo(map):radar_circle.setLatLng([e.coords.latitude,e.coords.longitude]))}function radar_watch(e){var t=new Date;(1e4<t.getTime()-usePositionWatch_last.getTime()?(usePositionWatch_last=t,radar_position):radar_center)(e)}function radar_position(e){radar_center(e),$.ajax({url:"/ajax/radar/",type:"post",data:{lat:e.coords.latitude,lon:e.coords.longitude,accuracy:e.coords.accuracy},dataType:"json",cache:!1}).done(function(e){update_radar_mode(e)})}function update_radar_mode(e){if(map){var t,i,n,r,o;myCollection&&myCollection.clearLayers();for(var a=0;a<e.length;a++){if(!("point_x"in e[a]))return;n=(t=e[a]).bus_name,i=0===t.direction?(extra_c="color-1-2-bg","#74c0ec"):(extra_c="color-2-2-bg","#5ec57c"),r=t.gosnum&&us_premium?t.gosnum+"<br/>":"",o=L.divIcon({iconSize:[112,18],iconAnchor:[0,0],className:"MapIconDiv "+extra_c,html:"<b>"+n+":</b> "+t.bn}),(o=L.marker([t.point_y,t.point_x],{icon:o,zIndexOffset:100})).bindPopup("<b>"+n+"</b> "+r),n=[[t.point_y,t.point_x],[t.point_prev_y,t.point_prev_x]],r=L.polyline(n,{color:i,opacity:.8}),myCollection.addLayer(o),myCollection.addLayer(r)}}}function express_dial_show(){if($(".express_dial").addClass("express_dial_fixed"),$(".express_fixed").css("display","none"),$(".push_to_talk").removeClass("hidden"),!audio_context)try{window.AudioContext=window.AudioContext||window.webkitAudioContext,audio_context=new AudioContext,is_touch_device()?($(".push_to_talk").on({touchstart:push_to_talk_click_up_down}),$(".push_to_talk").on({touchend:push_to_talk_click_up_down})):$(".push_to_talk").mouseup(push_to_talk_click_up_down).mousedown(push_to_talk_click_up_down)}catch(e){alert("No web audio support in this browser!")}}function express_dial_hide(){$(".express_dial").removeClass("express_dial_fixed"),$(".express_fixed").css("display",""),$(".push_to_talk").addClass("hidden")}function change_mode(e){test_mode&&console.log(`change_mode(${e}), mode_selected=`+mode_selected),$(".mode_"+mode_selected).css("display","none"),$(".modec_"+mode_selected).removeClass("active"),mode_selected=e,$(".mode_"+mode_selected).css("display","flex"),$(".modec_"+mode_selected).addClass("active"),8!=e&&matrix_show&&($(".bus_hide").show(),"block"!=$(".bustable_head").css("display"))&&$("#main_bases_map").hide(),$(".pointing > .item > .sprite_svg").removeClass("active"),0==e?$(".item .svg-bus").addClass("active"):1==e?$(".item .svg-trolleybus").addClass("active"):2==e?$(".item .svg-tramway").addClass("active"):3==e?$(".item .svg-bus-taxi").addClass("active"):4==e?$(".item .svg-ferry").addClass("active"):5==e?$(".item .svg-2bus").addClass("active"):6==e?$(".item .svg-train").addClass("active"):7==e?$(".item .svg-metro").addClass("active"):8==e&&($(".item .sprite-search").addClass("active"),$(".bus_hide").hide(),loadTaxiSounds())}function gosnum_by_voice(){"webkitSpeechRecognition"in window?(gosnum_recognition_inited||gosnum_recognition_init(),gosnum_recognition.start()):alert(trans_text_recognition)}function express_dial_init(){var e="click";is_ios?e="touchend":is_chrome&&(e="mousedown"),"webkitSpeechRecognition"in window&&$(".calc-mic").removeClass("hidden"),$(".calc").on(e,function(e){var t=$(this).attr("class").split(/\s+/).pop().slice(5);if("go"==t)express_dial_go();else if("backspace"==t?express_dial.length&&(express_dial=express_dial.substring(0,express_dial.length-1)):"mic"==t?(recognition_inited||recognition_init(),recognition.start(),ajax_metric("recognition",1),express_dial_hide()):express_dial.length<1&&"0"==t||express_dial.length<3&&(express_dial+=t),$(".busnumber").removeClass("calc-influence"),express_dial){var i,n=[];for(i in dbgetsafe("bus")){var r=dbget("bus",i,null,!0);r.name.startsWith(express_dial)&&r.ttype==express_dial_type&&n.push(i)}if(1==n.length)express_dial_go();else{for(var o="",a=0;a<n.length;a++)o+=".bid_"+n[a]+", ";o=o.substring(0,o.length-2),$(o).addClass("calc-influence")}}$(".calc-go").html(express_dial+' <i class="fa fa-arrow-right"></i>'),$(".calc-mic").html(express_dial+' <i class="microphone fa fa-microphone"></i>')}),$(".calc-mode").on(e,function(e){var t=$(this).attr("class").split(/\s+/).pop();"calc-up"==t?($("html, body").scrollTop(0),express_dial_hide()):($(".calc-mode_selected").removeClass("calc-mode_selected"),$(this).addClass("calc-mode_selected"),$(".calc-mode .sprite").removeClass("active"),"calc-a"==t?(express_dial_type=0,$(".calc-mode .sprite-bus").addClass("active")):"calc-t"==t?(express_dial_type=1,$(".calc-mode .sprite-trolleybus").addClass("active")):"calc-tv"==t?(express_dial_type=2,$(".calc-mode .sprite-tramway").addClass("active")):"calc-bt"==t?(express_dial_type=3,$(".calc-mode .sprite-bus-taxi").addClass("active")):"calc-mg"==t&&(express_dial_type=5,$(".calc-mode .sprite-2bus").addClass("active")))})}function express_dial_go(){var e,t,i=$(".express_dial").hasClass("express_dial_fixed");if(setTimeout(function(){express_dial_hide()},200),express_dial){for(t in dbgetsafe("bus")){var n=dbget("bus",t,null,!0);n.name==express_dial&&n.ttype==express_dial_type&&(e=t)}e?(window.location.href="#"+dbget("bus",e,"slug"),express_dial="",$(".busnumber").removeClass("calc-influence"),show_me_the_bus(e),ajax_metric(i?"express_dial":"express_dial_mini",1)):(express_dial="",$(".calc-go").html('<i class="fa fa-arrow-right"></i>'),$(".calc-mic").html(' <i class="microphone fa fa-microphone"></i>'))}}function rating_fill(e,t){if((current_rating_data=e).error)return $(".rating_scores").html(0),$(".rating_votes").html(0),console.log(e.error),0;$(".rating").rating({initialRating:e.rating_wilson,maxRating:5}),$(".rating_wilson").html(e.rating_wilson.toFixed(1)),$(".votes_wilson").html(e.votes_wilson),$(".rate_positive").html('<i class="fa-thumbs-o-up icon"></i>'),$(".rate_negative").html('<i class="fa-thumbs-o-down icon"></i>'),e.myvote_ctime?(e.myvote_positive?($(".rate_positive").addClass("active"),$(".rate_positive").html('<i class="fa-thumbs-up icon"></i>')):$(".rate_negative").addClass("active").html('<i class="fa-thumbs-down icon"></i>'),$(".vote_comment").val(e.myvote_comment)):$(".vote_comment").val(""),e.name&&(i=$(".vehicle_info_name").html(),$(".vehicle_info_name").html(i+" ("+e.name+")"));var i=(i=$(".vehicle_feedback_ts").html()).split(" ")[0];return e.comments_count?$(".vehicle_feedback_ts").html(i+" ("+e.comments_count+")"):$(".vehicle_feedback_ts").html(i),1}function rating_click(e){reg_today?alert(trans_text_no_vote):$(this).hasClass("rate_positive")?(rate=1,$(".rate_positive").html('<i class="fa-thumbs-up icon"></i>'),$(".rate_negative").html('<i class="fa-thumbs-o-down icon"></i>')):$(this).hasClass("rate_negative")&&(rate=-1,$(".rate_negative").html('<i class="fa-thumbs-down icon"></i>'),$(".rate_positive").html('<i class="fa-thumbs-o-up icon"></i>'))}function vehicle_info_itsme(e){vehicle=globus[current_vehicle_info],$.ajax({url:"/ajax/settings/",type:"get",data:{setting:"gps_send_of",value:current_vehicle_info},dataType:"json",cache:!1}).done(function(e){}),vehicle_info_close(),flash_message(trans_text_gps_overwrite,3e3)}function vehicle_info_gosnum(e){var i=$("[name=gosnum]").val();$.ajax({url:"/ajax/gosnum/",type:"get",data:{uniqueid:current_vehicle_info,gosnum:i,city_id:us_city},dataType:"json",cache:!1}).done(function(e){var t;e.error?alert(e.error):(t=e.result.counter,e=e.result.gift,vehicle_info_close(),e?(flash_message(": +1  !"),location.reload()):flash_message(" "+t+": "+i,2500))})}function rating_submit(e){var t=$("[name=msg]").val();""===t&&0!==rate?alert(trans_text_m1):""!==t&&0===rate?alert(trans_text_m2):check_wise(t)?(vehicle=globus[current_vehicle_info],socket.emit("rpc_rating_set",{bus_id:vehicle.id,g:vehicle.g,comment:t,rate:rate},function(e){"no gosnum"==(e=e.rpc_rating_set).error?alert(trans_text_m4):e.error&&alert(e.error),rating_fill(e,1),e.error||flash_message(trans_text_m5,750)}),vehicle_info_close(),rate=0):alert(trans_text_m3)}function rating_statuser(e,t){t=t?4.9<=e?" ":4.5<=e?" ":3.5<=e?" ":2.5<=e?" ":1.5<=e?" ":1<=e?"  ":" ":5<=e?" ":4<=e?" ":3<=e?" ":2<=e?" ":1<=e?"  ":" ";return t}function rating_init(){$(".rate_negative").click(rating_click),$(".rate_positive").click(rating_click)}function word_to_number(e){var t=trans_text_word_to_number,i="";return e==t[0]?i=0:e==t[1]?i=1:e==t[2]?i=2:e==t[3]?i=3:e==t[4]?i=4:e==t[5]?i=5:e==t[6]?i=6:e==t[7]?i=7:e==t[8]?i=8:e==t[9]&&(i=9),i}function recognition_init(){recognition_inited=1,(recognition=new webkitSpeechRecognition).lang=language,recognition.onstart=function(e){flash_message(trans_text_recog,0)},recognition.onresult=function(e){for(var t=e.resultIndex;t<e.results.length;++t){e.results[t].isFinal?recognition_result+=e.results[t][0].transcript:e.results[t][0].transcript;var i,n,r=(recognition_result=recognition_result.toLowerCase()).split(" "),o=0,a=0,s=(r[0]==trans_ttype_name[0].toLowerCase()?a=0:r[0]==trans_ttype_name[1].toLowerCase()?a=1:r[0]==trans_ttype_name[2].toLowerCase()?a=2:r[0]==trans_ttype_name[3].toLowerCase()?a=3:r[0]==trans_ttype_name[5].toLowerCase()?a=5:o=1,r[r.length-1]),l=parseInt(s,10);if(o=(l=l||word_to_number(s))?o:1)flash_message(trans_text_recog_fail+": "+recognition_result,1500);else{for(n in dbgetsafe("bus")){var c=dbget("bus",n,null,!0);c.name==l&&c.ttype==a&&(i=n)}if(!i)return flash_message(r[0]+" "+l+" "+trans_text_not_found,2500),void(recognition_result="");flash_message(r[0]+" "+l,1e3),show_me_the_bus(i),ajax_metric("mic_dial",1)}recognition_result=""}}}function gosnum_recognition_init(){gosnum_recognition_inited=1,(gosnum_recognition=new webkitSpeechRecognition).lang="ru-RU",gosnum_recognition.onstart=function(e){flash_message(trans_text_recog_start,1600),$("[name=gosnum]").focus()},gosnum_recognition.onresult=function(e){for(var t,i=e.resultIndex;i<e.results.length;++i)e.results[i].isFinal?t=e.results[i][0].transcript:e.results[i][0].transcript,console.log(t),ajax_metric("gosnum_by_voice",1),$("[name=gosnum]").attr("type","text").val(t)}}function check_float64(){return"function"!=typeof Float64Array&&"object"!=typeof Float64Array?0:1}function update_counter_online_city_web(e){var t=$(".counter_online_ity").html();parseInt(t,10)<e?$(".counter_online_ity").addClass("bhlight_red"):$(".counter_online_ity").addClass("bhlight_grey"),$(".counter_online_ity").html(e),setTimeout(function(){$(".counter_online_ity").removeClass("bhlight_red").removeClass("bhlight_grey")},200)}function update_counter_online_city_app(e){var t=$(".counter_online").html();parseInt(t,10)<e?$(".counter_online").addClass("bhlight_red"):$(".counter_online").addClass("bhlight_grey"),$(".counter_online").html(e),setTimeout(function(){$(".counter_online").removeClass("bhlight_red").removeClass("bhlight_grey")},200)}function update_counter_today(e){counter_today<e?$(".counter_today").addClass("bhlight_red"):$(".counter_today").addClass("bhlight_grey"),$(".counter_today").html(e),counter_today=e,setTimeout(function(){$(".counter_today").removeClass("bhlight_red").removeClass("bhlight_grey")},800)}function update_counters_by_type(e){var t,i,n,r,o,a={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0};if(0===Object.keys(current_inf_for_counters).length)for(var s in dbgetsafe("bus")){var l=$(".bid_"+s).find(".busamount").html();l&&(l=l.split(" / "),i=parseInt(l[0],10),l=parseInt(l[1],10),t=dbget("bus",s,"ttype"),current_inf_for_counters[s]={ttype:t,d0:i,d1:l,all_d:i=i+l},a[t]+=i)}else{var c,u,d=[];for(s in e)n=parseInt(e[s],10),r=s.substring(s.length-2,s.length),o=s.replace("_d0","").replace("_d1",""),o=parseInt(o,10),d.includes(current_inf_for_counters[o].ttype)||d.push(current_inf_for_counters[o].ttype),n!=current_inf_for_counters[o][r]&&(current_inf_for_counters[o][r]=n,current_inf_for_counters[o].all_d=current_inf_for_counters[o].d0+current_inf_for_counters[o].d1);for(c in current_inf_for_counters)a[current_inf_for_counters[c].ttype]+=current_inf_for_counters[c].all_d;for(var h=0;h<d.length;h++)u=".counters_by_type__"+d[h],$(u).removeClass("orange").addClass("blue"),$(u).html(a[d[h]]);setTimeout(function(){$("div[class *= 'counters_by_type__']").removeClass("blue").addClass("orange")},800)}}function update_status_counter(t){var r,o;for(r in t)"stat_replication"===r?t[r].forEach((e,n)=>{e.forEach((e,t)=>{let i="";switch(t){case 0:i=r+"_ip"+n,o=$("."+i).html();break;case 1:i=r+"_status"+n,o=$("."+i).html();break;case 2:i=r+"_write_lag"+n,o=$("."+i).html(),o=parseFloat(o);break;case 3:i=r+"_flush_lag"+n,o=$("."+i).html(),o=parseFloat(o);break;case 4:i=r+"_replay_lag"+n,o=$("."+i).html(),o=parseFloat(o);break;default:return}e!=o&&$("."+i).html(e).parent().removeClass("grey").addClass("red")})}):"redis"===r?Object.keys(t[r]).forEach(function(e){$(".redis_"+e).html(t[r][e]).parent().removeClass("grey").addClass("red")}):(o=$("."+r).html(),o=parseInt(o,10),t[r]!=o&&$("."+r).html(t[r]).parent().removeClass("grey").addClass("red"));setTimeout(function(){$(".statistic").removeClass("red").addClass("grey")},600)}function getCurrentTime(){var e=new Date;let t=e.getHours(),i=e.getMinutes(),n=e.getSeconds();return i<10&&(i="0"+i),t<10&&(t="0"+t),n<10&&(n="0"+n),`${t}:${i}:`+n}function dictToString(e){return Object.entries(e).map(([e,t])=>e+"="+t).join(", ")}function update_status_log(e){var t;city_monitor_mode&&(e=getCurrentTime()+": "+dictToString(e),(t=$(".log").val().split("\n")).push(e),100<t.length&&t.slice(10),$(".log").val(t.join("\n")),(e=$(".log")).length)&&e.scrollTop(e[0].scrollHeight-e.height())}function gps_send_signal(e){let t=$("[vehicle_id="+e+"]").find("i.fa-upload").parent(),i=(t.addClass("active_now"),$("[vehicle_id="+e+"]").find("img")),n=$("[map_vehicle_id="+e+"]");i.addClass("happy_scale"),n.addClass("happy_scale"),setTimeout(function(){t.removeClass("active_now")},500),setTimeout(function(){i.removeClass("happy_scale"),n.removeClass("happy_scale")},1e3)}function update_reschedule(e){var t;(us_premium||gps_send_enough)&&($(".schedule").css("display","block"),$(".schedule_0").css("display","table"),$(".schedule_1").css("display","table"),t=e[0],e=e[1],0<t.length?($(".reschedule_0_1").html(t[0]+", "+t[1]),$(".reschedule_0_1").addClass("bhlight"),setTimeout(function(){$(".reschedule_0_1").removeClass("bhlight")},400)):$(".reschedule_0_1").html(""),0<e.length?($(".reschedule_1_1").html(e[0]+", "+e[1]),$(".reschedule_1_1").addClass("bhlight"),setTimeout(function(){$(".reschedule_1_1").removeClass("bhlight")},400)):$(".reschedule_1_1").html(""))}function route_lines_calc(e){e=BUS_ID||-1,$.ajax({type:"post",url:"/ajax/route_lines_calc/",data:{bus_id:e,city_id:us_city},dataType:"json",cache:!1,success:function(e){e.result?busstop_collection&&map_draw_stops():console.error(e.error||" ")},error:function(e,t,i){console.error(i,t)}})}function route_edit(){window.location.href="/"+us_city_slug+"/"+BUS_ID+"/edit/"}function route_detector(){window.location.href="/"+us_city_slug+"/"+get_bslug(BUS_ID)+"/detector/"}function route_monitor(){window.location.href="/"+us_city_slug+"/"+get_bslug(BUS_ID)+"/monitor/"}function route_journal(){window.location.href="/"+us_city_slug+"/transport/"+today_date+"/?bus_id="+BUS_ID}function route_info(){window.location.href="/wiki/bustime/bus/"+BUS_ID+"/change/"}function radio(e){console.log("radio event"),sound_radio_in.play();var t="/static/sounds/radio/"+e.filename;new Howl({src:[t+".ogg",t+".mp4"],volume:.8,onend:function(){sound_radio_out.play()},onloaderror:function(){console.log("onloaderror: "+e.filename)}}).play()}function blockAdblockUser(){}function ny_preload(){game.load.spritesheet("snowflakes","/static/img/snowflakes.png",17,17),game.load.spritesheet("snowflakes_large","/static/img/snowflakes_large.png",64,64)}var ny_max=0,front_emitter,mid_emitter,back_emitter,update_interval=240,ny_i=0,system_deps;function ny_create(){(back_emitter=game.add.emitter(game.world.centerX,-32,300)).makeParticles("snowflakes",[0,1,2,3,4,5]),back_emitter.maxParticleScale=.6,back_emitter.minParticleScale=.2,back_emitter.setYSpeed(20,100),back_emitter.gravity=0,back_emitter.width=1.5*game.world.width,back_emitter.minRotation=0,back_emitter.maxRotation=40,(mid_emitter=game.add.emitter(game.world.centerX,-32,120)).makeParticles("snowflakes",[0,1,2,3,4,5]),mid_emitter.maxParticleScale=1.2,mid_emitter.minParticleScale=.8,mid_emitter.setYSpeed(50,150),mid_emitter.gravity=0,mid_emitter.width=1.5*game.world.width,mid_emitter.minRotation=0,mid_emitter.maxRotation=40,(front_emitter=game.add.emitter(game.world.centerX,-32,25)).makeParticles("snowflakes_large",[0,1,2,3,4,5]),front_emitter.maxParticleScale=.75,front_emitter.minParticleScale=.25,front_emitter.setYSpeed(100,200),front_emitter.gravity=0,front_emitter.width=1.5*game.world.width,front_emitter.minRotation=0,front_emitter.maxRotation=40,changeWindDirection(),back_emitter.start(!1,14e3,20),mid_emitter.start(!1,12e3,40),front_emitter.start(!1,6e3,1e3)}function update(){++ny_i===update_interval&&(changeWindDirection(),update_interval=60*Math.floor(20*Math.random()),ny_i=0)}function changeWindDirection(){var e=Math.floor((ny_max+200)/4),e=Math.floor(100*Math.random())-e;setXSpeed(back_emitter,ny_max=(ny_max=200<(ny_max+=e)?150:ny_max)<-200?-150:ny_max),setXSpeed(mid_emitter,ny_max),setXSpeed(front_emitter,ny_max)}function setXSpeed(e,t){e.setXSpeed(t-20,t),e.forEachAlive(setParticleXSpeed,this,t)}function setParticleXSpeed(e,t){e.body.velocity.x=t-Math.floor(30*Math.random())}function set_order(){(taxiuser.gps_on?order_delete:order_create)()}function order_create(){test_mode&&console.log("order_create"),$("#taxiuser_passenger_start_stop").prop("disabled",!0),$("#taxiuser_driver_start_stop").hide(),$(".driver.item").children(".ui.button").addClass("disabled"),$("#taxiuser_driver_start_stop2").prop("disabled",!0);var e={passengers:$("#passengers").val(),price:$("#price").val(),note:$("#note").val(),taxi_path:window.taxi_path?JSON.stringify(window.taxi_path):JSON.stringify("{}")};$.ajax({url:"/carpool/api/order/create/",method:"POST",headers:{"X-CSRFToken":Cookies.get("csrftoken")},data:e}).done(function(e){test_mode&&console.log("order_create.done, data=",e),e.error?($("#modal_dialog p").html(e.error),$("#modal_dialog").modal()):(taxiuser=Object.assign(e.result.passenger),Cookies.set("taxi_user",JSON.stringify(taxiuser),{path:"/",sameSite:"lax",expires:1/0}),start_location_service(),$("#taxiuser_passenger_start_stop").html(" "),$("#taxiuser_passenger_start_stop").css("background-color","#EF3905"),$("#taxiuser_passenger_start_stop").css("color","white"),$("#pass_message1").hide(),$("#taxi_order_params .ui.input").addClass("disabled"),$("#div_wait_iffers").show(),$("#header_offers").show()),$("#taxiuser_passenger_start_stop").prop("disabled",!1)}).fail(function(e,t,i){console.log("order_create, error:",i),$("#taxiuser_passenger_start_stop").prop("disabled",!1)})}function order_delete(){test_mode&&console.log("order_delete",taxiuser.order_id),$("#taxiuser_passenger_start_stop").prop("disabled",!0),$("#taxiuser_driver_start_stop").show(),$(".driver.item").children(".ui.button").removeClass("disabled"),$("#taxiuser_driver_start_stop2").prop("disabled",!1);var e={order_id:taxiuser.order_id||-1};$.ajax({url:"/carpool/api/order/delete/",method:"POST",headers:{"X-CSRFToken":Cookies.get("csrftoken")},data:e}).done(function(e){e.error?($("#modal_dialog p").html(e.error),$("#modal_dialog").modal()):(taxiuser=taxiuser=Object.assign(e.result.passenger),Cookies.set("taxi_user",JSON.stringify(taxiuser),{path:"/",sameSite:"lax",expires:1/0}),start_location_service(),$("#taxiuser_passenger_start_stop").html(""),$("#taxiuser_passenger_start_stop").css("background-color","#FFDF32"),$("#taxiuser_passenger_start_stop").css("color","black"),taxi_path||$("#pass_message1").show(),$("#taxi_order_params .ui.input").removeClass("disabled"),$("#div_wait_iffers").hide(),$("#header_offers").hide(),$("#offers").empty(),$("#taxiuser_passenger_start_stop").prop("disabled",!1))}).fail(function(e,t,i){console.log("order_delete, error:",i),$("#taxiuser_passenger_start_stop").prop("disabled",!1)})}function set_taxi_user(e){$("#taxiuser_driver_start_stop").prop("disabled",!0);var t=Cookies.get("csrftoken"),e={who:e,active:taxiuser.gps_on?0:1};$.ajax({method:"POST",headers:{"X-CSRFToken":t},url:"/carpool/api/setuser/",data:e}).done(function(e){e.error?($("#modal_dialog p").html(e.error),$("#modal_dialog").modal()):(taxiuser=Object.assign(e.result),Cookies.set("taxi_user",JSON.stringify(taxiuser),{path:"/",sameSite:"lax",expires:1/0}),$("#taxiuser_driver_start_stop").prop("disabled",!1),start_location_service(),taxiuser.car_count&&($("#taxiuser_driver_start_stop").html(taxiuser.gps_on?" ":" "),window.location.hash="",taxiuser.gps_on?($("#taxiuser_driver_start_stop").css("background-color","#EF3905"),$("#pass_message1").hide(),"/carpool/votes/"!=window.location.pathname&&(window.location.href="/carpool/votes/")):"/carpool/votes/"==window.location.pathname?window.location.href="/#carpool":$("#pass_message1").show()))}).fail(function(e,t,i){$("#taxiuser_driver_start_stop").prop("disabled",!1),console.log("set_taxi_user error:",i)})}function taxi_event(t){var i=JSON.parse(t.data);switch(t.event){case"car_add":t.html&&0==$("#taxi_grid").find("#taxi_"+i[0].id).length&&$("#taxi_grid").append(t.html);break;case"car_del":i&&i.length&&i.forEach(function(e){e&&(e=$("#taxi_grid").children("#taxi_"+e.id))&&$(e).remove()});break;case"passenger":taxiuser.driver?i.taxi_order&&"undefined"!=typeof order_map_update&&order_map_update(i.taxi_order,null,[i.lat,i.lon]):taxiuser.user==i.user_id&&(taxi_map_set_marker(taxi_maps[i.user_id],"passenger_marker",i.lat,i.lon,"icon_p_24.png"),taxi_fresh_map(i.user_id,i.lat,i.lon));break;case"cars":if($(".counters_by_type__8").html(i.length),$("#counters_by_type__8").html(i.length),taxiuser.driver){if("undefined"!=typeof order_map_update)for(let e=0;e<i.length;e++)if(taxiuser.user==i[e].taxi.user){order_map_update(null,[i[e].y,i[e].x],null);break}}else if(taxi_maps[taxiuser.user]){for(let e=0;e<i.length;e++)if(taxi_maps[taxiuser.user].car_id==i[e].taxi.car.id){taxi_map_set_marker(taxi_maps[taxiuser.user],"car_marker",i[e].y,i[e].x,"icon_d_24.png","blinking"),taxi_fresh_map(taxiuser.user,i[e].y,i[e].x),taxi_fresh_pass_car_distance(i[e].y,i[e].x);break}}else{var e=$("#taxi_grid");to_send&&to_send.lat&&e&&e.is(":visible")&&i.forEach(function(e){var t;e&&e.y&&(t=$(`#taxi_${e.taxi.id}_distance`))&&(e=distance(e.y,e.x,to_send.lat,to_send.lon),t.html("~ "+(e.distance/1e3).toFixed(1)+" ."))})}break;case"order_add":console.log("taxi_event order_add",i),taxiuser.driver&&taxiuser.gps_on&&(t.html&&($("#order_grid").append(t.html),taxiPlay("order_new")),to_send)&&to_send.lat&&to_send.lon&&"undefined"!=typeof near_distance&&i.forEach(function(e){e&&e.wf_point&&(e=Point2XY(e.wf_point))&&distance(to_send.lat,to_send.lon,e.lat,e.lon).distance<=near_distance&&(e=parseInt($("#passengers_near").html()||"0"),$("#passengers_near").html(1+e))});break;case"order_del":console.log("taxi_event order_del",i),i&&i.length&&(i.forEach(function(e){e&&(order_remove_from_grid(e),to_send)&&to_send.lat&&to_send.lon&&"undefined"!=typeof near_distance&&e.wf_point&&(e=Point2XY(e.wf_point))&&distance(to_send.lat,to_send.lon,e.lat,e.lon).distance<=near_distance&&0<(e=parseInt($("#passengers_near").html()||"0"))&&$("#passengers_near").html(e-1)}),taxiuser.driver)&&taxiuser.gps_on&&taxiPlay("order_del");break;case"order_start":console.log("taxi_event order_start",i),i.taxist&&(i.taxist.user==taxiuser.user?(taxiuser.order_id=i.id,"undefined"!=taxi_driver_timeouts&&i.id in taxi_driver_timeouts&&(clearTimeout(taxi_driver_timeouts[i.id]),delete taxi_driver_timeouts[i.id]),e=$("#order_"+i.id),$(e).remove(),$("#order_grid").prepend($(e)),$("#offer_enabled_"+i.id).hide(),$("#btn_passenger_sel_"+i.id).show(),$(`#order_${i.id}_item`).attr("style","border: 2px solid #FFDF32 !important"),taxiPlay("offer_accept"),order_map_init):order_remove_from_grid)(i);break;case"order_close":console.log("taxi_event order_close",i),i.taxist&&i.taxist.user==taxiuser.user&&0<i.trip_status&&6==i.trip_status&&"undefined"!=typeof order_trip_cancel&&order_trip_cancel("passenger",i.id);break;case"trip_start":console.log("taxi_event trip_start",i),i.taxist&&i.taxist.user==taxiuser.user||i.passenger&&(i.passenger.user,taxiuser.user);break;case"chat":console.log("taxi_event chat",i),taxiuser.user==i.to&&"undefined"!=typeof taxi_receive_message&&taxi_receive_message(i);break;case"offer_add":console.log("taxi_event offer_add",i),$("#div_wait_iffers").hide(),i.forEach(e=>{e.order.passenger.user==taxiuser.user&&t.html&&($("#offers").append(t.html),taxiPlay("offer_new"))});break;case"offer_del":console.log("taxi_event offer_del",i),i.length&&(i.forEach(e=>{var t;e&&e.order.passenger.user==taxiuser.user&&e.taxi&&((t=$("#offers").children("#taxi_"+e.taxi.user))&&$(t).remove(),"function"==typeof order_trip_cancel)&&(console.log("   "),order_trip_cancel("driver",e.order.id))}),0==$("#offers").children().length)&&$("#div_wait_iffers").show()}}function order_remove_from_grid(e){var t=$("#order_grid").children("#order_"+e.id);t&&($(t).remove(),Cookies.remove("order_tout_"+e.id,{path:"/taxi"}))}function take_offer(e){var t;return console.log("take_offer",e,taxiuser),taxiuser.order_id?e?(t=Cookies.get("csrftoken"),e={taxi_id:e,order_id:taxiuser.order_id},void $.ajax({method:"POST",headers:{"X-CSRFToken":t},url:"/carpool/api/order/start/",data:e}).done(function(e){e.error?($("#modal_dialog p").html(e.error),$("#modal_dialog").modal()):(console.log("take_offer done",e.result.order),e.result.html&&($("#search_result").html(e.result.html),pass_map_init(e.result.order.id,e.result.order.car.id)))}).fail(function(e,t,i){console.log("take_offer error:",i)})):($("#modal_dialog p").html("   "),$("#modal_dialog").modal(),!1):($("#modal_dialog p").html(" "),$("#modal_dialog").modal(),!1)}function taxi_fresh_pass_car_distance(e,t){var i,n;taxiuser.order_id&&(e=(e=distance(parseFloat(to_send.lat),parseFloat(to_send.lon),parseFloat(e),parseFloat(t))).distance/1e3,(t=$(`#order_${taxiuser.order_id}_distance`))&&$(t).html(e.toFixed(1)+" ."),t=$(`#order_${taxiuser.order_id}_time`))&&(n=(e=Math.ceil(e/40*1.3*3600))-(3600*(i=Math.floor(e/3600))+60*(e=Math.floor(e%3600/60))),e=(e<10?"0":"")+e,n=((i=(i<10?"0":"")+i)<10?"0":"")+n,0<parseInt(i)?$(t).html(i+`:${e}:`+n):$(t).html(e+":"+n))}function taxi_map_set_marker(e,t,i,n,r,o){e&&t&&i&&n&&(e[t]?e[t].setLatLng([parseFloat(i),parseFloat(n)]):(e[t]=L.marker([parseFloat(i),parseFloat(n)]),r&&e[t].setIcon(L.icon({iconUrl:"/static/taxi/img/"+r,iconSize:[24,24],iconAnchor:[12,12],className:o})),e[t].addTo(e.vlayer)))}function taxi_fresh_map(e,t,i){e in taxi_maps&&(taxi_maps[e].car_marker&&taxi_maps[e].passenger_marker?map_boundsto(taxi_maps[e].map,taxi_maps[e].vlayer):t&&i&&taxi_maps[e].map.panTo([parseFloat(t),parseFloat(i)]))}function pass_map_init(e,t){$(`order_${e}_map`)?(console.log("pass_map_init, add map",e,t),(t={passenger_id:taxiuser.user,passenger_marker:null,car_id:t,car_marker:null,vlayer:L.featureGroup(),olayer:L.maplibreGL({style:OSM_STYLE,minZoom:1,maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'})}).map=L.map(`order_${e}_map`,{layers:[t.olayer,t.vlayer],center:[parseFloat(window.taxi_path.wf.point[1]),parseFloat(window.taxi_path.wf.point[0])],zoom:13}),taxi_maps[taxiuser.user]=t,taxi_map_set_marker(taxi_maps[taxiuser.user],"passenger_marker",window.taxi_path.wf.point[1],window.taxi_path.wf.point[0],"icon_p_24.png"),taxi_fresh_map(taxiuser.user,window.taxi_path.wf.point[1],window.taxi_path.wf.point[0])):(console.log("pass_map_init, delete map",e),taxiuser.user in taxi_maps&&delete taxi_maps[taxiuser.user])}function taxi_send_message_to_user(e,t,i){console.log("taxi_send_message_to_user",e,t,i);e={from:taxiuser.user,to:e,msg:t,order_id:i||0};$.ajax({method:"POST",headers:{"X-CSRFToken":Cookies.get("csrftoken")},url:"/carpool/api/message/",data:e}).done(function(e){e.error?($("#modal_dialog p").html(e.error),$("#modal_dialog").modal()):console.log("taxi_send_message_to_user done",e.result)}).fail(function(e,t,i){console.log("taxi_send_message_to_user error:",i)})}function taxi_star_click(t,e){console.log("taxi_star_click",t,e);var i=$(`#order_status_3_${e} .ui.rating i`);for(let e=i.length-1;0<=e;e--){var n=i[e];$(n).css("color",e<=t?"#FFDF32":"#FFF")}$(`#order_status_3_${e} #order_rating_number`).html(t+1)}function map_del_marker(e){return e.closeTooltip(),e.unbindTooltip(),e.closePopup(),e.unbindPopup(),e.removeFrom(map_taxi),e=null}function map_panto(e,t){map_taxi&&e&&(map_taxi.panTo(e),t)&&map_taxi.setZoom(t)}function map_flyto(e,t){map_taxi&&e&&(map_taxi.flyTo(e),t)&&map_taxi.setZoom(t)}function map_boundsto(e,t){e&&t&&e.flyToBounds(t.getBounds())}function loadTaxiSounds(){taxi_sound||setTimeout(function(){taxi_sound="undefined"!=Howl?{order_new:new Howl({src:"/static/taxi/sound/bell-sound.mp3",preload:!0}),order_del:new Howl({src:"/static/taxi/sound/10n888picy3g354534.mp3",preload:!0}),offer_new:new Howl({src:"/static/taxi/sound/bell-sound.mp3",preload:!0}),offer_del:new Howl({src:"/static/taxi/sound/10n888picy3g354534.mp3",preload:!0}),offer_accept:new Howl({src:"/static/taxi/sound/multimedia-notify-37.mp3",preload:!0}),hutzpa:new Howl({src:"/static/taxi/sound/50y888picjes.mp3",preload:!0}),"5min":new Howl({src:"/static/taxi/sound/carhornahooga_bw_62154.mp3",preload:!0}),pora:new Howl({src:"/static/taxi/sound/ahooga-horn.mp3",preload:!0})}:null},500)}function taxiPlay(e){us_sound&&"undefined"!=Howl&&taxi_sound&&taxi_sound[e]&&taxi_sound[e].play()}function Point2XY(e){let t,i=null;try{3==(t=e.match(/[0-9.]+/gi)).length&&(i={lon:parseFloat(t[1]),lat:parseFloat(t[2])})}catch(e){debug("Point2XY:",e)}return i}function debug(...e){test_mode&&console.log("DEBUG",e)}function process_queue(){if(0<message_queue.length){for(var e=current_item;e==current_item;)current_item=message_queue.shift();$(".inf_about_data").html(current_item);setTimeout(function(){current_item=null,0<message_queue.length&&process_queue()},1e3)}}!function(e){if("function"==typeof define&&define.amd)define(["leaflet"],e);else if("undefined"!=typeof module)module.exports=e(require("leaflet"));else{if(void 0===window.L)throw new Error("Leaflet must be loaded first");e(window.L)}}(function(i){i.Control.Fullscreen=i.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(e){var t=i.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=i.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",t),this.link.href="#",this._map=e,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),i.DomEvent.on(this.link,"click",this._click,this),t},_click:function(e){i.DomEvent.stopPropagation(e),i.DomEvent.preventDefault(e),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),i.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(e){var t=this.getContainer();this.isFullscreen()?e&&e.pseudoFullscreen?this._disablePseudoFullscreen(t):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(t):e&&e.pseudoFullscreen?this._enablePseudoFullscreen(t):t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.msRequestFullscreen?t.msRequestFullscreen():this._enablePseudoFullscreen(t)},_enablePseudoFullscreen:function(e){i.DomUtil.addClass(e,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(e){i.DomUtil.removeClass(e,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(e){this._isFullscreen=e;var t=this.getContainer();e?i.DomUtil.addClass(t,"leaflet-fullscreen-on"):i.DomUtil.removeClass(t,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(e){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;t!==this.getContainer()||this._isFullscreen?t!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),i.Map.mergeOptions({fullscreenControl:!1}),i.Map.addInitHook(function(){var e,t;this.options.fullscreenControl&&(this.fullscreenControl=new i.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?e="fullscreenchange":"onmozfullscreenchange"in document?e="mozfullscreenchange":"onwebkitfullscreenchange"in document?e="webkitfullscreenchange":"onmsfullscreenchange"in document&&(e="MSFullscreenChange"),e&&(t=i.bind(this._onFullscreenChange,this),this.whenReady(function(){i.DomEvent.on(document,e,t)}),this.on("unload",function(){i.DomEvent.off(document,e,t)}))}),i.control.fullscreen=function(e){return new i.Control.Fullscreen(e)}}),test_mode?(system_deps=["jquery","howler","leaflet","justgage","jscolor","socket_io","maplibre-gl","recorder","hotkeys","js_cookie","vue","tablesort","semantic","common"],is_main_page&&system_deps.push("bustime-maplibre"),System.register(system_deps,function(e,t){t&&t.id;return{execute:function(){System.import("jquery-ui").then(function(){System.import("jquery.modal").then(function(){System.import("leaflet-maplibre-gl").then(function(){System.import("bustime-main").then(function(){(is_main_page?document_ready:page_ready)()})})})})}}})):(system_deps=["bundle_built"],"undefined"!=typeof us_sound&&us_sound&&system_deps.push("howler"),is_main_page&&system_deps.push("bustime-maplibre"),System.register(system_deps,function(e,t){t&&t.id;return{execute:function(){(is_main_page?document_ready:page_ready)()}}}));